{"version":3,"mappings":"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","names":["UsersComponent","BaseClass","constructor","_service","super","this","show_options","extensions","extensionsForItem","active_item","name","updateTabList","details","tab_list","id","icon","class","count","e","metadata","concat","ngOnInit","subscription","item","subscribe","i0","selectors","UserAboutComponent","$localize","UserHistoryComponent","loadUserLogs","offset","ROUTES","path","component","children","UserMetadataComponent","ExtensionOutletComponent","redirectTo","AppUsersModule","CommonModule","FormsModule","ReactiveFormsModule","RouterModule","SharedContentModule"],"sources":["./apps/backoffice/src/app/users/users.component.ts","./apps/backoffice/src/app/users/user-about.component.ts","./apps/backoffice/src/app/users/user-history.component.ts","./apps/backoffice/src/app/users/user-metadata.component.ts","./apps/backoffice/src/app/users/users.routes.ts","./apps/backoffice/src/app/users/users.module.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { PlaceUser } from '@placeos/ts-client';\n\nimport { ActiveItemService } from '../common/item.service';\nimport { BaseClass } from '../common/base.class';\nimport { extensionsForItem } from '../common/api';\nimport { HashMap } from '@placeos/ts-client/dist/esm/utilities/types';\n\n@Component({\n    selector: 'app-users',\n    template: `\n        <div\n            class=\"flex-1 flex-col sm:flex-row flex h-full w-full relative\"\n        >\n            <sidebar\n                heading=\"Users\"\n                name=\"users\"\n                class=\"absolute top-0 left-0 h-12 w-full sm:h-full sm:static\"\n            ></sidebar>\n            <item-display\n                name=\"user\"\n                route=\"users\"\n                [tabs]=\"tab_list\"\n                class=\"flex-1 relative mt-12 sm:mt-0 w-full sm:w-1/2\"\n            ></item-display>\n        </div>\n    `,\n    styles: [\n        `\n            sidebar {\n                transition: height 300ms;\n            }\n            @media screen and (min-width: 640px) {\n                sidebar {\n                    width: 20em !important;\n                }\n            }\n        `,\n    ],\n})\nexport class UsersComponent extends BaseClass {\n    public readonly name = 'users';\n\n    public readonly show_options = this._service.show_options;\n\n    public tab_list = [];\n\n    public get extensions() {\n        return extensionsForItem(this._service.active_item, this.name);\n    }\n\n    public updateTabList(details?: HashMap) {\n        this.tab_list = [\n            { id: 'about', name: 'About', icon: { class: 'backoffice-info-with-circle' } },\n            {\n                id: 'metadata',\n                name: 'Metadata',\n                count: details?.metadata,\n                icon: { class: 'backoffice-gist' },\n            },\n            { id: 'history', name: 'History', icon: { class: 'backoffice-list' } }\n        ].concat(this.extensions);\n    }\n\n    constructor(protected _service: ActiveItemService) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription('item', this._service.item.subscribe(() => this.updateTabList()));\n        this.updateTabList();\n    }\n}\n","import { Component } from '@angular/core';\nimport { PlaceUser } from '@placeos/ts-client';\n\nimport { ActiveItemService } from 'apps/backoffice/src/app/common/item.service';\n\n@Component({\n    selector: 'user-about',\n    template: `\n        <section class=\"mb-4 space-y-2\">\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.created_at\">\n                <label i18n=\"@@userCreatedAtLabel\">Email:</label>\n                <div class=\"value\">\n                    <a [href]=\"'mailto:' + item?.email\">{{ item?.email }}</a>\n                </div>\n            </div>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.created_at\">\n                <label i18n=\"@@userCreatedAtLabel\">Created:</label>\n                <div class=\"value\">\n                    {{ item?.created_at * 1000 | dateFrom }}\n                </div>\n            </div>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.updated_at\">\n                <label i18n=\"@userUpdatedAtLabel\">Updated:</label>\n                <div class=\"value\">\n                    {{ item?.updated_at * 1000 | dateFrom }}\n                </div>\n            </div>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.authority_id\">\n                <label i18n=\"@userUpdatedAtLabel\">Authority ID:</label>\n                <div class=\"value mono\">\n                    {{ item?.authority_id }}\n                </div>\n            </div>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.groups\">\n                <label class=\"my-1\" for=\"groups\" i18n=\"@@userGroupsLabel\"\n                    >User Groups:</label\n                >\n                <div\n                    class=\"value\"\n                    *ngIf=\"item.groups?.length; else empty_group_state\"\n                >\n                    <mat-chip-list name=\"groups\">\n                        <mat-chip *ngFor=\"let group of item.groups\">{{\n                            group\n                        }}</mat-chip>\n                    </mat-chip-list>\n                </div>\n            </div>\n        </section>\n        <section>\n            <div role=\"table\">\n                <div table-head>\n                    <div class=\"w-40 p-2\" i18n=\"@@techSupportRole\">\n                        User Role\n                    </div>\n                    <div class=\"flex-1 p-2\"></div>\n                </div>\n                <div table-body>\n                    <div table-row>\n                        <div class=\"w-40 p-2\" i18n=\"@@techSupportRole\">\n                            Tech Support\n                        </div>\n                        <div class=\"flex-1 p-2\">\n                            {{ item?.support === true }}\n                        </div>\n                    </div>\n                    <div table-row>\n                        <div class=\"w-40 p-2\" i18n=\"@@systemAdminRole\">\n                            System Admin\n                        </div>\n                        <div class=\"flex-1 p-2\">\n                            {{ item?.sys_admin === true }}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <ng-template #empty_group_state>\n            <div class=\"value\">No Access Groups</div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                padding: 1rem;\n                width: 100%;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class UserAboutComponent {\n    public get item(): PlaceUser {\n        return this._service.active_item as any;\n    }\n\n    constructor(private _service: ActiveItemService) {}\n}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { PlaceUser } from '@placeos/ts-client';\n\nimport { BaseClass } from 'apps/backoffice/src/app/common/base.class';\nimport { ActiveItemService } from 'apps/backoffice/src/app/common/item.service';\n\n@Component({\n    selector: 'user-history',\n    template: `\n        <div role=\"table\" *ngIf=\"logs?.length; else empty_state\">\n            <div table-head>\n                <div class=\"w-1/3\" i18n=\"@@logEventStart\">Session Start</div>\n                <div class=\"w-1/3\" i18n=\"@@logEventEnd\">Ended</div>\n                <div class=\"w-1/3\" i18n=\"@@logEventAction\">\n                    Systems Accessed\n                </div>\n            </div>\n            <div table-body>\n                <div table-row *ngFor=\"let item of logs\">\n                    <div class=\"w-1/3\">\n                        {{ item.start | date: 'MMM d, y, h:mm a' }}\n                    </div>\n                    <div class=\"w-1/3\">\n                        {{ item.end | date: 'MMM d, y, h:mm a' }}\n                    </div>\n                    <div class=\"w-1/3\">\n                        <div>{{ item.systems.length }}</div>\n                        <div>View</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <ng-template #empty_state>\n            <div class=\"p-8 text-center\" i18n=\"@@logTableEmpty\">\n                No logs found\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                padding: 1rem;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class UserHistoryComponent extends BaseClass {\n    public logs: { start: number; end: number; systems: string[] }[] = [];\n\n    public get item(): PlaceUser {\n        return this._service.active_item as any;\n    }\n\n    constructor(private _service: ActiveItemService) {\n        super();\n    }\n    public ngOnInit(): void {\n        this.subscription(\n            'item',\n            this._service.item.subscribe((item) => {\n                this.loadUserLogs();\n            })\n        );\n    }\n\n    public loadUserLogs(offset: number = 0) {}\n}\n","import { Component } from '@angular/core';\nimport { PlaceUser } from '@placeos/ts-client';\nimport { ActiveItemService } from 'apps/backoffice/src/app/common/item.service';\n\n@Component({\n    selector: 'user-metadata',\n    template: `\n        <div class=\"p-4\" *ngIf=\"item\">\n            <metadata-display [item]=\"item\"></metadata-display>\n        </div>\n    `,\n    styles: [``],\n})\nexport class UserMetadataComponent {\n    public get item(): PlaceUser {\n        return this._service.active_item as any;\n    }\n\n    constructor(private _service: ActiveItemService) {}\n}\n","import { Routes } from '@angular/router';\n\nimport { UsersComponent } from './users.component';\nimport { UserAboutComponent } from './user-about.component';\nimport { UserHistoryComponent } from './user-history.component';\nimport { ExtensionOutletComponent } from '../ui/extension-outlet.component';\nimport { UserMetadataComponent } from './user-metadata.component';\n\nexport const ROUTES: Routes = [\n    {\n        path: ':id',\n        component: UsersComponent,\n        children: [\n            { path: 'about', component: UserAboutComponent },\n            { path: 'metadata', component: UserMetadataComponent },\n            { path: 'history', component: UserHistoryComponent },\n            { path: 'extend/:id', component: ExtensionOutletComponent },\n            { path: '**', redirectTo: 'about' },\n        ],\n    },\n    { path: '**', redirectTo: '-' },\n];\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { ROUTES } from './users.routes';\n\nimport { UsersComponent } from './users.component';\nimport { UserAboutComponent } from './user-about.component';\nimport { UserHistoryComponent } from './user-history.component';\nimport { SharedContentModule } from 'apps/backoffice/src/app/ui/ui.module';\nimport { UserMetadataComponent } from './user-metadata.component';\n\n@NgModule({\n    declarations: [\n        UsersComponent,\n        UserAboutComponent,\n        UserHistoryComponent,\n        UserMetadataComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        RouterModule.forChild(ROUTES),\n        SharedContentModule,\n    ],\n})\nexport class AppUsersModule {}\n"],"sourceRoot":"webpack:///","file":"497.3e063d26c73cf106.js"}