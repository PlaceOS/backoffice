(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([[42],{5042:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppZonesModule:()=>Re});var u=n(1511),i=n(3695),r=n(6898),a=n(8194),s=n(5697),l=n(1572),o=n(4762),c=n(5802),p=n(8512),D=n(3080),g=n(878),d=n(7701),h=n(4689),f=n(9996),m=n(7727),A=n(8303),b=n(3530),F=n(4103),x=n(8739),C=n(3206),v=n(5712),E=n(4608);let k=(()=>{class e{constructor(e,t){this._service=e,this._dialog=t,this._loading=new p.X(!1),this._change=new p.X(!1),this.loading=this._loading.asObservable(),this.item=this._service.item,this.counts=(0,D.aj)([this._service.all_item,this._change]).pipe((0,d.b)(300),(0,h.w)(e=>(0,o.mG)(this,void 0,void 0,function*(){const[t]=e;if(!(t instanceof c.TT8))return{};this._loading.next(!0);const n=yield Promise.all([(0,c.vIL)({zone_id:t.id,limit:1}).pipe((0,f.U)(e=>e.total)).toPromise().catch(e=>0),(0,c.Vgq)(t.id).pipe((0,f.U)(e=>e.total)).toPromise().catch(e=>0),(0,c.rlq)(t.id).pipe((0,f.U)(e=>e.length)).toPromise().catch(e=>0),(0,c.I0G)({parent:t.id,limit:1}).pipe((0,f.U)(e=>e.total)).toPromise().catch(e=>0)]),[u,i,r,a]=n;return this._loading.next(!1),{systems:u,triggers:i,metadata:r,children:a}}))),this.systems=this.item.pipe((0,h.w)(e=>e instanceof c.TT8?(0,c.vIL)({zone_id:e.id}):[]),(0,f.U)(e=>e.data),(0,m.K)(e=>[]),(0,A.d)()),this.triggers=this.item.pipe((0,h.w)(e=>e instanceof c.TT8?(0,c.Vgq)(e.id):[]),(0,f.U)(e=>e.data),(0,m.K)(e=>[]),(0,A.d)()),this.metadata=this.item.pipe((0,h.w)(e=>e instanceof c.TT8?(0,c.rlq)(e.id):(0,g.of)([])),(0,m.K)(e=>[]),(0,A.d)(1)),this.children=this.item.pipe((0,h.w)(e=>e instanceof c.TT8?(0,c.I0G)({parent:e.id}):[]),(0,f.U)(e=>e.data),(0,m.K)(e=>[]),(0,A.d)()),setTimeout(()=>this._change.next(!this._change.getValue()),1e3)}get active_item(){return this._service.active_item}selectTrigger(){return(0,o.mG)(this,void 0,void 0,function*(){const e=this._dialog.open(C.f,{data:{service_name:"Triggers",query_fn:e=>(0,c.$Um)({q:e}).pipe((0,f.U)(e=>e.data))}}),t=yield Promise.race([e.componentInstance.event.pipe((0,b.P)(e=>"action"===e.reason)).toPromise(),e.afterClosed().toPromise()]);if(!t||!t.reason)return e.close();const n=yield this.addTrigger(e.componentInstance.item);e.close(),n&&this._service.replaceItem(n)})}addTrigger(e){return(0,o.mG)(this,void 0,void 0,function*(){return(0,c.BfP)(this.active_item.id,Object.assign(Object.assign({},this.active_item),{triggers:(0,F.Tw)([...this.active_item.triggers,e.id])})).toPromise()})}removeTrigger(e){return(0,o.mG)(this,void 0,void 0,function*(){const t=yield(0,F._5)({title:"Remove trigger",content:`<p>Are you sure you want remove trigger "${e.name}"?</p><p>Configuration will be updated <strong>immediately</strong>.</p>`,icon:{type:"icon",class:"backoffice-trash"}},this._dialog);if(!t||!t.reason)return;const n=yield(0,c.BfP)(this.active_item.id,Object.assign(Object.assign({},this.active_item),{triggers:this.active_item.triggers.filter(t=>t!==e.id)})).toPromise().catch(n=>{throw t.close(),(0,x.cB)(`Error removing trigger ${e.id} from zone. Error: ${n.statusText||n.message||n}`),n});t.close(),(0,x.t5)("Successfully removed trigger from zone."),n&&this._service.replaceItem(n)})}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(v.L),l.LFG(E.uw))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=n(7096),w=n(6478);let Z=(()=>{class e extends a.K{constructor(e,t,n){super(),this._service=e,this._route=t,this._router=n,this.name="zones",this.tab_list=[]}get extensions(){return(0,s.fq)(this._service.active_item,this.name)}updateTabList(e){console.log("Details:",e),this.tab_list=[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"systems",name:"Systems",count:e.systems,icon:{class:"backoffice-documents"}},{id:"triggers",name:"Triggers",count:e.triggers,icon:{class:"backoffice-stopwatch"}},{id:"metadata",name:"Metadata",count:e.metadata,icon:{class:"backoffice-gist"}},{id:"children",name:"Children",count:e.children,icon:{class:"backoffice-flow-tree"}}].concat(this.extensions)}ngOnInit(){this.subscription("item",this._service.counts.subscribe(e=>this.updateTabList(e))),this.updateTabList({})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(k),l.Y36(r.gz),l.Y36(r.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-zones"]],features:[l.qOj],decls:3,vars:1,consts:[[1,"flex-1","flex-col","sm:flex-row","flex","h-full","w-full","relative"],["heading","Zones","name","zones",1,"absolute","top-0","left-0","h-12","w-full","sm:h-full","sm:static"],["name","zone","route","zones",1,"flex-1","relative","mt-12","sm:mt-0","w-full","sm:w-1/2",3,"tabs"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"sidebar",1),l._UZ(2,"item-display",2),l.qZA()),2&e&&(l.xp6(2),l.Q6J("tabs",t.tab_list))},directives:[_.k,w.s],styles:["sidebar[_ngcontent-%COMP%]{transition:height .3s}@media screen and (min-width:640px){sidebar[_ngcontent-%COMP%]{width:20em!important}}"]}),e})();var y=n(8187),B=n(6283),T=n(4786),z=n(1522),q=n(1179),$=n(33),S=n(9441),I=n(7806),O=n(6529);function N(e,t){1&e&&(l.TgZ(0,"header",7),l.SDv(1,12),l.qZA())}function J(e,t){if(1&e&&(l.TgZ(0,"mat-option",18),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e),l.xp6(1),l.hij(" ",e.name," ")}}function M(e,t){if(1&e&&l._UZ(0,"execute-method-field",19),2&e){const e=l.oxw(2);l.Q6J("system",e.active_system)}}function L(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"section",13),l.TgZ(1,"mat-form-field",14),l.TgZ(2,"mat-select",15),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().active_system=t}),l.YNc(3,J,2,2,"mat-option",16),l.ALo(4,"async"),l.qZA(),l.qZA(),l.YNc(5,M,1,1,"execute-method-field",17),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Q6J("ngModel",e.active_system),l.xp6(1),l.Q6J("ngForOf",l.lcZ(4,3,e.systems)),l.xp6(2),l.Q6J("ngIf",e.active_system&&e.active_system.id)}}const U=function(e){return["/zones",e,"about"]};function Q(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"label"),l.SDv(2,21),l.qZA(),l.TgZ(3,"div",22),l.TgZ(4,"a",23),l._uU(5),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Q6J("routerLink",l.VKq(2,U,null==e.item?null:e.item.parent_id)),l.xp6(1),l.Oqu(null==e.item?null:e.item.parent_id)}}function P(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"label"),l.SDv(2,24),l.qZA(),l.TgZ(3,"div",25),l._uU(4),l.ALo(5,"dateFrom"),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.hij(" ",l.lcZ(5,1,1e3*(null==e.item?null:e.item.created_at))," ")}}function Y(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"label"),l.SDv(2,26),l.qZA(),l.TgZ(3,"div",25),l._uU(4),l.ALo(5,"dateFrom"),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.hij(" ",l.lcZ(5,1,1e3*(null==e.item?null:e.item.updated_at))," ")}}function j(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"label"),l.SDv(2,27),l.qZA(),l.TgZ(3,"div",25),l._uU(4),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Oqu(null==e.item?null:e.item.location)}}function R(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"label"),l.SDv(2,28),l.qZA(),l.TgZ(3,"div",25),l._uU(4),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Oqu(null==e.item?null:e.item.code)}}function K(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"label"),l.SDv(2,29),l.qZA(),l.TgZ(3,"div",25),l._uU(4),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Oqu(null==e.item?null:e.item.type)}}function X(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"label"),l.SDv(2,30),l.qZA(),l.TgZ(3,"div",25),l._uU(4),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Oqu(null==e.item?null:e.item.count)}}function G(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"label"),l.SDv(2,31),l.qZA(),l.TgZ(3,"div",25),l._uU(4),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Oqu(null==e.item?null:e.item.capacity)}}function H(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"label"),l.SDv(2,32),l.qZA(),l.TgZ(3,"a",33),l._uU(4),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(3),l.Q6J("href",null==e.item?null:e.item.map_id,l.LSH),l.xp6(1),l.Oqu(null==e.item?null:e.item.map_id)}}function W(e,t){1&e&&(l.TgZ(0,"header",7),l.SDv(1,34),l.qZA())}function V(e,t){if(1&e&&l._UZ(0,"section",35),2&e){const e=l.oxw();l.Q6J("innerHTML",e.parsed_description,l.oJD)}}function ee(e,t){if(1&e&&(l.TgZ(0,"mat-chip"),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.Oqu(e)}}function te(e,t){if(1&e&&(l.TgZ(0,"div",25),l.TgZ(1,"mat-chip-list",40),l.YNc(2,ee,2,1,"mat-chip",41),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(2),l.Q6J("ngForOf",e.tag_list)}}function ne(e,t){if(1&e&&(l.TgZ(0,"section",36),l.TgZ(1,"label",37),l.SDv(2,38),l.qZA(),l.YNc(3,te,3,1,"div",39),l.qZA()),2&e){const e=l.oxw(),t=l.MAs(24);l.xp6(3),l.Q6J("ngIf",e.tag_list&&e.tag_list.length)("ngIfElse",t)}}function ue(e,t){if(1&e&&(l.TgZ(0,"section"),l._UZ(1,"a-settings-form",42),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("merge",!0)("id",null==e.item?null:e.item.id)("settings",null==e.item?null:e.item.settings)}}function ie(e,t){1&e&&(l.TgZ(0,"div",43),l._UZ(1,"mat-spinner",44),l.TgZ(2,"p"),l.SDv(3,45),l.qZA(),l.qZA())}function re(e,t){1&e&&(l.TgZ(0,"p",46),l.SDv(1,47),l.qZA())}let ae=(()=>{class e{constructor(e){this._service=e,this.systems=this._service.systems}get item(){return this._service.active_item}get parsed_description(){var e;return this.item?y(null===(e=this.item)||void 0===e?void 0:e.description):""}get tag_list(){var e;return this.item?null===(e=this.item)||void 0===e?void 0:e.tags:[]}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(k))},e.\u0275cmp=l.Xpm({type:e,selectors:[["zone-about"]],decls:25,vars:20,consts:function(){let e,t,n,u,i,r,a,s,l,o,c,p,D,g,d;return e=$localize`:@@settingsLabel␟5ba97a3f90a79c4d7720b941ae416c8c84337e38␟180274732945114229: Settings `,t=$localize`:@@execHeader␟6e9fe55331b587290e95336846799c928c323b8f␟5406219849635212445: Execute Command `,n=$localize`:@@zoneParentLabel␟8dce5a1b53185785ceb8eaece03a45f95a1058ae␟1730450554195977822:Parent ID:`,u=$localize`:@@zoneCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,i=$localize`:@@zoneUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,r=$localize`:@@zoneLocationLabel␟4bebbae34f84157c0b5b852529f0bc2c39a5a38a␟4510013877734913501:Location:`,a=$localize`:@@zoneCodeLabel␟08a3263c58aafca24f31b3f312d90934a14069e5␟4793952596010266372:Code:`,s=$localize`:@@zoneTypeLabel␟b2ec946dbfa29aa3430b9999250edf9a2a6e3552␟2473796624751549543:Type: `,l=$localize`:@@zoneCountLabel␟e684046d73bcee88e82f7ff01e2852789a05fc32␟6836949342567686088:Count:`,o=$localize`:@@zoneCapacityLabel␟a1170e85d1897210d5fe03d1f363587de15d02cd␟8062822823331512246:Capacity:`,c=$localize`:@@zoneMapLabel␟b59ac98267a9fea534d729d6021e4ad108b9166e␟5947091241433737383:Map:`,p=$localize`:@@descriptionLabel␟91d130f4d03590d2ab82ec6ccd644aaff7dbf49c␟7630730180260398735: Description `,D=$localize`:@@zoneTagsLabel␟d1c4e9d07d3789fb1c66dec61f2d52c6b81b10f6␟7952806382632077864:Tags:`,g=$localize`:@@zoneLoadingLabel␟adb8ef1c4f047ddce91397fb4d8f83acc47f4649␟1768664919049731907:Loading zone settings...`,d=$localize`:@@zoneTagsEmpty␟48171f6d8b15daa87a49496d685bd03bb4f84253␟1765229228159298837: <No Tags> `,[["class","font-medium text-lg",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"space-y-2"],["class","flex items-center space-x-2",4,"ngIf"],["class","description",3,"innerHTML",4,"ngIf"],["class","flex space-x-2 mt-1",4,"ngIf"],[1,"my-4"],[1,"font-medium","text-lg"],e,[4,"ngIf","ngIfElse"],["load_state",""],["empty_tag_state",""],t,[1,"mb-4"],["appearance","outline",1,"h-12"],["placeholder","Select system",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"system",4,"ngIf"],[3,"value"],[3,"system"],[1,"flex","items-center","space-x-2"],n,[1,"value","underline"],[3,"routerLink"],u,[1,"value"],i,r,a,s,l,o,c,[1,"underline",3,"href"],p,[1,"description",3,"innerHTML"],[1,"flex","space-x-2","mt-1"],["for","tags",1,"my-1"],D,["class","value",4,"ngIf","ngIfElse"],["name","tags"],[4,"ngFor","ngForOf"],[3,"merge","id","settings"],[1,"flex","flex-col","items-center","p-8"],["diameter","48",1,"mb-4"],g,[1,"text-center","py-1"],d]},template:function(e,t){if(1&e&&(l.YNc(0,N,2,0,"header",0),l.ALo(1,"async"),l.YNc(2,L,6,5,"section",1),l.ALo(3,"async"),l.TgZ(4,"section",2),l.YNc(5,Q,6,4,"div",3),l.YNc(6,P,6,3,"div",3),l.YNc(7,Y,6,3,"div",3),l.YNc(8,j,5,1,"div",3),l.YNc(9,R,5,1,"div",3),l.YNc(10,K,5,1,"div",3),l.YNc(11,X,5,1,"div",3),l.YNc(12,G,5,1,"div",3),l.YNc(13,H,5,2,"div",3),l.qZA(),l.YNc(14,W,2,0,"header",0),l.YNc(15,V,1,1,"section",4),l.YNc(16,ne,4,2,"section",5),l._UZ(17,"hr",6),l.TgZ(18,"header",7),l.SDv(19,8),l.qZA(),l.YNc(20,ue,2,3,"section",9),l.YNc(21,ie,4,0,"ng-template",null,10,l.W1O),l.YNc(23,re,2,0,"ng-template",null,11,l.W1O)),2&e){const e=l.MAs(22);let n,u;l.Q6J("ngIf",null==(n=l.lcZ(1,16,t.systems))?null:n.length),l.xp6(2),l.Q6J("ngIf",null==(u=l.lcZ(3,18,t.systems))?null:u.length),l.xp6(3),l.Q6J("ngIf",null==t.item?null:t.item.parent_id),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.created_at),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.updated_at),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.location),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.code),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.type),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.count),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.capacity),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.map_id),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.description),l.xp6(1),l.Q6J("ngIf",null==t.item?null:t.item.description),l.xp6(1),l.Q6J("ngIf",t.item&&t.tag_list),l.xp6(4),l.Q6J("ngIf",null==t.item?null:t.item.settings)("ngIfElse",e)}},directives:[u.O5,B.KE,T.gD,i.JJ,i.On,u.sg,z.ey,q.Q,r.yS,$.qn,$.HS,S.v,I.$g],pipes:[u.Ov,O.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}"]}),e})();var se=n(3609),le=n(6756),oe=n(6828);const ce=function(e){return["/systems",e]};function pe(e,t){if(1&e&&(l.TgZ(0,"div",16),l.TgZ(1,"div",17),l.TgZ(2,"a",18),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"div",10),l._uU(5),l.qZA(),l.TgZ(6,"div",12),l._uU(7),l.ALo(8,"dateFrom"),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(2),l.Q6J("routerLink",l.VKq(7,ce,e.id))("matTooltip",e.id),l.xp6(1),l.hij(" ",e.name," "),l.xp6(2),l.Oqu(e.modules.length),l.xp6(2),l.Oqu(l.lcZ(8,5,1e3*(null==e?null:e.created_at)))}}function De(e,t){if(1&e&&(l.TgZ(0,"div",6),l.TgZ(1,"div",7),l.TgZ(2,"div",8),l.SDv(3,9),l.qZA(),l.TgZ(4,"div",10),l.SDv(5,11),l.qZA(),l.TgZ(6,"div",12),l.SDv(7,13),l.qZA(),l.qZA(),l.TgZ(8,"div",14),l.YNc(9,pe,9,9,"div",15),l.ALo(10,"async"),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(9),l.Q6J("ngForOf",l.lcZ(10,1,e.systems))}}function ge(e,t){1&e&&(l.TgZ(0,"div",19),l.TgZ(1,"p"),l.SDv(2,20),l.qZA(),l.qZA())}let de=(()=>{class e{constructor(e){this._state=e,this.filter$=new p.X(""),this.systems=(0,D.aj)([this.filter$,this._state.systems]).pipe((0,f.U)(e=>{const[t,n]=e,u=t.toLowerCase();return t?n.filter(e=>e.name.toLowerCase().includes(u)):n}))}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(k))},e.\u0275cmp=l.Xpm({type:e,selectors:[["zone-systems"]],decls:8,vars:5,consts:function(){let e,t,n,u;return e=$localize`:@@systemTableName␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:@@systemTablePanelCount␟6c24d3e08bc16576fbd5580dc255a31c4b08c366␟8919524640139321287:No. Modules`,n=$localize`:@@systemTableCreated␟1b051734b0ee9021991c91b3ed4e81c244322462␟4207916966377787111:Created`,u=$localize`:@@systemTableEmpty␟443361e57db2ac76049b227574b4a6b8a67ae879␟6249884397292386469:No systems found`,[[1,"flex"],["appearance","outline",1,"flex-1"],["matPrefix","","className","backoffice-magnifying-glass",1,"text-lg"],["matInput","","name","search-filter","placeholder","Filter Systems",3,"ngModel","ngModelChange"],["role","table",4,"ngIf","ngIfElse"],["empty_state",""],["role","table"],["table-head",""],[1,"flex-1","p-2"],e,[1,"w-28","p-2"],t,[1,"w-32","p-2"],n,["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2","underline"],["matTooltipPosition","right",3,"routerLink","matTooltip"],[1,"flex","flex-col","items-center","p-8"],u]},template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"mat-form-field",1),l._UZ(2,"app-icon",2),l.TgZ(3,"input",3),l.NdJ("ngModelChange",function(e){return t.filter$.next(e)}),l.qZA(),l.qZA(),l.qZA(),l.YNc(4,De,11,3,"div",4),l.ALo(5,"async"),l.YNc(6,ge,3,0,"ng-template",null,5,l.W1O)),2&e){const e=l.MAs(7);let n;l.xp6(3),l.Q6J("ngModel",""),l.xp6(1),l.Q6J("ngIf",null==(n=l.lcZ(5,3,t.systems))?null:n.length)("ngIfElse",e)}},directives:[B.KE,se.o,B.qo,le.Nt,i.Fj,i.JJ,i.On,u.O5,u.sg,r.yS,oe.gM],pipes:[u.Ov,O.R],styles:["[_nghost-%COMP%]{padding:1rem;width:100%;height:100%}"]}),e})();var he=n(5980);const fe=function(e){return["/triggers",e]};function me(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",18),l.TgZ(1,"div",11),l.TgZ(2,"a",19),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"div",20),l._uU(5),l.ALo(6,"dateFrom"),l.qZA(),l.TgZ(7,"div",21),l.TgZ(8,"button",22),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(3).deleteTrigger(t)}),l._UZ(9,"app-icon",23),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(2),l.Q6J("routerLink",l.VKq(5,fe,e.id)),l.xp6(1),l.Oqu(e.name),l.xp6(2),l.hij(" ",l.lcZ(6,3,1e3*+e.created_at)," ")}}function Ae(e,t){if(1&e&&(l.TgZ(0,"div",9),l.TgZ(1,"div",10),l.TgZ(2,"div",11),l.SDv(3,12),l.qZA(),l.TgZ(4,"div",13),l.SDv(5,14),l.qZA(),l._UZ(6,"div",15),l.qZA(),l.TgZ(7,"div",16),l.YNc(8,me,10,7,"div",17),l.ALo(9,"async"),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(8),l.Q6J("ngForOf",l.lcZ(9,1,e.triggers))}}function be(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Ae,10,3,"div",8),l.ALo(2,"async"),l.BQk()),2&e){const e=l.oxw(),t=l.MAs(12);let n;l.xp6(1),l.Q6J("ngIf",null==(n=l.lcZ(2,2,e.triggers))?null:n.length)("ngIfElse",t)}}function Fe(e,t){1&e&&(l.TgZ(0,"div",24),l._UZ(1,"mat-spinner",25),l.TgZ(2,"p"),l._uU(3,"Loading triggers..."),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Q6J("diameter",48))}function xe(e,t){1&e&&(l.TgZ(0,"div",24),l.TgZ(1,"p"),l._uU(2,"No triggers for zone"),l.qZA(),l.qZA())}let Ce=(()=>{class e{constructor(e){this._state=e,this.filter$=new p.X(""),this.triggers=(0,D.aj)([this.filter$,this._state.triggers]).pipe((0,f.U)(e=>{const[t,n]=e,u=t.toLowerCase();return t?n.filter(e=>e.name.toLowerCase().includes(u)):n})),this.loading=this._state.loading,this.selectTrigger=()=>this._state.selectTrigger(),this.deleteTrigger=e=>this._state.removeTrigger(e)}get item(){return this._state.active_item}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(k))},e.\u0275cmp=l.Xpm({type:e,selectors:[["zone-triggers"]],decls:13,vars:5,consts:function(){let e,t;return e=$localize`:@@nameLabel␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:@@descriptionLabel␟80e3b490720757978c99a7b5af3885faf202b955␟231679111972850796:Added`,[[1,"flex","items-center","mb-4","space-x-2"],["mat-button","",2,"min-width","8rem",3,"click"],["appearance","outline",1,"h-12","flex-1"],["matPrefix","","className","backoffice-magnifying-glass text-xl mr-2"],["matInput","","placeholder","Filter triggers...",1,"rounded-none",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["role","table","class","overflow-x-auto",4,"ngIf","ngIfElse"],["role","table",1,"overflow-x-auto"],["table-head",""],["flex","",1,"flex-1","p-2"],e,[1,"w-28","p-2"],t,[1,"w-32","p-2"],["table-body","",1,"overflow-y-auto"],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"truncate",3,"routerLink"],["desc","",1,"w-28","p-2"],[1,"w-32","p-2","items-center","justify-center"],["mat-icon-button","",3,"click"],["className","backoffice-trash"],[1,"flex","flex-col","items-center","p-8","mx-auto"],[1,"mb-4",3,"diameter"]]},template:function(e,t){if(1&e&&(l.TgZ(0,"section",0),l.TgZ(1,"button",1),l.NdJ("click",function(){return t.selectTrigger()}),l._uU(2," Add Trigger "),l.qZA(),l.TgZ(3,"mat-form-field",2),l._UZ(4,"app-icon",3),l.TgZ(5,"input",4),l.NdJ("ngModelChange",function(e){return t.filter$.next(e)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"section"),l.YNc(7,be,3,4,"ng-container",5),l.ALo(8,"async"),l.qZA(),l.YNc(9,Fe,4,1,"ng-template",null,6,l.W1O),l.YNc(11,xe,3,0,"ng-template",null,7,l.W1O)),2&e){const e=l.MAs(10);l.xp6(5),l.Q6J("ngModel",""),l.xp6(2),l.Q6J("ngIf",!l.lcZ(8,3,t.loading))("ngIfElse",e)}},directives:[he.lW,B.KE,se.o,B.qo,le.Nt,i.Fj,i.JJ,i.On,u.O5,u.sg,r.yS,I.$g],pipes:[u.Ov,O.R],styles:["[_nghost-%COMP%]{padding:1rem;width:100%;height:100%}"]}),e})();const ve=function(e){return["/zone",e]};function Ee(e,t){if(1&e&&(l.TgZ(0,"div",14),l.TgZ(1,"div",15),l.TgZ(2,"a",16),l._uU(3),l.TgZ(4,"span",17),l._uU(5),l.qZA(),l._uU(6,") "),l.qZA(),l.qZA(),l.TgZ(7,"div",10),l._uU(8),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(2),l.Q6J("routerLink",l.VKq(5,ve,e.id))("matTooltip",e.id),l.xp6(1),l.hij(" ",e.name," ("),l.xp6(2),l.Oqu(e.id),l.xp6(3),l.Oqu(e.description)}}function ke(e,t){if(1&e&&(l.TgZ(0,"div",6),l.TgZ(1,"div",7),l.TgZ(2,"div",8),l.SDv(3,9),l.qZA(),l.TgZ(4,"div",10),l.SDv(5,11),l.qZA(),l.qZA(),l.TgZ(6,"div",12),l.YNc(7,Ee,9,7,"div",13),l.ALo(8,"async"),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(7),l.Q6J("ngForOf",l.lcZ(8,1,e.children))}}function _e(e,t){1&e&&(l.TgZ(0,"div",18),l.SDv(1,19),l.qZA())}let we=(()=>{class e{constructor(e){this._state=e,this.filter$=new p.X(""),this.children=(0,D.aj)([this.filter$,this._state.children]).pipe((0,f.U)(e=>{const[t,n]=e,u=t.toLowerCase();return t?n.filter(e=>e.name.toLowerCase().includes(u)):n})),this.loading=this._state.loading}get item(){return this._state.active_item}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(k))},e.\u0275cmp=l.Xpm({type:e,selectors:[["zone-children"]],decls:8,vars:5,consts:function(){let e,t,n,u;return e=$localize`:@@zoneChildrenTableFilter␟48b4cc111b7400e0a4602f4805cab66025dbb55d␟8361856721210143570:Filter Zones`,t=$localize`:@@zoneChildrenTableName␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,n=$localize`:@@descriptionLabel␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,u=$localize`:@@zoneChildrenTableEmpty␟1b895a59396d575379143c2deec22ed0c1d65834␟1207585495728440175: No child zones found `,[[1,"flex","items-center"],["appearance","outline",1,"flex-1"],["matPrefix","","className","backoffice-magnifying-glass",1,"text-lg"],["matInput","","name","search-filter","placeholder",e,3,"ngModel","ngModelChange"],["role","table",4,"ngIf","ngIfElse"],["empty_state",""],["role","table"],["table-head",""],[1,"flex-1","p-2"],t,[1,"w-3/5","p-2"],n,["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2","underline"],["routerLinkActive","router-link-active",3,"routerLink","matTooltip"],[1,"id"],[1,"flex","flex-col","items-center","p-8"],u]},template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"mat-form-field",1),l._UZ(2,"app-icon",2),l.TgZ(3,"input",3),l.NdJ("ngModelChange",function(e){return t.filter$.next(e)}),l.qZA(),l.qZA(),l.qZA(),l.YNc(4,ke,9,3,"div",4),l.ALo(5,"async"),l.YNc(6,_e,2,0,"ng-template",null,5,l.W1O)),2&e){const e=l.MAs(7);let n;l.xp6(3),l.Q6J("ngModel",""),l.xp6(1),l.Q6J("ngIf",(null==(n=l.lcZ(5,3,t.children))?null:n.length)>0)("ngIfElse",e)}},directives:[B.KE,se.o,B.qo,le.Nt,i.Fj,i.JJ,i.On,u.O5,u.sg,r.yS,r.Od,oe.gM],pipes:[u.Ov],styles:["[_nghost-%COMP%]{padding:1rem;width:100%;height:100%}"]}),e})();var Ze=n(2187),ye=n(8256),Be=n(3049),Te=n(7486),ze=n(5001),qe=n(7e3);function $e(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",19),l.NdJ("click",function(e){return e.stopPropagation()})("click",function(){l.CHM(e);const t=l.oxw(3).$implicit;return l.oxw(3).saveMetadata(t)}),l.SDv(1,20),l.qZA()}}function Se(e,t){if(1&e&&(l.ynx(0),l.YNc(1,$e,2,0,"button",18),l.BQk()),2&e){const e=l.oxw(2).$implicit,t=l.oxw(3),n=l.MAs(4);l.xp6(1),l.Q6J("ngIf",!t.loading[e.name])("ngIfElse",n)}}const Ie=function(){return{class:"backoffice-trash"}};function Oe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",21),l.TgZ(1,"button",22),l.NdJ("click",function(){l.CHM(e);const t=l.oxw(2).$implicit;return l.oxw(3).deleteMetadata(t.name)}),l._UZ(2,"app-icon",14),l.qZA(),l.qZA()}2&e&&(l.xp6(2),l.Q6J("icon",l.DdM(1,Ie)))}const Ne=function(){return{class:"backoffice-edit"}};function Je(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"mat-expansion-panel",10),l.TgZ(1,"mat-expansion-panel-header"),l.TgZ(2,"mat-panel-title"),l.TgZ(3,"div",11),l._uU(4),l.qZA(),l.YNc(5,Se,2,2,"ng-container",12),l.TgZ(6,"button",13),l.NdJ("click",function(t){l.CHM(e);const n=l.oxw().$implicit;return l.oxw(3).editMetadataDetails(n),t.stopPropagation()}),l._UZ(7,"app-icon",14),l.qZA(),l.YNc(8,Oe,3,2,"div",15),l.qZA(),l.qZA(),l.TgZ(9,"div",16),l._UZ(10,"settings-form-field",17),l.qZA(),l.qZA()}if(2&e){const e=l.oxw().$implicit,t=l.oxw(3);l.ekj("no-padding",!0),l.Q6J("formGroup",t.form_map[e.name]),l.xp6(4),l.hij(" ",t.form_map[e.name].controls.name.value," "),l.xp6(1),l.Q6J("ngIf",t.edited[e.name]),l.xp6(2),l.Q6J("icon",l.DdM(9,Ne)),l.xp6(1),l.Q6J("ngIf",!e.new),l.xp6(2),l.Q6J("schema",t.schema_map[e.name])("readonly",!1)}}function Me(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Je,11,10,"mat-expansion-panel",9),l.BQk()),2&e){const e=t.$implicit,n=l.oxw(3);l.xp6(1),l.Q6J("ngIf",n.form_map[e.name])}}function Le(e,t){if(1&e&&(l.TgZ(0,"div",7),l.TgZ(1,"mat-accordion"),l.YNc(2,Me,2,1,"ng-container",8),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(2),l.Q6J("ngForOf",e.metadata)}}function Ue(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",3),l.TgZ(1,"button",4),l.NdJ("click",function(){return l.CHM(e),l.oxw().newMetadata()}),l.SDv(2,5),l.qZA(),l.YNc(3,Le,3,1,"div",6),l.qZA()}if(2&e){const e=l.oxw(),t=l.MAs(2);l.xp6(3),l.Q6J("ngIf",null==e.metadata?null:e.metadata.length)("ngIfElse",t)}}function Qe(e,t){1&e&&(l.TgZ(0,"div",23),l.SDv(1,24),l.qZA())}function Pe(e,t){1&e&&l._UZ(0,"mat-spinner",25)}const Ye=[{path:":id",component:Z,children:[{path:"about",component:ae},{path:"systems",component:de},{path:"triggers",component:Ce},{path:"children",component:we},{path:"metadata",component:(()=>{class e extends a.K{constructor(e,t,n){super(),this._dialog=e,this._service=t,this._schemas=n,this.form_map={},this.edited={},this.loading={},this.schema_map={}}get item(){return this._service.active_item}validateName(e){return t=>e.indexOf(t.value)>=0?{name:!0}:null}ngOnInit(){this.subscription("metadata",this._service.metadata.subscribe(e=>{this.metadata=e||[],this.generateForms()}))}newMetadata(){this.metadata||(this.metadata=[]),this.metadata.push({name:`new_field_${Math.floor(999999999*Math.random())}`,description:"",new:!0,details:{}}),this.generateForms()}editMetadataDetails(e){this._dialog.open(ye.v,{maxWidth:"95vw",data:{form:this.form_map[e.name]}})}deleteMetadata(e){const t=this._dialog.open(Be.z,Object.assign(Object.assign({},Be.t),{data:{title:"Kill process",content:`\n                    <p>Are you sure you want delete the metadata property "${e}"?</p>\n                `,icon:{type:"icon",class:"backoffice-trash"}}}));this.subscription("confirm",t.componentInstance.event.subscribe(n=>{"done"===n.reason&&(0,c._p1)(this.item.id,{name:e}).subscribe(()=>{(0,x.t5)(`Successfully removed "${e}" metadata.`),this.metadata=this.metadata.filter(t=>t.name!==e),this.generateForms()},t=>(0,x.cB)(`Error removing old "${e}" metadata. Error: ${t.response||t.message||t}`)),t.close()}))}saveMetadata(e){const t=this.form_map[e.name];if(t.markAllAsTouched(),!t.valid)return(0,x.cB)(`JSON for property "${t.controls.name.value}" is invalid`);const n=t.value;this.loading[e.name]=!0,(0,c.Ymr)(this.item.id,Object.assign(Object.assign({},n),{details:JSON.parse(n.details)})).subscribe(t=>{this.loading[e.name]=!1;const u=this.metadata.findIndex(t=>t.name===e.name);this.edited[e.name]=!1,e.name!==t.name&&(0,c._p1)(this.item.id,e).toPromise().catch(t=>(0,x.cB)(`Error removing old "${e.name}" metadata. Error: ${JSON.stringify(t.response||t.message||t)}`)),u>=0&&this.metadata.splice(u,1,Object.assign(Object.assign({},t),{new:!1})),(0,x.t5)(`Saved "${n.name}" metadata.`),this.generateForms()},t=>{this.loading[e.name]=!1,(0,x.cB)(`Error saving "${n.name}" metadata. Error: ${JSON.stringify(t.response||t.message||t)}`)})}generateForms(){delete this.form_map,this.form_map={},this.metadata.forEach(e=>{const t="string"==typeof e.details?JSON.parse(e.details):e.details;this.form_map[e.name]=new i.cw({name:new i.NI(e.name,[i.kI.required,this.validateName(this.metadata.filter(t=>t.name!==e.name).map(e=>e.name))]),description:new i.NI(e.description),editors:new i.NI(e.editors),details:new i.NI(JSON.stringify(t||{},void 0,4),[i.kI.required,Ze.NS]),schema:new i.NI(e.schema)}),this.subscription(`${e.name}_changes`,this.form_map[e.name].valueChanges.subscribe(()=>this.edited[e.name]=!0)),this.subscription(`${e.name}_schema`,this.form_map[e.name].controls.schema.valueChanges.subscribe(t=>{let n=this._schemas.getSchema(t);if(!n)try{n=JSON.parse(t)}catch(u){n={}}this.schema_map[e.name]=n}))})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(E.uw),l.Y36(k),l.Y36(Te.O))},e.\u0275cmp=l.Xpm({type:e,selectors:[["zone-metadata"]],features:[l.qOj],decls:5,vars:1,consts:function(){let e,t,n;return e=$localize`:@@addMetadataAction␟21539c364f82b6b766d912c3734a014cb30f27a9␟6503325999299484981: Add new Metadata Field `,t=$localize`:@@saveAction␟baa3a276f05a6226cb663918714882c53b84da34␟25086637338905953: Save `,n=$localize`:@@zoneMetadataEmpty␟2bd9761768337769895eb2434531437eff6955ec␟5420436980181509251: No zone metadata found `,[["class","p-4",4,"ngIf"],["empty_state",""],["load_state",""],[1,"p-4"],["mat-button","",3,"click"],e,["class","mt-4",4,"ngIf","ngIfElse"],[1,"mt-4"],[4,"ngFor","ngForOf"],[3,"no-padding","formGroup",4,"ngIf"],[3,"formGroup"],["edit","",1,"flex-1"],[4,"ngIf"],["mat-icon-button","","matTooltip","Edit Metadata Settings",3,"click"],[3,"icon"],["class","contents",4,"ngIf"],[1,"settings"],["formControlName","details","lang","json",3,"schema","readonly"],["mat-button","","save","",3,"click",4,"ngIf","ngIfElse"],["mat-button","","save","",3,"click"],t,[1,"contents"],["mat-icon-button","","matTooltip","Remove Metadata",3,"click"],[1,"p-8","text-center"],n,["diameter","32"]]},template:function(e,t){1&e&&(l.YNc(0,Ue,4,2,"div",0),l.YNc(1,Qe,2,0,"ng-template",null,1,l.W1O),l.YNc(3,Pe,1,0,"ng-template",null,2,l.W1O)),2&e&&l.Q6J("ngIf",t.item)},directives:[u.O5,he.lW,ze.pp,u.sg,ze.ib,i.JL,i.sg,ze.yz,ze.yK,oe.gM,se.o,qe.x,i.JJ,i.u,I.$g],styles:["[edit][_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}[edit][_ngcontent-%COMP%]:hover   app-icon[_ngcontent-%COMP%]{opacity:1}mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;height:1.2em;overflow:visible}mat-panel-title[_ngcontent-%COMP%]   [save][_ngcontent-%COMP%]{font-size:.8em;background:none;border:none;text-decoration:underline;color:inherit}mat-form-field[_ngcontent-%COMP%]{height:3em}.settings[_ngcontent-%COMP%]{width:100%;height:30.35em}.contents[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex:1;min-width:2em}.contents[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-decoration:none}"]}),e})()},{path:"extend/:id",component:n(3511).z},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var je=n(7561);let Re=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[u.ez,i.u5,i.UX,r.Bz.forChild(Ye),je.X]]}),e})()},8187:function(e){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,u=new Array(t);n<t;n++)u[n]=e[n];return u}function n(e,n){var u;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(u=function(e,n){if(e){if("string"==typeof e)return t(e,n);var u=Object.prototype.toString.call(e).slice(8,-1);return"Object"===u&&e.constructor&&(u=e.constructor.name),"Map"===u||"Set"===u?Array.from(e):"Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){u&&(e=u);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(u=e[Symbol.iterator]()).next.bind(u)}var u=function(e){var t={exports:{}};return function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}(t),t.exports}(),i=/[&<>"']/,r=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,s=/[<>"']|&(?!#?\w+;)/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o=function(e){return l[e]},c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function p(e){return e.replace(c,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var D=/(^|[^\[])\^/g,g=/[^\w:]/g,d=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,h={},f=/^[^:]+:\/*[^/]*$/,m=/^([^:]+:)[\s\S]*$/,A=/^([^:]+:\/*[^/]*)[\s\S]*$/;function b(e,t,n){var u=e.length;if(0===u)return"";for(var i=0;i<u;){var r=e.charAt(u-i-1);if(r!==t||n){if(r===t||!n)break;i++}else i++}return e.substr(0,u-i)}var F=function(e,t){if(t){if(i.test(e))return e.replace(r,o)}else if(a.test(e))return e.replace(s,o);return e},x=p,C=function(e){for(var t,n,u=1;u<arguments.length;u++)for(n in t=arguments[u])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},v=u.defaults,E=b,k=function(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var u=!1,i=t;--i>=0&&"\\"===n[i];)u=!u;return u?"|":" |"}).split(/ \|/),u=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;u<n.length;u++)n[u]=n[u].trim().replace(/\\\|/g,"|");return n},_=F;function w(e,t,n){var u=t.href,i=t.title?_(t.title):null,r=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:u,title:i,text:r}:{type:"image",raw:n,href:u,title:i,text:_(r)}}var Z=function(){function e(e){this.options=e||v}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e){var t=this.rules.block.code.exec(e);if(t){var n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:E(n,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],u=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var u=n[1];return t.split("\n").map(function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=u.length?e.slice(u.length):e}).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:u}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var u=E(n,"#");this.options.pedantic?n=u.trim():u&&!/ $/.test(u)||(n=u.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n}}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:k(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){var u,i=n.align.length;for(u=0;u<i;u++)n.align[u]=/^ *-+: *$/.test(n.align[u])?"right":/^ *:-+: *$/.test(n.align[u])?"center":/^ *:-+ *$/.test(n.align[u])?"left":null;for(i=n.cells.length,u=0;u<i;u++)n.cells[u]=k(n.cells[u],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,u,i,r,a,s,l,o,c,p=t[0],D=t[2],g=D.length>1,d={type:"list",raw:p,ordered:g,start:g?+D.slice(0,-1):"",loose:!1,items:[]},h=t[0].match(this.rules.block.item),f=!1,m=h.length;i=this.rules.block.listItemStart.exec(h[0]);for(var A=0;A<m;A++){if(p=n=h[A],this.options.pedantic||(c=n.match(new RegExp("\\n\\s*\\n {0,"+(i[0].length-1)+"}\\S")))&&(a=n.length-c.index+h.slice(A+1).join("\n").length,d.raw=d.raw.substring(0,d.raw.length-a),p=n=n.substring(0,c.index),m=A+1),A!==m-1){if(r=this.rules.block.listItemStart.exec(h[A+1]),this.options.pedantic?r[1].length>i[1].length:r[1].length>=i[0].length||r[1].length>3){h.splice(A,2,h[A]+(!this.options.pedantic&&r[1].length<i[0].length&&!h[A].match(/\n$/)?"":"\n")+h[A+1]),A--,m--;continue}(!this.options.pedantic||this.options.smartLists?r[2][r[2].length-1]!==D[D.length-1]:g===(1===r[2].length))&&(a=h.slice(A+1).join("\n").length,d.raw=d.raw.substring(0,d.raw.length-a),A=m-1),i=r}u=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(u-=n.length,n=n.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+u+"}","gm"),"")),n=E(n,"\n"),A!==m-1&&(p+="\n"),s=f||/\n\n(?!\s*$)/.test(p),A!==m-1&&(f="\n\n"===p.slice(-2),s||(s=f)),s&&(d.loose=!0),this.options.gfm&&(o=void 0,(l=/^\[[ xX]\] /.test(n))&&(o=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,""))),d.items.push({type:"list_item",raw:p,task:l,checked:o,loose:s,text:n})}return d}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):_(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:k(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var u,i=n.align.length;for(u=0;u<i;u++)n.align[u]=/^ *-+: *$/.test(n.align[u])?"right":/^ *:-+: *$/.test(n.align[u])?"center":/^ *:-+ *$/.test(n.align[u])?"left":null;for(i=n.cells.length,u=0;u<i;u++)n.cells[u]=k(n.cells[u].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0]}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:_(t[1])}},t.tag=function(e,t,n){var u=this.rules.inline.tag.exec(e);if(u)return!t&&/^<a /i.test(u[0])?t=!0:t&&/^<\/a>/i.test(u[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(u[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(u[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:u[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(u[0]):_(u[0]):u[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var u=E(n.slice(0,-1),"\\");if((n.length-u.length)%2==0)return}else{var i=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,u=0,i=0;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])u++;else if(e[i]===t[1]&&--u<0)return i;return-1}(t[2],"()");if(i>-1){var r=(0===t[0].indexOf("!")?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,r).trim(),t[3]=""}}var a=t[2],s="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);l&&(a=l[1],s=l[3])}else s=t[3]?t[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),w(t,{href:a?a.replace(this.rules.inline._escapes,"$1"):a,title:s?s.replace(this.rules.inline._escapes,"$1"):s},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var u=(n[2]||n[1]).replace(/\s+/g," ");if(!(u=t[u.toLowerCase()])||!u.href){var i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return w(n,u,n[0])}},t.emStrong=function(e,t,n){void 0===n&&(n="");var u=this.rules.inline.emStrong.lDelim.exec(e);if(u&&(!u[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var i=u[1]||u[2]||"";if(!i||i&&(""===n||this.rules.inline.punctuation.exec(n))){var r,a,s=u[0].length-1,l=s,o=0,c="*"===u[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+s);null!=(u=c.exec(t));)if(r=u[1]||u[2]||u[3]||u[4]||u[5]||u[6])if(a=r.length,u[3]||u[4])l+=a;else if(!((u[5]||u[6])&&s%3)||(s+a)%3){if(!((l-=a)>0)){if(l+o-a<=0&&!t.slice(c.lastIndex).match(c)&&(a=Math.min(a,a+l+o)),Math.min(s,a)%2)return{type:"em",raw:e.slice(0,s+u.index+a+1),text:e.slice(1,s+u.index+a)};if(Math.min(s,a)%2==0)return{type:"strong",raw:e.slice(0,s+u.index+a+1),text:e.slice(2,s+u.index+a-1)}}}else o+=a}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),u=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return u&&i&&(n=n.substring(1,n.length-1)),n=_(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}},t.autolink=function(e,t){var n,u,i=this.rules.inline.autolink.exec(e);if(i)return u="@"===i[2]?"mailto:"+(n=_(this.options.mangle?t(i[1]):i[1])):n=_(i[1]),{type:"link",raw:i[0],text:n,href:u,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var u,i;if("@"===n[2])i="mailto:"+(u=_(this.options.mangle?t(n[0]):n[0]));else{var r;do{r=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(r!==n[0]);u=_(n[0]),i="www."===n[1]?"http://"+u:u}return{type:"link",raw:n[0],text:u,href:i,tokens:[{type:"text",raw:u,text:u}]}}},t.inlineText=function(e,t,n){var u,i=this.rules.inline.text.exec(e);if(i)return u=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):_(i[0]):i[0]:_(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:u}},e}(),y={exec:function(){}},B=function(e,t){e=e.source||e,t=t||"";var n={replace:function(t,u){return u=(u=u.source||u).replace(D,"$1"),e=e.replace(t,u),n},getRegex:function(){return new RegExp(e,t)}};return n},T=C,z={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:y,table:y,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};z.def=B(z.def).replace("label",z._label).replace("title",z._title).getRegex(),z.bullet=/(?:[*+-]|\d{1,9}[.)])/,z.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,z.item=B(z.item,"gm").replace(/bull/g,z.bullet).getRegex(),z.listItemStart=B(/^( *)(bull) */).replace("bull",z.bullet).getRegex(),z.list=B(z.list).replace(/bull/g,z.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+z.def.source+")").getRegex(),z._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",z._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,z.html=B(z.html,"i").replace("comment",z._comment).replace("tag",z._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),z.paragraph=B(z._paragraph).replace("hr",z.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",z._tag).getRegex(),z.blockquote=B(z.blockquote).replace("paragraph",z.paragraph).getRegex(),z.normal=T({},z),z.gfm=T({},z.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),z.gfm.nptable=B(z.gfm.nptable).replace("hr",z.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",z._tag).getRegex(),z.gfm.table=B(z.gfm.table).replace("hr",z.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",z._tag).getRegex(),z.pedantic=T({},z.normal,{html:B("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",z._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:y,paragraph:B(z.normal._paragraph).replace("hr",z.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",z.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var q={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:y,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_]*?\*[^_]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^*]*?\_[^*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:y,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};q.punctuation=B(q.punctuation).replace(/punctuation/g,q._punctuation).getRegex(),q.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,q.escapedEmSt=/\\\*|\\_/g,q._comment=B(z._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),q.emStrong.lDelim=B(q.emStrong.lDelim).replace(/punct/g,q._punctuation).getRegex(),q.emStrong.rDelimAst=B(q.emStrong.rDelimAst,"g").replace(/punct/g,q._punctuation).getRegex(),q.emStrong.rDelimUnd=B(q.emStrong.rDelimUnd,"g").replace(/punct/g,q._punctuation).getRegex(),q._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,q._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,q._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,q.autolink=B(q.autolink).replace("scheme",q._scheme).replace("email",q._email).getRegex(),q._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,q.tag=B(q.tag).replace("comment",q._comment).replace("attribute",q._attribute).getRegex(),q._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,q._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,q._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,q.link=B(q.link).replace("label",q._label).replace("href",q._href).replace("title",q._title).getRegex(),q.reflink=B(q.reflink).replace("label",q._label).getRegex(),q.reflinkSearch=B(q.reflinkSearch,"g").replace("reflink",q.reflink).replace("nolink",q.nolink).getRegex(),q.normal=T({},q),q.pedantic=T({},q.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:B(/^!?\[(label)\]\((.*?)\)/).replace("label",q._label).getRegex(),reflink:B(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",q._label).getRegex()}),q.gfm=T({},q.normal,{escape:B(q.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),q.gfm.url=B(q.gfm.url,"i").replace("email",q.gfm._extended_email).getRegex(),q.breaks=T({},q.gfm,{br:B(q.br).replace("{2,}","*").getRegex(),text:B(q.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var $={block:z,inline:q},S=u.defaults,I=$.block,O=$.inline,N=function(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e};function J(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function M(e){var t,n,u="",i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),u+="&#"+n+";";return u}var L=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||S,this.options.tokenizer=this.options.tokenizer||new Z,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:I.normal,inline:O.normal};this.options.pedantic?(t.block=I.pedantic,t.inline=O.pedantic):this.options.gfm&&(t.block=I.gfm,t.inline=this.options.breaks?O.breaks:O.gfm),this.tokenizer.rules=t}t.lex=function(e,n){return new t(n).lex(e)},t.lexInline=function(e,n){return new t(n).inlineTokens(e)};var n,u,i=t.prototype;return i.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},i.blockTokens=function(e,t,n){var u,i,r,a;for(void 0===t&&(t=[]),void 0===n&&(n=!0),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(u=this.tokenizer.space(e))e=e.substring(u.raw.length),u.type&&t.push(u);else if(u=this.tokenizer.code(e))e=e.substring(u.raw.length),(a=t[t.length-1])&&"paragraph"===a.type?(a.raw+="\n"+u.raw,a.text+="\n"+u.text):t.push(u);else if(u=this.tokenizer.fences(e))e=e.substring(u.raw.length),t.push(u);else if(u=this.tokenizer.heading(e))e=e.substring(u.raw.length),t.push(u);else if(u=this.tokenizer.nptable(e))e=e.substring(u.raw.length),t.push(u);else if(u=this.tokenizer.hr(e))e=e.substring(u.raw.length),t.push(u);else if(u=this.tokenizer.blockquote(e))e=e.substring(u.raw.length),u.tokens=this.blockTokens(u.text,[],n),t.push(u);else if(u=this.tokenizer.list(e)){for(e=e.substring(u.raw.length),r=u.items.length,i=0;i<r;i++)u.items[i].tokens=this.blockTokens(u.items[i].text,[],!1);t.push(u)}else if(u=this.tokenizer.html(e))e=e.substring(u.raw.length),t.push(u);else if(n&&(u=this.tokenizer.def(e)))e=e.substring(u.raw.length),this.tokens.links[u.tag]||(this.tokens.links[u.tag]={href:u.href,title:u.title});else if(u=this.tokenizer.table(e))e=e.substring(u.raw.length),t.push(u);else if(u=this.tokenizer.lheading(e))e=e.substring(u.raw.length),t.push(u);else if(n&&(u=this.tokenizer.paragraph(e)))e=e.substring(u.raw.length),t.push(u);else if(u=this.tokenizer.text(e))e=e.substring(u.raw.length),(a=t[t.length-1])&&"text"===a.type?(a.raw+="\n"+u.raw,a.text+="\n"+u.text):t.push(u);else if(e){var s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return t},i.inline=function(e){var t,n,u,i,r,a,s=e.length;for(t=0;t<s;t++)switch((a=e[t]).type){case"paragraph":case"text":case"heading":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case"table":for(a.tokens={header:[],cells:[]},i=a.header.length,n=0;n<i;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(i=a.cells.length,n=0;n<i;n++)for(r=a.cells[n],a.tokens.cells[n]=[],u=0;u<r.length;u++)a.tokens.cells[n][u]=[],this.inlineTokens(r[u],a.tokens.cells[n][u]);break;case"blockquote":this.inline(a.tokens);break;case"list":for(i=a.items.length,n=0;n<i;n++)this.inline(a.items[n].tokens)}return e},i.inlineTokens=function(e,t,n,u){var i,r;void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===u&&(u=!1);var a,s,l,o=e;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+N("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+N("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(l=""),s=!1,i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e,n,u)){e=e.substring(i.raw.length),n=i.inLink,u=i.inRawBlock;var p=t[t.length-1];p&&"text"===i.type&&"text"===p.type?(p.raw+=i.raw,p.text+=i.text):t.push(i)}else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,u)),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length);var D=t[t.length-1];"link"===i.type?(i.tokens=this.inlineTokens(i.text,[],!0,u),t.push(i)):D&&"text"===i.type&&"text"===D.type?(D.raw+=i.raw,D.text+=i.text):t.push(i)}else if(i=this.tokenizer.emStrong(e,o,l))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,u),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,u),t.push(i);else if(i=this.tokenizer.autolink(e,M))e=e.substring(i.raw.length),t.push(i);else if(n||!(i=this.tokenizer.url(e,M))){if(i=this.tokenizer.inlineText(e,u,J))e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),s=!0,(r=t[t.length-1])&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);else if(e){var g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}throw new Error(g)}}else e=e.substring(i.raw.length),t.push(i);return t},n=t,u=[{key:"rules",get:function(){return{block:I,inline:O}}}],null&&e(n.prototype,null),u&&e(n,u),t}(),U=u.defaults,Q=function(e,t,n){if(e){var u;try{u=decodeURIComponent(p(n)).replace(g,"").toLowerCase()}catch(i){return null}if(0===u.indexOf("javascript:")||0===u.indexOf("vbscript:")||0===u.indexOf("data:"))return null}t&&!d.test(n)&&(n=function(e,t){h[" "+e]||(h[" "+e]=f.test(e)?e+"/":b(e,"/",!0));var n=-1===(e=h[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(m,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(A,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(i){return null}return n},P=F,Y=function(){function e(e){this.options=e||U}var t=e.prototype;return t.code=function(e,t,n){var u=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,u);null!=i&&i!==e&&(n=!0,e=i)}return e=e.replace(/\n$/,"")+"\n",u?'<pre><code class="'+this.options.langPrefix+P(u,!0)+'">'+(n?e:P(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:P(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,u){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+u.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var u=t?"ol":"ul";return"<"+u+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+u+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=Q(this.options.sanitize,this.options.baseUrl,e)))return n;var u='<a href="'+P(e)+'"';return t&&(u+=' title="'+t+'"'),u+">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=Q(this.options.sanitize,this.options.baseUrl,e)))return n;var u='<img src="'+e+'" alt="'+n+'"';return t&&(u+=' title="'+t+'"'),u+(this.options.xhtml?"/>":">")},t.text=function(e){return e},e}(),j=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),R=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,u=0;if(this.seen.hasOwnProperty(n)){u=this.seen[e];do{n=e+"-"+ ++u}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=u,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),K=u.defaults,X=x,G=function(){function e(e){this.options=e||K,this.options.renderer=this.options.renderer||new Y,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new j,this.slugger=new R}e.parse=function(t,n){return new e(n).parse(t)},e.parseInline=function(t,n){return new e(n).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,u,i,r,a,s,l,o,c,p,D,g,d,h,f,m,A,b,F="",x=e.length;for(n=0;n<x;n++)switch((p=e[n]).type){case"space":continue;case"hr":F+=this.renderer.hr();continue;case"heading":F+=this.renderer.heading(this.parseInline(p.tokens),p.depth,X(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue;case"code":F+=this.renderer.code(p.text,p.lang,p.escaped);continue;case"table":for(o="",l="",r=p.header.length,u=0;u<r;u++)l+=this.renderer.tablecell(this.parseInline(p.tokens.header[u]),{header:!0,align:p.align[u]});for(o+=this.renderer.tablerow(l),c="",r=p.cells.length,u=0;u<r;u++){for(l="",a=(s=p.tokens.cells[u]).length,i=0;i<a;i++)l+=this.renderer.tablecell(this.parseInline(s[i]),{header:!1,align:p.align[i]});c+=this.renderer.tablerow(l)}F+=this.renderer.table(o,c);continue;case"blockquote":c=this.parse(p.tokens),F+=this.renderer.blockquote(c);continue;case"list":for(D=p.ordered,g=p.start,d=p.loose,r=p.items.length,c="",u=0;u<r;u++)m=(f=p.items[u]).checked,A=f.task,h="",f.task&&(b=this.renderer.checkbox(m),d?f.tokens.length>0&&"text"===f.tokens[0].type?(f.tokens[0].text=b+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=b+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:b}):h+=b),h+=this.parse(f.tokens,d),c+=this.renderer.listitem(h,A,m);F+=this.renderer.list(c,D,g);continue;case"html":F+=this.renderer.html(p.text);continue;case"paragraph":F+=this.renderer.paragraph(this.parseInline(p.tokens));continue;case"text":for(c=p.tokens?this.parseInline(p.tokens):p.text;n+1<x&&"text"===e[n+1].type;)c+="\n"+((p=e[++n]).tokens?this.parseInline(p.tokens):p.text);F+=t?this.renderer.paragraph(c):c;continue;default:var C='Token with "'+p.type+'" type was not found.';if(this.options.silent)return void console.error(C);throw new Error(C)}return F},t.parseInline=function(e,t){t=t||this.renderer;var n,u,i="",r=e.length;for(n=0;n<r;n++)switch((u=e[n]).type){case"escape":i+=t.text(u.text);break;case"html":i+=t.html(u.text);break;case"link":i+=t.link(u.href,u.title,this.parseInline(u.tokens,t));break;case"image":i+=t.image(u.href,u.title,u.text);break;case"strong":i+=t.strong(this.parseInline(u.tokens,t));break;case"em":i+=t.em(this.parseInline(u.tokens,t));break;case"codespan":i+=t.codespan(u.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(u.tokens,t));break;case"text":i+=t.text(u.text);break;default:var a='Token with "'+u.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return i},e}(),H=C,W=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},V=F,ee=u.getDefaults,te=u.changeDefaults,ne=u.defaults;function ue(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=H({},ue.defaults,t||{}),W(t),n){var u,i=t.highlight;try{u=L.lex(e,t)}catch(l){return n(l)}var r=function(e){var r;if(!e)try{r=G.parse(u,t)}catch(l){e=l}return t.highlight=i,e?n(e):n(null,r)};if(!i||i.length<3)return r();if(delete t.highlight,!u.length)return r();var a=0;return ue.walkTokens(u,function(e){"code"===e.type&&(a++,setTimeout(function(){i(e.text,e.lang,function(t,n){if(t)return r(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0==--a&&r()})},0))}),void(0===a&&r())}try{var s=L.lex(e,t);return t.walkTokens&&ue.walkTokens(s,t.walkTokens),G.parse(s,t)}catch(l){if(l.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+V(l.message+"",!0)+"</pre>";throw l}}return ue.options=ue.setOptions=function(e){return H(ue.defaults,e),te(ue.defaults),ue},ue.getDefaults=ee,ue.defaults=ne,ue.use=function(e){var t=H({},e);if(e.renderer&&function(){var n=ue.defaults.renderer||new Y,u=function(t){var u=n[t];n[t]=function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=e.renderer[t].apply(n,r);return!1===s&&(s=u.apply(n,r)),s}};for(var i in e.renderer)u(i);t.renderer=n}(),e.tokenizer&&function(){var n=ue.defaults.tokenizer||new Z,u=function(t){var u=n[t];n[t]=function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=e.tokenizer[t].apply(n,r);return!1===s&&(s=u.apply(n,r)),s}};for(var i in e.tokenizer)u(i);t.tokenizer=n}(),e.walkTokens){var n=ue.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens(t),n&&n(t)}}ue.setOptions(t)},ue.walkTokens=function(e,t){for(var u,i=n(e);!(u=i()).done;){var r=u.value;switch(t(r),r.type){case"table":for(var a,s=n(r.tokens.header);!(a=s()).done;)ue.walkTokens(a.value,t);for(var l,o=n(r.tokens.cells);!(l=o()).done;)for(var c,p=n(l.value);!(c=p()).done;)ue.walkTokens(c.value,t);break;case"list":ue.walkTokens(r.items,t);break;default:r.tokens&&ue.walkTokens(r.tokens,t)}}},ue.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=H({},ue.defaults,t||{}),W(t);try{var n=L.lexInline(e,t);return t.walkTokens&&ue.walkTokens(n,t.walkTokens),G.parseInline(n,t)}catch(u){if(u.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+V(u.message+"",!0)+"</pre>";throw u}},ue.Parser=G,ue.parser=G.parse,ue.Renderer=Y,ue.TextRenderer=j,ue.Lexer=L,ue.lexer=L.lex,ue.Tokenizer=Z,ue.Slugger=R,ue.parse=ue,ue}()}}]);
//# sourceMappingURL=42.77e628449d99bb2cd98c.js.map