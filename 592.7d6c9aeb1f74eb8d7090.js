(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([[592],{7486:(e,s,a)=>{"use strict";a.d(s,{O:()=>r});var t=a(4762),o=a(5802),i=a(8512),c=a(9996),n=a(1572);let r=(()=>{class e{constructor(){this._schemas=new i.X([]),this.schemas=this._schemas.asObservable(),this.loadSchemas()}getSchema(e){const s=this._schemas.getValue().find(s=>s.id===e);return s?JSON.parse(s.schema||"{}"):null}loadSchemas(){return(0,t.mG)(this,void 0,void 0,function*(){const e=yield(0,o.IOR)({query_params:{},fn:e=>e,path:"schema"}).pipe((0,c.U)(e=>e.data)).toPromise();console.log("Schema List:",e),e.sort((e,s)=>{var a;return null===(a=e.name)||void 0===a?void 0:a.localeCompare(s.name)}),this._schemas.next(e)})}saveSchema(e){return(0,t.mG)(this,void 0,void 0,function*(){let s=this._schemas.getValue();const a={query_params:{},fn:e=>e,form_data:e,path:"schema"},t=yield(e.id?(0,o.Vxg)(Object.assign(Object.assign({},a),{id:e.id,method:"patch"})):(0,o.Ue8)(Object.assign({},a))).toPromise();s=[...s.filter(s=>e.id!==s.id),t],s.sort((e,s)=>{var a;return null===(a=e.name)||void 0===a?void 0:a.localeCompare(s.name)}),this._schemas.next(s)})}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
//# sourceMappingURL=592.7d6c9aeb1f74eb8d7090.js.map