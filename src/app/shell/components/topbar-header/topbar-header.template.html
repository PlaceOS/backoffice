
<div class="container">
    <div class="topbar" [class.uat]="model.env !== 'prod'" >
        <div class="menu" (tap)="toggleMenu()">
            <i class="material-icons">{{model.show_menu ? 'close' : 'menu'}}</i>
        </div>
        <div class="block">
            <div *ngIf="model.logo" class="logo" (tap)="logo()">
                <img *ngIf="model.logo.type==='image' || model.logo.type==='img'" [src]="model.logo.src">
                <i *ngIf="model.logo.type !== 'image' && model.logo.type!=='img'" [class]="model.logo.class">{{model.logo.value}}</i>
            </div>
        </div>
        <div class="search">
            <searchbar *ngIf="model.has_search" [(filter)]="model.filter" (filterChange)="postFilter()"></searchbar>
        </div>
        <div class="block end">
            <!-- TODO Add user details display -->
            <div class="avatar" [title]="model.user?.name" a-tooltip position="bottom" offset="end" [content]="options" [(show)]="model.show" (touchrelease)="model.show = true">
                <div class="img" [style.background-image]="('url(' + (model.user?.image || 'https://www.gravatar.com/avatar/' + model.user?.gravatar_hash) + ')') | safe:'style'"></div>
            </div>
            <ng-template #options>
                <div class="user-options">
                    <div class="details">
                        <div class="name">{{model.user?.name || 'Guest'}}</div>
                        <div class="avatar" a-tooltip position="bottom" offset="end" [content]="options">
                            <div class="img" [style.background-image]="('url(' + (model.user?.image || 'https://www.gravatar.com/avatar/' + model.user?.gravatar_hash) + ')') | safe:'style'"></div>
                        </div>
                    </div>
                    <div class="list" *ngIf="model.options">
                        <div class="item" *ngFor="let item of model.options" click-responder (touchrelease)="select(item)">
                            <div class="icon">
                                <i [class]="item.icon?.class">{{item.icon?.value}}</i>
                            </div>
                            <div class="text">{{item.name}}</div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </div>
    </div>
</div>
