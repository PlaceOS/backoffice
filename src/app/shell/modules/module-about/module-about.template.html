<div class="container" *ngIf="item">
    <section class="details">
        <div class="field" *ngIf="item.notes">
            <label i18n="@moduleNotesLabel">Notes:</label>
            <div class="value">{{ item.notes }}</div>
        </div>
        <div class="field" *ngIf="item.ip">
            <label i18n="@moduleIPLabel">IP:</label>
            <div class="value">{{ item.ip }}</div>
        </div>
        <div class="field" *ngIf="item.port">
            <label i18n="@modulePortLabel">Port:</label>
            <div class="value">{{ item.port }}</div>
        </div>
        <div class="field">
            <label i18n="@moduleTLSLabel">TLS:</label>
            <div class="value">{{ item.tls }}</div>
        </div>
        <div class="field">
            <label i18n="@moduleUDPLabel">UDP:</label>
            <div class="value">{{ item.udp }}</div>
        </div>
        <div class="field" *ngIf="item.created_at">
            <label i18n="@@moduleCreatedAtLabel">Created:</label>
            <div class="value">{{ item.created_at * 1000 | dateFrom }}</div>
        </div>
        <div class="field" *ngIf="item.updated_at">
            <label i18n="@moduleUpdatedAtLabel">Updated:</label>
            <div class="value">{{ item.updated_at * 1000 | dateFrom }}</div>
        </div>
    </section>
    <hr />
    <div class="settings">
        <header *ngIf="item.driver"  i18n="@@moduleDetailsDriver">
            Driver:&nbsp;<span>
                <a [routerLink]="['/drivers', item.driver_id]"
                    >{{item.driver.name || '&lt;Unnamed&gt;'}}</a
                >
            </span>
        </header>
        <header i18n="@@moduleDetailsSystem">
            Logic for system:&nbsp;<span *ngIf="system">
                <a [routerLink]="['/systems', system.id]">{{system?.name}}</a>
            </span>
        </header>
        <section>
            <button
                mat-button
                [disabled]="stopping"
                (tapped)="item.connected ? stopModule(): startModule()"
            >
                <div class="text" *ngIf="!stopping"  i18n="@@moduleStateToggle">
                    { item.connected, select, true { Stop Module } false { Start Module } }
                </div>
                <mat-spinner diameter="32" *ngIf="stopping"></mat-spinner>
            </button>
        </section>
        <hr />
        <header class="settings" i18n="@@settingsLabel">Settings</header>
        <section *ngIf="!loading_settings; else load_state">
            <a-settings-form
                [id]="item.id"
                [merge]="true"
                [settings]="item.settings"
                [merge_settings]="other_settings || []"
            ></a-settings-form>
        </section>
    </div>
</div>
<ng-template #load_state>
    <div class="info-block">
        <div class="icon">
            <mat-spinner diameter="48"></mat-spinner>
        </div>
        <div class="text" i18n="@@moduleDetailsLoading">Loading module settings...</div>
    </div>
</ng-template>
