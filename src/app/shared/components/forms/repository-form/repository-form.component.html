<div class="repository form" *ngIf="form">
    <form [formGroup]="form">
        <div
            class="field commit"
            *ngIf="is_edit && can_change_commit"
        >
            <label for="commit" i18n="@@repoCommitLabel">Repository Commit: </label>
            <item-search-field
                name="commit"
                [options]="commit_list"
                [loading]="loading_commits"
                [ngModel]="base_commit"
                (ngModelChange)="form.controls.commit_hash.setValue($event.id)"
            ></item-search-field>
        </div>
        <div class="field" *ngIf="form.controls.name">
            <label
                for="repository-name"
                [class.error]="form.controls.name.invalid && form.controls.name.touched"
                i18n="@@nameLabel"
                >Name<span>*</span>:</label
            >
            <mat-form-field appearance="outline">
                <input
                    matInput
                    name="repository-name"
                    placeholder="Repository Name"
                    i18n-placeholder="@@repositoryNamePlaceholder"
                    formControlName="name"
                    required
                />
                <mat-error *ngIf="form.controls.name.invalid" i18n="@@repoNameError"
                    >
                    Repository name is required
                    </mat-error
                >
            </mat-form-field>
        </div>
        <div class="field" *ngIf="form.controls.folder_name">
            <label
                for="folder-name"
                [class.error]="
                    form.controls.folder_name.invalid && form.controls.folder_name.touched
                "
                i18n="@@folderNameLabel"
                >Folder Name<span>*</span>:</label
            >
            <mat-form-field appearance="outline">
                <input
                    matInput
                    name="folder-name"
                    placeholder="Folder Name"
                    i18n-placeholder="@@folderNamePlaceholder"
                    formControlName="folder_name"
                    required
                />
                <mat-error *ngIf="form.controls.folder_name.invalid" i18n="@@folderNameError"
                    >Folder name is required</mat-error
                >
            </mat-form-field>
        </div>
        <div class="field" *ngIf="form.controls.description">
            <label for="description"i18n="@@descriptionLabel">Description:</label>
            <mat-form-field appearance="outline">
                <textarea
                    matInput
                    name="description"
                    placeholder="Description"
                    i18n-placeholder="@@descriptionPlaceholder"
                    formControlName="description"
                ></textarea>
            </mat-form-field>
        </div>
        <div class="field" *ngIf="form.controls.uri">
            <label for="uri" [class.error]="form.controls.uri.invalid && form.controls.uri.touched" i18n="@@repoUriLabel">
                Repository URI<span>*</span>:
            </label>
            <mat-form-field appearance="outline">
                <input
                    matInput
                    name="uri"
                    placeholder="Repository URI"
                    i18n-placeholder="@@repoUriPlaceholder"
                    formControlName="uri"
                    required
                />
                <mat-error *ngIf="form.controls.uri.invalid" i18n="@@repoUriError">URI is required</mat-error>
            </mat-form-field>
        </div>
        <div class="field" *ngIf="!is_edit && form.controls.repo_type">
            <label for="type"i18n="@@repoTypeLabel">Repository Type: </label>
            <mat-form-field appearance="outline">
                <mat-select name="type" formControlName="repo_type">
                    <mat-option *ngFor="let type of repo_types" [value]="type.id" i18n="@@repoType">
                        { type.name, select, Driver { Driver } Interface { Interface } other { Other } }
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </form>
</div>
