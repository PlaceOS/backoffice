{"version":3,"file":"548.2406b9d61c5ba8c8.js","mappings":"qNA6CO,IAAMA,EAAe,MAAtB,MAAOA,UAAuBC,IAQzBC,WACHC,KAAKC,aACLD,KAAKE,SAAS,OAAQ,IAAMF,KAAKC,aAAc,IACnD,CAEOA,aACH,MAAME,EAAO,IAAIC,KACjBJ,KAAKK,YACEF,EAAKG,WAAa,GAAMH,EAAKI,aAAe,IAAM,GAAM,IAC/DP,KAAKQ,cACCL,EAAKI,aAAeJ,EAAKM,aAAe,IAAM,GAAM,IAC1DT,KAAKU,aAAgBP,EAAKM,aAAe,GAAM,GACnD,CAACE,SAAAX,KAAA,4DApBQH,KAAce,GAAdf,EAAc,GAoBtB,GApBsBc,SAAAX,KAAA,UAAAa,EAAAC,IAAA,MAAdjB,EAAckB,UAAA,YAAAC,SAAA,CAAAC,OAAAC,MAAA,EAAAC,KAAA,EAAAC,OAAA,ocAAAC,SAAA,SAAAC,EAAAC,GAAA,EAAAD,IAvCnBL,MAAA,WAGIA,MAAA,UAAAA,CAKO,UALPA,CAKO,UALPA,CAKO,WAgBXA,eAnBQA,MAAA,GAAAA,MAAA,uCAAAM,EAAAlB,WAAA,QAMAY,MAAA,GAAAA,MAAA,uCAAAM,EAAAf,aAAA,QAMAS,MAAA,GAAAA,MAAA,uCAAAM,EAAAb,aAAA,iNAsBHb,CAAe,mBCOrB,IAAM2B,EAAiB,MAAxB,MAAOA,UAAyB1B,IAOlC,eAAW2B,GACP,MAAMC,KAAgBC,SACtB,OAAOD,EACDA,EAAcE,SAAWF,EAAcG,OAAOD,QAC9C,EACV,CAEAE,YAAoBC,GAChBC,QADgBhC,KAAA+B,WAEpB,CAEOhC,WACHC,KAAKC,aACLD,KAAKE,SAAS,OAAQ,IAAMF,KAAKC,aAAc,KAC/CD,KAAK+B,UAAUE,MAAQ,SAC3B,CAEOhC,aACHD,KAAKG,KAAO,IAAIC,IACpB,CAACO,SAAAX,KAAA,mBAAAY,iBA1BQY,GAAgBP,MAAAiB,KAAA,EAAAvB,SAAAX,KAAA,UAAAa,EAAAC,IAAA,MAAhBU,EAAgBT,UAAA,kBAAAC,SAAA,CAAAC,OAAAC,MAAA,GAAAC,KAAA,GAAAC,YAAA,IAAAe,WApCmDC,wfAPxEnB,MAAA,UAAAA,CAGC,UAHDA,CAGC,WAIOA,MAAA,KAEAA,QACAA,MAAA,WACIA,MAAA,WACAA,MAAA,UAAAA,CAAqB,WACCA,MAAA,mBAA8BA,QAChDA,MAAA,YAAiBA,MAAA,qBAA+BA,cAI5DA,MAAA,YACIA,MAAA,gCAIJA,iBArBAA,MAAA,aAAAM,EAAAc,YAW8BpB,MAAA,GAAAA,YAAA,IAAAM,EAAApB,KAAA,cACDc,MAAA,GAAAA,YAAA,KAAAM,EAAApB,KAAA,eAOrBc,MAAA,GAAAA,MAAA,MAAAA,MAAA,MAAAM,EAAAE,YAAA,YAAAR,qRAsBPO,CAAiB,KChDvB,MAAMc,EAAiB,CAC1B,CAAEC,KAAM,GAAIC,UAAWhB,EAAkBiB,SAAU,IACnD,CAAEF,KAAM,YAAaC,UAAWhB,EAAkBiB,SAAU,IAC5D,CAAEF,KAAM,oBAAqBC,UAAWhB,EAAkBiB,SAAU,IACpE,CAAEF,KAAM,UAAWC,UAAWhB,EAAkBiB,SAAU,IAC1D,CAAEF,KAAM,KAAWG,WAAY,mBCW5B,IAAMC,EAAgB,MAAvB,MAAOA,EAAgBhC,SAAAX,KAAA,mBAAAY,iBAAhB+B,EAAgB,EAAAhC,SAAAX,KAAA,UAAAa,EAAA+B,IAAA,MAAhBD,IAAgBhC,SAAAX,KAAA,UAAAa,EAAAgC,IAAA,UANrBC,KACAC,KACAC,KAAaC,SAASX,GACtBY,cAGKP,CAAgB","names":["ClockComponent","AsyncHandler","ngOnInit","this","updateTime","interval","time","Date","hour_angle","getHours","getMinutes","minute_angle","getSeconds","second_angle","static","t","core","Xpm","selectors","features","i0","decls","vars","consts","template","rf","ctx","MetricsComponent","metrics_url","api_authority","authority","metrics","config","constructor","_settings","super","title","i1","i18n_0","$localize","fullscreen","ROUTES","path","component","children","redirectTo","AppMetricsModule","oAB","cJS","CommonModule","FormsModule","RouterModule","forChild","SharedContentModule"],"sourceRoot":"webpack:///","sources":["./apps/backoffice/src/app/metrics/clock.component.ts","./apps/backoffice/src/app/metrics/metrics.component.ts","./apps/backoffice/src/app/metrics/metrics.routes.ts","./apps/backoffice/src/app/metrics/metrics.module.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AsyncHandler } from '../common/async-handler.class';\n\n@Component({\n    selector: 'clock',\n    template: `\n        <div\n            class=\"rounded-full h-12 w-12 border-2 border-base-content relative\"\n        >\n            <div\n                class=\"hand absolute bottom-1/2 left-1/2 bg-base-content h-3 w-1 rounded\"\n                [style.transform]=\"\n                    'translateX(-50%) rotate(' + hour_angle + 'deg)'\n                \"\n            ></div>\n            <div\n                class=\"hand absolute bottom-1/2 left-1/2 bg-base-content h-4 minute\"\n                [style.transform]=\"\n                    'translateX(-50%) rotate(' + minute_angle + 'deg)'\n                \"\n            ></div>\n            <div\n                class=\"hand absolute bottom-1/2 left-1/2 bg-base-content h-5 w-px\"\n                [style.transform]=\"\n                    'translateX(-50%) rotate(' + second_angle + 'deg)'\n                \"\n            ></div>\n            <div\n                class=\"absolute top-1/2 left-1/2 h-2 w-2 transform -translate-x-1/2 -translate-y-1/2 bg-base-content rounded-full\"\n            ></div>\n        </div>\n    `,\n    styles: [\n        `\n            .hand {\n                transform-origin: 50% 100%;\n            }\n\n            .minute {\n                width: 2px;\n                border-radius: 1px;\n            }\n        `,\n    ],\n})\nexport class ClockComponent extends AsyncHandler implements OnInit {\n    /** Angle to display the hour hand of the clock at */\n    public hour_angle: number;\n    /** Angle to display the minute hand of the clock at */\n    public minute_angle: number;\n    /** Angle to display the seconds hand of the clock at */\n    public second_angle: number;\n\n    public ngOnInit() {\n        this.updateTime();\n        this.interval('time', () => this.updateTime(), 1000);\n    }\n\n    public updateTime() {\n        const time = new Date();\n        this.hour_angle =\n            (((time.getHours() % 12) + time.getMinutes() / 60) / 12) * 360;\n        this.minute_angle =\n            ((time.getMinutes() + time.getSeconds() / 60) / 60) * 360;\n        this.second_angle = (time.getSeconds() / 60) * 360;\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { authority } from '@placeos/ts-client';\n\nimport { AsyncHandler } from 'apps/backoffice/src/app/common/async-handler.class';\nimport { SettingsService } from '../common/settings.service';\n\n@Component({\n    selector: 'app-metrics',\n    template: `\n        <div\n            class=\"h-full w-full flex flex-col bg-base-100\"\n            [class.fullscreen]=\"fullscreen\"\n        >\n            <div\n                class=\"flex items-center w-full bg-base-200 text-base-content py-2 px-4 border-b border-neutral\"\n            >\n                <div class=\"text-2xl flex-1 font-medium\" i18n=\"@@metricsHeader\">\n                    Metrics\n                </div>\n                <div class=\"flex items-center space-x-2\">\n                    <clock></clock>\n                    <div class=\"display\">\n                        <div class=\"time\">{{ time | date: 'shortTime' }}</div>\n                        <div class=\"day\">{{ time | date: 'mediumDate' }}</div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"flex-1 w-full h-[60vh] relative\">\n                <iframe\n                    class=\"absolute inset-0 w-full h-full\"\n                    [src]=\"metrics_url | safe: 'resource'\"\n                ></iframe>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n            }\n            .fullscreen {\n                position: fixed !important;\n                top: 0;\n                left: 0;\n                height: 100vh;\n                width: 100vw;\n                z-index: 9999;\n            }\n        `,\n    ],\n})\nexport class MetricsComponent extends AsyncHandler implements OnInit {\n    /** Whether to only render the metrics view */\n    public fullscreen: boolean;\n\n    public time: Date;\n\n    /** URL for the metrics interface */\n    public get metrics_url(): string {\n        const api_authority = authority();\n        return api_authority\n            ? api_authority.metrics || api_authority.config.metrics\n            : '';\n    }\n\n    constructor(private _settings: SettingsService) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.updateTime();\n        this.interval('time', () => this.updateTime(), 1000);\n        this._settings.title = 'Metrics';\n    }\n\n    public updateTime() {\n        this.time = new Date();\n    }\n}\n","\nimport { Routes } from '@angular/router';\nimport { MetricsComponent } from './metrics.component';\n\nexport const ROUTES: Routes = [\n    { path: '', component: MetricsComponent, children: [] },\n    { path: 'dashboard', component: MetricsComponent, children: [] },\n    { path: 'dashboard/:period', component: MetricsComponent, children: [] },\n    { path: ':period', component: MetricsComponent, children: [] },\n    { path: '**',      redirectTo: '' },\n];\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { ROUTES } from './metrics.routes';\n\nimport { MetricsComponent } from './metrics.component';\nimport { SharedContentModule } from 'apps/backoffice/src/app/ui/ui.module';\nimport { ClockComponent } from './clock.component';\n\n@NgModule({\n    declarations: [MetricsComponent, ClockComponent],\n    imports: [\n        CommonModule,\n        FormsModule,\n        RouterModule.forChild(ROUTES),\n        SharedContentModule,\n    ],\n})\nexport class AppMetricsModule {}\n"],"x_google_ignoreList":[]}