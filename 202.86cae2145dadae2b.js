(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[202],{6202:(_e,me,ce)=>{"use strict";ce.r(me),ce.d(me,{MqttDashboardModule:()=>H});var pe=ce(6814),de=ce(285),Ee=ce(2296),A=ce(4170),K=ce(8525),j=ce(4641),m=ce(5858),b=ce(5861),g=ce(2866),d=ce(4732),s=ce(5125),t=ce(8419),r=ce(3759),e=ce(8316),n=ce(6124),o=ce(2948);let p=(()=>{class f{constructor(){this._connected=new s.X(!1),this._topics={},this.connected=this._connected.asObservable(),this.filters=new de.cw({org:new de.NI(""),bld:new de.NI(""),lvl:new de.NI(""),area:new de.NI(""),sys:new de.NI(""),drv:new de.NI(""),mod:new de.NI(""),idx:new de.NI(""),state:new de.NI("connected")}),this.topic=this.filters.valueChanges.pipe((0,n.U)(()=>{const{org:y,bld:I,lvl:N,area:q,sys:z,drv:E,mod:k,idx:D,state:$}=this.filters.value;return`placeos/${y||"+"}/state/${I||"+"}/${N||"+"}/${q||"+"}/${z||"+"}/${E||"+"}/${k||"+"}/${D||"+"}/${$||"+"}`})),(0,g.ttN)().pipe((0,t.P)(y=>y)).subscribe(()=>this._init()),this.filters.enable()}_init(){var y=this;return(0,b.Z)(function*(){const I=location.protocol.includes("https");y._client=e.connect(`ws${I?"s":""}://${location.host}/api/mqtt/`,{username:(0,g.rao)(),password:(0,g.rao)()}),y._client.on("connect",()=>y._connected.next(!0)),y._client.on("message",(N,q)=>{const z=y.findMatchingTopic(N);if(z){let E=q.toString();try{E=JSON.parse(q.toString())}catch{}const k=y._topics[z].getValue().filter(([D])=>D.join("/")!==N);y._topics[z].next([...k,[N.split("/"),E]])}})})()}query(y){if(!this._client)throw new Error("MQTT connection not setup.");if(!this._connected)throw new Error("MQTT connection is pending.");return this._topics[y]||(this._topics[y]=new s.X([])),this._client.subscribe(y,{},I=>null),this._topics[y].asObservable()}findMatchingTopic(y){const I=Object.keys(this._topics),N=y.split("/");for(const q of I){const z=q.split("/");let E=0;for(;E<N.length&&("+"===z[E]||z[E]===N[E]);E++);if(E===N.length)return q}return""}static#e=this.\u0275fac=function(I){return new(I||f)};static#t=this.\u0275prov=o.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})();var v=ce(5997),h=ce(4424);let i=(()=>{class f extends h.c{ngOnInit(){this.updateTime(),this.interval("time",()=>this.updateTime(),1e3)}updateTime(){const y=new Date;this.hour_angle=(y.getHours()%12+y.getMinutes()/60)/12*360,this.minute_angle=(y.getMinutes()+y.getSeconds()/60)/60*360,this.second_angle=y.getSeconds()/60*360}static#e=this.\u0275fac=function(){let y;return function(N){return(y||(y=o.n5z(f)))(N||f)}}();static#t=this.\u0275cmp=o.Xpm({type:f,selectors:[["clock"]],features:[o.qOj],decls:5,vars:6,consts:[[1,"rounded-full","h-12","w-12","border-2","border-base-100","relative"],[1,"hand","absolute","bottom-1/2","left-1/2","bg-base-100","h-3","w-1","rounded"],[1,"hand","absolute","bottom-1/2","left-1/2","bg-base-100","h-4","minute"],[1,"hand","absolute","bottom-1/2","left-1/2","bg-base-100","h-5","w-px"],[1,"absolute","top-1/2","left-1/2","h-2","w-2","transform","-translate-x-1/2","-translate-y-1/2","bg-base-100","rounded-full"]],template:function(I,N){1&I&&(o.TgZ(0,"div",0),o._UZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o.qZA()),2&I&&(o.xp6(1),o.Udp("transform","translateX(-50%) rotate("+N.hour_angle+"deg)"),o.xp6(1),o.Udp("transform","translateX(-50%) rotate("+N.minute_angle+"deg)"),o.xp6(1),o.Udp("transform","translateX(-50%) rotate("+N.second_angle+"deg)"))},styles:[".hand[_ngcontent-%COMP%]{transform-origin:50% 100%}.minute[_ngcontent-%COMP%]{width:2px;border-radius:1px}"]})}return f})();var w=ce(8902);function S(f,_){if(1&f&&(o.TgZ(0,"div",12)(1,"div",13),o._uU(2),o.qZA(),o.TgZ(3,"div",14),o._uU(4),o.qZA(),o.TgZ(5,"div",13),o._uU(6),o.qZA(),o.TgZ(7,"div",13),o._uU(8),o.qZA(),o.TgZ(9,"div",13),o._uU(10),o.ALo(11,"dateFrom"),o.qZA(),o.TgZ(12,"button",15)(13,"app-icon",10),o._uU(14,"done"),o.qZA()()()),2&f){const y=_.$implicit;o.ekj("bg-error",!y.value)("bg-teal-800",y.value),o.xp6(2),o.Oqu(y.mod),o.xp6(2),o.Oqu(y.driver_id),o.xp6(2),o.Oqu(y.ip),o.xp6(2),o.hij(" ",y.value?"Connected":"Disconnected"," "),o.xp6(2),o.hij(" ",o.lcZ(11,9,1e3*y.timestamp)," ")}}function T(f,_){if(1&f&&(o.TgZ(0,"div",8)(1,"div",9)(2,"h2",10),o._uU(3),o.qZA()(),o.YNc(4,S,15,11,"div",11),o.qZA()),2&f){const y=_.$implicit;o.xp6(3),o.AsE(" ",y.display_name||y.name," (",y.id,") "),o.xp6(1),o.Q6J("ngForOf",y.events)}}const P={},M=[{component:(()=>{class f{get time(){return(0,d.Z)(Date.now())}constructor(y){this._state=y,this.systems=new s.X([]),this._state.connected.pipe((0,t.P)(I=>I)).subscribe(()=>this._state.query("placeos/+/state/+/+/+/+/+/+/+/connected").subscribe(I=>this._processQuery(I)))}_processQuery(y){var I=this;return(0,b.Z)(function*(){const N=y.map(([E,k])=>({...k,id:`event-${(0,r.Iy)(999999999999)}`,sys_id:E[6],driver_id:E[7],mod:`${E[8]}_${E[9]}`})),q=(0,r.Tw)(N.map(E=>E.sys_id)),z=[];for(const E of q){const k=P[E]||(yield(0,g.hMA)(E).toPromise());z.push({id:E,...k,events:N.filter(D=>D.sys_id===E)}),P[E]=k}I.systems.next(z)})()}static#e=this.\u0275fac=function(I){return new(I||f)(o.Y36(p))};static#t=this.\u0275cmp=o.Xpm({type:f,selectors:[["mqtt-dashboard"]],decls:16,vars:11,consts:[[1,"h-full","w-full","bg-base-100","[#424242]","flex","flex-col"],[1,"w-full","px-4","py-2","bg-secondary","flex","items-center","justify-between","text-base-100"],[1,"text-2xl"],[1,"flex","items-center","space-x-2"],[1,"text-right","flex","flex-col","items-center","justify-center"],[1,""],[1,"w-full","h-1/2","flex-1","overflow-auto","p-4","space-y-4"],["class","divide-y divide-base-100/50 border border-base-100/50",4,"ngFor","ngForOf"],[1,"divide-y","divide-base-100/50","border","border-base-100/50"],[1,"bg-[#212121]","text-base-100","p-2"],[1,"text-xl"],["class","px-2 flex items-center text-base-100",3,"bg-error","bg-teal-800",4,"ngFor","ngForOf"],[1,"px-2","flex","items-center","text-base-100"],[1,"w-1/6"],[1,"flex-1"],["btn","","icon",""]],template:function(I,N){1&I&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),o._uU(3,"PlaceOS Alerts"),o.qZA(),o.TgZ(4,"div",3),o._UZ(5,"clock"),o.TgZ(6,"div",4)(7,"div",5),o._uU(8),o.ALo(9,"date"),o.qZA(),o.TgZ(10,"div"),o._uU(11),o.ALo(12,"date"),o.qZA()()()(),o.TgZ(13,"div",6),o.YNc(14,T,5,3,"div",7),o.ALo(15,"async"),o.qZA()()),2&I&&(o.xp6(8),o.Oqu(o.xi3(9,3,N.time,"shortTime")),o.xp6(3),o.Oqu(o.xi3(12,6,N.time,"EEE, MMM d")),o.xp6(3),o.Q6J("ngForOf",o.lcZ(15,9,N.systems)))},dependencies:[pe.sg,v.o,i,pe.Ov,pe.uU,w.R],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{z-index:9999}"]})}return f})(),path:""},{path:"**",redirectTo:""}];let H=(()=>{class f{static#e=this.\u0275fac=function(I){return new(I||f)};static#t=this.\u0275mod=o.oAB({type:f});static#r=this.\u0275inj=o.cJS({imports:[pe.ez,j.Bz.forChild(M),Ee.ot,A.lN,K.LD,de.u5,m.X]})}return f})()},8316:(_e,me,ce)=>{_e.exports=function A(K,j,m){function b(s,t){if(!j[s]){if(!K[s]){if(g)return g(s,!0);var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}var n=j[s]={exports:{}};K[s][0].call(n.exports,function(o){return b(K[s][1][o]||o)},n,n.exports,A,K,j,m)}return j[s].exports}for(var g=void 0,d=0;d<m.length;d++)b(m[d]);return b}({1:[function(A,K,j){(function(m,b){(function(){"use strict";const g=A("events").EventEmitter,d=A("./store"),s=A("./topic-alias-recv"),t=A("./topic-alias-send"),r=A("mqtt-packet"),e=A("./default-message-id-provider"),n=A("readable-stream").Writable,o=A("inherits"),a=A("reinterval"),p=A("rfdc/default"),v=A("./validations"),h=A("xtend"),i=A("debug")("mqttjs:client"),w=m?m.nextTick:function(E){setTimeout(E,0)},S=b.setImmediate||function(E){w(E)},T={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},P=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],O={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function f(E,k){let D;k.properties&&(D=k.properties.topicAlias);let $=k.topic.toString();if(0===$.length){if(typeof D>"u")return new Error("Unregistered Topic Alias");if($=E.topicAliasSend.getTopicByAlias(D),typeof $>"u")return new Error("Unregistered Topic Alias");k.topic=$}D&&delete k.properties.topicAlias}function _(E,k,D){i("sendPacket :: packet: %O",k),i("sendPacket :: emitting `packetsend`"),E.emit("packetsend",k),i("sendPacket :: writing to stream");const $=r.writeToStream(k,E.stream,E.options);i("sendPacket :: writeToStream result %s",$),!$&&D&&D!==q?(i("sendPacket :: handle events on `drain` once through callback."),E.stream.once("drain",D)):D&&(i("sendPacket :: invoking cb"),D())}function N(E,k,D,$){i("storeAndSend :: store packet with cmd %s to outgoingStore",k.cmd);let re,ie=k;if("publish"===ie.cmd&&(ie=p(k),re=f(E,ie),re))return D&&D(re);E.outgoingStore.put(ie,function(W){if(W)return D&&D(W);$(),_(E,k,D)})}function q(E){i("nop ::",E)}function z(E,k){let D;const $=this;if(!(this instanceof z))return new z(E,k);for(D in this.options=k||{},T)this.options[D]=typeof this.options[D]>"u"?T[D]:k[D];i("MqttClient :: options.protocol",k.protocol),i("MqttClient :: options.protocolVersion",k.protocolVersion),i("MqttClient :: options.username",k.username),i("MqttClient :: options.keepalive",k.keepalive),i("MqttClient :: options.reconnectPeriod",k.reconnectPeriod),i("MqttClient :: options.rejectUnauthorized",k.rejectUnauthorized),i("MqttClient :: options.topicAliasMaximum",k.topicAliasMaximum),this.options.clientId="string"==typeof k.clientId?k.clientId:function M(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}(),i("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===k.protocolVersion&&k.customHandleAcks?k.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=E,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new e:this.options.messageIdProvider,this.outgoingStore=k.outgoingStore||new d,this.incomingStore=k.incomingStore||new d,this.queueQoSZero=void 0===k.queueQoSZero||k.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,k.topicAliasMaximum>0&&(k.topicAliasMaximum>65535?i("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new s(k.topicAliasMaximum)),this.on("connect",function(){const ie=this.queue;i("connect :: sending queued packets"),function re(){const Q=ie.shift();i("deliver :: entry %o",Q);let W=null;if(!Q)return void $._resubscribe();W=Q.packet,i("deliver :: call _sendPacket for %o",W);let te=!0;W.messageId&&0!==W.messageId&&($.messageIdProvider.register(W.messageId)||(te=!1)),te?$._sendPacket(W,function(J){Q.cb&&Q.cb(J),re()}):(i("messageId: %d has already used. The message is skipped and removed.",W.messageId),re())}()}),this.on("close",function(){i("close :: connected set to `false`"),this.connected=!1,i("close :: clearing connackTimer"),clearTimeout(this.connackTimer),i("close :: clearing ping timer"),null!==$.pingTimer&&($.pingTimer.clear(),$.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),i("close :: calling _setupReconnect"),this._setupReconnect()}),g.call(this),i("MqttClient :: setting up stream"),this._setupStream()}o(z,g),z.prototype._setupStream=function(){const E=this,k=new n,D=r.parser(this.options);let $=null;const ie=[];function re(){if(ie.length)w(Q);else{const J=$;$=null,J()}}function Q(){i("work :: getting next packet in queue");const J=ie.shift();if(J)i("work :: packet pulled from queue"),E._handlePacket(J,re);else{i("work :: no packets in queue");const se=$;$=null,i("work :: done flag is %s",!!se),se&&se()}}i("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),i("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),D.on("packet",function(J){i("parser :: on packet push to packets array."),ie.push(J)}),k._write=function(J,se,ne){$=ne,i("writable stream :: parsing buffer"),D.parse(J),Q()},i("_setupStream :: pipe stream to writable stream"),this.stream.pipe(k),this.stream.on("error",function W(J){i("streamErrorHandler :: error",J.message),P.includes(J.code)?(i("streamErrorHandler :: emitting error"),E.emit("error",J)):q(J)}),this.stream.on("close",function(){i("(%s)stream :: on close",E.options.clientId),function I(E){E&&(i("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(E).forEach(function(k){E[k].volatile&&"function"==typeof E[k].cb&&(E[k].cb(new Error("Connection closed")),delete E[k])}))}(E.outgoing),i("stream: emit close to MqttClient"),E.emit("close")}),i("_setupStream: sending packet `connect`");const te=Object.create(this.options);if(te.cmd="connect",this.topicAliasRecv&&(te.properties||(te.properties={}),this.topicAliasRecv&&(te.properties.topicAliasMaximum=this.topicAliasRecv.max)),_(this,te),D.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return E.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&_(this,h({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){i("!!connectTimeout hit!! Calling _cleanUp with force `true`"),E._cleanUp(!0)},this.options.connectTimeout)},z.prototype._handlePacket=function(E,k){const D=this.options;if(5===D.protocolVersion&&D.properties&&D.properties.maximumPacketSize&&D.properties.maximumPacketSize<E.length)return this.emit("error",new Error("exceeding packets size "+E.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(i("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",E),E.cmd){case"publish":this._handlePublish(E,k);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(E),k();break;case"pubrel":this._handlePubrel(E,k);break;case"connack":this._handleConnack(E),k();break;case"auth":this._handleAuth(E),k();break;case"pingresp":this._handlePingresp(E),k();break;case"disconnect":this._handleDisconnect(E),k()}},z.prototype._checkDisconnecting=function(E){return this.disconnecting&&(E&&E!==q?E(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},z.prototype.publish=function(E,k,D,$){i("publish :: message `%s` to topic `%s`",k,E);const ie=this.options;if("function"==typeof D&&($=D,D=null),D=h({qos:0,retain:!1,dup:!1},D),this._checkDisconnecting($))return this;const Q=this,W=function(){let te=0;if((1===D.qos||2===D.qos)&&(te=Q._nextId(),null===te))return i("No messageId left"),!1;const J={cmd:"publish",topic:E,payload:k,qos:D.qos,retain:D.retain,messageId:te,dup:D.dup};switch(5===ie.protocolVersion&&(J.properties=D.properties),i("publish :: qos",D.qos),D.qos){case 1:case 2:Q.outgoing[J.messageId]={volatile:!1,cb:$||q},i("MqttClient:publish: packet cmd: %s",J.cmd),Q._sendPacket(J,void 0,D.cbStorePut);break;default:i("MqttClient:publish: packet cmd: %s",J.cmd),Q._sendPacket(J,$,D.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!W())&&this._storeProcessingQueue.push({invoke:W,cbStorePut:D.cbStorePut,callback:$}),this},z.prototype.subscribe=function(){const E=this,k=new Array(arguments.length);for(let ne=0;ne<arguments.length;ne++)k[ne]=arguments[ne];const D=[];let $=k.shift();const ie=$.resubscribe;let re=k.pop()||q,Q=k.pop();const W=this.options.protocolVersion;delete $.resubscribe,"string"==typeof $&&($=[$]),"function"!=typeof re&&(Q=re,re=q);const te=v.validateTopics($);if(null!==te)return S(re,new Error("Invalid topic "+te)),this;if(this._checkDisconnecting(re))return i("subscribe: discconecting true"),this;const J={qos:0};if(5===W&&(J.nl=!1,J.rap=!1,J.rh=0),Q=h(J,Q),Array.isArray($)?$.forEach(function(ne){if(i("subscribe: array topic %s",ne),!Object.prototype.hasOwnProperty.call(E._resubscribeTopics,ne)||E._resubscribeTopics[ne].qos<Q.qos||ie){const V={topic:ne,qos:Q.qos};5===W&&(V.nl=Q.nl,V.rap=Q.rap,V.rh=Q.rh,V.properties=Q.properties),i("subscribe: pushing topic `%s` and qos `%s` to subs list",V.topic,V.qos),D.push(V)}}):Object.keys($).forEach(function(ne){if(i("subscribe: object topic %s",ne),!Object.prototype.hasOwnProperty.call(E._resubscribeTopics,ne)||E._resubscribeTopics[ne].qos<$[ne].qos||ie){const V={topic:ne,qos:$[ne].qos};5===W&&(V.nl=$[ne].nl,V.rap=$[ne].rap,V.rh=$[ne].rh,V.properties=Q.properties),i("subscribe: pushing `%s` to subs list",V),D.push(V)}}),!D.length)return re(null,[]),this;const se=function(){const ne=E._nextId();if(null===ne)return i("No messageId left"),!1;const V={cmd:"subscribe",subscriptions:D,qos:1,retain:!1,dup:!1,messageId:ne};if(Q.properties&&(V.properties=Q.properties),E.options.resubscribe){i("subscribe :: resubscribe true");const B=[];D.forEach(function(Y){if(E.options.reconnectPeriod>0){const oe={qos:Y.qos};5===W&&(oe.nl=Y.nl||!1,oe.rap=Y.rap||!1,oe.rh=Y.rh||0,oe.properties=Y.properties),E._resubscribeTopics[Y.topic]=oe,B.push(Y.topic)}}),E.messageIdToTopic[V.messageId]=B}return E.outgoing[V.messageId]={volatile:!0,cb:function(B,Y){if(!B){const oe=Y.granted;for(let L=0;L<oe.length;L+=1)D[L].qos=oe[L]}re(B,D)}},i("subscribe :: call _sendPacket"),E._sendPacket(V),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!se())&&this._storeProcessingQueue.push({invoke:se,callback:re}),this},z.prototype.unsubscribe=function(){const E=this,k=new Array(arguments.length);for(let W=0;W<arguments.length;W++)k[W]=arguments[W];let D=k.shift(),$=k.pop()||q,ie=k.pop();"string"==typeof D&&(D=[D]),"function"!=typeof $&&(ie=$,$=q);const re=v.validateTopics(D);if(null!==re)return S($,new Error("Invalid topic "+re)),this;if(E._checkDisconnecting($))return this;const Q=function(){const W=E._nextId();if(null===W)return i("No messageId left"),!1;const te={cmd:"unsubscribe",qos:1,messageId:W};return"string"==typeof D?te.unsubscriptions=[D]:Array.isArray(D)&&(te.unsubscriptions=D),E.options.resubscribe&&te.unsubscriptions.forEach(function(J){delete E._resubscribeTopics[J]}),"object"==typeof ie&&ie.properties&&(te.properties=ie.properties),E.outgoing[te.messageId]={volatile:!0,cb:$},i("unsubscribe: call _sendPacket"),E._sendPacket(te),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Q())&&this._storeProcessingQueue.push({invoke:Q,callback:$}),this},z.prototype.end=function(E,k,D){const $=this;function ie(){i("end :: closeStores: closing incoming and outgoing stores"),$.disconnected=!0,$.incomingStore.close(function(Q){$.outgoingStore.close(function(W){if(i("end :: closeStores: emitting end"),$.emit("end"),D){const te=Q||W;i("end :: closeStores: invoking callback with args"),D(te)}})}),$._deferredReconnect&&$._deferredReconnect()}function re(){i("end :: (%s) :: finish :: calling _cleanUp with force %s",$.options.clientId,E),$._cleanUp(E,()=>{i("end :: finish :: calling process.nextTick on closeStores"),w(ie.bind($))},k)}return i("end :: (%s)",this.options.clientId),(null==E||"boolean"!=typeof E)&&(D=k||q,k=E,E=!1,"object"!=typeof k&&(D=k,k=null,"function"!=typeof D&&(D=q))),"object"!=typeof k&&(D=k,k=null),i("end :: cb? %s",!!D),D=D||q,this.disconnecting?(D(),this):(this._clearReconnect(),this.disconnecting=!0,!E&&Object.keys(this.outgoing).length>0?(i("end :: (%s) :: calling finish in 10ms once outgoing is empty",$.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,re,10))):(i("end :: (%s) :: immediately calling finish",$.options.clientId),re()),this)},z.prototype.removeOutgoingMessage=function(E){const k=this.outgoing[E]?this.outgoing[E].cb:null;return delete this.outgoing[E],this.outgoingStore.del({messageId:E},function(){k(new Error("Message removed"))}),this},z.prototype.reconnect=function(E){i("client reconnect");const k=this,D=function(){E?(k.options.incomingStore=E.incomingStore,k.options.outgoingStore=E.outgoingStore):(k.options.incomingStore=null,k.options.outgoingStore=null),k.incomingStore=k.options.incomingStore||new d,k.outgoingStore=k.options.outgoingStore||new d,k.disconnecting=!1,k.disconnected=!1,k._deferredReconnect=null,k._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=D:D(),this},z.prototype._reconnect=function(){i("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),i("client already connected. disconnecting first.")):(i("_reconnect: calling _setupStream"),this._setupStream())},z.prototype._setupReconnect=function(){const E=this;!E.disconnecting&&!E.reconnectTimer&&E.options.reconnectPeriod>0?(this.reconnecting||(i("_setupReconnect :: emit `offline` state"),this.emit("offline"),i("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),i("_setupReconnect :: setting reconnectTimer for %d ms",E.options.reconnectPeriod),E.reconnectTimer=setInterval(function(){i("reconnectTimer :: reconnect triggered!"),E._reconnect()},E.options.reconnectPeriod)):i("_setupReconnect :: doing nothing...")},z.prototype._clearReconnect=function(){i("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},z.prototype._cleanUp=function(E,k){const D=arguments[2];if(k&&(i("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",k)),i("_cleanUp :: forced? %s",E),E)0===this.options.reconnectPeriod&&this.options.clean&&function y(E){E&&(i("flush: queue exists? %b",!!E),Object.keys(E).forEach(function(k){"function"==typeof E[k].cb&&(E[k].cb(new Error("Connection closed")),delete E[k])}))}(this.outgoing),i("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const $=h({cmd:"disconnect"},D);i("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket($,S.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(i("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(i("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),k&&!this.connected&&(i("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",k),k())},z.prototype._sendPacket=function(E,k,D){i("_sendPacket :: (%s) ::  start",this.options.clientId),D=D||q,k=k||q;const $=function H(E,k){if(5===E.options.protocolVersion&&"publish"===k.cmd){let D;k.properties&&(D=k.properties.topicAlias);const $=k.topic.toString();if(E.topicAliasSend)if(D){if(0!==$.length&&(i("applyTopicAlias :: register topic: %s - alias: %d",$,D),!E.topicAliasSend.put($,D)))return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",$,D),new Error("Sending Topic Alias out of range")}else 0!==$.length&&(E.options.autoAssignTopicAlias?(D=E.topicAliasSend.getAliasByTopic($),D?(k.topic="",k.properties={...k.properties,topicAlias:D},i("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",$,D)):(D=E.topicAliasSend.getLruAlias(),E.topicAliasSend.put($,D),k.properties={...k.properties,topicAlias:D},i("applyTopicAlias :: auto assign topic: %s - alias: %d",$,D))):E.options.autoUseTopicAlias&&(D=E.topicAliasSend.getAliasByTopic($),D&&(k.topic="",k.properties={...k.properties,topicAlias:D},i("applyTopicAlias :: auto use topic: %s - alias: %d",$,D))));else if(D)return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",$,D),new Error("Sending Topic Alias out of range")}}(this,E);if($)k($);else{if(!this.connected)return"auth"===E.cmd?(this._shiftPingInterval(),void _(this,E,k)):(i("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(E,k,D));switch(this._shiftPingInterval(),E.cmd){case"publish":break;case"pubrel":return void N(this,E,k,D);default:return void _(this,E,k)}switch(E.qos){case 2:case 1:N(this,E,k,D);break;default:_(this,E,k)}i("_sendPacket :: (%s) ::  end",this.options.clientId)}},z.prototype._storePacket=function(E,k,D){i("_storePacket :: packet: %o",E),i("_storePacket :: cb? %s",!!k),D=D||q;let $=E;if("publish"===$.cmd){$=p(E);const ie=f(this,$);if(ie)return k&&k(ie)}0===($.qos||0)&&this.queueQoSZero||"publish"!==$.cmd?this.queue.push({packet:$,cb:k}):$.qos>0?(k=this.outgoing[$.messageId]?this.outgoing[$.messageId].cb:null,this.outgoingStore.put($,function(ie){if(ie)return k&&k(ie);D()})):k&&k(new Error("No connection to broker"))},z.prototype._setupPingTimer=function(){i("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const E=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=a(function(){E._checkPing()},1e3*this.options.keepalive))},z.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},z.prototype._checkPing=function(){i("_checkPing :: checking ping..."),this.pingResp?(i("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(i("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},z.prototype._handlePingresp=function(){this.pingResp=!0},z.prototype._handleConnack=function(E){i("_handleConnack");const k=this.options,$=5===k.protocolVersion?E.reasonCode:E.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,E.properties){if(E.properties.topicAliasMaximum){if(E.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));E.properties.topicAliasMaximum>0&&(this.topicAliasSend=new t(E.properties.topicAliasMaximum))}E.properties.serverKeepAlive&&k.keepalive&&(k.keepalive=E.properties.serverKeepAlive,this._shiftPingInterval()),E.properties.maximumPacketSize&&(k.properties||(k.properties={}),k.properties.maximumPacketSize=E.properties.maximumPacketSize)}if(0===$)this.reconnecting=!1,this._onConnect(E);else if($>0){const ie=new Error("Connection refused: "+O[$]);ie.code=$,this.emit("error",ie)}},z.prototype._handleAuth=function(E){const D=this.options.protocolVersion,$=5===D?E.reasonCode:E.returnCode;if(5!==D){const re=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+D);return re.code=$,void this.emit("error",re)}const ie=this;this.handleAuth(E,function(re,Q){if(re)ie.emit("error",re);else if(24===$)ie.reconnecting=!1,ie._sendPacket(Q);else{const W=new Error("Connection refused: "+O[$]);re.code=$,ie.emit("error",W)}})},z.prototype.handleAuth=function(E,k){k()},z.prototype._handlePublish=function(E,k){i("_handlePublish: packet %o",E),k=typeof k<"u"?k:q;let D=E.topic.toString();const $=E.payload,ie=E.qos,re=E.messageId,Q=this,W=this.options,te=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let J;if(E.properties&&(J=E.properties.topicAlias),typeof J<"u")if(0===D.length){if(!(J>0&&J<=65535))return i("_handlePublish :: topic alias out of range. alias: %d",J),void this.emit("error",new Error("Received Topic Alias is out of range"));{const se=this.topicAliasRecv.getTopicByAlias(J);if(!se)return i("_handlePublish :: unregistered topic alias. alias: %d",J),void this.emit("error",new Error("Received unregistered Topic Alias"));D=se,i("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",D,J)}}else{if(!this.topicAliasRecv.put(D,J))return i("_handlePublish :: topic alias out of range. alias: %d",J),void this.emit("error",new Error("Received Topic Alias is out of range"));i("_handlePublish :: registered topic: %s - alias: %d",D,J)}}switch(i("_handlePublish: qos %d",ie),ie){case 2:W.customHandleAcks(D,$,E,function(J,se){return J instanceof Error||(se=J,J=null),J?Q.emit("error",J):-1===te.indexOf(se)?Q.emit("error",new Error("Wrong reason code for pubrec")):void(se?Q._sendPacket({cmd:"pubrec",messageId:re,reasonCode:se},k):Q.incomingStore.put(E,function(){Q._sendPacket({cmd:"pubrec",messageId:re},k)}))});break;case 1:W.customHandleAcks(D,$,E,function(J,se){return J instanceof Error||(se=J,J=null),J?Q.emit("error",J):-1===te.indexOf(se)?Q.emit("error",new Error("Wrong reason code for puback")):(se||Q.emit("message",D,$,E),void Q.handleMessage(E,function(ne){if(ne)return k&&k(ne);Q._sendPacket({cmd:"puback",messageId:re,reasonCode:se},k)}))});break;case 0:this.emit("message",D,$,E),this.handleMessage(E,k);break;default:i("_handlePublish: unknown QoS. Doing nothing.")}},z.prototype.handleMessage=function(E,k){k()},z.prototype._handleAck=function(E){const k=E.messageId,D=E.cmd;let $=null;const ie=this.outgoing[k]?this.outgoing[k].cb:null,re=this;let Q;if(ie){switch(i("_handleAck :: packet type",D),D){case"pubcomp":case"puback":{const W=E.reasonCode;W&&W>0&&16!==W&&(Q=new Error("Publish error: "+O[W]),Q.code=W,ie(Q,E)),delete this.outgoing[k],this.outgoingStore.del(E,ie),this.messageIdProvider.deallocate(k),this._invokeStoreProcessingQueue();break}case"pubrec":{$={cmd:"pubrel",qos:2,messageId:k};const W=E.reasonCode;W&&W>0&&16!==W?(Q=new Error("Publish error: "+O[W]),Q.code=W,ie(Q,E)):this._sendPacket($);break}case"suback":delete this.outgoing[k],this.messageIdProvider.deallocate(k);for(let W=0;W<E.granted.length;W++)if(128&E.granted[W]){const te=this.messageIdToTopic[k];te&&te.forEach(function(J){delete re._resubscribeTopics[J]})}this._invokeStoreProcessingQueue(),ie(null,E);break;case"unsuback":delete this.outgoing[k],this.messageIdProvider.deallocate(k),this._invokeStoreProcessingQueue(),ie(null);break;default:re.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else i("_handleAck :: Server sent an ack in error. Ignoring.")},z.prototype._handlePubrel=function(E,k){i("handling pubrel packet"),k=typeof k<"u"?k:q;const $=this,ie={cmd:"pubcomp",messageId:E.messageId};$.incomingStore.get(E,function(re,Q){re?$._sendPacket(ie,k):($.emit("message",Q.topic,Q.payload,Q),$.handleMessage(Q,function(W){if(W)return k(W);$.incomingStore.del(Q,q),$._sendPacket(ie,k)}))})},z.prototype._handleDisconnect=function(E){this.emit("disconnect",E)},z.prototype._nextId=function(){return this.messageIdProvider.allocate()},z.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},z.prototype._resubscribe=function(){i("_resubscribe");const E=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&E.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){i("_resubscribe: protocolVersion 5");for(let k=0;k<E.length;k++){const D={};D[E[k]]=this._resubscribeTopics[E[k]],D.resubscribe=!0,this.subscribe(D,{properties:D[E[k]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},z.prototype._onConnect=function(E){if(this.disconnected)return void this.emit("connect",E);const k=this;this.connackPacket=E,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function D(){let $=k.outgoingStore.createStream();function ie(){k._storeProcessing=!1,k._packetIdsDuringStoreProcessing={}}function re(){$.destroy(),$=null,k._flushStoreProcessingQueue(),ie()}k.once("close",re),$.on("error",function(W){ie(),k._flushStoreProcessingQueue(),k.removeListener("close",re),k.emit("error",W)}),$.on("end",function(){let W=!0;for(const te in k._packetIdsDuringStoreProcessing)if(!k._packetIdsDuringStoreProcessing[te]){W=!1;break}W?(ie(),k.removeListener("close",re),k._invokeAllStoreProcessingQueue(),k.emit("connect",E)):D()}),function Q(){if(!$)return;k._storeProcessing=!0;const W=$.read(1);let te;W?k._packetIdsDuringStoreProcessing[W.messageId]?Q():k.disconnecting||k.reconnectTimer?$.destroy&&$.destroy():(te=k.outgoing[W.messageId]?k.outgoing[W.messageId].cb:null,k.outgoing[W.messageId]={volatile:!1,cb:function(J,se){te&&te(J,se),Q()}},k._packetIdsDuringStoreProcessing[W.messageId]=!0,k.messageIdProvider.register(W.messageId)?k._sendPacket(W):i("messageId: %d has already used.",W.messageId)):$.once("readable",Q)}()}()},z.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const E=this._storeProcessingQueue[0];if(E&&E.invoke())return this._storeProcessingQueue.shift(),!0}return!1},z.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},z.prototype._flushStoreProcessingQueue=function(){for(const E of this._storeProcessingQueue)E.cbStorePut&&E.cbStorePut(new Error("Connection closed")),E.callback&&E.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},K.exports=z}).call(this)}).call(this,A("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(A,K,j){"use strict";const{Buffer:m}=A("buffer"),b=A("readable-stream").Transform,g=A("duplexify");let d,s,t,r=!1;K.exports=function p(v,h){if(h.hostname=h.hostname||h.host,!h.hostname)throw new Error("Could not determine host. Specify host manually.");const i="MQIsdp"===h.protocolId&&3===h.protocolVersion?"mqttv3.1":"mqtt";!function n(v){v.hostname||(v.hostname="localhost"),v.path||(v.path="/"),v.wsOptions||(v.wsOptions={})}(h);const w=function o(v,h){const i="alis"===v.protocol?"wss":"ws";let w=i+"://"+v.hostname+v.path;return v.port&&80!==v.port&&443!==v.port&&(w=i+"://"+v.hostname+":"+v.port+v.path),"function"==typeof v.transformWsUrl&&(w=v.transformWsUrl(w,v,h)),w}(h,v);return d=h.my,d.connectSocket({url:w,protocols:i}),s=function e(){const v=new b;return v._write=function(h,i,w){d.sendSocketMessage({data:h.buffer,success:function(){w()},fail:function(){w(new Error)}})},v._flush=function(i){d.closeSocket({success:function(){i()}})},v}(),t=g.obj(),function a(){r||(r=!0,d.onSocketOpen(function(){t.setReadable(s),t.setWritable(s),t.emit("connect")}),d.onSocketMessage(function(v){if("string"==typeof v.data){const h=m.from(v.data,"base64");s.push(h)}else{const h=new FileReader;h.addEventListener("load",function(){let i=h.result;i=i instanceof ArrayBuffer?m.from(i):m.from(i,"utf8"),s.push(i)}),h.readAsArrayBuffer(v.data)}}),d.onSocketClose(function(){t.end(),t.destroy()}),d.onSocketError(function(v){t.destroy(v)}))}(),t}},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(A,K,j){"use strict";const m=A("net"),b=A("debug")("mqttjs:tcp");K.exports=function g(d,s){s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";const t=s.port,r=s.hostname;return b("port %d and host %s",t,r),m.createConnection(t,r)}},{debug:18,net:16}],4:[function(A,K,j){"use strict";const m=A("tls"),b=A("net"),g=A("debug")("mqttjs:tls");K.exports=function d(s,t){t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===b.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,g("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);const r=m.connect(t);function e(n){t.rejectUnauthorized&&s.emit("error",n),r.end()}return r.on("secureConnect",function(){t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",e)}),r.on("error",e),r}},{debug:18,net:16,tls:16}],5:[function(A,K,j){(function(m){(function(){"use strict";const{Buffer:b}=A("buffer"),g=A("ws"),d=A("debug")("mqttjs:ws"),s=A("duplexify"),t=A("readable-stream").Transform,r=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],e=typeof m<"u"&&"browser"===m.title||"function"==typeof ce;function n(w,S){let T=w.protocol+"://"+w.hostname+":"+w.port+w.path;return"function"==typeof w.transformWsUrl&&(T=w.transformWsUrl(T,w,S)),T}function o(w){const S=w;return w.hostname||(S.hostname="localhost"),w.port||(S.port="wss"===w.protocol?443:80),w.path||(S.path="/"),w.wsOptions||(S.wsOptions={}),!e&&"wss"===w.protocol&&r.forEach(function(T){Object.prototype.hasOwnProperty.call(w,T)&&!Object.prototype.hasOwnProperty.call(w.wsOptions,T)&&(S.wsOptions[T]=w[T])}),S}K.exports=e?function i(w,S){let T;d("browserStreamBuilder");const O=function a(w){const S=o(w);if(S.hostname||(S.hostname=S.host),!S.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const T=new URL(document.URL);S.hostname=T.hostname,S.port||(S.port=T.port)}return void 0===S.objectMode&&(S.objectMode=!(!0===S.binary||void 0===S.binary)),S}(S).browserBufferSize||524288,M=S.browserBufferTimeout||1e3,H=!S.objectMode,f=function v(w,S){const T="MQIsdp"===S.protocolId&&3===S.protocolVersion?"mqttv3.1":"mqtt",P=n(S,w),O=new WebSocket(P,[T]);return O.binaryType="arraybuffer",O}(w,S),_=function I(ie,re,Q){const W=new t({objectModeMode:ie.objectMode});return W._write=re,W._flush=Q,W}(S,function D(ie,re,Q){f.bufferedAmount>O&&setTimeout(D,M,ie,re,Q),H&&"string"==typeof ie&&(ie=b.from(ie,"utf8"));try{f.send(ie)}catch(W){return Q(W)}Q()},function $(ie){f.close(),ie()});S.objectMode||(_._writev=k),_.on("close",()=>{f.close()});const y=typeof f.addEventListener<"u";function N(){T.setReadable(_),T.setWritable(_),T.emit("connect")}function q(){T.end(),T.destroy()}function z(ie){T.destroy(ie)}function E(ie){let re=ie.data;re=re instanceof ArrayBuffer?b.from(re):b.from(re,"utf8"),_.push(re)}function k(ie,re){const Q=new Array(ie.length);for(let W=0;W<ie.length;W++)Q[W]="string"==typeof ie[W].chunk?b.from(ie[W],"utf8"):ie[W].chunk;this._write(b.concat(Q),"binary",re)}return f.readyState===f.OPEN?T=_:(T=T=s(void 0,void 0,S),S.objectMode||(T._writev=k),y?f.addEventListener("open",N):f.onopen=N),T.socket=f,y?(f.addEventListener("close",q),f.addEventListener("error",z),f.addEventListener("message",E)):(f.onclose=q,f.onerror=z,f.onmessage=E),T}:function h(w,S){d("streamBuilder");const T=o(S),P=n(T,w),O=function p(w,S,T){d("createWebSocket"),d("protocol: "+T.protocolId+" "+T.protocolVersion);const P="MQIsdp"===T.protocolId&&3===T.protocolVersion?"mqttv3.1":"mqtt";return d("creating new Websocket for url: "+S+" and protocol: "+P),new g(S,[P],T.wsOptions)}(0,P,T),M=g.createWebSocketStream(O,T.wsOptions);return M.url=P,O.on("close",()=>{M.destroy()}),M}}).call(this)}).call(this,A("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(A,K,j){"use strict";const{Buffer:m}=A("buffer"),b=A("readable-stream").Transform,g=A("duplexify");let d,s,t;K.exports=function a(p,v){if(v.hostname=v.hostname||v.host,!v.hostname)throw new Error("Could not determine host. Specify host manually.");const h="MQIsdp"===v.protocolId&&3===v.protocolVersion?"mqttv3.1":"mqtt";!function e(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}(v);const i=function n(p,v){const h="wxs"===p.protocol?"wss":"ws";let i=h+"://"+p.hostname+p.path;return p.port&&80!==p.port&&443!==p.port&&(i=h+"://"+p.hostname+":"+p.port+p.path),"function"==typeof p.transformWsUrl&&(i=p.transformWsUrl(i,p,v)),i}(v,p);d=wx.connectSocket({url:i,protocols:[h]}),s=function r(){const p=new b;return p._write=function(v,h,i){d.send({data:v.buffer,success:function(){i()},fail:function(w){i(new Error(w))}})},p._flush=function(h){d.close({success:function(){h()}})},p}(),t=g.obj(),t._destroy=function(S,T){d.close({success:function(){T&&T(S)}})};const w=t.destroy;return t.destroy=function(){t.destroy=w;const S=this;setTimeout(function(){d.close({fail:function(){S._destroy(new Error)}})},0)}.bind(t),function o(){d.onOpen(function(){t.setReadable(s),t.setWritable(s),t.emit("connect")}),d.onMessage(function(p){let v=p.data;v=v instanceof ArrayBuffer?m.from(v):m.from(v,"utf8"),s.push(v)}),d.onClose(function(){t.end(),t.destroy()}),d.onError(function(p){t.destroy(new Error(p.errMsg))})}(),t}},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(A,K,j){"use strict";function m(){if(!(this instanceof m))return new m;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}m.prototype.allocate=function(){const b=this.nextId++;return 65536===this.nextId&&(this.nextId=1),b},m.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},m.prototype.register=function(b){return!0},m.prototype.deallocate=function(b){},m.prototype.clear=function(){},K.exports=m},{}],8:[function(A,K,j){"use strict";const m=A("xtend"),b=A("readable-stream").Readable,g={objectMode:!0},d={clean:!0};function s(t){if(!(this instanceof s))return new s(t);this.options=t||{},this.options=m(d,t),this._inflights=new Map}s.prototype.put=function(t,r){return this._inflights.set(t.messageId,t),r&&r(),this},s.prototype.createStream=function(){const t=new b(g),r=[];let e=!1,n=0;return this._inflights.forEach(function(o,a){r.push(o)}),t._read=function(){this.push(!e&&n<r.length?r[n++]:null)},t.destroy=function(){if(e)return;const o=this;e=!0,setTimeout(function(){o.emit("close")},0)},t},s.prototype.del=function(t,r){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),r(null,t)):r&&r(new Error("missing packet")),this},s.prototype.get=function(t,r){return(t=this._inflights.get(t.messageId))?r(null,t):r&&r(new Error("missing packet")),this},s.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},K.exports=s},{"readable-stream":69,xtend:81}],9:[function(A,K,j){"use strict";function m(b){if(!(this instanceof m))return new m(b);this.aliasToTopic={},this.max=b}m.prototype.put=function(b,g){return!(0===g||g>this.max||(this.aliasToTopic[g]=b,this.length=Object.keys(this.aliasToTopic).length,0))},m.prototype.getTopicByAlias=function(b){return this.aliasToTopic[b]},m.prototype.clear=function(){this.aliasToTopic={}},K.exports=m},{}],10:[function(A,K,j){"use strict";const m=A("lru-cache"),b=A("number-allocator").NumberAllocator;function g(d){if(!(this instanceof g))return new g(d);d>0&&(this.aliasToTopic=new m({max:d}),this.topicToAlias={},this.numberAllocator=new b(1,d),this.max=d,this.length=0)}g.prototype.put=function(d,s){if(0===s||s>this.max)return!1;const t=this.aliasToTopic.get(s);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(s,d),this.topicToAlias[d]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.length,!0},g.prototype.getTopicByAlias=function(d){return this.aliasToTopic.get(d)},g.prototype.getAliasByTopic=function(d){const s=this.topicToAlias[d];return typeof s<"u"&&this.aliasToTopic.get(s),s},g.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},g.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},K.exports=g},{"lru-cache":37,"number-allocator":46}],11:[function(A,K,j){"use strict";function m(g){const d=g.split("/");for(let s=0;s<d.length;s++)if("+"!==d[s]){if("#"===d[s])return s===d.length-1;if(-1!==d[s].indexOf("+")||-1!==d[s].indexOf("#"))return!1}return!0}K.exports={validateTopics:function b(g){if(0===g.length)return"empty_topic_list";for(let d=0;d<g.length;d++)if(!m(g[d]))return g[d];return null}}},{}],12:[function(A,K,j){(function(m){(function(){"use strict";const b=A("../client"),g=A("../store"),d=A("url"),s=A("xtend"),t=A("debug")("mqttjs"),r={};function n(o,a){if(t("connecting to an MQTT broker..."),"object"==typeof o&&!a&&(a=o,o=null),a=a||{},o){const h=d.parse(o,!0);if(null!=h.port&&(h.port=Number(h.port)),null===(a=s(h,a)).protocol)throw new Error("Missing protocol");a.protocol=a.protocol.replace(/:$/,"")}if(function e(o){let a;o.auth&&(a=o.auth.match(/^(.+):(.+)$/),a?(o.username=a[1],o.password=a[2]):o.username=o.auth)}(a),a.query&&"string"==typeof a.query.clientId&&(a.clientId=a.query.clientId),a.cert&&a.key){if(!a.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(a.protocol))switch(a.protocol){case"mqtt":a.protocol="mqtts";break;case"ws":a.protocol="wss";break;case"wx":a.protocol="wxs";break;case"ali":a.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+a.protocol+'"!')}}if(!r[a.protocol]){const h=-1!==["mqtts","wss"].indexOf(a.protocol);a.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(i,w){return(!h||w%2!=0)&&"function"==typeof r[i]})[0]}if(!1===a.clean&&!a.clientId)throw new Error("Missing clientId for unclean clients");a.protocol&&(a.defaultProtocol=a.protocol);const v=new b(function p(h){return a.servers&&((!h._reconnectCount||h._reconnectCount===a.servers.length)&&(h._reconnectCount=0),a.host=a.servers[h._reconnectCount].host,a.port=a.servers[h._reconnectCount].port,a.protocol=a.servers[h._reconnectCount].protocol?a.servers[h._reconnectCount].protocol:a.defaultProtocol,a.hostname=a.host,h._reconnectCount++),t("calling streambuilder for",a.protocol),r[a.protocol](h,a)},a);return v.on("error",function(){}),v}typeof m<"u"&&"browser"!==m.title||"function"!=typeof ce?(r.mqtt=A("./tcp"),r.tcp=A("./tcp"),r.ssl=A("./tls"),r.tls=A("./tls"),r.mqtts=A("./tls")):(r.wx=A("./wx"),r.wxs=A("./wx"),r.ali=A("./ali"),r.alis=A("./ali")),r.ws=A("./ws"),r.wss=A("./ws"),K.exports=n,K.exports.connect=n,K.exports.MqttClient=b,K.exports.Store=g}).call(this)}).call(this,A("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(A,K,j){"use strict";j.byteLength=function e(h){var i=r(h),S=i[1];return 3*(i[0]+S)/4-S},j.toByteArray=function o(h){var i,H,w=r(h),S=w[0],T=w[1],P=new g(function n(h,i,w){return 3*(i+w)/4-w}(0,S,T)),O=0,M=T>0?S-4:S;for(H=0;H<M;H+=4)i=b[h.charCodeAt(H)]<<18|b[h.charCodeAt(H+1)]<<12|b[h.charCodeAt(H+2)]<<6|b[h.charCodeAt(H+3)],P[O++]=i>>16&255,P[O++]=i>>8&255,P[O++]=255&i;return 2===T&&(i=b[h.charCodeAt(H)]<<2|b[h.charCodeAt(H+1)]>>4,P[O++]=255&i),1===T&&(i=b[h.charCodeAt(H)]<<10|b[h.charCodeAt(H+1)]<<4|b[h.charCodeAt(H+2)]>>2,P[O++]=i>>8&255,P[O++]=255&i),P},j.fromByteArray=function v(h){for(var i,w=h.length,S=w%3,T=[],P=16383,O=0,M=w-S;O<M;O+=P)T.push(p(h,O,O+P>M?M:O+P));return 1===S?T.push(m[(i=h[w-1])>>2]+m[i<<4&63]+"=="):2===S&&T.push(m[(i=(h[w-2]<<8)+h[w-1])>>10]+m[i>>4&63]+m[i<<2&63]+"="),T.join("")};for(var m=[],b=[],g=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)m[s]=d[s],b[d.charCodeAt(s)]=s;function r(h){var i=h.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=h.indexOf("=");return-1===w&&(w=i),[w,w===i?0:4-w%4]}function a(h){return m[h>>18&63]+m[h>>12&63]+m[h>>6&63]+m[63&h]}function p(h,i,w){for(var T=[],P=i;P<w;P+=3)T.push(a((h[P]<<16&16711680)+(h[P+1]<<8&65280)+(255&h[P+2])));return T.join("")}b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63},{}],14:[function(A,K,j){"use strict";const{Buffer:m}=A("buffer"),b=Symbol.for("BufferList");function g(d){if(!(this instanceof g))return new g(d);g._init.call(this,d)}g._init=function(s){Object.defineProperty(this,b,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},g.prototype._new=function(s){return new g(s)},g.prototype._offset=function(s){if(0===s)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const e=t+this._bufs[r].length;if(s<e||r===this._bufs.length-1)return[r,s-t];t=e}},g.prototype._reverseOffset=function(d){const s=d[0];let t=d[1];for(let r=0;r<s;r++)t+=this._bufs[r].length;return t},g.prototype.get=function(s){if(s>this.length||s<0)return;const t=this._offset(s);return this._bufs[t[0]][t[1]]},g.prototype.slice=function(s,t){return"number"==typeof s&&s<0&&(s+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,s,t)},g.prototype.copy=function(s,t,r,e){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof e||e>this.length)&&(e=this.length),r>=this.length||e<=0)return s||m.alloc(0);const n=!!s,o=this._offset(r),a=e-r;let p=a,v=n&&t||0,h=o[1];if(0===r&&e===this.length){if(!n)return 1===this._bufs.length?this._bufs[0]:m.concat(this._bufs,this.length);for(let i=0;i<this._bufs.length;i++)this._bufs[i].copy(s,v),v+=this._bufs[i].length;return s}if(p<=this._bufs[o[0]].length-h)return n?this._bufs[o[0]].copy(s,t,h,h+p):this._bufs[o[0]].slice(h,h+p);n||(s=m.allocUnsafe(a));for(let i=o[0];i<this._bufs.length;i++){const w=this._bufs[i].length-h;if(!(p>w)){this._bufs[i].copy(s,v,h,h+p),v+=w;break}this._bufs[i].copy(s,v,h),v+=w,p-=w,h&&(h=0)}return s.length>v?s.slice(0,v):s},g.prototype.shallowSlice=function(s,t){if((s=s||0)<0&&(s+=this.length),(t="number"!=typeof t?this.length:t)<0&&(t+=this.length),s===t)return this._new();const r=this._offset(s),e=this._offset(t),n=this._bufs.slice(r[0],e[0]+1);return 0===e[1]?n.pop():n[n.length-1]=n[n.length-1].slice(0,e[1]),0!==r[1]&&(n[0]=n[0].slice(r[1])),this._new(n)},g.prototype.toString=function(s,t,r){return this.slice(t,r).toString(s)},g.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;){if(!(s>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},g.prototype.duplicate=function(){const s=this._new();for(let t=0;t<this._bufs.length;t++)s.append(this._bufs[t]);return s},g.prototype.append=function(s){if(null==s)return this;if(s.buffer)this._appendBuffer(m.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let t=0;t<s.length;t++)this.append(s[t]);else if(this._isBufferList(s))for(let t=0;t<s._bufs.length;t++)this.append(s._bufs[t]);else"number"==typeof s&&(s=s.toString()),this._appendBuffer(m.from(s));return this},g.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},g.prototype.indexOf=function(d,s,t){if(void 0===t&&"string"==typeof s&&(t=s,s=void 0),"function"==typeof d||Array.isArray(d))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof d?d=m.from([d]):"string"==typeof d?d=m.from(d,t):this._isBufferList(d)?d=d.slice():Array.isArray(d.buffer)?d=m.from(d.buffer,d.byteOffset,d.byteLength):m.isBuffer(d)||(d=m.from(d)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),0===d.length)return s>this.length?this.length:s;const r=this._offset(s);let e=r[0],n=r[1];for(;e<this._bufs.length;e++){const o=this._bufs[e];for(;n<o.length;)if(o.length-n>=d.length){const p=o.indexOf(d,n);if(-1!==p)return this._reverseOffset([e,p]);n=o.length-d.length+1}else{const p=this._reverseOffset([e,n]);if(this._match(p,d))return p;n++}n=0}return-1},g.prototype._match=function(d,s){if(this.length-d<s.length)return!1;for(let t=0;t<s.length;t++)if(this.get(d+t)!==s[t])return!1;return!0},function(){const d={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const s in d)!function(t){g.prototype[t]=null===d[t]?function(r,e){return this.slice(r,r+e)[t](0,e)}:function(r=0){return this.slice(r,r+d[t])[t](0)}}(s)}(),g.prototype._isBufferList=function(s){return s instanceof g||g.isBufferList(s)},g.isBufferList=function(s){return null!=s&&s[b]},K.exports=g},{buffer:17}],15:[function(A,K,j){"use strict";const m=A("readable-stream").Duplex,b=A("inherits"),g=A("./BufferList");function d(s){if(!(this instanceof d))return new d(s);if("function"==typeof s){this._callback=s;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),s=null}g._init.call(this,s),m.call(this)}b(d,m),Object.assign(d.prototype,g.prototype),d.prototype._new=function(t){return new d(t)},d.prototype._write=function(t,r,e){this._appendBuffer(t),"function"==typeof e&&e()},d.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},d.prototype.end=function(t){m.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},d.prototype._destroy=function(t,r){this._bufs.length=0,this.length=0,r(t)},d.prototype._isBufferList=function(t){return t instanceof d||t instanceof g||d.isBufferList(t)},d.isBufferList=g.isBufferList,K.exports=d,K.exports.BufferListStream=d,K.exports.BufferList=g},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(A,K,j){},{}],17:[function(A,K,j){(function(m){(function(){"use strict";var b=A("base64-js"),g=A("ieee754");j.Buffer=r,j.SlowBuffer=function S(c){return+c!=c&&(c=0),r.alloc(+c)},j.INSPECT_MAX_BYTES=50;var d=2147483647;function t(c){if(c>d)throw new RangeError('The value "'+c+'" is invalid for option "size"');var l=new Uint8Array(c);return l.__proto__=r.prototype,l}function r(c,l,u){if("number"==typeof c){if("string"==typeof l)throw new TypeError('The "string" argument must be of type string. Received type number');return a(c)}return e(c,l,u)}function e(c,l,u){if("string"==typeof c)return function p(c,l){if(("string"!=typeof l||""===l)&&(l="utf8"),!r.isEncoding(l))throw new TypeError("Unknown encoding: "+l);var u=0|T(c,l),C=t(u),U=C.write(c,l);return U!==u&&(C=C.slice(0,U)),C}(c,l);if(ArrayBuffer.isView(c))return v(c);if(null==c)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(X(c,ArrayBuffer)||c&&X(c.buffer,ArrayBuffer))return function h(c,l,u){if(l<0||c.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<l+(u||0))throw new RangeError('"length" is outside of buffer bounds');var C;return(C=void 0===l&&void 0===u?new Uint8Array(c):void 0===u?new Uint8Array(c,l):new Uint8Array(c,l,u)).__proto__=r.prototype,C}(c,l,u);if("number"==typeof c)throw new TypeError('The "value" argument must not be of type number. Received type number');var C=c.valueOf&&c.valueOf();if(null!=C&&C!==c)return r.from(C,l,u);var U=function i(c){if(r.isBuffer(c)){var l=0|w(c.length),u=t(l);return 0===u.length||c.copy(u,0,0,l),u}return void 0!==c.length?"number"!=typeof c.length||x(c.length)?t(0):v(c):"Buffer"===c.type&&Array.isArray(c.data)?v(c.data):void 0}(c);if(U)return U;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof c[Symbol.toPrimitive])return r.from(c[Symbol.toPrimitive]("string"),l,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}function n(c){if("number"!=typeof c)throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function a(c){return n(c),t(c<0?0:0|w(c))}function v(c){for(var l=c.length<0?0:0|w(c.length),u=t(l),C=0;C<l;C+=1)u[C]=255&c[C];return u}function w(c){if(c>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|c}function T(c,l){if(r.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||X(c,ArrayBuffer))return c.byteLength;if("string"!=typeof c)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);var u=c.length,C=arguments.length>2&&!0===arguments[2];if(!C&&0===u)return 0;for(var U=!1;;)switch(l){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return oe(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*u;case"hex":return u>>>1;case"base64":return F(c).length;default:if(U)return C?-1:oe(c).length;l=(""+l).toLowerCase(),U=!0}}function P(c,l,u){var C=!1;if((void 0===l||l<0)&&(l=0),l>this.length||((void 0===u||u>this.length)&&(u=this.length),u<=0)||(u>>>=0)<=(l>>>=0))return"";for(c||(c="utf8");;)switch(c){case"hex":return re(this,l,u);case"utf8":case"utf-8":return E(this,l,u);case"ascii":return $(this,l,u);case"latin1":case"binary":return ie(this,l,u);case"base64":return z(this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,l,u);default:if(C)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),C=!0}}function O(c,l,u){var C=c[l];c[l]=c[u],c[u]=C}function M(c,l,u,C,U){if(0===c.length)return-1;if("string"==typeof u?(C=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),x(u=+u)&&(u=U?0:c.length-1),u<0&&(u=c.length+u),u>=c.length){if(U)return-1;u=c.length-1}else if(u<0){if(!U)return-1;u=0}if("string"==typeof l&&(l=r.from(l,C)),r.isBuffer(l))return 0===l.length?-1:H(c,l,u,C,U);if("number"==typeof l)return l&=255,"function"==typeof Uint8Array.prototype.indexOf?U?Uint8Array.prototype.indexOf.call(c,l,u):Uint8Array.prototype.lastIndexOf.call(c,l,u):H(c,[l],u,C,U);throw new TypeError("val must be string, number or Buffer")}function H(c,l,u,C,U){var fe,Z=1,ee=c.length,ae=l.length;if(void 0!==C&&("ucs2"===(C=String(C).toLowerCase())||"ucs-2"===C||"utf16le"===C||"utf-16le"===C)){if(c.length<2||l.length<2)return-1;Z=2,ee/=2,ae/=2,u/=2}function le(ve,ge){return 1===Z?ve[ge]:ve.readUInt16BE(ge*Z)}if(U){var he=-1;for(fe=u;fe<ee;fe++)if(le(c,fe)===le(l,-1===he?0:fe-he)){if(-1===he&&(he=fe),fe-he+1===ae)return he*Z}else-1!==he&&(fe-=fe-he),he=-1}else for(u+ae>ee&&(u=ee-ae),fe=u;fe>=0;fe--){for(var ue=!0,ye=0;ye<ae;ye++)if(le(c,fe+ye)!==le(l,ye)){ue=!1;break}if(ue)return fe}return-1}function f(c,l,u,C){u=Number(u)||0;var U=c.length-u;C?(C=Number(C))>U&&(C=U):C=U;var Z=l.length;C>Z/2&&(C=Z/2);for(var ee=0;ee<C;++ee){var ae=parseInt(l.substr(2*ee,2),16);if(x(ae))return ee;c[u+ee]=ae}return ee}function _(c,l,u,C){return G(oe(l,c.length-u),c,u,C)}function y(c,l,u,C){return G(function L(c){for(var l=[],u=0;u<c.length;++u)l.push(255&c.charCodeAt(u));return l}(l),c,u,C)}function I(c,l,u,C){return y(c,l,u,C)}function N(c,l,u,C){return G(F(l),c,u,C)}function q(c,l,u,C){return G(function R(c,l){for(var u,C,Z=[],ee=0;ee<c.length&&!((l-=2)<0);++ee)C=(u=c.charCodeAt(ee))>>8,Z.push(u%256),Z.push(C);return Z}(l,c.length-u),c,u,C)}function z(c,l,u){return b.fromByteArray(0===l&&u===c.length?c:c.slice(l,u))}function E(c,l,u){u=Math.min(c.length,u);for(var C=[],U=l;U<u;){var le,fe,he,ue,Z=c[U],ee=null,ae=Z>239?4:Z>223?3:Z>191?2:1;if(U+ae<=u)switch(ae){case 1:Z<128&&(ee=Z);break;case 2:128==(192&(le=c[U+1]))&&(ue=(31&Z)<<6|63&le)>127&&(ee=ue);break;case 3:fe=c[U+2],128==(192&(le=c[U+1]))&&128==(192&fe)&&(ue=(15&Z)<<12|(63&le)<<6|63&fe)>2047&&(ue<55296||ue>57343)&&(ee=ue);break;case 4:fe=c[U+2],he=c[U+3],128==(192&(le=c[U+1]))&&128==(192&fe)&&128==(192&he)&&(ue=(15&Z)<<18|(63&le)<<12|(63&fe)<<6|63&he)>65535&&ue<1114112&&(ee=ue)}null===ee?(ee=65533,ae=1):ee>65535&&(C.push((ee-=65536)>>>10&1023|55296),ee=56320|1023&ee),C.push(ee),U+=ae}return function D(c){var l=c.length;if(l<=k)return String.fromCharCode.apply(String,c);for(var u="",C=0;C<l;)u+=String.fromCharCode.apply(String,c.slice(C,C+=k));return u}(C)}j.kMaxLength=d,!(r.TYPED_ARRAY_SUPPORT=function s(){try{var c=new Uint8Array(1);return c.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===c.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(c,l,u){return e(c,l,u)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(c,l,u){return function o(c,l,u){return n(c),c<=0?t(c):void 0!==l?"string"==typeof u?t(c).fill(l,u):t(c).fill(l):t(c)}(c,l,u)},r.allocUnsafe=function(c){return a(c)},r.allocUnsafeSlow=function(c){return a(c)},r.isBuffer=function(l){return null!=l&&!0===l._isBuffer&&l!==r.prototype},r.compare=function(l,u){if(X(l,Uint8Array)&&(l=r.from(l,l.offset,l.byteLength)),X(u,Uint8Array)&&(u=r.from(u,u.offset,u.byteLength)),!r.isBuffer(l)||!r.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===u)return 0;for(var C=l.length,U=u.length,Z=0,ee=Math.min(C,U);Z<ee;++Z)if(l[Z]!==u[Z]){C=l[Z],U=u[Z];break}return C<U?-1:U<C?1:0},r.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(l,u){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(0===l.length)return r.alloc(0);var C;if(void 0===u)for(u=0,C=0;C<l.length;++C)u+=l[C].length;var U=r.allocUnsafe(u),Z=0;for(C=0;C<l.length;++C){var ee=l[C];if(X(ee,Uint8Array)&&(ee=r.from(ee)),!r.isBuffer(ee))throw new TypeError('"list" argument must be an Array of Buffers');ee.copy(U,Z),Z+=ee.length}return U},r.byteLength=T,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var l=this.length;if(l%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<l;u+=2)O(this,u,u+1);return this},r.prototype.swap32=function(){var l=this.length;if(l%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<l;u+=4)O(this,u,u+3),O(this,u+1,u+2);return this},r.prototype.swap64=function(){var l=this.length;if(l%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<l;u+=8)O(this,u,u+7),O(this,u+1,u+6),O(this,u+2,u+5),O(this,u+3,u+4);return this},r.prototype.toString=function(){var l=this.length;return 0===l?"":0===arguments.length?E(this,0,l):P.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(l){if(!r.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l||0===r.compare(this,l)},r.prototype.inspect=function(){var l="",u=j.INSPECT_MAX_BYTES;return l=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(l+=" ... "),"<Buffer "+l+">"},r.prototype.compare=function(l,u,C,U,Z){if(X(l,Uint8Array)&&(l=r.from(l,l.offset,l.byteLength)),!r.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(void 0===u&&(u=0),void 0===C&&(C=l?l.length:0),void 0===U&&(U=0),void 0===Z&&(Z=this.length),u<0||C>l.length||U<0||Z>this.length)throw new RangeError("out of range index");if(U>=Z&&u>=C)return 0;if(U>=Z)return-1;if(u>=C)return 1;if(this===l)return 0;for(var ee=(Z>>>=0)-(U>>>=0),ae=(C>>>=0)-(u>>>=0),le=Math.min(ee,ae),fe=this.slice(U,Z),he=l.slice(u,C),ue=0;ue<le;++ue)if(fe[ue]!==he[ue]){ee=fe[ue],ae=he[ue];break}return ee<ae?-1:ae<ee?1:0},r.prototype.includes=function(l,u,C){return-1!==this.indexOf(l,u,C)},r.prototype.indexOf=function(l,u,C){return M(this,l,u,C,!0)},r.prototype.lastIndexOf=function(l,u,C){return M(this,l,u,C,!1)},r.prototype.write=function(l,u,C,U){if(void 0===u)U="utf8",C=this.length,u=0;else if(void 0===C&&"string"==typeof u)U=u,C=this.length,u=0;else{if(!isFinite(u))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");u>>>=0,isFinite(C)?(C>>>=0,void 0===U&&(U="utf8")):(U=C,C=void 0)}var Z=this.length-u;if((void 0===C||C>Z)&&(C=Z),l.length>0&&(C<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");for(var ee=!1;;)switch(U){case"hex":return f(this,l,u,C);case"utf8":case"utf-8":return _(this,l,u,C);case"ascii":return y(this,l,u,C);case"latin1":case"binary":return I(this,l,u,C);case"base64":return N(this,l,u,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,l,u,C);default:if(ee)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),ee=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function $(c,l,u){var C="";u=Math.min(c.length,u);for(var U=l;U<u;++U)C+=String.fromCharCode(127&c[U]);return C}function ie(c,l,u){var C="";u=Math.min(c.length,u);for(var U=l;U<u;++U)C+=String.fromCharCode(c[U]);return C}function re(c,l,u){var C=c.length;(!l||l<0)&&(l=0),(!u||u<0||u>C)&&(u=C);for(var U="",Z=l;Z<u;++Z)U+=Y(c[Z]);return U}function Q(c,l,u){for(var C=c.slice(l,u),U="",Z=0;Z<C.length;Z+=2)U+=String.fromCharCode(C[Z]+256*C[Z+1]);return U}function W(c,l,u){if(c%1!=0||c<0)throw new RangeError("offset is not uint");if(c+l>u)throw new RangeError("Trying to access beyond buffer length")}function te(c,l,u,C,U,Z){if(!r.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>U||l<Z)throw new RangeError('"value" argument is out of bounds');if(u+C>c.length)throw new RangeError("Index out of range")}function J(c,l,u,C,U,Z){if(u+C>c.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function se(c,l,u,C,U){return l=+l,u>>>=0,U||J(c,0,u,4),g.write(c,l,u,C,23,4),u+4}function ne(c,l,u,C,U){return l=+l,u>>>=0,U||J(c,0,u,8),g.write(c,l,u,C,52,8),u+8}r.prototype.slice=function(l,u){var C=this.length;(l=~~l)<0?(l+=C)<0&&(l=0):l>C&&(l=C),(u=void 0===u?C:~~u)<0?(u+=C)<0&&(u=0):u>C&&(u=C),u<l&&(u=l);var U=this.subarray(l,u);return U.__proto__=r.prototype,U},r.prototype.readUIntLE=function(l,u,C){l>>>=0,u>>>=0,C||W(l,u,this.length);for(var U=this[l],Z=1,ee=0;++ee<u&&(Z*=256);)U+=this[l+ee]*Z;return U},r.prototype.readUIntBE=function(l,u,C){l>>>=0,u>>>=0,C||W(l,u,this.length);for(var U=this[l+--u],Z=1;u>0&&(Z*=256);)U+=this[l+--u]*Z;return U},r.prototype.readUInt8=function(l,u){return l>>>=0,u||W(l,1,this.length),this[l]},r.prototype.readUInt16LE=function(l,u){return l>>>=0,u||W(l,2,this.length),this[l]|this[l+1]<<8},r.prototype.readUInt16BE=function(l,u){return l>>>=0,u||W(l,2,this.length),this[l]<<8|this[l+1]},r.prototype.readUInt32LE=function(l,u){return l>>>=0,u||W(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+16777216*this[l+3]},r.prototype.readUInt32BE=function(l,u){return l>>>=0,u||W(l,4,this.length),16777216*this[l]+(this[l+1]<<16|this[l+2]<<8|this[l+3])},r.prototype.readIntLE=function(l,u,C){l>>>=0,u>>>=0,C||W(l,u,this.length);for(var U=this[l],Z=1,ee=0;++ee<u&&(Z*=256);)U+=this[l+ee]*Z;return U>=(Z*=128)&&(U-=Math.pow(2,8*u)),U},r.prototype.readIntBE=function(l,u,C){l>>>=0,u>>>=0,C||W(l,u,this.length);for(var U=u,Z=1,ee=this[l+--U];U>0&&(Z*=256);)ee+=this[l+--U]*Z;return ee>=(Z*=128)&&(ee-=Math.pow(2,8*u)),ee},r.prototype.readInt8=function(l,u){return l>>>=0,u||W(l,1,this.length),128&this[l]?-1*(255-this[l]+1):this[l]},r.prototype.readInt16LE=function(l,u){l>>>=0,u||W(l,2,this.length);var C=this[l]|this[l+1]<<8;return 32768&C?4294901760|C:C},r.prototype.readInt16BE=function(l,u){l>>>=0,u||W(l,2,this.length);var C=this[l+1]|this[l]<<8;return 32768&C?4294901760|C:C},r.prototype.readInt32LE=function(l,u){return l>>>=0,u||W(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},r.prototype.readInt32BE=function(l,u){return l>>>=0,u||W(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},r.prototype.readFloatLE=function(l,u){return l>>>=0,u||W(l,4,this.length),g.read(this,l,!0,23,4)},r.prototype.readFloatBE=function(l,u){return l>>>=0,u||W(l,4,this.length),g.read(this,l,!1,23,4)},r.prototype.readDoubleLE=function(l,u){return l>>>=0,u||W(l,8,this.length),g.read(this,l,!0,52,8)},r.prototype.readDoubleBE=function(l,u){return l>>>=0,u||W(l,8,this.length),g.read(this,l,!1,52,8)},r.prototype.writeUIntLE=function(l,u,C,U){l=+l,u>>>=0,C>>>=0,U||te(this,l,u,C,Math.pow(2,8*C)-1,0);var ee=1,ae=0;for(this[u]=255&l;++ae<C&&(ee*=256);)this[u+ae]=l/ee&255;return u+C},r.prototype.writeUIntBE=function(l,u,C,U){l=+l,u>>>=0,C>>>=0,U||te(this,l,u,C,Math.pow(2,8*C)-1,0);var ee=C-1,ae=1;for(this[u+ee]=255&l;--ee>=0&&(ae*=256);)this[u+ee]=l/ae&255;return u+C},r.prototype.writeUInt8=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,1,255,0),this[u]=255&l,u+1},r.prototype.writeUInt16LE=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,2,65535,0),this[u]=255&l,this[u+1]=l>>>8,u+2},r.prototype.writeUInt16BE=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,2,65535,0),this[u]=l>>>8,this[u+1]=255&l,u+2},r.prototype.writeUInt32LE=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,4,4294967295,0),this[u+3]=l>>>24,this[u+2]=l>>>16,this[u+1]=l>>>8,this[u]=255&l,u+4},r.prototype.writeUInt32BE=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,4,4294967295,0),this[u]=l>>>24,this[u+1]=l>>>16,this[u+2]=l>>>8,this[u+3]=255&l,u+4},r.prototype.writeIntLE=function(l,u,C,U){if(l=+l,u>>>=0,!U){var Z=Math.pow(2,8*C-1);te(this,l,u,C,Z-1,-Z)}var ee=0,ae=1,le=0;for(this[u]=255&l;++ee<C&&(ae*=256);)l<0&&0===le&&0!==this[u+ee-1]&&(le=1),this[u+ee]=(l/ae>>0)-le&255;return u+C},r.prototype.writeIntBE=function(l,u,C,U){if(l=+l,u>>>=0,!U){var Z=Math.pow(2,8*C-1);te(this,l,u,C,Z-1,-Z)}var ee=C-1,ae=1,le=0;for(this[u+ee]=255&l;--ee>=0&&(ae*=256);)l<0&&0===le&&0!==this[u+ee+1]&&(le=1),this[u+ee]=(l/ae>>0)-le&255;return u+C},r.prototype.writeInt8=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,1,127,-128),l<0&&(l=255+l+1),this[u]=255&l,u+1},r.prototype.writeInt16LE=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,2,32767,-32768),this[u]=255&l,this[u+1]=l>>>8,u+2},r.prototype.writeInt16BE=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,2,32767,-32768),this[u]=l>>>8,this[u+1]=255&l,u+2},r.prototype.writeInt32LE=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,4,2147483647,-2147483648),this[u]=255&l,this[u+1]=l>>>8,this[u+2]=l>>>16,this[u+3]=l>>>24,u+4},r.prototype.writeInt32BE=function(l,u,C){return l=+l,u>>>=0,C||te(this,l,u,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[u]=l>>>24,this[u+1]=l>>>16,this[u+2]=l>>>8,this[u+3]=255&l,u+4},r.prototype.writeFloatLE=function(l,u,C){return se(this,l,u,!0,C)},r.prototype.writeFloatBE=function(l,u,C){return se(this,l,u,!1,C)},r.prototype.writeDoubleLE=function(l,u,C){return ne(this,l,u,!0,C)},r.prototype.writeDoubleBE=function(l,u,C){return ne(this,l,u,!1,C)},r.prototype.copy=function(l,u,C,U){if(!r.isBuffer(l))throw new TypeError("argument should be a Buffer");if(C||(C=0),!U&&0!==U&&(U=this.length),u>=l.length&&(u=l.length),u||(u=0),U>0&&U<C&&(U=C),U===C||0===l.length||0===this.length)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),l.length-u<U-C&&(U=l.length-u+C);var Z=U-C;if(this===l&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(u,C,U);else if(this===l&&C<u&&u<U)for(var ee=Z-1;ee>=0;--ee)l[ee+u]=this[ee+C];else Uint8Array.prototype.set.call(l,this.subarray(C,U),u);return Z},r.prototype.fill=function(l,u,C,U){if("string"==typeof l){if("string"==typeof u?(U=u,u=0,C=this.length):"string"==typeof C&&(U=C,C=this.length),void 0!==U&&"string"!=typeof U)throw new TypeError("encoding must be a string");if("string"==typeof U&&!r.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(1===l.length){var Z=l.charCodeAt(0);("utf8"===U&&Z<128||"latin1"===U)&&(l=Z)}}else"number"==typeof l&&(l&=255);if(u<0||this.length<u||this.length<C)throw new RangeError("Out of range index");if(C<=u)return this;var ee;if(u>>>=0,C=void 0===C?this.length:C>>>0,l||(l=0),"number"==typeof l)for(ee=u;ee<C;++ee)this[ee]=l;else{var ae=r.isBuffer(l)?l:r.from(l,U),le=ae.length;if(0===le)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(ee=0;ee<C-u;++ee)this[ee+u]=ae[ee%le]}return this};var V=/[^+/0-9A-Za-z-_]/g;function Y(c){return c<16?"0"+c.toString(16):c.toString(16)}function oe(c,l){l=l||1/0;for(var u,C=c.length,U=null,Z=[],ee=0;ee<C;++ee){if((u=c.charCodeAt(ee))>55295&&u<57344){if(!U){if(u>56319){(l-=3)>-1&&Z.push(239,191,189);continue}if(ee+1===C){(l-=3)>-1&&Z.push(239,191,189);continue}U=u;continue}if(u<56320){(l-=3)>-1&&Z.push(239,191,189),U=u;continue}u=65536+(U-55296<<10|u-56320)}else U&&(l-=3)>-1&&Z.push(239,191,189);if(U=null,u<128){if((l-=1)<0)break;Z.push(u)}else if(u<2048){if((l-=2)<0)break;Z.push(u>>6|192,63&u|128)}else if(u<65536){if((l-=3)<0)break;Z.push(u>>12|224,u>>6&63|128,63&u|128)}else{if(!(u<1114112))throw new Error("Invalid code point");if((l-=4)<0)break;Z.push(u>>18|240,u>>12&63|128,u>>6&63|128,63&u|128)}}return Z}function F(c){return b.toByteArray(function B(c){if((c=(c=c.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;c.length%4!=0;)c+="=";return c}(c))}function G(c,l,u,C){for(var U=0;U<C&&!(U+u>=l.length||U>=c.length);++U)l[U+u]=c[U];return U}function X(c,l){return c instanceof l||null!=c&&null!=c.constructor&&null!=c.constructor.name&&c.constructor.name===l.name}function x(c){return c!=c}}).call(this)}).call(this,A("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(A,K,j){(function(m){(function(){j.formatArgs=function g(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+K.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,p=>{"%%"!==p&&(o++,"%c"===p&&(a=o))}),e.splice(a,0,n)},j.save=function d(e){try{e?j.storage.setItem("debug",e):j.storage.removeItem("debug")}catch{}},j.load=function s(){let e;try{e=j.storage.getItem("debug")}catch{}return!e&&typeof m<"u"&&"env"in m&&(e=m.env.DEBUG),e},j.useColors=function b(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},j.storage=function t(){try{return localStorage}catch{}}(),j.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),j.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],j.log=console.debug||console.log||(()=>{}),K.exports=A("./common")(j);const{formatters:r}=K.exports;r.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}}).call(this)}).call(this,A("_process"))},{"./common":19,_process:50}],19:[function(A,K,j){K.exports=function m(b){function d(p){let v,i,w,h=null;function S(...T){if(!S.enabled)return;const P=S,O=Number(new Date);P.diff=O-(v||O),P.prev=v,P.curr=O,v=O,T[0]=d.coerce(T[0]),"string"!=typeof T[0]&&T.unshift("%O");let H=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(_,y)=>{if("%%"===_)return"%";H++;const I=d.formatters[y];return"function"==typeof I&&(_=I.call(P,T[H]),T.splice(H,1),H--),_}),d.formatArgs.call(P,T),(P.log||d.log).apply(P,T)}return S.namespace=p,S.useColors=d.useColors(),S.color=d.selectColor(p),S.extend=s,S.destroy=d.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==h?h:(i!==d.namespaces&&(i=d.namespaces,w=d.enabled(p)),w),set:T=>{h=T}}),"function"==typeof d.init&&d.init(S),S}function s(p,v){const h=d(this.namespace+(typeof v>"u"?":":v)+p);return h.log=this.log,h}function n(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}return d.debug=d,d.default=d,d.coerce=function o(p){return p instanceof Error?p.stack||p.message:p},d.disable=function r(){const p=[...d.names.map(n),...d.skips.map(n).map(v=>"-"+v)].join(",");return d.enable(""),p},d.enable=function t(p){let v;d.save(p),d.namespaces=p,d.names=[],d.skips=[];const h=("string"==typeof p?p:"").split(/[\s,]+/),i=h.length;for(v=0;v<i;v++)h[v]&&("-"===(p=h[v].replace(/\*/g,".*?"))[0]?d.skips.push(new RegExp("^"+p.substr(1)+"$")):d.names.push(new RegExp("^"+p+"$")))},d.enabled=function e(p){if("*"===p[p.length-1])return!0;let v,h;for(v=0,h=d.skips.length;v<h;v++)if(d.skips[v].test(p))return!1;for(v=0,h=d.names.length;v<h;v++)if(d.names[v].test(p))return!0;return!1},d.humanize=A("ms"),d.destroy=function a(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(b).forEach(p=>{d[p]=b[p]}),d.names=[],d.skips=[],d.formatters={},d.selectColor=function g(p){let v=0;for(let h=0;h<p.length;h++)v=(v<<5)-v+p.charCodeAt(h),v|=0;return d.colors[Math.abs(v)%d.colors.length]},d.enable(d.load()),d}},{ms:45}],20:[function(A,K,j){(function(m,b){(function(){var g=A("readable-stream"),d=A("end-of-stream"),s=A("inherits"),t=A("stream-shift"),r=b.from&&b.from!==Uint8Array.from?b.from([0]):new b([0]),e=function(i,w){i._corked?i.once("uncork",w):w()},o=function(i,w){return function(S){S?function(i,w){i._autoDestroy&&i.destroy(w)}(i,"premature close"===S.message?null:S):w&&!i._ended&&i.end()}},p=function(){},h=function(i,w,S){if(!(this instanceof h))return new h(i,w,S);g.Duplex.call(this,S),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!S||!1!==S.autoDestroy,this._forwardDestroy=!S||!1!==S.destroy,this._forwardEnd=!S||!1!==S.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,i&&this.setWritable(i),w&&this.setReadable(w)};s(h,g.Duplex),h.obj=function(i,w,S){return S||(S={}),S.objectMode=!0,S.highWaterMark=16,new h(i,w,S)},h.prototype.cork=function(){1==++this._corked&&this.emit("cork")},h.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},h.prototype.setWritable=function(i){if(this._unwrite&&this._unwrite(),this.destroyed)i&&i.destroy&&i.destroy();else if(null!==i&&!1!==i){var w=this,S=d(i,{writable:!0,readable:!1},o(this,this._forwardEnd)),T=function(){var O=w._ondrain;w._ondrain=null,O&&O()};this._unwrite&&m.nextTick(T),this._writable=i,this._writable.on("drain",T),this._unwrite=function(){w._writable.removeListener("drain",T),S()},this.uncork()}else this.end()},h.prototype.setReadable=function(i){if(this._unread&&this._unread(),this.destroyed)i&&i.destroy&&i.destroy();else{if(null===i||!1===i)return this.push(null),void this.resume();var w=this,S=d(i,{writable:!1,readable:!0},o(this)),T=function(){w._forward()},P=function(){w.push(null)};this._drained=!0,this._readable=i,this._readable2=i._readableState?i:function(i){return new g.Readable({objectMode:!0,highWaterMark:16}).wrap(i)}(i),this._readable2.on("readable",T),this._readable2.on("end",P),this._unread=function(){w._readable2.removeListener("readable",T),w._readable2.removeListener("end",P),S()},this._forward()}},h.prototype._read=function(){this._drained=!0,this._forward()},h.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var i;this._drained&&null!==(i=t(this._readable2));)this.destroyed||(this._drained=this.push(i));this._forwarding=!1}},h.prototype.destroy=function(i,w){if(w||(w=p),this.destroyed)return w(null);this.destroyed=!0;var S=this;m.nextTick(function(){S._destroy(i),w(null)})},h.prototype._destroy=function(i){if(i){var w=this._ondrain;this._ondrain=null,w?w(i):this.emit("error",i)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},h.prototype._write=function(i,w,S){if(!this.destroyed){if(this._corked)return e(this,this._write.bind(this,i,w,S));if(i===r)return this._finish(S);if(!this._writable)return S();!1===this._writable.write(i)?this._ondrain=S:this.destroyed||S()}},h.prototype._finish=function(i){var w=this;this.emit("preend"),e(this,function(){!function(i,w){!i||i._writableState&&i._writableState.finished?w():i._writableState?i.end(w):(i.end(),w())}(w._forwardEnd&&w._writable,function(){!1===w._writableState.prefinished&&(w._writableState.prefinished=!0),w.emit("prefinish"),e(w,i)})})},h.prototype.end=function(i,w,S){return"function"==typeof i?this.end(null,null,i):"function"==typeof w?this.end(i,null,w):(this._ended=!0,i&&this.write(i),!this._writableState.ending&&!this._writableState.destroyed&&this.write(r),g.Writable.prototype.end.call(this,S))},K.exports=h}).call(this)}).call(this,A("_process"),A("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(A,K,j){(function(m){(function(){var b=A("once"),g=function(){},t=function(r,e,n){if("function"==typeof e)return t(r,null,e);e||(e={}),n=b(n||g);var o=r._writableState,a=r._readableState,p=e.readable||!1!==e.readable&&r.readable,v=e.writable||!1!==e.writable&&r.writable,h=!1,i=function(){r.writable||w()},w=function(){v=!1,p||n.call(r)},S=function(){p=!1,v||n.call(r)},T=function(f){n.call(r,f?new Error("exited with error code: "+f):null)},P=function(f){n.call(r,f)},O=function(){m.nextTick(M)},M=function(){if(!h){if(p&&(!a||!a.ended||a.destroyed))return n.call(r,new Error("premature close"));if(v&&(!o||!o.ended||o.destroyed))return n.call(r,new Error("premature close"))}},H=function(){r.req.on("finish",w)};return function(r){return r.setHeader&&"function"==typeof r.abort}(r)?(r.on("complete",w),r.on("abort",O),r.req?H():r.on("request",H)):v&&!o&&(r.on("end",i),r.on("close",i)),function(r){return r.stdio&&Array.isArray(r.stdio)&&3===r.stdio.length}(r)&&r.on("exit",T),r.on("end",S),r.on("finish",w),!1!==e.error&&r.on("error",P),r.on("close",O),function(){h=!0,r.removeListener("complete",w),r.removeListener("abort",O),r.removeListener("request",H),r.req&&r.req.removeListener("finish",w),r.removeListener("end",i),r.removeListener("close",i),r.removeListener("finish",w),r.removeListener("exit",T),r.removeListener("end",S),r.removeListener("error",P),r.removeListener("close",O)}};K.exports=t}).call(this)}).call(this,A("_process"))},{_process:50,once:48}],22:[function(A,K,j){var m=Object.create||function H(y){var I=function(){};return I.prototype=y,new I},b=Object.keys||function f(y){var I=[];for(var N in y)Object.prototype.hasOwnProperty.call(y,N)&&I.push(N);return N},g=Function.prototype.bind||function _(y){var I=this;return function(){return I.apply(y,arguments)}};function d(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=m(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}K.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0;var t,s=10;try{var r={};Object.defineProperty&&Object.defineProperty(r,"x",{value:0}),t=0===r.x}catch{t=!1}function e(y){return void 0===y._maxListeners?d.defaultMaxListeners:y._maxListeners}function h(y,I,N,q){var z,E,k;if("function"!=typeof N)throw new TypeError('"listener" argument must be a function');if((E=y._events)?(E.newListener&&(y.emit("newListener",I,N.listener?N.listener:N),E=y._events),k=E[I]):(E=y._events=m(null),y._eventsCount=0),k){if("function"==typeof k?k=E[I]=q?[N,k]:[k,N]:q?k.unshift(N):k.push(N),!k.warned&&(z=e(y))&&z>0&&k.length>z){k.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+k.length+' "'+String(I)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');D.name="MaxListenersExceededWarning",D.emitter=y,D.type=I,D.count=k.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",D.name,D.message)}}else k=E[I]=N,++y._eventsCount;return y}function i(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var y=new Array(arguments.length),I=0;I<y.length;++I)y[I]=arguments[I];this.listener.apply(this.target,y)}}function w(y,I,N){var q={fired:!1,wrapFn:void 0,target:y,type:I,listener:N},z=g.call(i,q);return z.listener=N,q.wrapFn=z,z}function S(y,I,N){var q=y._events;if(!q)return[];var z=q[I];return z?"function"==typeof z?N?[z.listener||z]:[z]:N?function M(y){for(var I=new Array(y.length),N=0;N<I.length;++N)I[N]=y[N].listener||y[N];return I}(z):O(z,z.length):[]}function T(y){var I=this._events;if(I){var N=I[y];if("function"==typeof N)return 1;if(N)return N.length}return 0}function O(y,I){for(var N=new Array(I),q=0;q<I;++q)N[q]=y[q];return N}t?Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(y){if("number"!=typeof y||y<0||y!=y)throw new TypeError('"defaultMaxListeners" must be a positive number');s=y}}):d.defaultMaxListeners=s,d.prototype.setMaxListeners=function(I){if("number"!=typeof I||I<0||isNaN(I))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=I,this},d.prototype.getMaxListeners=function(){return e(this)},d.prototype.emit=function(I){var N,q,z,E,k,D,$="error"===I;if(D=this._events)$=$&&null==D.error;else if(!$)return!1;if($){if(arguments.length>1&&(N=arguments[1]),N instanceof Error)throw N;var ie=new Error('Unhandled "error" event. ('+N+")");throw ie.context=N,ie}if(!(q=D[I]))return!1;var re="function"==typeof q;switch(z=arguments.length){case 1:!function n(y,I,N){if(I)y.call(N);else for(var q=y.length,z=O(y,q),E=0;E<q;++E)z[E].call(N)}(q,re,this);break;case 2:!function o(y,I,N,q){if(I)y.call(N,q);else for(var z=y.length,E=O(y,z),k=0;k<z;++k)E[k].call(N,q)}(q,re,this,arguments[1]);break;case 3:!function a(y,I,N,q,z){if(I)y.call(N,q,z);else for(var E=y.length,k=O(y,E),D=0;D<E;++D)k[D].call(N,q,z)}(q,re,this,arguments[1],arguments[2]);break;case 4:!function p(y,I,N,q,z,E){if(I)y.call(N,q,z,E);else for(var k=y.length,D=O(y,k),$=0;$<k;++$)D[$].call(N,q,z,E)}(q,re,this,arguments[1],arguments[2],arguments[3]);break;default:for(E=new Array(z-1),k=1;k<z;k++)E[k-1]=arguments[k];!function v(y,I,N,q){if(I)y.apply(N,q);else for(var z=y.length,E=O(y,z),k=0;k<z;++k)E[k].apply(N,q)}(q,re,this,E)}return!0},d.prototype.on=d.prototype.addListener=function(I,N){return h(this,I,N,!1)},d.prototype.prependListener=function(I,N){return h(this,I,N,!0)},d.prototype.once=function(I,N){if("function"!=typeof N)throw new TypeError('"listener" argument must be a function');return this.on(I,w(this,I,N)),this},d.prototype.prependOnceListener=function(I,N){if("function"!=typeof N)throw new TypeError('"listener" argument must be a function');return this.prependListener(I,w(this,I,N)),this},d.prototype.removeListener=function(I,N){var q,z,E,k,D;if("function"!=typeof N)throw new TypeError('"listener" argument must be a function');if(!(z=this._events))return this;if(!(q=z[I]))return this;if(q===N||q.listener===N)0==--this._eventsCount?this._events=m(null):(delete z[I],z.removeListener&&this.emit("removeListener",I,q.listener||N));else if("function"!=typeof q){for(E=-1,k=q.length-1;k>=0;k--)if(q[k]===N||q[k].listener===N){D=q[k].listener,E=k;break}if(E<0)return this;0===E?q.shift():function P(y,I){for(var N=I,q=N+1,z=y.length;q<z;N+=1,q+=1)y[N]=y[q];y.pop()}(q,E),1===q.length&&(z[I]=q[0]),z.removeListener&&this.emit("removeListener",I,D||N)}return this},d.prototype.removeAllListeners=function(I){var N,q,z;if(!(q=this._events))return this;if(!q.removeListener)return 0===arguments.length?(this._events=m(null),this._eventsCount=0):q[I]&&(0==--this._eventsCount?this._events=m(null):delete q[I]),this;if(0===arguments.length){var k,E=b(q);for(z=0;z<E.length;++z)"removeListener"!==(k=E[z])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=m(null),this._eventsCount=0,this}if("function"==typeof(N=q[I]))this.removeListener(I,N);else if(N)for(z=N.length-1;z>=0;z--)this.removeListener(I,N[z]);return this},d.prototype.listeners=function(I){return S(this,I,!0)},d.prototype.rawListeners=function(I){return S(this,I,!1)},d.listenerCount=function(y,I){return"function"==typeof y.listenerCount?y.listenerCount(I):T.call(y,I)},d.prototype.listenerCount=T,d.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],23:[function(A,K,j){j.read=function(m,b,g,d,s){var t,r,e=8*s-d-1,n=(1<<e)-1,o=n>>1,a=-7,p=g?s-1:0,v=g?-1:1,h=m[b+p];for(p+=v,t=h&(1<<-a)-1,h>>=-a,a+=e;a>0;t=256*t+m[b+p],p+=v,a-=8);for(r=t&(1<<-a)-1,t>>=-a,a+=d;a>0;r=256*r+m[b+p],p+=v,a-=8);if(0===t)t=1-o;else{if(t===n)return r?NaN:1/0*(h?-1:1);r+=Math.pow(2,d),t-=o}return(h?-1:1)*r*Math.pow(2,t-d)},j.write=function(m,b,g,d,s,t){var r,e,n,o=8*t-s-1,a=(1<<o)-1,p=a>>1,v=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,h=d?0:t-1,i=d?1:-1,w=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(e=isNaN(b)?1:0,r=a):(r=Math.floor(Math.log(b)/Math.LN2),b*(n=Math.pow(2,-r))<1&&(r--,n*=2),(b+=r+p>=1?v/n:v*Math.pow(2,1-p))*n>=2&&(r++,n/=2),r+p>=a?(e=0,r=a):r+p>=1?(e=(b*n-1)*Math.pow(2,s),r+=p):(e=b*Math.pow(2,p-1)*Math.pow(2,s),r=0));s>=8;m[g+h]=255&e,h+=i,e/=256,s-=8);for(r=r<<s|e,o+=s;o>0;m[g+h]=255&r,h+=i,r/=256,o-=8);m[g+h-i]|=128*w}},{}],24:[function(A,K,j){K.exports="function"==typeof Object.create?function(b,g){g&&(b.super_=g,b.prototype=Object.create(g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,g){if(g){b.super_=g;var d=function(){};d.prototype=g.prototype,b.prototype=new d,b.prototype.constructor=b}}},{}],25:[function(A,K,j){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var m=function(){function b(g,d){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=g,this.value=d}return b.prototype.rotateLeft=function(){var g=this.parent,d=this.brother,s=this.leftChild,t=this.rightChild;if(!t)throw new Error("unknown error");var r=t.leftChild,e=t.rightChild;return g&&(g.leftChild===this?g.leftChild=t:g.rightChild===this&&(g.rightChild=t)),t.parent=g,t.brother=d,t.leftChild=this,t.rightChild=e,d&&(d.brother=t),this.parent=t,this.brother=e,this.leftChild=s,this.rightChild=r,e&&(e.parent=t,e.brother=this),s&&(s.parent=this,s.brother=r),r&&(r.parent=this,r.brother=s),t},b.prototype.rotateRight=function(){var g=this.parent,d=this.brother,s=this.leftChild;if(!s)throw new Error("unknown error");var t=this.rightChild,r=s.leftChild,e=s.rightChild;return g&&(g.leftChild===this?g.leftChild=s:g.rightChild===this&&(g.rightChild=s)),s.parent=g,s.brother=d,s.leftChild=r,s.rightChild=this,d&&(d.brother=s),r&&(r.parent=s,r.brother=this),this.parent=s,this.brother=r,this.leftChild=e,this.rightChild=t,e&&(e.parent=this,e.brother=t),t&&(t.parent=this,t.brother=e),s},b.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},b.TreeNodeColorType={red:!0,black:!1},b}();Object.freeze(m),j.default=m},{}],26:[function(A,K,j){"use strict";var m=this&&this.__generator||function(g,d){var t,r,e,n,s={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(p){return function(v){return function a(p){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(e=2&p[0]?r.return:p[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,p[1])).done)return e;switch(r=0,e&&(p=[2&p[0],e.value]),p[0]){case 0:case 1:e=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,r=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(!(e=(e=s.trys).length>0&&e[e.length-1])&&(6===p[0]||2===p[0])){s=0;continue}if(3===p[0]&&(!e||p[1]>e[0]&&p[1]<e[3])){s.label=p[1];break}if(6===p[0]&&s.label<e[1]){s.label=e[1],e=p;break}if(e&&s.label<e[2]){s.label=e[2],s.ops.push(p);break}e[2]&&s.ops.pop(),s.trys.pop();continue}p=d.call(g,s)}catch(v){p=[6,v],r=0}finally{t=e=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,v])}}};function b(g){var d=this;void 0===g&&(g=[]);var s=[],t=0,r=0,e=0,n=0,o=0,a=0;this.size=function(){return a},this.empty=function(){return 0===a},this.clear=function(){t=e=r=n=o=a=0,v.call(this,b.bucketSize),a=0},this.front=function(){return s[t][r]},this.back=function(){return s[e][n]},this.forEach=function(h){if(!this.empty()){var i=0;if(t===e){for(var w=r;w<=n;++w)h(s[t][w],i++);return}for(w=r;w<b.bucketSize;++w)h(s[t][w],i++);for(w=t+1;w<e;++w)for(var S=0;S<b.bucketSize;++S)h(s[w][S],i++);for(w=0;w<=n;++w)h(s[e][w],i++)}};var p=function(h){var i=t*b.bucketSize+r,w=i+h;if(w<i||w>e*b.bucketSize+n)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(w/b.bucketSize),curNodePointerIndex:w%b.bucketSize}};this.getElementByPos=function(h){var i=p(h);return s[i.curNodeBucketIndex][i.curNodePointerIndex]},this.eraseElementByPos=function(h){var i=this;if(h<0||h>a)throw new Error("pos should more than 0 and less than queue's size");if(0===h)this.popFront();else if(h===this.size())this.popBack();else{for(var w=[],S=h+1;S<a;++S)w.push(this.getElementByPos(S));this.cut(h),this.popBack(),w.forEach(function(T){return i.pushBack(T)})}},this.eraseElementByValue=function(h){if(!this.empty()){var i=[];this.forEach(function(T){T!==h&&i.push(T)});for(var w=i.length,S=0;S<w;++S)this.setElementByPos(S,i[S]);this.cut(w-1)}};var v=function(h){for(var i=[],S=Math.max(Math.ceil(h*b.sigma/b.bucketSize),2),T=0;T<S;++T)i.push(new Array(b.bucketSize));var P=Math.ceil(h/b.bucketSize),O=Math.floor(S/2)-Math.floor(P/2),M=O,H=0;if(this.size())for(T=0;T<P;++T){for(var f=0;f<b.bucketSize;++f)if(i[O+T][f]=this.front(),this.popFront(),this.empty()){M=O+T,H=f;break}if(this.empty())break}s=i,t=O,r=0,e=M,n=H,o=S,a=h};this.pushBack=function(h){this.empty()||(e===o-1&&n===b.bucketSize-1&&v.call(this,this.size()),n<b.bucketSize-1?++n:e<o-1&&(++e,n=0)),++a,s[e][n]=h},this.popBack=function(){this.empty()||(1!==this.size()&&(n>0?--n:t<e&&(--e,n=b.bucketSize-1)),a>0&&--a)},this.setElementByPos=function(h,i){var w=p(h);s[w.curNodeBucketIndex][w.curNodePointerIndex]=i},this.insert=function(h,i,w){var S=this;if(void 0===w&&(w=1),0===h)for(;w--;)this.pushFront(i);else if(h===this.size())for(;w--;)this.pushBack(i);else{for(var T=[],P=h;P<a;++P)T.push(this.getElementByPos(P));for(this.cut(h-1),P=0;P<w;++P)this.pushBack(i);T.forEach(function(O){return S.pushBack(O)})}},this.find=function(h){if(t===e){for(var i=r;i<=n;++i)if(s[t][i]===h)return!0;return!1}for(i=r;i<b.bucketSize;++i)if(s[t][i]===h)return!0;for(i=t+1;i<e;++i)for(var w=0;w<b.bucketSize;++w)if(s[i][w]===h)return!0;for(i=0;i<=n;++i)if(s[e][i]===h)return!0;return!1},this.reverse=function(){for(var h=0,i=a-1;h<i;){var w=this.getElementByPos(h);this.setElementByPos(h,this.getElementByPos(i)),this.setElementByPos(i,w),++h,--i}},this.unique=function(){if(!this.empty()){var h=[],i=this.front();this.forEach(function(S,T){(0===T||S!==i)&&(h.push(S),i=S)});for(var w=0;w<a;++w)this.setElementByPos(w,h[w]);this.cut(h.length-1)}},this.sort=function(h){var i=[];this.forEach(function(S){i.push(S)}),i.sort(h);for(var w=0;w<a;++w)this.setElementByPos(w,i[w])},this.pushFront=function(h){this.empty()||(0===t&&0===r&&v.call(this,this.size()),r>0?--r:t>0&&(--t,r=b.bucketSize-1)),++a,s[t][r]=h},this.popFront=function(){this.empty()||(1!==this.size()&&(r<b.bucketSize-1?++r:t<e&&(++t,r=0)),a>0&&--a)},this.shrinkToFit=function(){var h=this,i=[];this.forEach(function(P){i.push(P)}),s=[];for(var S=Math.ceil(i.length/b.bucketSize),T=0;T<S;++T)s.push(new Array(b.bucketSize));this.clear(),i.forEach(function(P){return h.pushBack(P)})},this.cut=function(h){if(h<0)this.clear();else{var i=p(h);e=i.curNodeBucketIndex,n=i.curNodePointerIndex,a=h+1}},this[Symbol.iterator]=function(){return function(){var h,i;return m(this,function(w){switch(w.label){case 0:if(0===a)return[2];if(t!==e)return[3,5];i=r,w.label=1;case 1:return i<=n?[4,s[t][i]]:[3,4];case 2:w.sent(),w.label=3;case 3:return++i,[3,1];case 4:return[2];case 5:i=r,w.label=6;case 6:return i<b.bucketSize?[4,s[t][i]]:[3,9];case 7:w.sent(),w.label=8;case 8:return++i,[3,6];case 9:i=t+1,w.label=10;case 10:if(!(i<e))return[3,15];h=0,w.label=11;case 11:return h<b.bucketSize?[4,s[i][h]]:[3,14];case 12:w.sent(),w.label=13;case 13:return++h,[3,11];case 14:return++i,[3,10];case 15:i=0,w.label=16;case 16:return i<=n?[4,s[e][i]]:[3,19];case 17:w.sent(),w.label=18;case 18:return++i,[3,16];case 19:return[2]}})}()},function(){var h=b.bucketSize;g.size?h=g.size():g.length&&(h=g.length),o=Math.ceil(h*b.sigma/b.bucketSize),o=Math.max(o,3);for(var w=0;w<o;++w)s.push(new Array(b.bucketSize));var S=Math.ceil(h/b.bucketSize);t=Math.floor(o/2)-Math.floor(S/2),e=t,g.forEach(function(T){return d.pushBack(T)})}(),Object.freeze(this)}Object.defineProperty(j,"__esModule",{value:!0}),b.sigma=3,b.bucketSize=5e3,Object.freeze(b),j.default=b},{}],27:[function(A,K,j){"use strict";var m=this&&this.__generator||function(t,r){var n,o,a,p,e={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function v(i){return function(w){return function h(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(!(a=(a=e.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){e=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){e.label=i[1];break}if(6===i[0]&&e.label<a[1]){e.label=a[1],a=i;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(i);break}a[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(w){i=[6,w],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,w])}}},b=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(j,"__esModule",{value:!0});var g=A("../LinkList/LinkList"),d=A("../Map/Map");function s(t,r,e){var n=this;if(void 0===t&&(t=[]),void 0===r&&(r=s.initSize),e=e||function(h){var i,w,S=0,T="";if("number"==typeof h)S=((S=Math.floor(h))<<5)-S,S&=S;else{T="string"!=typeof h?JSON.stringify(h):h;try{for(var P=b(T),O=P.next();!O.done;O=P.next())S=(S<<5)-S+O.value.charCodeAt(0),S&=S}catch(f){i={error:f}}finally{try{O&&!O.done&&(w=P.return)&&w.call(P)}finally{if(i)throw i.error}}}return S^S>>>16},r&r-1)throw new Error("initBucketNum must be 2 to the power of n");var o=0,a=[],p=Math.max(s.initSize,Math.min(s.maxSize,r));this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,p=r,a=[]},this.forEach=function(h){var i=0;a.forEach(function(w){w.forEach(function(S){h(S,i++)})})};var v=function(h){if(!(h>=s.maxSize)){p=2*h;var i=[];a.forEach(function(w,S){if(!w.empty()){if(w instanceof g.default&&1===w.size()){var T=w.front(),P=T.key,O=T.value;i[e(P)&p-1]=new g.default([{key:P,value:O}])}else if(w instanceof d.default){var M=new g.default,H=new g.default;w.forEach(function(y){e(y.key)&h?H.pushBack(y):M.pushBack(y)}),M.size()>s.untreeifyThreshold?i[S]=new d.default(M):M.size()&&(i[S]=M),H.size()>s.untreeifyThreshold?i[S+h]=new d.default(H):H.size()&&(i[S+h]=H)}else{var f=new g.default,_=new g.default;w.forEach(function(y){e(y.key)&h?_.pushBack(y):f.pushBack(y)}),f.size()&&(i[S]=f),_.size()&&(i[S+h]=_)}a[S].clear()}}),a=i}};this.setElement=function(h,i){var w,S;if(null==h)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=i){var T=e(h)&p-1;if(a[T]){var P=a[T].size();if(a[T]instanceof g.default){try{for(var O=b(a[T]),M=O.next();!M.done;M=O.next()){var H=M.value;if(H.key===h)return void(H.value=i)}}catch(_){w={error:_}}finally{try{M&&!M.done&&(S=O.return)&&S.call(O)}finally{if(w)throw w.error}}a[T].pushBack({key:h,value:i}),a[T].size()>=s.treeifyThreshold&&(a[T]=new d.default(a[T]))}else a[T].setElement(h,i);var f=a[T].size();o+=f-P}else++o,a[T]=new g.default([{key:h,value:i}]);o>p*s.sigma&&v.call(this,p)}else this.eraseElementByKey(h)},this.getElementByKey=function(h){var i,w,S=e(h)&p-1;if(a[S]){if(a[S]instanceof d.default)return a[S].getElementByKey(h);try{for(var T=b(a[S]),P=T.next();!P.done;P=T.next()){var O=P.value;if(O.key===h)return O.value}}catch(M){i={error:M}}finally{try{P&&!P.done&&(w=T.return)&&w.call(T)}finally{if(i)throw i.error}}}},this.eraseElementByKey=function(h){var i,w,S=e(h)&p-1;if(a[S]){var T=a[S].size();if(a[S]instanceof d.default)a[S].eraseElementByKey(h),a[S].size()<=s.untreeifyThreshold&&(a[S]=new g.default(a[S]));else{var P=-1;try{for(var O=b(a[S]),M=O.next();!M.done;M=O.next())if(++P,M.value.key===h){a[S].eraseElementByPos(P);break}}catch(_){i={error:_}}finally{try{M&&!M.done&&(w=O.return)&&w.call(O)}finally{if(i)throw i.error}}}var f=a[S].size();o+=f-T}},this.find=function(h){var i,w,S=e(h)&p-1;if(!a[S])return!1;if(a[S]instanceof d.default)return a[S].find(h);try{for(var T=b(a[S]),P=T.next();!P.done;P=T.next())if(P.value.key===h)return!0}catch(M){i={error:M}}finally{try{P&&!P.done&&(w=T.return)&&w.call(T)}finally{if(i)throw i.error}}return!1},this[Symbol.iterator]=function(){return function(){var h,i,w,T,P,O;return m(this,function(M){switch(M.label){case 0:h=0,M.label=1;case 1:if(!(h<p))return[3,10];for(;h<p&&!a[h];)++h;if(h>=p)return[3,10];M.label=2;case 2:M.trys.push([2,7,8,9]),P=void 0,i=b(a[h]),w=i.next(),M.label=3;case 3:return w.done?[3,6]:[4,w.value];case 4:M.sent(),M.label=5;case 5:return w=i.next(),[3,3];case 6:return[3,9];case 7:return T=M.sent(),P={error:T},[3,9];case 8:try{w&&!w.done&&(O=i.return)&&O.call(i)}finally{if(P)throw P.error}return[7];case 9:return++h,[3,1];case 10:return[2]}})}()},t.forEach(function(h){return n.setElement(h.key,h.value)}),Object.freeze(this)}s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64,Object.freeze(s),j.default=s},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(A,K,j){"use strict";var m=this&&this.__generator||function(t,r){var n,o,a,p,e={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function v(i){return function(w){return function h(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(!(a=(a=e.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){e=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){e.label=i[1];break}if(6===i[0]&&e.label<a[1]){e.label=a[1],a=i;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(i);break}a[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(w){i=[6,w],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,w])}}},b=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(j,"__esModule",{value:!0});var g=A("../Set/Set"),d=A("../LinkList/LinkList");function s(t,r,e){var n=this;if(void 0===t&&(t=[]),void 0===r&&(r=s.initSize),e=e||function(h){var i=0,w="";if("number"==typeof h)i=((i=Math.floor(h))<<5)-i,i&=i;else{w="string"!=typeof h?JSON.stringify(h):h;for(var S=0;S<w.length;S++)i=(i<<5)-i+w.charCodeAt(S),i&=i}return i^i>>>16},r&r-1)throw new Error("initBucketNum must be 2 to the power of n");var o=0,a=[],p=Math.max(s.initSize,Math.min(s.maxSize,r));this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,p=r,a=[]},this.forEach=function(h){var i=0;a.forEach(function(w){w.forEach(function(S){h(S,i++)})})};var v=function(h){if(!(h>=s.maxSize)){p=2*h;var i=[];a.forEach(function(w,S){if(!w.empty()){if(w instanceof d.default&&1===w.size()){var T=w.front();if(void 0===T)throw new Error("unknown error");i[e(T)&p-1]=new d.default([T])}else if(w instanceof g.default){var P=new d.default,O=new d.default;w.forEach(function(f){e(f)&h?O.pushBack(f):P.pushBack(f)}),P.size()>s.untreeifyThreshold?i[S]=new g.default(P):P.size()&&(i[S]=P),O.size()>s.untreeifyThreshold?i[S+h]=new g.default(O):O.size()&&(i[S+h]=O)}else{var M=new d.default,H=new d.default;w.forEach(function(f){e(f)&h?H.pushBack(f):M.pushBack(f)}),M.size()&&(i[S]=M),H.size()&&(i[S+h]=H)}a[S].clear()}}),a=i}};this.insert=function(h){if(null==h)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var i=e(h)&p-1;if(a[i]){var w=a[i].size();if(a[i]instanceof d.default){if(a[i].find(h))return;a[i].pushBack(h),a[i].size()>=s.treeifyThreshold&&(a[i]=new g.default(a[i]))}else a[i].insert(h);var S=a[i].size();o+=S-w}else a[i]=new d.default([h]),++o;o>p*s.sigma&&v.call(this,p)},this.eraseElementByValue=function(h){var i=e(h)&p-1;if(a[i]){var w=a[i].size();a[i].eraseElementByValue(h),a[i]instanceof g.default&&a[i].size()<=s.untreeifyThreshold&&(a[i]=new d.default(a[i]));var S=a[i].size();o+=S-w}},this.find=function(h){var i=e(h)&p-1;return!!a[i]&&a[i].find(h)},this[Symbol.iterator]=function(){return function(){var h,i,w,T,P,O;return m(this,function(M){switch(M.label){case 0:h=0,M.label=1;case 1:if(!(h<p))return[3,10];for(;h<p&&!a[h];)++h;if(h>=p)return[3,10];M.label=2;case 2:M.trys.push([2,7,8,9]),P=void 0,i=b(a[h]),w=i.next(),M.label=3;case 3:return w.done?[3,6]:[4,w.value];case 4:M.sent(),M.label=5;case 5:return w=i.next(),[3,3];case 6:return[3,9];case 7:return T=M.sent(),P={error:T},[3,9];case 8:try{w&&!w.done&&(O=i.return)&&O.call(i)}finally{if(P)throw P.error}return[7];case 9:return++h,[3,1];case 10:return[2]}})}()},t.forEach(function(h){return n.insert(h)}),Object.freeze(this)}s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64,Object.freeze(s),j.default=s},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(A,K,j){"use strict";var m=this&&this.__generator||function(d,s){var r,e,n,o,t={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(v){return function(h){return function p(v){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,e&&(n=2&v[0]?e.return:v[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,v[1])).done)return n;switch(e=0,n&&(v=[2&v[0],n.value]),v[0]){case 0:case 1:n=v;break;case 4:return t.label++,{value:v[1],done:!1};case 5:t.label++,e=v[1],v=[0];continue;case 7:v=t.ops.pop(),t.trys.pop();continue;default:if(!(n=(n=t.trys).length>0&&n[n.length-1])&&(6===v[0]||2===v[0])){t=0;continue}if(3===v[0]&&(!n||v[1]>n[0]&&v[1]<n[3])){t.label=v[1];break}if(6===v[0]&&t.label<n[1]){t.label=n[1],n=v;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(v);break}n[2]&&t.ops.pop(),t.trys.pop();continue}v=s.call(d,t)}catch(h){v=[6,h],e=0}finally{r=n=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,h])}}};Object.defineProperty(j,"__esModule",{value:!0});var b=function d(s){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=s};function g(d){var s=this;void 0===d&&(d=[]);var t=0,r=void 0,e=void 0;this.size=function(){return t},this.empty=function(){return 0===t},this.clear=function(){r=e=void 0,t=0},this.front=function(){return r?.value},this.back=function(){return e?.value},this.forEach=function(n){for(var o=r,a=0;o;){if(void 0===o.value)throw new Error("unknown error");n(o.value,a++),o=o.next}},this.getElementByPos=function(n){if(n<0||n>=t)throw new Error("pos must more then 0 and less then the list length");for(var o=r;n--&&o;)o=o.next;if(!o||void 0===o.value)throw new Error("unknown error");return o.value},this.eraseElementByPos=function(n){if(n<0||n>=t)throw new Error("erase pos must more then 0 and less then the list length");if(0===n)this.popFront();else if(n===t-1)this.popBack();else{for(var o=r;n--;){if(!o?.next)throw new Error("unknown error");o=o.next}if(!o||!o.pre||!o.next)throw new Error("unknown error");var a=o.pre,p=o.next;p.pre=a,a.next=p,t>0&&--t}},this.eraseElementByValue=function(n){for(;r&&r.value===n;)this.popFront();for(;e&&e.value===n;)this.popBack();if(r)for(var o=r;o;){if(o.value===n){var a=o.pre,p=o.next;p&&(p.pre=a),a&&(a.next=p),t>0&&--t}o=o.next}},this.pushBack=function(n){if(null==n)throw new Error("you can't push null or undefined here");++t;var o=new b(n);e?(e.next=o,o.pre=e,e=o):r=e=o},this.popBack=function(){e&&(t>0&&--t,e&&(r===e?r=e=void 0:(e=e.pre)&&(e.next=void 0)))},this.setElementByPos=function(n,o){if(null==o)throw new Error("you can't set null or undefined here");if(n<0||n>=t)throw new Error("pos must more then 0 and less then the list length");for(var a=r;n--;){if(!a)throw new Error("unknown error");a=a.next}a&&(a.value=o)},this.insert=function(n,o,a){if(void 0===a&&(a=1),null==o)throw new Error("you can't insert null or undefined here");if(n<0||n>t)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(a<0)throw new Error("insert size must more than 0");if(0===n)for(;a--;)this.pushFront(o);else if(n===t)for(;a--;)this.pushBack(o);else{for(var p=r,v=1;v<n;++v){if(!p?.next)throw new Error("unknown error");p=p?.next}if(!p)throw new Error("unknown error");var h=p.next;for(t+=a;a--;)p.next=new b(o),p.next.pre=p,p=p.next;p.next=h,h&&(h.pre=p)}},this.find=function(n){for(var o=r;o;){if(o.value===n)return!0;o=o.next}return!1},this.reverse=function(){for(var n=r,o=e,a=0;n&&o&&2*a<t;){var p=n.value;n.value=o.value,o.value=p,n=n.next,o=o.pre,++a}},this.unique=function(){for(var n=r;n;){for(var o=n;o&&o.next&&o.value===o.next.value;)o=o.next,t>0&&--t;n.next=o.next,n.next&&(n.next.pre=n),n=n.next}},this.sort=function(n){var o=[];this.forEach(function(p){o.push(p)}),o.sort(n);var a=r;o.forEach(function(p){a&&(a.value=p,a=a.next)})},this.pushFront=function(n){if(null==n)throw new Error("you can't push null or undefined here");++t;var o=new b(n);r?(o.next=r,r.pre=o,r=o):r=e=o},this.popFront=function(){r&&(t>0&&--t,r&&(r===e?r=e=void 0:(r=r.next)&&(r.pre=void 0)))},this.merge=function(n){var o=this,a=r;n.forEach(function(p){for(;a&&void 0!==a.value&&a.value<=p;)a=a.next;if(void 0===a)o.pushBack(p),a=e;else if(a===r)o.pushFront(p),a=r;else{++t;var v=a.pre;v&&(v.next=new b(p),v.next.pre=v,v.next.next=a,a&&(a.pre=v.next))}})},this[Symbol.iterator]=function(){return function(){var n;return m(this,function(o){switch(o.label){case 0:n=r,o.label=1;case 1:if(void 0===n)return[3,3];if(!n.value)throw new Error("unknown error");return[4,n.value];case 2:return o.sent(),n=n.next,[3,1];case 3:return[2]}})}()},d.forEach(function(n){return s.pushBack(n)}),Object.freeze(this)}Object.freeze(g),j.default=g},{}],30:[function(A,K,j){"use strict";var m=this&&this.__generator||function(s,t){var e,n,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function p(h){return function(i){return function v(h){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===h[0]||2===h[0])){r=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(6===h[0]&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(s,r)}catch(i){h=[6,i],n=0}finally{e=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}},b=this&&this.__values||function(s){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&s[t],e=0;if(r)return r.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&e>=s.length&&(s=void 0),{value:s&&s[e++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(j,"__esModule",{value:!0});var g=A("../Base/TreeNode");function d(s,t){var r=this;void 0===s&&(s=[]),t=t||function(f,_){return f<_?-1:f>_?1:0};var e=0,n=new g.default;n.color=g.default.TreeNodeColorType.black,this.size=function(){return e},this.empty=function(){return 0===e},this.clear=function(){e=0,n.key=n.value=void 0,n.leftChild=n.rightChild=n.brother=void 0};var o=function(f){if(!f||void 0===f.key)throw new Error("unknown error");return f.leftChild?o(f.leftChild):f},a=function(f){if(!f||void 0===f.key)throw new Error("unknown error");return f.rightChild?a(f.rightChild):f};this.front=function(){if(!this.empty()){var f=o(n);if(void 0===f.key||void 0===f.value)throw new Error("unknown error");return{key:f.key,value:f.value}}},this.back=function(){if(!this.empty()){var f=a(n);if(void 0===f.key||void 0===f.value)throw new Error("unknown error");return{key:f.key,value:f.value}}},this.forEach=function(f){var _,y,I=0;try{for(var N=b(this),q=N.next();!q.done;q=N.next())f(q.value,I++)}catch(E){_={error:E}}finally{try{q&&!q.done&&(y=N.return)&&y.call(N)}finally{if(_)throw _.error}}},this.getElementByPos=function(f){var _,y;if(f<0||f>=this.size())throw new Error("pos must more than 0 and less than set's size");var I=0;try{for(var N=b(this),q=N.next();!q.done;q=N.next()){if(I===f)return q.value;++I}}catch(E){_={error:E}}finally{try{q&&!q.done&&(y=N.return)&&y.call(N)}finally{if(_)throw _.error}}throw new Error("unknown Error")};var p=function(f,_){if(f&&void 0!==f.key&&void 0!==f.value){var y=t(f.key,_);return 0===y?{key:f.key,value:f.value}:y<0?p(f.rightChild,_):p(f.leftChild,_)||{key:f.key,value:f.value}}};this.lowerBound=function(f){return p(n,f)};var v=function(f,_){if(f&&void 0!==f.key&&void 0!==f.value)return t(f.key,_)<=0?v(f.rightChild,_):v(f.leftChild,_)||{key:f.key,value:f.value}};this.upperBound=function(f){return v(n,f)};var h=function(f,_){if(f&&void 0!==f.key&&void 0!==f.value){var y=t(f.key,_);return 0===y?{key:f.key,value:f.value}:y>0?h(f.leftChild,_):h(f.rightChild,_)||{key:f.key,value:f.value}}};this.reverseLowerBound=function(f){return h(n,f)};var i=function(f,_){if(f&&void 0!==f.key&&void 0!==f.value)return t(f.key,_)>=0?i(f.leftChild,_):i(f.rightChild,_)||{key:f.key,value:f.value}};this.reverseUpperBound=function(f){return i(n,f)};var w=function(f){var _=f.parent;if(!_){if(f===n)return;throw new Error("unknown error")}if(f.color!==g.default.TreeNodeColorType.red){var y=f.brother;if(!y)throw new Error("unknown error");if(f===_.leftChild)if(y.color===g.default.TreeNodeColorType.red){y.color=g.default.TreeNodeColorType.black,_.color=g.default.TreeNodeColorType.red;var I=_.rotateLeft();n===_&&(n=I),w(f)}else y.color===g.default.TreeNodeColorType.black&&(y.rightChild&&y.rightChild.color===g.default.TreeNodeColorType.red?(y.color=_.color,_.color=g.default.TreeNodeColorType.black,y.rightChild&&(y.rightChild.color=g.default.TreeNodeColorType.black),I=_.rotateLeft(),n===_&&(n=I),f.color=g.default.TreeNodeColorType.black):y.rightChild&&y.rightChild.color!==g.default.TreeNodeColorType.black||!y.leftChild||y.leftChild.color!==g.default.TreeNodeColorType.red?(!y.leftChild||y.leftChild.color===g.default.TreeNodeColorType.black)&&(!y.rightChild||y.rightChild.color===g.default.TreeNodeColorType.black)&&(y.color=g.default.TreeNodeColorType.red,w(_)):(y.color=g.default.TreeNodeColorType.red,y.leftChild&&(y.leftChild.color=g.default.TreeNodeColorType.black),I=y.rotateRight(),n===y&&(n=I),w(f)));else f===_.rightChild&&(y.color===g.default.TreeNodeColorType.red?(y.color=g.default.TreeNodeColorType.black,_.color=g.default.TreeNodeColorType.red,I=_.rotateRight(),n===_&&(n=I),w(f)):y.color===g.default.TreeNodeColorType.black&&(y.leftChild&&y.leftChild.color===g.default.TreeNodeColorType.red?(y.color=_.color,_.color=g.default.TreeNodeColorType.black,y.leftChild&&(y.leftChild.color=g.default.TreeNodeColorType.black),I=_.rotateRight(),n===_&&(n=I),f.color=g.default.TreeNodeColorType.black):y.leftChild&&y.leftChild.color!==g.default.TreeNodeColorType.black||!y.rightChild||y.rightChild.color!==g.default.TreeNodeColorType.red?(!y.leftChild||y.leftChild.color===g.default.TreeNodeColorType.black)&&(!y.rightChild||y.rightChild.color===g.default.TreeNodeColorType.black)&&(y.color=g.default.TreeNodeColorType.red,w(_)):(y.color=g.default.TreeNodeColorType.red,y.rightChild&&(y.rightChild.color=g.default.TreeNodeColorType.black),I=y.rotateLeft(),n===y&&(n=I),w(f))))}else f.color=g.default.TreeNodeColorType.black},S=function(f){for(var _=f;_.leftChild||_.rightChild;){if(_.rightChild){_=o(_.rightChild);var y=f.key;f.key=_.key,_.key=y;var I=f.value;f.value=_.value,_.value=I,f=_}_.leftChild&&(_=a(_.leftChild),y=f.key,f.key=_.key,_.key=y,I=f.value,f.value=_.value,_.value=I,f=_)}w(_),_&&_.remove(),--e,n.color=g.default.TreeNodeColorType.black},T=function(f,_){return!(!f||void 0===f.key)&&(!(!T(f.leftChild,_)&&!_(f))||T(f.rightChild,_))};this.eraseElementByPos=function(f){if(f<0||f>=e)throw new Error("pos must more than 0 and less than set's size");var _=0;T(n,function(y){return f===_?(S(y),!0):(++_,!1)})},this.eraseElementByKey=function(f){if(!this.empty()){var _=M(n,f);void 0===_||void 0===_.key||0!==t(_.key,f)||S(_)}};var P=function(f,_){if(!f||void 0===f.key)throw new Error("unknown error");var y=t(_,f.key);return y<0?f.leftChild?P(f.leftChild,_):(f.leftChild=new g.default,f.leftChild.parent=f,f.leftChild.brother=f.rightChild,f.rightChild&&(f.rightChild.brother=f.leftChild),f.leftChild):y>0?f.rightChild?P(f.rightChild,_):(f.rightChild=new g.default,f.rightChild.parent=f,f.rightChild.brother=f.leftChild,f.leftChild&&(f.leftChild.brother=f.rightChild),f.rightChild):f},O=function(f){var _=f.parent;if(!_){if(f===n)return;throw new Error("unknown error")}if(_.color!==g.default.TreeNodeColorType.black&&_.color===g.default.TreeNodeColorType.red){var y=_.brother,I=_.parent;if(!I)throw new Error("unknown error");if(y&&y.color===g.default.TreeNodeColorType.red)y.color=_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red,O(I);else if(!y||y.color===g.default.TreeNodeColorType.black)if(_===I.leftChild)if(f===_.leftChild){_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red;var N=I.rotateRight();I===n&&(n=N)}else f===_.rightChild&&(N=_.rotateLeft(),I===n&&(n=N),O(_));else _===I.rightChild&&(f===_.leftChild?(N=_.rotateRight(),I===n&&(n=N),O(_)):f===_.rightChild&&(_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red,N=I.rotateLeft(),I===n&&(n=N)))}};this.setElement=function(f,_){if(null==f)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=_){if(this.empty())return++e,n.key=f,n.value=_,void(n.color=g.default.TreeNodeColorType.black);var y=P(n,f);void 0===y.key||0!==t(y.key,f)?(++e,y.key=f,y.value=_,O(y),n.color=g.default.TreeNodeColorType.black):y.value=_}else this.eraseElementByKey(f)};var M=function(f,_){if(f&&void 0!==f.key){var y=t(_,f.key);return y<0?M(f.leftChild,_):y>0?M(f.rightChild,_):f}};this.find=function(f){return!!M(n,f)},this.getElementByKey=function(f){var _=M(n,f);if(void 0===_?.key||void 0===_?.value)throw new Error("unknown error");return _.value},this.union=function(f){var _=this;f.forEach(function(y){return _.setElement(y.key,y.value)})},this.getHeight=function(){if(this.empty())return 0;var f=function(_){return _?Math.max(f(_.leftChild),f(_.rightChild))+1:1};return f(n)};var H=function(f){return m(this,function(_){switch(_.label){case 0:return f&&void 0!==f.key&&void 0!==f.value?[5,b(H(f.leftChild))]:[2];case 1:return _.sent(),[4,{key:f.key,value:f.value}];case 2:return _.sent(),[5,b(H(f.rightChild))];case 3:return _.sent(),[2]}})};this[Symbol.iterator]=function(){return H(n)},s.forEach(function(f){return r.setElement(f.key,f.value)}),Object.freeze(this)}Object.freeze(d),j.default=d},{"../Base/TreeNode":25}],31:[function(A,K,j){"use strict";function m(b,g){void 0===b&&(b=[]),g=g||function(e,n){return e>n?-1:e<n?1:0};var d=[];b.forEach(function(e){return d.push(e)});var s=d.length,t=function(e,n){if(e<0||e>=s)throw new Error("unknown error");if(n<0||n>=s)throw new Error("unknown error");var o=d[e];d[e]=d[n],d[n]=o},r=function(e){if(e<0||e>=s)throw new Error("unknown error");var n=2*e+1,o=2*e+2;n<s&&g(d[e],d[n])>0&&t(e,n),o<s&&g(d[e],d[o])>0&&t(e,o)};(function(){for(var e=Math.floor((s-1)/2);e>=0;--e)for(var n=e,o=2*n+1;o<s;){var p=o+1,v=o;if(p<s&&g(d[o],d[p])>0&&(v=p),g(d[n],d[v])<=0)break;t(n,v),o=2*(n=v)+1}})(),this.size=function(){return s},this.empty=function(){return 0===s},this.clear=function(){s=0,d.length=0},this.push=function(e){if(d.push(e),1!=++s)for(var n=s-1;n>0;){var o=Math.floor((n-1)/2);if(g(d[o],e)<=0)break;r(o),n=o}},this.pop=function(){if(!this.empty()){if(1===this.size())return void--s;var e=d[s-1];--s;for(var n=0;n<this.size();){var o=2*n+1,a=2*n+2;if(o>=this.size())break;var p=o;if(a<this.size()&&g(d[o],d[a])>0&&(p=a),g(d[p],e)>=0)break;d[n]=d[p],n=p}d[n]=e}},this.top=function(){return d[0]},Object.freeze(this)}Object.defineProperty(j,"__esModule",{value:!0}),Object.freeze(m),j.default=m},{}],32:[function(A,K,j){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var m=A("../LinkList/LinkList");function b(g){void 0===g&&(g=[]);var d=new m.default(g);this.size=function(){return d.size()},this.empty=function(){return d.empty()},this.clear=function(){d.clear()},this.push=function(s){d.pushBack(s)},this.pop=function(){d.popFront()},this.front=function(){return d.front()},Object.freeze(this)}Object.freeze(b),j.default=b},{"../LinkList/LinkList":29}],33:[function(A,K,j){"use strict";var m=this&&this.__generator||function(s,t){var e,n,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function p(h){return function(i){return function v(h){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===h[0]||2===h[0])){r=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(6===h[0]&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(s,r)}catch(i){h=[6,i],n=0}finally{e=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}},b=this&&this.__values||function(s){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&s[t],e=0;if(r)return r.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&e>=s.length&&(s=void 0),{value:s&&s[e++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(j,"__esModule",{value:!0});var g=A("../Base/TreeNode");function d(s,t){var r=this;void 0===s&&(s=[]),t=t||function(f,_){return f<_?-1:f>_?1:0};var e=0,n=new g.default;n.color=g.default.TreeNodeColorType.black,this.size=function(){return e},this.empty=function(){return 0===e},this.clear=function(){e=0,n.key=void 0,n.leftChild=n.rightChild=n.brother=n.parent=void 0,n.color=g.default.TreeNodeColorType.black};var o=function(f){if(!f||void 0===f.key)throw new Error("unknown error");return f.leftChild?o(f.leftChild):f},a=function(f){if(!f||void 0===f.key)throw new Error("unknown error");return f.rightChild?a(f.rightChild):f};this.front=function(){if(!this.empty())return o(n).key},this.back=function(){if(!this.empty())return a(n).key},this.forEach=function(f){var _,y,I=0;try{for(var N=b(this),q=N.next();!q.done;q=N.next())f(q.value,I++)}catch(E){_={error:E}}finally{try{q&&!q.done&&(y=N.return)&&y.call(N)}finally{if(_)throw _.error}}},this.getElementByPos=function(f){var _,y;if(f<0||f>=this.size())throw new Error("pos must more than 0 and less than set's size");var I=0;try{for(var N=b(this),q=N.next();!q.done;q=N.next()){if(I===f)return q.value;++I}}catch(E){_={error:E}}finally{try{q&&!q.done&&(y=N.return)&&y.call(N)}finally{if(_)throw _.error}}throw new Error("unknown error")};var p=function(f){var _=f.parent;if(!_){if(f===n)return;throw new Error("unknown error")}if(f.color!==g.default.TreeNodeColorType.red){var y=f.brother;if(!y)throw new Error("unknown error");if(f===_.leftChild)if(y.color===g.default.TreeNodeColorType.red){y.color=g.default.TreeNodeColorType.black,_.color=g.default.TreeNodeColorType.red;var I=_.rotateLeft();n===_&&(n=I),p(f)}else y.color===g.default.TreeNodeColorType.black&&(y.rightChild&&y.rightChild.color===g.default.TreeNodeColorType.red?(y.color=_.color,_.color=g.default.TreeNodeColorType.black,y.rightChild&&(y.rightChild.color=g.default.TreeNodeColorType.black),I=_.rotateLeft(),n===_&&(n=I),f.color=g.default.TreeNodeColorType.black):y.rightChild&&y.rightChild.color!==g.default.TreeNodeColorType.black||!y.leftChild||y.leftChild.color!==g.default.TreeNodeColorType.red?(!y.leftChild||y.leftChild.color===g.default.TreeNodeColorType.black)&&(!y.rightChild||y.rightChild.color===g.default.TreeNodeColorType.black)&&(y.color=g.default.TreeNodeColorType.red,p(_)):(y.color=g.default.TreeNodeColorType.red,y.leftChild&&(y.leftChild.color=g.default.TreeNodeColorType.black),I=y.rotateRight(),n===y&&(n=I),p(f)));else f===_.rightChild&&(y.color===g.default.TreeNodeColorType.red?(y.color=g.default.TreeNodeColorType.black,_.color=g.default.TreeNodeColorType.red,I=_.rotateRight(),n===_&&(n=I),p(f)):y.color===g.default.TreeNodeColorType.black&&(y.leftChild&&y.leftChild.color===g.default.TreeNodeColorType.red?(y.color=_.color,_.color=g.default.TreeNodeColorType.black,y.leftChild&&(y.leftChild.color=g.default.TreeNodeColorType.black),I=_.rotateRight(),n===_&&(n=I),f.color=g.default.TreeNodeColorType.black):y.leftChild&&y.leftChild.color!==g.default.TreeNodeColorType.black||!y.rightChild||y.rightChild.color!==g.default.TreeNodeColorType.red?(!y.leftChild||y.leftChild.color===g.default.TreeNodeColorType.black)&&(!y.rightChild||y.rightChild.color===g.default.TreeNodeColorType.black)&&(y.color=g.default.TreeNodeColorType.red,p(_)):(y.color=g.default.TreeNodeColorType.red,y.rightChild&&(y.rightChild.color=g.default.TreeNodeColorType.black),I=y.rotateLeft(),n===y&&(n=I),p(f))))}else f.color=g.default.TreeNodeColorType.black},v=function(f){for(var _=f;_.leftChild||_.rightChild;){if(_.rightChild){_=o(_.rightChild);var y=f.key;f.key=_.key,_.key=y,f=_}_.leftChild&&(_=a(_.leftChild),y=f.key,f.key=_.key,_.key=y,f=_)}p(_),_&&_.remove(),--e,n.color=g.default.TreeNodeColorType.black},h=function(f,_){return!(!f||void 0===f.key)&&(!(!h(f.leftChild,_)&&!_(f))||h(f.rightChild,_))};this.eraseElementByPos=function(f){if(f<0||f>=e)throw new Error("pos must more than 0 and less than set's size");var _=0;h(n,function(y){return f===_?(v(y),!0):(++_,!1)})},this.eraseElementByValue=function(f){if(!this.empty()){var _=S(n,f);void 0===_||void 0===_.key||0!==t(_.key,f)||v(_)}};var i=function(f,_){if(!f||void 0===f.key)throw new Error("unknown error");var y=t(_,f.key);return y<0?f.leftChild?i(f.leftChild,_):(f.leftChild=new g.default,f.leftChild.parent=f,f.leftChild.brother=f.rightChild,f.rightChild&&(f.rightChild.brother=f.leftChild),f.leftChild):y>0?f.rightChild?i(f.rightChild,_):(f.rightChild=new g.default,f.rightChild.parent=f,f.rightChild.brother=f.leftChild,f.leftChild&&(f.leftChild.brother=f.rightChild),f.rightChild):f},w=function(f){var _=f.parent;if(!_){if(f===n)return;throw new Error("unknown error")}if(_.color!==g.default.TreeNodeColorType.black&&_.color===g.default.TreeNodeColorType.red){var y=_.brother,I=_.parent;if(!I)throw new Error("unknown error");if(y&&y.color===g.default.TreeNodeColorType.red)y.color=_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red,w(I);else if(!y||y.color===g.default.TreeNodeColorType.black)if(_===I.leftChild)if(f===_.leftChild){_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red;var N=I.rotateRight();I===n&&(n=N)}else f===_.rightChild&&(N=_.rotateLeft(),I===n&&(n=N),w(_));else _===I.rightChild&&(f===_.leftChild?(N=_.rotateRight(),I===n&&(n=N),w(_)):f===_.rightChild&&(_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red,N=I.rotateLeft(),I===n&&(n=N)))}};this.insert=function(f){if(null==f)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++e,n.key=f,void(n.color=g.default.TreeNodeColorType.black);var _=i(n,f);void 0!==_.key&&0===t(_.key,f)||(++e,_.key=f,w(_),n.color=g.default.TreeNodeColorType.black)};var S=function(f,_){if(f&&void 0!==f.key){var y=t(_,f.key);return y<0?S(f.leftChild,_):y>0?S(f.rightChild,_):f}};this.find=function(f){var _=S(n,f);return void 0!==_&&void 0!==_.key&&0===t(_.key,f)};var T=function(f,_){if(f&&void 0!==f.key){var y=t(f.key,_);if(0===y)return f.key;if(y<0)return T(f.rightChild,_);var I=T(f.leftChild,_);return void 0!==I?I:f.key}};this.lowerBound=function(f){return T(n,f)};var P=function(f,_){if(f&&void 0!==f.key){if(t(f.key,_)<=0)return P(f.rightChild,_);var I=P(f.leftChild,_);return void 0!==I?I:f.key}};this.upperBound=function(f){return P(n,f)};var O=function(f,_){if(f&&void 0!==f.key){var y=t(f.key,_);if(0===y)return f.key;if(y>0)return O(f.leftChild,_);var I=O(f.rightChild,_);return void 0!==I?I:f.key}};this.reverseLowerBound=function(f){return O(n,f)};var M=function(f,_){if(f&&void 0!==f.key){if(t(f.key,_)>=0)return M(f.leftChild,_);var I=M(f.rightChild,_);return void 0!==I?I:f.key}};this.reverseUpperBound=function(f){return M(n,f)},this.union=function(f){var _=this;f.forEach(function(y){return _.insert(y)})},this.getHeight=function(){if(this.empty())return 0;var f=function(_){return _?Math.max(f(_.leftChild),f(_.rightChild))+1:1};return f(n)};var H=function(f){return m(this,function(_){switch(_.label){case 0:return f&&void 0!==f.key?[5,b(H(f.leftChild))]:[2];case 1:return _.sent(),[4,f.key];case 2:return _.sent(),[5,b(H(f.rightChild))];case 3:return _.sent(),[2]}})};this[Symbol.iterator]=function(){return H(n)},s.forEach(function(f){return r.insert(f)}),Object.freeze(this)}Object.freeze(d),j.default=d},{"../Base/TreeNode":25}],34:[function(A,K,j){"use strict";function m(b){var g=this;void 0===b&&(b=[]);var d=0,s=[];this.size=function(){return d},this.empty=function(){return 0===d},this.clear=function(){d=0,s.length=0},this.push=function(t){s.push(t),++d},this.pop=function(){s.pop(),d>0&&--d},this.top=function(){return s[d-1]},b.forEach(function(t){return g.push(t)}),Object.freeze(this)}Object.defineProperty(j,"__esModule",{value:!0}),Object.freeze(m),j.default=m},{}],35:[function(A,K,j){"use strict";var m=this&&this.__generator||function(t,r){var n,o,a,p,e={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function v(i){return function(w){return function h(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(!(a=(a=e.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){e=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){e.label=i[1];break}if(6===i[0]&&e.label<a[1]){e.label=a[1],a=i;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(i);break}a[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(w){i=[6,w],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,w])}}},b=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var o,p,n=e.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(v){p={error:v}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(p)throw p.error}}return a},g=this&&this.__spreadArray||function(t,r,e){if(e||2===arguments.length)for(var a,n=0,o=r.length;n<o;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},d=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};function s(t){var r=this;void 0===t&&(t=[]);var e=0,n=[];this.size=function(){return e},this.empty=function(){return 0===e},this.clear=function(){e=0,n.length=0},this.front=function(){if(!this.empty())return n[0]},this.back=function(){if(!this.empty())return n[e-1]},this.forEach=function(o){n.forEach(o)},this.getElementByPos=function(o){if(o<0||o>=e)throw new Error("pos must more than 0 and less than vector's size");return n[o]},this.eraseElementByPos=function(o){if(o<0||o>=e)throw new Error("pos must more than 0 and less than vector's size");for(var a=o;a<e-1;++a)n[a]=n[a+1];this.popBack()},this.eraseElementByValue=function(o){var a=[];this.forEach(function(v){v!==o&&a.push(v)}),a.forEach(function(v,h){n[h]=v});for(var p=a.length;e>p;)this.popBack()},this.pushBack=function(o){n.push(o),++e},this.popBack=function(){n.pop(),e>0&&--e},this.setElementByPos=function(o,a){if(o<0||o>=e)throw new Error("pos must more than 0 and less than vector's size");n[o]=a},this.insert=function(o,a,p){if(void 0===p&&(p=1),o<0||o>e)throw new Error("pos must more than 0 and less than or equal to vector's size");n.splice.apply(n,g([o,0],b(new Array(p).fill(a)),!1)),e+=p},this.find=function(o){return n.includes(o)},this.reverse=function(){n.reverse()},this.unique=function(){var o,a=[];this.forEach(function(v,h){(0===h||v!==o)&&(a.push(v),o=v)}),a.forEach(function(v,h){n[h]=v});for(var p=a.length;e>p;)this.popBack()},this.sort=function(o){n.sort(o)},this[Symbol.iterator]=function(){return function(){return m(this,function(o){switch(o.label){case 0:return[5,d(n)];case 1:return[2,o.sent()]}})}()},t.forEach(function(o){return r.pushBack(o)}),Object.freeze(this)}Object.defineProperty(j,"__esModule",{value:!0}),Object.freeze(s),j.default=s},{}],36:[function(A,K,j){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.HashMap=j.HashSet=j.Map=j.Set=j.PriorityQueue=j.Deque=j.LinkList=j.Queue=j.Stack=j.Vector=void 0;var m=A("./Vector/Vector");j.Vector=m.default;var b=A("./Stack/Stack");j.Stack=b.default;var g=A("./Queue/Queue");j.Queue=g.default;var d=A("./LinkList/LinkList");j.LinkList=d.default;var s=A("./Deque/Deque");j.Deque=s.default;var t=A("./PriorityQueue/PriorityQueue");j.PriorityQueue=t.default;var r=A("./Set/Set");j.Set=r.default;var e=A("./Map/Map");j.Map=e.default;var n=A("./HashSet/HashSet");j.HashSet=n.default;var o=A("./HashMap/HashMap");j.HashMap=o.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(A,K,j){"use strict";const m=A("yallist"),b=Symbol("max"),g=Symbol("length"),d=Symbol("lengthCalculator"),s=Symbol("allowStale"),t=Symbol("maxAge"),r=Symbol("dispose"),e=Symbol("noDisposeOnSet"),n=Symbol("lruList"),o=Symbol("cache"),a=Symbol("updateAgeOnGet"),p=()=>1;const h=(O,M,H)=>{const f=O[o].get(M);if(f){const _=f.value;if(i(O,_)){if(S(O,f),!O[s])return}else H&&(O[a]&&(f.value.now=Date.now()),O[n].unshiftNode(f));return _.value}},i=(O,M)=>{if(!M||!M.maxAge&&!O[t])return!1;const H=Date.now()-M.now;return M.maxAge?H>M.maxAge:O[t]&&H>O[t]},w=O=>{if(O[g]>O[b])for(let M=O[n].tail;O[g]>O[b]&&null!==M;){const H=M.prev;S(O,M),M=H}},S=(O,M)=>{if(M){const H=M.value;O[r]&&O[r](H.key,H.value),O[g]-=H.length,O[o].delete(H.key),O[n].removeNode(M)}};class T{constructor(M,H,f,_,y){this.key=M,this.value=H,this.length=f,this.now=_,this.maxAge=y||0}}const P=(O,M,H,f)=>{let _=H.value;i(O,_)&&(S(O,H),O[s]||(_=void 0)),_&&M.call(f,_.value,_.key,O)};K.exports=class v{constructor(M){if("number"==typeof M&&(M={max:M}),M||(M={}),M.max&&("number"!=typeof M.max||M.max<0))throw new TypeError("max must be a non-negative number");this[b]=M.max||1/0;const f=M.length||p;if(this[d]="function"!=typeof f?p:f,this[s]=M.stale||!1,M.maxAge&&"number"!=typeof M.maxAge)throw new TypeError("maxAge must be a number");this[t]=M.maxAge||0,this[r]=M.dispose,this[e]=M.noDisposeOnSet||!1,this[a]=M.updateAgeOnGet||!1,this.reset()}set max(M){if("number"!=typeof M||M<0)throw new TypeError("max must be a non-negative number");this[b]=M||1/0,w(this)}get max(){return this[b]}set allowStale(M){this[s]=!!M}get allowStale(){return this[s]}set maxAge(M){if("number"!=typeof M)throw new TypeError("maxAge must be a non-negative number");this[t]=M,w(this)}get maxAge(){return this[t]}set lengthCalculator(M){"function"!=typeof M&&(M=p),M!==this[d]&&(this[d]=M,this[g]=0,this[n].forEach(H=>{H.length=this[d](H.value,H.key),this[g]+=H.length})),w(this)}get lengthCalculator(){return this[d]}get length(){return this[g]}get itemCount(){return this[n].length}rforEach(M,H){H=H||this;for(let f=this[n].tail;null!==f;){const _=f.prev;P(this,M,f,H),f=_}}forEach(M,H){H=H||this;for(let f=this[n].head;null!==f;){const _=f.next;P(this,M,f,H),f=_}}keys(){return this[n].toArray().map(M=>M.key)}values(){return this[n].toArray().map(M=>M.value)}reset(){this[r]&&this[n]&&this[n].length&&this[n].forEach(M=>this[r](M.key,M.value)),this[o]=new Map,this[n]=new m,this[g]=0}dump(){return this[n].map(M=>!i(this,M)&&{k:M.key,v:M.value,e:M.now+(M.maxAge||0)}).toArray().filter(M=>M)}dumpLru(){return this[n]}set(M,H,f){if((f=f||this[t])&&"number"!=typeof f)throw new TypeError("maxAge must be a number");const _=f?Date.now():0,y=this[d](H,M);if(this[o].has(M)){if(y>this[b])return S(this,this[o].get(M)),!1;const q=this[o].get(M).value;return this[r]&&(this[e]||this[r](M,q.value)),q.now=_,q.maxAge=f,q.value=H,this[g]+=y-q.length,q.length=y,this.get(M),w(this),!0}const I=new T(M,H,y,_,f);return I.length>this[b]?(this[r]&&this[r](M,H),!1):(this[g]+=I.length,this[n].unshift(I),this[o].set(M,this[n].head),w(this),!0)}has(M){if(!this[o].has(M))return!1;const H=this[o].get(M).value;return!i(this,H)}get(M){return h(this,M,!0)}peek(M){return h(this,M,!1)}pop(){const M=this[n].tail;return M?(S(this,M),M.value):null}del(M){S(this,this[o].get(M))}load(M){this.reset();const H=Date.now();for(let f=M.length-1;f>=0;f--){const _=M[f],y=_.e||0;if(0===y)this.set(_.k,_.v);else{const I=y-H;I>0&&this.set(_.k,_.v,I)}}}prune(){this[o].forEach((M,H)=>h(this,H,!1))}}},{yallist:83}],38:[function(A,K,j){(function(m){(function(){const b=K.exports;b.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},b.codes={};for(const d in b.types)b.codes[b.types[d]]=d;b.CMD_SHIFT=4,b.CMD_MASK=240,b.DUP_MASK=8,b.QOS_MASK=3,b.QOS_SHIFT=1,b.RETAIN_MASK=1,b.VARBYTEINT_MASK=127,b.VARBYTEINT_FIN_MASK=128,b.VARBYTEINT_MAX=268435455,b.SESSIONPRESENT_MASK=1,b.SESSIONPRESENT_HEADER=m.from([b.SESSIONPRESENT_MASK]),b.CONNACK_HEADER=m.from([b.codes.connack<<b.CMD_SHIFT]),b.USERNAME_MASK=128,b.PASSWORD_MASK=64,b.WILL_RETAIN_MASK=32,b.WILL_QOS_MASK=24,b.WILL_QOS_SHIFT=3,b.WILL_FLAG_MASK=4,b.CLEAN_SESSION_MASK=2,b.CONNECT_HEADER=m.from([b.codes.connect<<b.CMD_SHIFT]),b.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},b.propertiesCodes={};for(const d in b.properties)b.propertiesCodes[b.properties[d]]=d;function g(d){return[0,1,2].map(s=>[0,1].map(t=>[0,1].map(r=>{const e=m.alloc(1);return e.writeUInt8(b.codes[d]<<b.CMD_SHIFT|(t?b.DUP_MASK:0)|s<<b.QOS_SHIFT|r,0,!0),e})))}b.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},b.PUBLISH_HEADER=g("publish"),b.SUBSCRIBE_HEADER=g("subscribe"),b.SUBSCRIBE_OPTIONS_QOS_MASK=3,b.SUBSCRIBE_OPTIONS_NL_MASK=1,b.SUBSCRIBE_OPTIONS_NL_SHIFT=2,b.SUBSCRIBE_OPTIONS_RAP_MASK=1,b.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,b.SUBSCRIBE_OPTIONS_RH_MASK=3,b.SUBSCRIBE_OPTIONS_RH_SHIFT=4,b.SUBSCRIBE_OPTIONS_RH=[0,16,32],b.SUBSCRIBE_OPTIONS_NL=4,b.SUBSCRIBE_OPTIONS_RAP=8,b.SUBSCRIBE_OPTIONS_QOS=[0,1,2],b.UNSUBSCRIBE_HEADER=g("unsubscribe"),b.ACKS={unsuback:g("unsuback"),puback:g("puback"),pubcomp:g("pubcomp"),pubrel:g("pubrel"),pubrec:g("pubrec")},b.SUBACK_HEADER=m.from([b.codes.suback<<b.CMD_SHIFT]),b.VERSION3=m.from([3]),b.VERSION4=m.from([4]),b.VERSION5=m.from([5]),b.VERSION131=m.from([131]),b.VERSION132=m.from([132]),b.QOS=[0,1,2].map(d=>m.from([d])),b.EMPTY={pingreq:m.from([b.codes.pingreq<<4,0]),pingresp:m.from([b.codes.pingresp<<4,0]),disconnect:m.from([b.codes.disconnect<<4,0])}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],39:[function(A,K,j){(function(m){(function(){const b=A("./writeToStream"),g=A("events");class s extends g{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0;const e=new Array(this._array.length),n=this._array;let a,o=0;for(a=0;a<n.length&&void 0!==n[a];a++)e[a]="string"!=typeof n[a]?n[a].length:m.byteLength(n[a]),r+=e[a];const p=m.allocUnsafe(r);for(a=0;a<n.length&&void 0!==n[a];a++)"string"!=typeof n[a]?(n[a].copy(p,o),o+=e[a]):(p.write(n[a],o),o+=e[a]);return p}}K.exports=function d(t,r){const e=new s;return b(t,e,r),e.concat()}}).call(this)}).call(this,A("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(A,K,j){j.parser=A("./parser").parser,j.generate=A("./generate"),j.writeToStream=A("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(A,K,j){(function(m){(function(){const g={},d=m.isBuffer(m.from([1,2]).subarray(0,1));function s(n){const o=m.allocUnsafe(2);return o.writeUInt8(n>>8,0),o.writeUInt8(255&n,1),o}K.exports={cache:g,generateCache:function t(){for(let n=0;n<65536;n++)g[n]=s(n)},generateNumber:s,genBufVariableByteInt:function r(n){let a=0,p=0;const v=m.allocUnsafe(4);do{a=n%128|0,(n=n/128|0)>0&&(a|=128),v.writeUInt8(a,p++)}while(n>0&&p<4);return n>0&&(p=0),d?v.subarray(0,p):v.slice(0,p)},generate4ByteBuffer:function e(n){const o=m.allocUnsafe(4);return o.writeUInt32BE(n,0),o}}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],42:[function(A,K,j){K.exports=class m{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],43:[function(A,K,j){const m=A("bl"),b=A("events"),g=A("./packet"),d=A("./constants"),s=A("debug")("mqtt-packet:parser");class t extends b{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof t?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new t).parser(e)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new g,this.error=null,this._list=m(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),s("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0);return this.packet.cmd=d.types[e>>d.CMD_SHIFT],this.packet.retain=0!=(e&d.RETAIN_MASK),this.packet.qos=e>>d.QOS_SHIFT&d.QOS_MASK,this.packet.dup=0!=(e&d.DUP_MASK),s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),s("_parseLength %d",e.value),!!e}_parsePayload(){s("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return s("_parsePayload complete result: %s",e),e}_parseConnect(){let e,n,o,a;s("_parseConnect");const p={},v=this.packet,h=this._parseString();if(null===h)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==h&&"MQIsdp"!==h)return this._emitError(new Error("Invalid protocolId"));if(v.protocolId=h,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(v.protocolVersion=this._list.readUInt8(this._pos),v.protocolVersion>=128&&(v.bridgeMode=!0,v.protocolVersion=v.protocolVersion-128),3!==v.protocolVersion&&4!==v.protocolVersion&&5!==v.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(p.username=this._list.readUInt8(this._pos)&d.USERNAME_MASK,p.password=this._list.readUInt8(this._pos)&d.PASSWORD_MASK,p.will=this._list.readUInt8(this._pos)&d.WILL_FLAG_MASK,p.will&&(v.will={},v.will.retain=0!=(this._list.readUInt8(this._pos)&d.WILL_RETAIN_MASK),v.will.qos=(this._list.readUInt8(this._pos)&d.WILL_QOS_MASK)>>d.WILL_QOS_SHIFT),v.clean=0!=(this._list.readUInt8(this._pos)&d.CLEAN_SESSION_MASK),this._pos++,v.keepalive=this._parseNum(),-1===v.keepalive)return this._emitError(new Error("Packet too short"));if(5===v.protocolVersion){const w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(v.properties=w)}const i=this._parseString();if(null===i)return this._emitError(new Error("Packet too short"));if(v.clientId=i,s("_parseConnect: packet.clientId: %s",v.clientId),p.will){if(5===v.protocolVersion){const w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(v.will.properties=w)}if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse will topic"));if(v.will.topic=e,s("_parseConnect: packet.will.topic: %s",v.will.topic),n=this._parseBuffer(),null===n)return this._emitError(new Error("Cannot parse will payload"));v.will.payload=n,s("_parseConnect: packet.will.paylaod: %s",v.will.payload)}if(p.username){if(a=this._parseString(),null===a)return this._emitError(new Error("Cannot parse username"));v.username=a,s("_parseConnect: packet.username: %s",v.username)}if(p.password){if(o=this._parseBuffer(),null===o)return this._emitError(new Error("Cannot parse password"));v.password=o}return this.settings=v,s("_parseConnect: complete"),v}_parseConnack(){s("_parseConnack");const e=this.packet;if(this._list.length<1)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&d.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)e.reasonCode=this._list.length>=2?this._list.readUInt8(this._pos++):0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}e.payload=this._list.slice(this._pos,e.length),s("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){s("_parseSubscribe");const e=this.packet;let n,o,a,p,v,h,i;if(1!==e.qos)return this._emitError(new Error("Wrong subscribe header"));if(e.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(e.properties=w)}for(;this._pos<e.length;){if(n=this._parseString(),null===n)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));o=this._parseByte(),a=o&d.SUBSCRIBE_OPTIONS_QOS_MASK,h=0!=(o>>d.SUBSCRIBE_OPTIONS_NL_SHIFT&d.SUBSCRIBE_OPTIONS_NL_MASK),v=0!=(o>>d.SUBSCRIBE_OPTIONS_RAP_SHIFT&d.SUBSCRIBE_OPTIONS_RAP_MASK),p=o>>d.SUBSCRIBE_OPTIONS_RH_SHIFT&d.SUBSCRIBE_OPTIONS_RH_MASK,i={topic:n,qos:a},5===this.settings.protocolVersion?(i.nl=h,i.rap=v,i.rh=p):this.settings.bridgeMode&&(i.rh=0,i.rap=!0,i.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",i),e.subscriptions.push(i)}}}_parseSuback(){s("_parseSuback");const e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){s("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}for(;this._pos<e.length;){const n=this._parseString();if(null===n)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",n),e.unsubscriptions.push(n)}}}_parseUnsuback(){s("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const n=this._parseProperties();for(Object.getOwnPropertyNames(n).length&&(e.properties=n),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(e.length>2?(e.reasonCode=this._parseByte(),s("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,e.length>3)){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}return!0}_parseDisconnect(){const e=this.packet;if(s("_parseDisconnect"),5===this.settings.protocolVersion){e.reasonCode=this._list.length>0?this._parseByte():0;const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");const e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();const n=this._parseProperties();return Object.getOwnPropertyNames(n).length&&(e.properties=n),s("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const n=this._parseNum(),o=n+this._pos;if(-1===n||o>this._list.length||o>this.packet.length)return null;const a=this._list.toString("utf8",this._pos,o);return this._pos+=n,s("_parseString: result: %s",a),a}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),n=e+this._pos;if(-1===e||n>this._list.length||n>this.packet.length)return null;const o=this._list.slice(this._pos,n);return this._pos+=e,s("_parseBuffer: result: %o",o),o}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){s("_parseVarByteNum");let h,o=0,a=1,p=0,v=!1;const i=this._pos?this._pos:0;for(;o<4&&i+o<this._list.length;){if(h=this._list.readUInt8(i+o++),p+=a*(h&d.VARBYTEINT_MASK),a*=128,!(h&d.VARBYTEINT_FIN_MASK)){v=!0;break}if(this._list.length<=o)break}return!v&&4===o&&this._list.length>=o&&this._emitError(new Error("Invalid variable byte integer")),i&&(this._pos+=o),v=!!v&&(e?{bytes:o,value:p}:p),s("_parseVarByteNum: result: %o",v),v}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",e),e}_parseByType(e){switch(s("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");const e=this._parseVarByteNum(),o=this._pos+e,a={};for(;this._pos<o;){const p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;const v=d.propertiesCodes[p];if(!v)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==v)a[v]?(Array.isArray(a[v])||(a[v]=[a[v]]),a[v].push(this._parseByType(d.propertiesTypes[v]))):a[v]=this._parseByType(d.propertiesTypes[v]);else{a[v]||(a[v]=Object.create(null));const h=this._parseByType(d.propertiesTypes[v]);a[v][h.name]?(Array.isArray(a[v][h.name])||(a[v][h.name]=[a[v][h.name]]),a[v][h.name].push(h.value)):a[v][h.name]=h.value}}return a}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new g,this._pos=0,!0}_emitError(e){s("_emitError"),this.error=e,this.emit("error",e)}}K.exports=t},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(A,K,j){(function(m){(function(){const b=A("./constants"),g=m.allocUnsafe(0),d=m.from([0]),s=A("./numbers"),t=A("process-nextick-args").nextTick,r=A("debug")("mqtt-packet:writeToStream"),e=s.cache,n=s.generateNumber,o=s.generateCache,a=s.genBufVariableByteInt,p=s.generate4ByteBuffer;let v=D,h=!0;function i(V,B,Y){switch(r("generate called"),B.cork&&(B.cork(),t(w,B)),h&&(h=!1,o()),r("generate: packet.cmd: %s",V.cmd),V.cmd){case"connect":return function S(V,B,Y){const oe=V||{},L=oe.protocolId||"MQTT";let R=oe.protocolVersion||4;const F=oe.will;let G=oe.clean;const X=oe.keepalive||0,x=oe.clientId||"",c=oe.username,l=oe.password,u=oe.properties;void 0===G&&(G=!0);let C=0;if(!L||"string"!=typeof L&&!m.isBuffer(L))return B.emit("error",new Error("Invalid protocolId")),!1;if(C+=L.length+2,3!==R&&4!==R&&5!==R)return B.emit("error",new Error("Invalid protocol version")),!1;if(C+=1,("string"==typeof x||m.isBuffer(x))&&(x||R>=4)&&(x||G))C+=m.byteLength(x)+2;else{if(R<4)return B.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*G==0)return B.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof X||X<0||X>65535||X%1!=0)return B.emit("error",new Error("Invalid keepalive")),!1;if(C+=2,C+=1,5===R){var U=Q(B,u);if(!U)return!1;C+=U.length}if(F){if("object"!=typeof F)return B.emit("error",new Error("Invalid will")),!1;if(!F.topic||"string"!=typeof F.topic)return B.emit("error",new Error("Invalid will topic")),!1;if(C+=m.byteLength(F.topic)+2,C+=2,F.payload){if(!(F.payload.length>=0))return B.emit("error",new Error("Invalid will payload")),!1;C+="string"==typeof F.payload?m.byteLength(F.payload):F.payload.length}var Z={};if(5===R){if(!(Z=Q(B,F.properties)))return!1;C+=Z.length}}let ee=!1;if(null!=c){if(!ne(c))return B.emit("error",new Error("Invalid username")),!1;ee=!0,C+=m.byteLength(c)+2}if(null!=l){if(!ee)return B.emit("error",new Error("Username is required to use password")),!1;if(!ne(l))return B.emit("error",new Error("Invalid password")),!1;C+=se(l)+2}B.write(b.CONNECT_HEADER),z(B,C),re(B,L),oe.bridgeMode&&(R+=128),B.write(131===R?b.VERSION131:132===R?b.VERSION132:4===R?b.VERSION4:5===R?b.VERSION5:b.VERSION3);let ae=0;return ae|=null!=c?b.USERNAME_MASK:0,ae|=null!=l?b.PASSWORD_MASK:0,ae|=F&&F.retain?b.WILL_RETAIN_MASK:0,ae|=F&&F.qos?F.qos<<b.WILL_QOS_SHIFT:0,ae|=F?b.WILL_FLAG_MASK:0,ae|=G?b.CLEAN_SESSION_MASK:0,B.write(m.from([ae])),v(B,X),5===R&&U.write(),re(B,x),F&&(5===R&&Z.write(),E(B,F.topic),re(B,F.payload)),null!=c&&re(B,c),null!=l&&re(B,l),!0}(V,B);case"connack":return function T(V,B,Y){const oe=Y?Y.protocolVersion:4,L=V||{},R=5===oe?L.reasonCode:L.returnCode,F=L.properties;let G=2;if("number"!=typeof R)return B.emit("error",new Error("Invalid return code")),!1;let X=null;if(5===oe){if(X=Q(B,F),!X)return!1;G+=X.length}return B.write(b.CONNACK_HEADER),z(B,G),B.write(L.sessionPresent?b.SESSIONPRESENT_HEADER:d),B.write(m.from([R])),X?.write(),!0}(V,B,Y);case"publish":return function P(V,B,Y){r("publish: packet: %o",V);const oe=Y?Y.protocolVersion:4,L=V||{},R=L.qos||0,F=L.retain?b.RETAIN_MASK:0,G=L.topic,X=L.payload||g,x=L.messageId,c=L.properties;let l=0;if("string"==typeof G)l+=m.byteLength(G)+2;else{if(!m.isBuffer(G))return B.emit("error",new Error("Invalid topic")),!1;l+=G.length+2}if(m.isBuffer(X)?l+=X.length:l+=m.byteLength(X),R&&"number"!=typeof x)return B.emit("error",new Error("Invalid messageId")),!1;R&&(l+=2);let u=null;if(5===oe){if(u=Q(B,c),!u)return!1;l+=u.length}return B.write(b.PUBLISH_HEADER[R][L.dup?1:0][F?1:0]),z(B,l),v(B,se(G)),B.write(G),R>0&&v(B,x),u?.write(),r("publish: payload: %o",X),B.write(X)}(V,B,Y);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function O(V,B,Y){const oe=Y?Y.protocolVersion:4,L=V||{},R=L.cmd||"puback",F=L.messageId,G=L.dup&&"pubrel"===R?b.DUP_MASK:0;let X=0;const x=L.reasonCode,c=L.properties;let l=5===oe?3:2;if("pubrel"===R&&(X=1),"number"!=typeof F)return B.emit("error",new Error("Invalid messageId")),!1;let u=null;if(5===oe&&"object"==typeof c){if(u=W(B,c,Y,l),!u)return!1;l+=u.length}return B.write(b.ACKS[R][X][G][0]),z(B,l),v(B,F),5===oe&&B.write(m.from([x])),null!==u&&u.write(),!0}(V,B,Y);case"subscribe":return function M(V,B,Y){r("subscribe: packet: ");const oe=Y?Y.protocolVersion:4,L=V||{},R=L.dup?b.DUP_MASK:0,F=L.messageId,G=L.subscriptions,X=L.properties;let x=0;if("number"!=typeof F)return B.emit("error",new Error("Invalid messageId")),!1;x+=2;let c=null;if(5===oe){if(c=Q(B,X),!c)return!1;x+=c.length}if("object"!=typeof G||!G.length)return B.emit("error",new Error("Invalid subscriptions")),!1;for(let u=0;u<G.length;u+=1){const C=G[u].topic,U=G[u].qos;if("string"!=typeof C)return B.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof U)return B.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===oe){if("boolean"!=typeof(G[u].nl||!1))return B.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(G[u].rap||!1))return B.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ae=G[u].rh||0;if("number"!=typeof ae||ae>2)return B.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}x+=m.byteLength(C)+2+1}r("subscribe: writing to stream: %o",b.SUBSCRIBE_HEADER),B.write(b.SUBSCRIBE_HEADER[1][R?1:0][0]),z(B,x),v(B,F),null!==c&&c.write();let l=!0;for(const u of G){const U=u.qos,Z=+u.nl,ee=+u.rap,ae=u.rh;let le;E(B,u.topic),le=b.SUBSCRIBE_OPTIONS_QOS[U],5===oe&&(le|=Z?b.SUBSCRIBE_OPTIONS_NL:0,le|=ee?b.SUBSCRIBE_OPTIONS_RAP:0,le|=ae?b.SUBSCRIBE_OPTIONS_RH[ae]:0),l=B.write(m.from([le]))}return l}(V,B,Y);case"suback":return function H(V,B,Y){const oe=Y?Y.protocolVersion:4,L=V||{},R=L.messageId,F=L.granted,G=L.properties;let X=0;if("number"!=typeof R)return B.emit("error",new Error("Invalid messageId")),!1;if(X+=2,"object"!=typeof F||!F.length)return B.emit("error",new Error("Invalid qos vector")),!1;for(let c=0;c<F.length;c+=1){if("number"!=typeof F[c])return B.emit("error",new Error("Invalid qos vector")),!1;X+=1}let x=null;if(5===oe){if(x=W(B,G,Y,X),!x)return!1;X+=x.length}return B.write(b.SUBACK_HEADER),z(B,X),v(B,R),null!==x&&x.write(),B.write(m.from(F))}(V,B,Y);case"unsubscribe":return function f(V,B,Y){const oe=Y?Y.protocolVersion:4,L=V||{},R=L.messageId,F=L.dup?b.DUP_MASK:0,G=L.unsubscriptions,X=L.properties;let x=0;if("number"!=typeof R)return B.emit("error",new Error("Invalid messageId")),!1;if(x+=2,"object"!=typeof G||!G.length)return B.emit("error",new Error("Invalid unsubscriptions")),!1;for(let u=0;u<G.length;u+=1){if("string"!=typeof G[u])return B.emit("error",new Error("Invalid unsubscriptions")),!1;x+=m.byteLength(G[u])+2}let c=null;if(5===oe){if(c=Q(B,X),!c)return!1;x+=c.length}B.write(b.UNSUBSCRIBE_HEADER[1][F?1:0][0]),z(B,x),v(B,R),null!==c&&c.write();let l=!0;for(let u=0;u<G.length;u++)l=E(B,G[u]);return l}(V,B,Y);case"unsuback":return function _(V,B,Y){const oe=Y?Y.protocolVersion:4,L=V||{},R=L.messageId,F=L.dup?b.DUP_MASK:0,G=L.granted,X=L.properties,x=L.cmd,c=0;let l=2;if("number"!=typeof R)return B.emit("error",new Error("Invalid messageId")),!1;if(5===oe){if("object"!=typeof G||!G.length)return B.emit("error",new Error("Invalid qos vector")),!1;for(let C=0;C<G.length;C+=1){if("number"!=typeof G[C])return B.emit("error",new Error("Invalid qos vector")),!1;l+=1}}let u=null;if(5===oe){if(u=W(B,X,Y,l),!u)return!1;l+=u.length}return B.write(b.ACKS[x][c][F][0]),z(B,l),v(B,R),null!==u&&u.write(),5===oe&&B.write(m.from(G)),!0}(V,B,Y);case"pingreq":case"pingresp":return function y(V,B,Y){return B.write(b.EMPTY[V.cmd])}(V,B);case"disconnect":return function I(V,B,Y){const oe=Y?Y.protocolVersion:4,L=V||{},R=L.reasonCode;let G=5===oe?1:0,X=null;if(5===oe){if(X=W(B,L.properties,Y,G),!X)return!1;G+=X.length}return B.write(m.from([b.codes.disconnect<<4])),z(B,G),5===oe&&B.write(m.from([R])),null!==X&&X.write(),!0}(V,B,Y);case"auth":return function N(V,B,Y){const oe=Y?Y.protocolVersion:4,L=V||{},R=L.reasonCode,F=L.properties;let G=5===oe?1:0;5!==oe&&B.emit("error",new Error("Invalid mqtt version for auth packet"));const X=W(B,F,Y,G);return!!X&&(G+=X.length,B.write(m.from([b.codes.auth<<4])),z(B,G),B.write(m.from([R])),null!==X&&X.write(),!0)}(V,B,Y);default:return B.emit("error",new Error("Unknown command")),!1}}function w(V){V.uncork()}Object.defineProperty(i,"cacheNumbers",{get:()=>v===D,set(V){V?((!e||0===Object.keys(e).length)&&(h=!0),v=D):(h=!1,v=$)}});const q={};function z(V,B){if(B>b.VARBYTEINT_MAX)return V.emit("error",new Error(`Invalid variable byte integer: ${B}`)),!1;let Y=q[B];return Y||(Y=a(B),B<16384&&(q[B]=Y)),r("writeVarByteInt: writing to stream: %o",Y),V.write(Y)}function E(V,B){const Y=m.byteLength(B);return v(V,Y),r("writeString: %s",B),V.write(B,"utf8")}function k(V,B,Y){E(V,B),E(V,Y)}function D(V,B){return r("writeNumberCached: number: %d",B),r("writeNumberCached: %o",e[B]),V.write(e[B])}function $(V,B){const Y=n(B);return r("writeNumberGenerated: %o",Y),V.write(Y)}function re(V,B){"string"==typeof B?E(V,B):B?(v(V,B.length),V.write(B)):v(V,0)}function Q(V,B){if("object"!=typeof B||null!=B.length)return{length:1,write(){J(V,{},0)}};let Y=0;function oe(R,F){let X=0;switch(b.propertiesTypes[R]){case"byte":if("boolean"!=typeof F)return V.emit("error",new Error(`Invalid ${R}: ${F}`)),!1;X+=2;break;case"int8":if("number"!=typeof F||F<0||F>255)return V.emit("error",new Error(`Invalid ${R}: ${F}`)),!1;X+=2;break;case"binary":if(F&&null===F)return V.emit("error",new Error(`Invalid ${R}: ${F}`)),!1;X+=1+m.byteLength(F)+2;break;case"int16":if("number"!=typeof F||F<0||F>65535)return V.emit("error",new Error(`Invalid ${R}: ${F}`)),!1;X+=3;break;case"int32":if("number"!=typeof F||F<0||F>4294967295)return V.emit("error",new Error(`Invalid ${R}: ${F}`)),!1;X+=5;break;case"var":if("number"!=typeof F||F<0||F>268435455)return V.emit("error",new Error(`Invalid ${R}: ${F}`)),!1;X+=1+m.byteLength(a(F));break;case"string":if("string"!=typeof F)return V.emit("error",new Error(`Invalid ${R}: ${F}`)),!1;X+=3+m.byteLength(F.toString());break;case"pair":if("object"!=typeof F)return V.emit("error",new Error(`Invalid ${R}: ${F}`)),!1;X+=Object.getOwnPropertyNames(F).reduce((x,c)=>{const l=F[c];return Array.isArray(l)?x+=l.reduce((u,C)=>u+(3+m.byteLength(c.toString())+2+m.byteLength(C.toString())),0):x+=3+m.byteLength(c.toString())+2+m.byteLength(F[c].toString()),x},0);break;default:return V.emit("error",new Error(`Invalid property ${R}: ${F}`)),!1}return X}if(B)for(const R in B){let F=0,G=0;const X=B[R];if(Array.isArray(X))for(let x=0;x<X.length;x++){if(G=oe(R,X[x]),!G)return!1;F+=G}else{if(G=oe(R,X),!G)return!1;F=G}if(!F)return!1;Y+=F}return{length:m.byteLength(a(Y))+Y,write(){J(V,B,Y)}}}function W(V,B,Y,oe){const L=["reasonString","userProperties"],R=Y&&Y.properties&&Y.properties.maximumPacketSize?Y.properties.maximumPacketSize:0;let F=Q(V,B);if(R)for(;oe+F.length>R;){const G=L.shift();if(!G||!B[G])return!1;delete B[G],F=Q(V,B)}return F}function te(V,B,Y){switch(b.propertiesTypes[B]){case"byte":V.write(m.from([b.properties[B]])),V.write(m.from([+Y]));break;case"int8":V.write(m.from([b.properties[B]])),V.write(m.from([Y]));break;case"binary":V.write(m.from([b.properties[B]])),re(V,Y);break;case"int16":V.write(m.from([b.properties[B]])),v(V,Y);break;case"int32":V.write(m.from([b.properties[B]])),function ie(V,B){const Y=p(B);return r("write4ByteNumber: %o",Y),V.write(Y)}(V,Y);break;case"var":V.write(m.from([b.properties[B]])),z(V,Y);break;case"string":V.write(m.from([b.properties[B]])),E(V,Y);break;case"pair":Object.getOwnPropertyNames(Y).forEach(L=>{const R=Y[L];Array.isArray(R)?R.forEach(F=>{V.write(m.from([b.properties[B]])),k(V,L.toString(),F.toString())}):(V.write(m.from([b.properties[B]])),k(V,L.toString(),R.toString()))});break;default:return V.emit("error",new Error(`Invalid property ${B} value: ${Y}`)),!1}}function J(V,B,Y){z(V,Y);for(const oe in B)if(Object.prototype.hasOwnProperty.call(B,oe)&&null!==B[oe]){const L=B[oe];if(Array.isArray(L))for(let R=0;R<L.length;R++)te(V,oe,L[R]);else te(V,oe,L)}}function se(V){return V?V instanceof m?V.length:m.byteLength(V):0}function ne(V){return"string"==typeof V||V instanceof m}K.exports=i}).call(this)}).call(this,A("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(A,K,j){var m=1e3,b=60*m,g=60*b,d=24*g;function o(a,p,v,h){var i=p>=1.5*v;return Math.round(a/v)+" "+h+(i?"s":"")}K.exports=function(a,p){p=p||{};var v=typeof a;if("string"===v&&a.length>0)return function r(a){if(!((a=String(a)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(p){var v=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*v;case"weeks":case"week":case"w":return 6048e5*v;case"days":case"day":case"d":return v*d;case"hours":case"hour":case"hrs":case"hr":case"h":return v*g;case"minutes":case"minute":case"mins":case"min":case"m":return v*b;case"seconds":case"second":case"secs":case"sec":case"s":return v*m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}}(a);if("number"===v&&isFinite(a))return p.long?function n(a){var p=Math.abs(a);return p>=d?o(a,p,d,"day"):p>=g?o(a,p,g,"hour"):p>=b?o(a,p,b,"minute"):p>=m?o(a,p,m,"second"):a+" ms"}(a):function e(a){var p=Math.abs(a);return p>=d?Math.round(a/d)+"d":p>=g?Math.round(a/g)+"h":p>=b?Math.round(a/b)+"m":p>=m?Math.round(a/m)+"s":a+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},{}],46:[function(A,K,j){const m=A("./lib/number-allocator.js");K.exports.NumberAllocator=m},{"./lib/number-allocator.js":47}],47:[function(A,K,j){"use strict";const m=A("js-sdsl").Set,b=A("debug")("number-allocator:trace"),g=A("debug")("number-allocator:error");function d(t,r){this.low=t,this.high=r}function s(t,r){if(!(this instanceof s))return new s(t,r);this.min=t,this.max=r,this.ss=new m([],(e,n)=>e.compare(n)),b("Create"),this.clear()}d.prototype.equals=function(t){return this.low===t.low&&this.high===t.high},d.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0},s.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},s.prototype.alloc=function(){if(0===this.ss.size())return b("alloc():empty"),null;const t=this.ss.front(),r=t.low;return r+1<=t.high?++t.low:this.ss.eraseElementByPos(0),b("alloc():"+r),r},s.prototype.use=function(t){const r=new d(t,t),e=this.ss.lowerBound(r);if(e){if(e.equals(r))return this.ss.eraseElementByValue(e),b("use():"+t),!0;if(e.low>t)return!1;if(e.low===t)return++e.low,b("use():"+t),!0;if(e.high===t)return--e.high,b("use():"+t),!0;const n=e.low;return e.low=t+1,this.ss.insert(new d(n,t-1)),b("use():"+t),!0}return b("use():failed"),!1},s.prototype.free=function(t){if(t<this.min||t>this.max)return void g("free():"+t+" is out of range");const r=new d(t,t),e=this.ss.lowerBound(r);if(e){if(e.low<=t&&t<=e.high)return void g("free():"+t+" has already been vacant");if(e===this.ss.front())t+1===e.low?--e.low:this.ss.insert(r);else{const n=this.ss.reverseLowerBound(r);n.high+1===t?t+1===e.low?(this.ss.eraseElementByValue(n),e.low=n.low):n.high=t:t+1===e.low?e.low=t:this.ss.insert(r)}}else{if(e===this.ss.front())return void this.ss.insert(r);const n=this.ss.reverseLowerBound(r);n.high+1===t?n.high=t:this.ss.insert(r)}b("free():"+t)},s.prototype.clear=function(){b("clear()"),this.ss.clear(),this.ss.insert(new d(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(const t of this.ss)console.log(t)},K.exports=s},{debug:18,"js-sdsl":36}],48:[function(A,K,j){var m=A("wrappy");function b(d){var s=function(){return s.called?s.value:(s.called=!0,s.value=d.apply(this,arguments))};return s.called=!1,s}function g(d){var s=function(){if(s.called)throw new Error(s.onceError);return s.called=!0,s.value=d.apply(this,arguments)};return s.onceError=(d.name||"Function wrapped with `once`")+" shouldn't be called more than once",s.called=!1,s}K.exports=m(b),K.exports.strict=m(g),b.proto=b(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return b(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return g(this)},configurable:!0})})},{wrappy:79}],49:[function(A,K,j){(function(m){(function(){"use strict";K.exports=typeof m>"u"||!m.version||0===m.version.indexOf("v0.")||0===m.version.indexOf("v1.")&&0!==m.version.indexOf("v1.8.")?{nextTick:function b(g,d,s,t){if("function"!=typeof g)throw new TypeError('"callback" argument must be a function');var e,n,r=arguments.length;switch(r){case 0:case 1:return m.nextTick(g);case 2:return m.nextTick(function(){g.call(null,d)});case 3:return m.nextTick(function(){g.call(null,d,s)});case 4:return m.nextTick(function(){g.call(null,d,s,t)});default:for(e=new Array(r-1),n=0;n<e.length;)e[n++]=arguments[n];return m.nextTick(function(){g.apply(null,e)})}}}:m}).call(this)}).call(this,A("_process"))},{_process:50}],50:[function(A,K,j){var b,g,m=K.exports={};function d(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function t(w){if(b===setTimeout)return setTimeout(w,0);if((b===d||!b)&&setTimeout)return b=setTimeout,setTimeout(w,0);try{return b(w,0)}catch{try{return b.call(null,w,0)}catch{return b.call(this,w,0)}}}!function(){try{b="function"==typeof setTimeout?setTimeout:d}catch{b=d}try{g="function"==typeof clearTimeout?clearTimeout:s}catch{g=s}}();var o,e=[],n=!1,a=-1;function p(){!n||!o||(n=!1,o.length?e=o.concat(e):a=-1,e.length&&v())}function v(){if(!n){var w=t(p);n=!0;for(var S=e.length;S;){for(o=e,e=[];++a<S;)o&&o[a].run();a=-1,S=e.length}o=null,n=!1,function r(w){if(g===clearTimeout)return clearTimeout(w);if((g===s||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(w);try{return g(w)}catch{try{return g.call(null,w)}catch{return g.call(this,w)}}}(w)}}function h(w,S){this.fun=w,this.array=S}function i(){}m.nextTick=function(w){var S=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)S[T-1]=arguments[T];e.push(new h(w,S)),1===e.length&&!n&&t(v)},h.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=i,m.addListener=i,m.once=i,m.off=i,m.removeListener=i,m.removeAllListeners=i,m.emit=i,m.prependListener=i,m.prependOnceListener=i,m.listeners=function(w){return[]},m.binding=function(w){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(w){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},{}],51:[function(A,K,j){(function(m){(function(){!function(b){var g="object"==typeof j&&j&&!j.nodeType&&j,d="object"==typeof K&&K&&!K.nodeType&&K,s="object"==typeof m&&m;(s.global===s||s.window===s||s.self===s)&&(b=s);var t,f,r=2147483647,e=36,n=1,o=26,a=38,p=700,v=72,h=128,i="-",w=/^xn--/,S=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=e-n,M=Math.floor,H=String.fromCharCode;function _(Q){throw new RangeError(P[Q])}function y(Q,W){for(var te=Q.length,J=[];te--;)J[te]=W(Q[te]);return J}function I(Q,W){var te=Q.split("@"),J="";return te.length>1&&(J=te[0]+"@",Q=te[1]),J+y((Q=Q.replace(T,".")).split("."),W).join(".")}function N(Q){for(var se,ne,W=[],te=0,J=Q.length;te<J;)(se=Q.charCodeAt(te++))>=55296&&se<=56319&&te<J?56320==(64512&(ne=Q.charCodeAt(te++)))?W.push(((1023&se)<<10)+(1023&ne)+65536):(W.push(se),te--):W.push(se);return W}function q(Q){return y(Q,function(W){var te="";return W>65535&&(te+=H((W-=65536)>>>10&1023|55296),W=56320|1023&W),te+H(W)}).join("")}function z(Q){return Q-48<10?Q-22:Q-65<26?Q-65:Q-97<26?Q-97:e}function E(Q,W){return Q+22+75*(Q<26)-((0!=W)<<5)}function k(Q,W,te){var J=0;for(Q=te?M(Q/p):Q>>1,Q+=M(Q/W);Q>O*o>>1;J+=e)Q=M(Q/O);return M(J+(O+1)*Q/(Q+a))}function D(Q){var J,B,Y,oe,L,R,F,G,X,x,W=[],te=Q.length,se=0,ne=h,V=v;for((B=Q.lastIndexOf(i))<0&&(B=0),Y=0;Y<B;++Y)Q.charCodeAt(Y)>=128&&_("not-basic"),W.push(Q.charCodeAt(Y));for(oe=B>0?B+1:0;oe<te;){for(L=se,R=1,F=e;oe>=te&&_("invalid-input"),((G=z(Q.charCodeAt(oe++)))>=e||G>M((r-se)/R))&&_("overflow"),se+=G*R,!(G<(X=F<=V?n:F>=V+o?o:F-V));F+=e)R>M(r/(x=e-X))&&_("overflow"),R*=x;V=k(se-L,J=W.length+1,0==L),M(se/J)>r-ne&&_("overflow"),ne+=M(se/J),se%=J,W.splice(se++,0,ne)}return q(W)}function $(Q){var W,te,J,se,ne,V,B,Y,oe,L,R,G,X,x,c,F=[];for(G=(Q=N(Q)).length,W=h,te=0,ne=v,V=0;V<G;++V)(R=Q[V])<128&&F.push(H(R));for(J=se=F.length,se&&F.push(i);J<G;){for(B=r,V=0;V<G;++V)(R=Q[V])>=W&&R<B&&(B=R);for(B-W>M((r-te)/(X=J+1))&&_("overflow"),te+=(B-W)*X,W=B,V=0;V<G;++V)if((R=Q[V])<W&&++te>r&&_("overflow"),R==W){for(Y=te,oe=e;!(Y<(L=oe<=ne?n:oe>=ne+o?o:oe-ne));oe+=e)F.push(H(E(L+(c=Y-L)%(x=e-L),0))),Y=M(c/x);F.push(H(E(Y,0))),ne=k(te,X,J==se),te=0,++J}++te,++W}return F.join("")}if(t={version:"1.4.1",ucs2:{decode:N,encode:q},decode:D,encode:$,toASCII:function re(Q){return I(Q,function(W){return S.test(W)?"xn--"+$(W):W})},toUnicode:function ie(Q){return I(Q,function(W){return w.test(W)?D(W.slice(4).toLowerCase()):W})}},g&&d)if(K.exports==g)d.exports=t;else for(f in t)t.hasOwnProperty(f)&&(g[f]=t[f]);else b.punycode=t}(this)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],52:[function(A,K,j){"use strict";function m(g,d){return Object.prototype.hasOwnProperty.call(g,d)}K.exports=function(g,d,s,t){s=s||"=";var r={};if("string"!=typeof g||0===g.length)return r;var e=/\+/g;g=g.split(d=d||"&");var n=1e3;t&&"number"==typeof t.maxKeys&&(n=t.maxKeys);var o=g.length;n>0&&o>n&&(o=n);for(var a=0;a<o;++a){var h,i,w,S,p=g[a].replace(e,"%20"),v=p.indexOf(s);v>=0?(h=p.substr(0,v),i=p.substr(v+1)):(h=p,i=""),w=decodeURIComponent(h),S=decodeURIComponent(i),m(r,w)?b(r[w])?r[w].push(S):r[w]=[r[w],S]:r[w]=S}return r};var b=Array.isArray||function(g){return"[object Array]"===Object.prototype.toString.call(g)}},{}],53:[function(A,K,j){"use strict";var m=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}};K.exports=function(s,t,r,e){return t=t||"&",r=r||"=",null===s&&(s=void 0),"object"==typeof s?g(d(s),function(n){var o=encodeURIComponent(m(n))+r;return b(s[n])?g(s[n],function(a){return o+encodeURIComponent(m(a))}).join(t):o+encodeURIComponent(m(s[n]))}).join(t):e?encodeURIComponent(m(e))+r+encodeURIComponent(m(s)):""};var b=Array.isArray||function(s){return"[object Array]"===Object.prototype.toString.call(s)};function g(s,t){if(s.map)return s.map(t);for(var r=[],e=0;e<s.length;e++)r.push(t(s[e],e));return r}var d=Object.keys||function(s){var t=[];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.push(r);return t}},{}],54:[function(A,K,j){"use strict";j.decode=j.parse=A("./decode"),j.encode=j.stringify=A("./encode")},{"./decode":52,"./encode":53}],55:[function(A,K,j){"use strict";var b={};function g(e,n,o){o||(o=Error);var p=function(v){function h(i,w,S){return v.call(this,function a(v,h,i){return"string"==typeof n?n:n(v,h,i)}(i,w,S))||this}return function m(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}(h,v),h}(o);p.prototype.name=o.name,p.prototype.code=e,b[e]=p}function d(e,n){if(Array.isArray(e)){var o=e.length;return e=e.map(function(a){return String(a)}),o>2?"one of ".concat(n," ").concat(e.slice(0,o-1).join(", "),", or ")+e[o-1]:2===o?"one of ".concat(n," ").concat(e[0]," or ").concat(e[1]):"of ".concat(n," ").concat(e[0])}return"of ".concat(n," ").concat(String(e))}g("ERR_INVALID_OPT_VALUE",function(e,n){return'The value "'+n+'" is invalid for option "'+e+'"'},TypeError),g("ERR_INVALID_ARG_TYPE",function(e,n,o){var a,p;if("string"==typeof n&&function s(e,n,o){return e.substr(!o||o<0?0:+o,n.length)===n}(n,"not ")?(a="must not be",n=n.replace(/^not /,"")):a="must be",function t(e,n,o){return(void 0===o||o>e.length)&&(o=e.length),e.substring(o-n.length,o)===n}(e," argument"))p="The ".concat(e," ").concat(a," ").concat(d(n,"type"));else{var v=function r(e,n,o){return"number"!=typeof o&&(o=0),!(o+n.length>e.length)&&-1!==e.indexOf(n,o)}(e,".")?"property":"argument";p='The "'.concat(e,'" ').concat(v," ").concat(a," ").concat(d(n,"type"))}return p+". Received type ".concat(typeof o)},TypeError),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),g("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),g("ERR_STREAM_PREMATURE_CLOSE","Premature close"),g("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),g("ERR_STREAM_WRITE_AFTER_END","write after end"),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),K.exports.codes=b},{}],56:[function(A,K,j){(function(m){(function(){"use strict";var b=Object.keys||function(a){var p=[];for(var v in a)p.push(v);return p};K.exports=e;var g=A("./_stream_readable"),d=A("./_stream_writable");A("inherits")(e,g);for(var s=b(d.prototype),t=0;t<s.length;t++){var r=s[t];e.prototype[r]||(e.prototype[r]=d.prototype[r])}function e(a){if(!(this instanceof e))return new e(a);g.call(this,a),d.call(this,a),this.allowHalfOpen=!0,a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",n)))}function n(){this._writableState.ended||m.nextTick(o,this)}function o(a){a.end()}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=p,this._writableState.destroyed=p)}})}).call(this)}).call(this,A("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(A,K,j){"use strict";K.exports=b;var m=A("./_stream_transform");function b(g){if(!(this instanceof b))return new b(g);m.call(this,g)}A("inherits")(b,m),b.prototype._transform=function(g,d,s){s(null,g)}},{"./_stream_transform":59,inherits:24}],58:[function(A,K,j){(function(m,b){(function(){"use strict";var g;K.exports=z,z.ReadableState=q,A("events");var s=function(c,l){return c.listeners(l).length},t=A("./internal/streams/stream"),r=A("buffer").Buffer,e=b.Uint8Array||function(){};var p,a=A("util");p=a&&a.debuglog?a.debuglog("stream"):function(){};var H,f,_,v=A("./internal/streams/buffer_list"),h=A("./internal/streams/destroy"),w=A("./internal/streams/state").getHighWaterMark,S=A("../errors").codes,T=S.ERR_INVALID_ARG_TYPE,P=S.ERR_STREAM_PUSH_AFTER_EOF,O=S.ERR_METHOD_NOT_IMPLEMENTED,M=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;A("inherits")(z,t);var y=h.errorOrDestroy,I=["error","close","destroy","pause","resume"];function q(x,c,l){g=g||A("./_stream_duplex"),"boolean"!=typeof l&&(l=c instanceof g),this.objectMode=!!(x=x||{}).objectMode,l&&(this.objectMode=this.objectMode||!!x.readableObjectMode),this.highWaterMark=w(this,x,"readableHighWaterMark",l),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==x.emitClose,this.autoDestroy=!!x.autoDestroy,this.destroyed=!1,this.defaultEncoding=x.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,x.encoding&&(H||(H=A("string_decoder/").StringDecoder),this.decoder=new H(x.encoding),this.encoding=x.encoding)}function z(x){if(g=g||A("./_stream_duplex"),!(this instanceof z))return new z(x);this._readableState=new q(x,this,this instanceof g),this.readable=!0,x&&("function"==typeof x.read&&(this._read=x.read),"function"==typeof x.destroy&&(this._destroy=x.destroy)),t.call(this)}function E(x,c,l,u,C){p("readableAddChunk",c);var Z,U=x._readableState;if(null===c)U.reading=!1,function Q(x,c){if(p("onEofChunk"),!c.ended){if(c.decoder){var l=c.decoder.end();l&&l.length&&(c.buffer.push(l),c.length+=c.objectMode?1:l.length)}c.ended=!0,c.sync?W(x):(c.needReadable=!1,c.emittedReadable||(c.emittedReadable=!0,te(x)))}}(x,U);else if(C||(Z=function D(x,c){var l;return!function o(x){return r.isBuffer(x)||x instanceof e}(c)&&"string"!=typeof c&&void 0!==c&&!x.objectMode&&(l=new T("chunk",["string","Buffer","Uint8Array"],c)),l}(U,c)),Z)y(x,Z);else if(U.objectMode||c&&c.length>0)if("string"!=typeof c&&!U.objectMode&&Object.getPrototypeOf(c)!==r.prototype&&(c=function n(x){return r.from(x)}(c)),u)U.endEmitted?y(x,new M):k(x,U,c,!0);else if(U.ended)y(x,new P);else{if(U.destroyed)return!1;U.reading=!1,U.decoder&&!l?(c=U.decoder.write(c),U.objectMode||0!==c.length?k(x,U,c,!1):J(x,U)):k(x,U,c,!1)}else u||(U.reading=!1,J(x,U));return!U.ended&&(U.length<U.highWaterMark||0===U.length)}function k(x,c,l,u){c.flowing&&0===c.length&&!c.sync?(c.awaitDrain=0,x.emit("data",l)):(c.length+=c.objectMode?1:l.length,u?c.buffer.unshift(l):c.buffer.push(l),c.needReadable&&W(x)),J(x,c)}Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(c){this._readableState&&(this._readableState.destroyed=c)}}),z.prototype.destroy=h.destroy,z.prototype._undestroy=h.undestroy,z.prototype._destroy=function(x,c){c(x)},z.prototype.push=function(x,c){var u,l=this._readableState;return l.objectMode?u=!0:"string"==typeof x&&((c=c||l.defaultEncoding)!==l.encoding&&(x=r.from(x,c),c=""),u=!0),E(this,x,c,!1,u)},z.prototype.unshift=function(x){return E(this,x,null,!0,!1)},z.prototype.isPaused=function(){return!1===this._readableState.flowing},z.prototype.setEncoding=function(x){H||(H=A("string_decoder/").StringDecoder);var c=new H(x);this._readableState.decoder=c,this._readableState.encoding=this._readableState.decoder.encoding;for(var l=this._readableState.buffer.head,u="";null!==l;)u+=c.write(l.data),l=l.next;return this._readableState.buffer.clear(),""!==u&&this._readableState.buffer.push(u),this._readableState.length=u.length,this};var $=1073741824;function re(x,c){return x<=0||0===c.length&&c.ended?0:c.objectMode?1:x!=x?c.flowing&&c.length?c.buffer.head.data.length:c.length:(x>c.highWaterMark&&(c.highWaterMark=function ie(x){return x>=$?x=$:(x--,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x++),x}(x)),x<=c.length?x:c.ended?c.length:(c.needReadable=!0,0))}function W(x){var c=x._readableState;p("emitReadable",c.needReadable,c.emittedReadable),c.needReadable=!1,c.emittedReadable||(p("emitReadable",c.flowing),c.emittedReadable=!0,m.nextTick(te,x))}function te(x){var c=x._readableState;p("emitReadable_",c.destroyed,c.length,c.ended),!c.destroyed&&(c.length||c.ended)&&(x.emit("readable"),c.emittedReadable=!1),c.needReadable=!c.flowing&&!c.ended&&c.length<=c.highWaterMark,L(x)}function J(x,c){c.readingMore||(c.readingMore=!0,m.nextTick(se,x,c))}function se(x,c){for(;!c.reading&&!c.ended&&(c.length<c.highWaterMark||c.flowing&&0===c.length);){var l=c.length;if(p("maybeReadMore read 0"),x.read(0),l===c.length)break}c.readingMore=!1}function V(x){var c=x._readableState;c.readableListening=x.listenerCount("readable")>0,c.resumeScheduled&&!c.paused?c.flowing=!0:x.listenerCount("data")>0&&x.resume()}function B(x){p("readable nexttick read 0"),x.read(0)}function oe(x,c){p("resume",c.reading),c.reading||x.read(0),c.resumeScheduled=!1,x.emit("resume"),L(x),c.flowing&&!c.reading&&x.read(0)}function L(x){var c=x._readableState;for(p("flow",c.flowing);c.flowing&&null!==x.read(););}function R(x,c){return 0===c.length?null:(c.objectMode?l=c.buffer.shift():!x||x>=c.length?(l=c.decoder?c.buffer.join(""):1===c.buffer.length?c.buffer.first():c.buffer.concat(c.length),c.buffer.clear()):l=c.buffer.consume(x,c.decoder),l);var l}function F(x){var c=x._readableState;p("endReadable",c.endEmitted),c.endEmitted||(c.ended=!0,m.nextTick(G,c,x))}function G(x,c){if(p("endReadableNT",x.endEmitted,x.length),!x.endEmitted&&0===x.length&&(x.endEmitted=!0,c.readable=!1,c.emit("end"),x.autoDestroy)){var l=c._writableState;(!l||l.autoDestroy&&l.finished)&&c.destroy()}}function X(x,c){for(var l=0,u=x.length;l<u;l++)if(x[l]===c)return l;return-1}z.prototype.read=function(x){p("read",x),x=parseInt(x,10);var c=this._readableState,l=x;if(0!==x&&(c.emittedReadable=!1),0===x&&c.needReadable&&((0!==c.highWaterMark?c.length>=c.highWaterMark:c.length>0)||c.ended))return p("read: emitReadable",c.length,c.ended),0===c.length&&c.ended?F(this):W(this),null;if(0===(x=re(x,c))&&c.ended)return 0===c.length&&F(this),null;var C,u=c.needReadable;return p("need readable",u),(0===c.length||c.length-x<c.highWaterMark)&&p("length less than watermark",u=!0),c.ended||c.reading?p("reading or ended",u=!1):u&&(p("do read"),c.reading=!0,c.sync=!0,0===c.length&&(c.needReadable=!0),this._read(c.highWaterMark),c.sync=!1,c.reading||(x=re(l,c))),null===(C=x>0?R(x,c):null)?(c.needReadable=c.length<=c.highWaterMark,x=0):(c.length-=x,c.awaitDrain=0),0===c.length&&(c.ended||(c.needReadable=!0),l!==x&&c.ended&&F(this)),null!==C&&this.emit("data",C),C},z.prototype._read=function(x){y(this,new O("_read()"))},z.prototype.pipe=function(x,c){var l=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=x;break;case 1:u.pipes=[u.pipes,x];break;default:u.pipes.push(x)}u.pipesCount+=1,p("pipe count=%d opts=%j",u.pipesCount,c);var U=c&&!1===c.end||x===m.stdout||x===m.stderr?ge:ee;function Z(be,we){p("onunpipe"),be===l&&we&&!1===we.hasUnpiped&&(we.hasUnpiped=!0,function fe(){p("cleanup"),x.removeListener("close",ye),x.removeListener("finish",ve),x.removeListener("drain",ae),x.removeListener("error",ue),x.removeListener("unpipe",Z),l.removeListener("end",ee),l.removeListener("end",ge),l.removeListener("data",he),le=!0,u.awaitDrain&&(!x._writableState||x._writableState.needDrain)&&ae()}())}function ee(){p("onend"),x.end()}u.endEmitted?m.nextTick(U):l.once("end",U),x.on("unpipe",Z);var ae=function ne(x){return function(){var l=x._readableState;p("pipeOnDrain",l.awaitDrain),l.awaitDrain&&l.awaitDrain--,0===l.awaitDrain&&s(x,"data")&&(l.flowing=!0,L(x))}}(l);x.on("drain",ae);var le=!1;function he(be){p("ondata");var we=x.write(be);p("dest.write",we),!1===we&&((1===u.pipesCount&&u.pipes===x||u.pipesCount>1&&-1!==X(u.pipes,x))&&!le&&(p("false write response, pause",u.awaitDrain),u.awaitDrain++),l.pause())}function ue(be){p("onerror",be),ge(),x.removeListener("error",ue),0===s(x,"error")&&y(x,be)}function ye(){x.removeListener("finish",ve),ge()}function ve(){p("onfinish"),x.removeListener("close",ye),ge()}function ge(){p("unpipe"),l.unpipe(x)}return l.on("data",he),function N(x,c,l){if("function"==typeof x.prependListener)return x.prependListener(c,l);x._events&&x._events[c]?Array.isArray(x._events[c])?x._events[c].unshift(l):x._events[c]=[l,x._events[c]]:x.on(c,l)}(x,"error",ue),x.once("close",ye),x.once("finish",ve),x.emit("pipe",l),u.flowing||(p("pipe resume"),l.resume()),x},z.prototype.unpipe=function(x){var c=this._readableState,l={hasUnpiped:!1};if(0===c.pipesCount)return this;if(1===c.pipesCount)return x&&x!==c.pipes||(x||(x=c.pipes),c.pipes=null,c.pipesCount=0,c.flowing=!1,x&&x.emit("unpipe",this,l)),this;if(!x){var u=c.pipes,C=c.pipesCount;c.pipes=null,c.pipesCount=0,c.flowing=!1;for(var U=0;U<C;U++)u[U].emit("unpipe",this,{hasUnpiped:!1});return this}var Z=X(c.pipes,x);return-1===Z||(c.pipes.splice(Z,1),c.pipesCount-=1,1===c.pipesCount&&(c.pipes=c.pipes[0]),x.emit("unpipe",this,l)),this},z.prototype.addListener=z.prototype.on=function(x,c){var l=t.prototype.on.call(this,x,c),u=this._readableState;return"data"===x?(u.readableListening=this.listenerCount("readable")>0,!1!==u.flowing&&this.resume()):"readable"===x&&!u.endEmitted&&!u.readableListening&&(u.readableListening=u.needReadable=!0,u.flowing=!1,u.emittedReadable=!1,p("on readable",u.length,u.reading),u.length?W(this):u.reading||m.nextTick(B,this)),l},z.prototype.removeListener=function(x,c){var l=t.prototype.removeListener.call(this,x,c);return"readable"===x&&m.nextTick(V,this),l},z.prototype.removeAllListeners=function(x){var c=t.prototype.removeAllListeners.apply(this,arguments);return("readable"===x||void 0===x)&&m.nextTick(V,this),c},z.prototype.resume=function(){var x=this._readableState;return x.flowing||(p("resume"),x.flowing=!x.readableListening,function Y(x,c){c.resumeScheduled||(c.resumeScheduled=!0,m.nextTick(oe,x,c))}(this,x)),x.paused=!1,this},z.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},z.prototype.wrap=function(x){var c=this,l=this._readableState,u=!1;for(var C in x.on("end",function(){if(p("wrapped end"),l.decoder&&!l.ended){var Z=l.decoder.end();Z&&Z.length&&c.push(Z)}c.push(null)}),x.on("data",function(Z){p("wrapped data"),l.decoder&&(Z=l.decoder.write(Z)),l.objectMode&&null==Z||!(l.objectMode||Z&&Z.length)||c.push(Z)||(u=!0,x.pause())}),x)void 0===this[C]&&"function"==typeof x[C]&&(this[C]=function(ee){return function(){return x[ee].apply(x,arguments)}}(C));for(var U=0;U<I.length;U++)x.on(I[U],this.emit.bind(this,I[U]));return this._read=function(Z){p("wrapped _read",Z),u&&(u=!1,x.resume())},this},"function"==typeof Symbol&&(z.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=A("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(z.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(z.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(z.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(c){this._readableState&&(this._readableState.flowing=c)}}),z._fromList=R,Object.defineProperty(z.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(z.from=function(x,c){return void 0===_&&(_=A("./internal/streams/from")),_(z,x,c)})}).call(this)}).call(this,A("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(A,K,j){"use strict";K.exports=e;var m=A("../errors").codes,b=m.ERR_METHOD_NOT_IMPLEMENTED,g=m.ERR_MULTIPLE_CALLBACK,d=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=m.ERR_TRANSFORM_WITH_LENGTH_0,t=A("./_stream_duplex");function r(a,p){var v=this._transformState;v.transforming=!1;var h=v.writecb;if(null===h)return this.emit("error",new g);v.writechunk=null,v.writecb=null,null!=p&&this.push(p),h(a);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);t.call(this,a),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",n)}function n(){var a=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush(function(p,v){o(a,p,v)})}function o(a,p,v){if(p)return a.emit("error",p);if(null!=v&&a.push(v),a._writableState.length)throw new s;if(a._transformState.transforming)throw new d;return a.push(null)}A("inherits")(e,t),e.prototype.push=function(a,p){return this._transformState.needTransform=!1,t.prototype.push.call(this,a,p)},e.prototype._transform=function(a,p,v){v(new b("_transform()"))},e.prototype._write=function(a,p,v){var h=this._transformState;if(h.writecb=v,h.writechunk=a,h.writeencoding=p,!h.transforming){var i=this._readableState;(h.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},e.prototype._read=function(a){var p=this._transformState;null===p.writechunk||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},e.prototype._destroy=function(a,p){t.prototype._destroy.call(this,a,function(v){p(v)})}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(A,K,j){(function(m,b){(function(){"use strict";function d(L){var R=this;this.next=null,this.entry=null,this.finish=function(){!function oe(L,R,F){var G=L.entry;for(L.entry=null;G;){var X=G.callback;R.pendingcb--,X(F),G=G.next}R.corkedRequestsFree.next=L}(R,L)}}var s;K.exports=q,q.WritableState=I;var t={deprecate:A("util-deprecate")},r=A("./internal/streams/stream"),e=A("buffer").Buffer,n=b.Uint8Array||function(){};var N,p=A("./internal/streams/destroy"),h=A("./internal/streams/state").getHighWaterMark,i=A("../errors").codes,w=i.ERR_INVALID_ARG_TYPE,S=i.ERR_METHOD_NOT_IMPLEMENTED,T=i.ERR_MULTIPLE_CALLBACK,P=i.ERR_STREAM_CANNOT_PIPE,O=i.ERR_STREAM_DESTROYED,M=i.ERR_STREAM_NULL_VALUES,H=i.ERR_STREAM_WRITE_AFTER_END,f=i.ERR_UNKNOWN_ENCODING,_=p.errorOrDestroy;function y(){}function I(L,R,F){s=s||A("./_stream_duplex"),"boolean"!=typeof F&&(F=R instanceof s),this.objectMode=!!(L=L||{}).objectMode,F&&(this.objectMode=this.objectMode||!!L.writableObjectMode),this.highWaterMark=h(this,L,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===L.decodeStrings),this.defaultEncoding=L.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){!function Q(L,R){var F=L._writableState,G=F.sync,X=F.writecb;if("function"!=typeof X)throw new T;if(function re(L){L.writing=!1,L.writecb=null,L.length-=L.writelen,L.writelen=0}(F),R)!function ie(L,R,F,G,X){--R.pendingcb,F?(m.nextTick(X,G),m.nextTick(B,L,R),L._writableState.errorEmitted=!0,_(L,G)):(X(G),L._writableState.errorEmitted=!0,_(L,G),B(L,R))}(L,F,G,R,X);else{var x=se(F)||L.destroyed;!x&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&J(L,F),G?m.nextTick(W,L,F,x,X):W(L,F,x,X)}}(R,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==L.emitClose,this.autoDestroy=!!L.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function q(L){var R=this instanceof(s=s||A("./_stream_duplex"));if(!R&&!N.call(q,this))return new q(L);this._writableState=new I(L,this,R),this.writable=!0,L&&("function"==typeof L.write&&(this._write=L.write),"function"==typeof L.writev&&(this._writev=L.writev),"function"==typeof L.destroy&&(this._destroy=L.destroy),"function"==typeof L.final&&(this._final=L.final)),r.call(this)}function D(L,R,F,G,X,x){if(!F){var c=function k(L,R,F){return!L.objectMode&&!1!==L.decodeStrings&&"string"==typeof R&&(R=e.from(R,F)),R}(R,G,X);G!==c&&(F=!0,X="buffer",G=c)}var l=R.objectMode?1:G.length;R.length+=l;var u=R.length<R.highWaterMark;if(u||(R.needDrain=!0),R.writing||R.corked){var C=R.lastBufferedRequest;R.lastBufferedRequest={chunk:G,encoding:X,isBuf:F,callback:x,next:null},C?C.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else $(L,R,!1,l,G,X,x);return u}function $(L,R,F,G,X,x,c){R.writelen=G,R.writecb=c,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new O("write")):F?L._writev(X,R.onwrite):L._write(X,x,R.onwrite),R.sync=!1}function W(L,R,F,G){F||function te(L,R){0===R.length&&R.needDrain&&(R.needDrain=!1,L.emit("drain"))}(L,R),R.pendingcb--,G(),B(L,R)}function J(L,R){R.bufferProcessing=!0;var F=R.bufferedRequest;if(L._writev&&F&&F.next){var X=new Array(R.bufferedRequestCount),x=R.corkedRequestsFree;x.entry=F;for(var c=0,l=!0;F;)X[c]=F,F.isBuf||(l=!1),F=F.next,c+=1;X.allBuffers=l,$(L,R,!0,R.length,X,"",x.finish),R.pendingcb++,R.lastBufferedRequest=null,x.next?(R.corkedRequestsFree=x.next,x.next=null):R.corkedRequestsFree=new d(R),R.bufferedRequestCount=0}else{for(;F;){var u=F.chunk;if($(L,R,!1,R.objectMode?1:u.length,u,F.encoding,F.callback),F=F.next,R.bufferedRequestCount--,R.writing)break}null===F&&(R.lastBufferedRequest=null)}R.bufferedRequest=F,R.bufferProcessing=!1}function se(L){return L.ending&&0===L.length&&null===L.bufferedRequest&&!L.finished&&!L.writing}function ne(L,R){L._final(function(F){R.pendingcb--,F&&_(L,F),R.prefinished=!0,L.emit("prefinish"),B(L,R)})}function B(L,R){var F=se(R);if(F&&(function V(L,R){!R.prefinished&&!R.finalCalled&&("function"!=typeof L._final||R.destroyed?(R.prefinished=!0,L.emit("prefinish")):(R.pendingcb++,R.finalCalled=!0,m.nextTick(ne,L,R)))}(L,R),0===R.pendingcb&&(R.finished=!0,L.emit("finish"),R.autoDestroy))){var G=L._readableState;(!G||G.autoDestroy&&G.endEmitted)&&L.destroy()}return F}A("inherits")(q,r),I.prototype.getBuffer=function(){for(var R=this.bufferedRequest,F=[];R;)F.push(R),R=R.next;return F},function(){try{Object.defineProperty(I.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(q,Symbol.hasInstance,{value:function(R){return!!N.call(this,R)||this===q&&R&&R._writableState instanceof I}})):N=function(R){return R instanceof this},q.prototype.pipe=function(){_(this,new P)},q.prototype.write=function(L,R,F){var G=this._writableState,X=!1,x=!G.objectMode&&function a(L){return e.isBuffer(L)||L instanceof n}(L);return x&&!e.isBuffer(L)&&(L=function o(L){return e.from(L)}(L)),"function"==typeof R&&(F=R,R=null),x?R="buffer":R||(R=G.defaultEncoding),"function"!=typeof F&&(F=y),G.ending?function z(L,R){var F=new H;_(L,F),m.nextTick(R,F)}(this,F):(x||function E(L,R,F,G){var X;return null===F?X=new M:"string"!=typeof F&&!R.objectMode&&(X=new w("chunk",["string","Buffer"],F)),!X||(_(L,X),m.nextTick(G,X),!1)}(this,G,L,F))&&(G.pendingcb++,X=D(this,G,x,L,R,F)),X},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){var L=this._writableState;L.corked&&(L.corked--,!L.writing&&!L.corked&&!L.bufferProcessing&&L.bufferedRequest&&J(this,L))},q.prototype.setDefaultEncoding=function(R){if("string"==typeof R&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new f(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),q.prototype._write=function(L,R,F){F(new S("_write()"))},q.prototype._writev=null,q.prototype.end=function(L,R,F){var G=this._writableState;return"function"==typeof L?(F=L,L=null,R=null):"function"==typeof R&&(F=R,R=null),null!=L&&this.write(L,R),G.corked&&(G.corked=1,this.uncork()),G.ending||function Y(L,R,F){R.ending=!0,B(L,R),F&&(R.finished?m.nextTick(F):L.once("finish",F)),R.ended=!0,L.writable=!1}(this,G,F),this},Object.defineProperty(q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(q.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),q.prototype.destroy=p.destroy,q.prototype._undestroy=p.undestroy,q.prototype._destroy=function(L,R){R(L)}}).call(this)}).call(this,A("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(A,K,j){(function(m){(function(){"use strict";var b;function g(P,O,M){return O in P?Object.defineProperty(P,O,{value:M,enumerable:!0,configurable:!0,writable:!0}):P[O]=M,P}var d=A("./end-of-stream"),s=Symbol("lastResolve"),t=Symbol("lastReject"),r=Symbol("error"),e=Symbol("ended"),n=Symbol("lastPromise"),o=Symbol("handlePromise"),a=Symbol("stream");function p(P,O){return{value:P,done:O}}function v(P){var O=P[s];if(null!==O){var M=P[a].read();null!==M&&(P[n]=null,P[s]=null,P[t]=null,O(p(M,!1)))}}function h(P){m.nextTick(v,P)}var w=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((g(b={get stream(){return this[a]},next:function(){var O=this,M=this[r];if(null!==M)return Promise.reject(M);if(this[e])return Promise.resolve(p(void 0,!0));if(this[a].destroyed)return new Promise(function(y,I){m.nextTick(function(){O[r]?I(O[r]):y(p(void 0,!0))})});var f,H=this[n];if(H)f=new Promise(function i(P,O){return function(M,H){P.then(function(){O[e]?M(p(void 0,!0)):O[o](M,H)},H)}}(H,this));else{var _=this[a].read();if(null!==_)return Promise.resolve(p(_,!1));f=new Promise(this[o])}return this[n]=f,f}},Symbol.asyncIterator,function(){return this}),g(b,"return",function(){var O=this;return new Promise(function(M,H){O[a].destroy(null,function(f){f?H(f):M(p(void 0,!0))})})}),b),w);K.exports=function(O){var M,H=Object.create(S,(g(M={},a,{value:O,writable:!0}),g(M,s,{value:null,writable:!0}),g(M,t,{value:null,writable:!0}),g(M,r,{value:null,writable:!0}),g(M,e,{value:O._readableState.endEmitted,writable:!0}),g(M,o,{value:function(_,y){var I=H[a].read();I?(H[n]=null,H[s]=null,H[t]=null,_(p(I,!1))):(H[s]=_,H[t]=y)},writable:!0}),M));return H[n]=null,d(O,function(f){if(f&&"ERR_STREAM_PREMATURE_CLOSE"!==f.code){var _=H[t];return null!==_&&(H[n]=null,H[s]=null,H[t]=null,_(f)),void(H[r]=f)}var y=H[s];null!==y&&(H[n]=null,H[s]=null,H[t]=null,y(p(void 0,!0))),H[e]=!0}),O.on("readable",h.bind(null,H)),H}}).call(this)}).call(this,A("_process"))},{"./end-of-stream":64,_process:50}],62:[function(A,K,j){"use strict";function m(v,h){var i=Object.keys(v);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(v);h&&(w=w.filter(function(S){return Object.getOwnPropertyDescriptor(v,S).enumerable})),i.push.apply(i,w)}return i}function g(v,h,i){return h in v?Object.defineProperty(v,h,{value:i,enumerable:!0,configurable:!0,writable:!0}):v[h]=i,v}function s(v,h){for(var i=0;i<h.length;i++){var w=h[i];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}var e=A("buffer").Buffer,o=A("util").inspect,a=o&&o.custom||"inspect";function p(v,h,i){e.prototype.copy.call(v,h,i)}K.exports=function(){function v(){(function d(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")})(this,v),this.head=null,this.tail=null,this.length=0}return function t(v,h,i){return h&&s(v.prototype,h),i&&s(v,i),v}(v,[{key:"push",value:function(i){var w={data:i,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(i){var w={data:i,next:this.head};0===this.length&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(0!==this.length){var i=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(0===this.length)return"";for(var w=this.head,S=""+w.data;w=w.next;)S+=i+w.data;return S}},{key:"concat",value:function(i){if(0===this.length)return e.alloc(0);for(var w=e.allocUnsafe(i>>>0),S=this.head,T=0;S;)p(S.data,w,T),T+=S.data.length,S=S.next;return w}},{key:"consume",value:function(i,w){var S;return i<this.head.data.length?(S=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):S=i===this.head.data.length?this.shift():w?this._getString(i):this._getBuffer(i),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var w=this.head,S=1,T=w.data;for(i-=T.length;w=w.next;){var P=w.data,O=i>P.length?P.length:i;if(T+=O===P.length?P:P.slice(0,i),0==(i-=O)){O===P.length?(++S,this.head=w.next?w.next:this.tail=null):(this.head=w,w.data=P.slice(O));break}++S}return this.length-=S,T}},{key:"_getBuffer",value:function(i){var w=e.allocUnsafe(i),S=this.head,T=1;for(S.data.copy(w),i-=S.data.length;S=S.next;){var P=S.data,O=i>P.length?P.length:i;if(P.copy(w,w.length-i,0,O),0==(i-=O)){O===P.length?(++T,this.head=S.next?S.next:this.tail=null):(this.head=S,S.data=P.slice(O));break}++T}return this.length-=T,w}},{key:a,value:function(i,w){return o(this,function b(v){for(var h=1;h<arguments.length;h++){var i=null!=arguments[h]?arguments[h]:{};h%2?m(Object(i),!0).forEach(function(w){g(v,w,i[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach(function(w){Object.defineProperty(v,w,Object.getOwnPropertyDescriptor(i,w))})}return v}({},w,{depth:0,customInspect:!1}))}}]),v}()},{buffer:17,util:16}],63:[function(A,K,j){(function(m){(function(){"use strict";function g(e,n){t(e,n),d(e)}function d(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function t(e,n){e.emit("error",n)}K.exports={destroy:function b(e,n){var o=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(n?n(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,m.nextTick(t,this,e)):m.nextTick(t,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(v){!n&&v?o._writableState?o._writableState.errorEmitted?m.nextTick(d,o):(o._writableState.errorEmitted=!0,m.nextTick(g,o,v)):m.nextTick(g,o,v):n?(m.nextTick(d,o),n(v)):m.nextTick(d,o)}),this)},undestroy:function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function r(e,n){var o=e._readableState,a=e._writableState;o&&o.autoDestroy||a&&a.autoDestroy?e.destroy(n):e.emit("error",n)}}}).call(this)}).call(this,A("_process"))},{_process:50}],64:[function(A,K,j){"use strict";var m=A("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function g(){}K.exports=function s(t,r,e){if("function"==typeof r)return s(t,null,r);r||(r={}),e=function b(t){var r=!1;return function(){if(!r){r=!0;for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.apply(this,n)}}}(e||g);var n=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,a=function(){t.writable||v()},p=t._writableState&&t._writableState.finished,v=function(){o=!1,p=!0,n||e.call(t)},h=t._readableState&&t._readableState.endEmitted,i=function(){n=!1,h=!0,o||e.call(t)},w=function(O){e.call(t,O)},S=function(){var O;return n&&!h?((!t._readableState||!t._readableState.ended)&&(O=new m),e.call(t,O)):o&&!p?((!t._writableState||!t._writableState.ended)&&(O=new m),e.call(t,O)):void 0},T=function(){t.req.on("finish",v)};return function d(t){return t.setHeader&&"function"==typeof t.abort}(t)?(t.on("complete",v),t.on("abort",S),t.req?T():t.on("request",T)):o&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",i),t.on("finish",v),!1!==r.error&&t.on("error",w),t.on("close",S),function(){t.removeListener("complete",v),t.removeListener("abort",S),t.removeListener("request",T),t.req&&t.req.removeListener("finish",v),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",v),t.removeListener("end",i),t.removeListener("error",w),t.removeListener("close",S)}}},{"../../../errors":55}],65:[function(A,K,j){K.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(A,K,j){"use strict";var m;var g=A("../../../errors").codes,d=g.ERR_MISSING_ARGS,s=g.ERR_STREAM_DESTROYED;function t(v){if(v)throw v}function n(v){v()}function o(v,h){return v.pipe(h)}K.exports=function p(){for(var v=arguments.length,h=new Array(v),i=0;i<v;i++)h[i]=arguments[i];var w=function a(v){return v.length&&"function"==typeof v[v.length-1]?v.pop():t}(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new d("streams");var S,T=h.map(function(P,O){var M=O<h.length-1;return function e(v,h,i,w){w=function b(v){var h=!1;return function(){h||(h=!0,v.apply(void 0,arguments))}}(w);var S=!1;v.on("close",function(){S=!0}),void 0===m&&(m=A("./end-of-stream")),m(v,{readable:h,writable:i},function(P){if(P)return w(P);S=!0,w()});var T=!1;return function(P){if(!S&&!T){if(T=!0,function r(v){return v.setHeader&&"function"==typeof v.abort}(v))return v.abort();if("function"==typeof v.destroy)return v.destroy();w(P||new s("pipe"))}}}(P,M,O>0,function(f){S||(S=f),f&&T.forEach(n),!M&&(T.forEach(n),w(S))})});return h.reduce(o)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(A,K,j){"use strict";var m=A("../../../errors").codes.ERR_INVALID_OPT_VALUE;K.exports={getHighWaterMark:function g(d,s,t,r){var e=function b(d,s,t){return null!=d.highWaterMark?d.highWaterMark:s?d[t]:null}(s,r,t);if(null!=e){if(!isFinite(e)||Math.floor(e)!==e||e<0)throw new m(r?t:"highWaterMark",e);return Math.floor(e)}return d.objectMode?16:16384}}},{"../../../errors":55}],68:[function(A,K,j){K.exports=A("events").EventEmitter},{events:22}],69:[function(A,K,j){(j=K.exports=A("./lib/_stream_readable.js")).Stream=j,j.Readable=j,j.Writable=A("./lib/_stream_writable.js"),j.Duplex=A("./lib/_stream_duplex.js"),j.Transform=A("./lib/_stream_transform.js"),j.PassThrough=A("./lib/_stream_passthrough.js"),j.finished=A("./lib/internal/streams/end-of-stream.js"),j.pipeline=A("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(A,K,j){"use strict";function m(g,d,s){var t=this;this._callback=g,this._args=s,this._interval=setInterval(g,d,this._args),this.reschedule=function(r){r||(r=t._interval),t._interval&&clearInterval(t._interval),t._interval=setInterval(t._callback,r,t._args)},this.clear=function(){t._interval&&(clearInterval(t._interval),t._interval=void 0)},this.destroy=function(){t._interval&&clearInterval(t._interval),t._callback=void 0,t._interval=void 0,t._args=void 0}}K.exports=function b(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var g;if(arguments.length>0){g=new Array(arguments.length-2);for(var d=0;d<g.length;d++)g[d]=arguments[d+2]}return new m(arguments[0],arguments[1],g)}},{}],71:[function(A,K,j){"use strict";K.exports=A("./index.js")()},{"./index.js":72}],72:[function(A,K,j){(function(m){(function(){"use strict";function b(s){return s instanceof m?m.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}K.exports=function g(s){return(s=s||{}).circles?function d(s){var t=[],r=[];return s.proto?o:n;function e(a,p){for(var v=Object.keys(a),h=new Array(v.length),i=0;i<v.length;i++){var w=v[i],S=a[w];if("object"!=typeof S||null===S)h[w]=S;else if(S instanceof Date)h[w]=new Date(S);else if(ArrayBuffer.isView(S))h[w]=b(S);else{var T=t.indexOf(S);h[w]=-1!==T?r[T]:p(S)}}return h}function n(a){if("object"!=typeof a||null===a)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return e(a,n);if(a instanceof Map)return new Map(e(Array.from(a),n));if(a instanceof Set)return new Set(e(Array.from(a),n));var p={};for(var v in t.push(a),r.push(p),a)if(!1!==Object.hasOwnProperty.call(a,v)){var h=a[v];if("object"!=typeof h||null===h)p[v]=h;else if(h instanceof Date)p[v]=new Date(h);else if(h instanceof Map)p[v]=new Map(e(Array.from(h),n));else if(h instanceof Set)p[v]=new Set(e(Array.from(h),n));else if(ArrayBuffer.isView(h))p[v]=b(h);else{var i=t.indexOf(h);p[v]=-1!==i?r[i]:n(h)}}return t.pop(),r.pop(),p}function o(a){if("object"!=typeof a||null===a)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return e(a,o);if(a instanceof Map)return new Map(e(Array.from(a),o));if(a instanceof Set)return new Set(e(Array.from(a),o));var p={};for(var v in t.push(a),r.push(p),a){var h=a[v];if("object"!=typeof h||null===h)p[v]=h;else if(h instanceof Date)p[v]=new Date(h);else if(h instanceof Map)p[v]=new Map(e(Array.from(h),o));else if(h instanceof Set)p[v]=new Set(e(Array.from(h),o));else if(ArrayBuffer.isView(h))p[v]=b(h);else{var i=t.indexOf(h);p[v]=-1!==i?r[i]:o(h)}}return t.pop(),r.pop(),p}}(s):s.proto?function e(n){if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,e);if(n instanceof Map)return new Map(t(Array.from(n),e));if(n instanceof Set)return new Set(t(Array.from(n),e));var o={};for(var a in n){var p=n[a];o[a]="object"!=typeof p||null===p?p:p instanceof Date?new Date(p):p instanceof Map?new Map(t(Array.from(p),e)):p instanceof Set?new Set(t(Array.from(p),e)):ArrayBuffer.isView(p)?b(p):e(p)}return o}:function r(n){if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,r);if(n instanceof Map)return new Map(t(Array.from(n),r));if(n instanceof Set)return new Set(t(Array.from(n),r));var o={};for(var a in n)if(!1!==Object.hasOwnProperty.call(n,a)){var p=n[a];o[a]="object"!=typeof p||null===p?p:p instanceof Date?new Date(p):p instanceof Map?new Map(t(Array.from(p),r)):p instanceof Set?new Set(t(Array.from(p),r)):ArrayBuffer.isView(p)?b(p):r(p)}return o};function t(n,o){for(var a=Object.keys(n),p=new Array(a.length),v=0;v<a.length;v++){var h=a[v],i=n[h];p[h]="object"!=typeof i||null===i?i:i instanceof Date?new Date(i):ArrayBuffer.isView(i)?b(i):o(i)}return p}}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],73:[function(A,K,j){var m=A("buffer"),b=m.Buffer;function g(s,t){for(var r in s)t[r]=s[r]}function d(s,t,r){return b(s,t,r)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?K.exports=m:(g(m,j),j.Buffer=d),d.prototype=Object.create(b.prototype),g(b,d),d.from=function(s,t,r){if("number"==typeof s)throw new TypeError("Argument must not be a number");return b(s,t,r)},d.alloc=function(s,t,r){if("number"!=typeof s)throw new TypeError("Argument must be a number");var e=b(s);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},d.allocUnsafe=function(s){if("number"!=typeof s)throw new TypeError("Argument must be a number");return b(s)},d.allocUnsafeSlow=function(s){if("number"!=typeof s)throw new TypeError("Argument must be a number");return m.SlowBuffer(s)}},{buffer:17}],74:[function(A,K,j){K.exports=function m(g){var d=g._readableState;return d?d.objectMode||"number"==typeof g._duplexState?g.read():g.read(function b(g){return g.buffer.length?g.buffer.head?g.buffer.head.data.length:g.buffer[0].length:g.length}(d)):null}},{}],75:[function(A,K,j){"use strict";var m=A("safe-buffer").Buffer,b=m.isEncoding||function(T){switch((T=""+T)&&T.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(T){var P;switch(this.encoding=function d(T){var P=function g(T){if(!T)return"utf8";for(var P;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(P)return;T=(""+T).toLowerCase(),P=!0}}(T);if("string"!=typeof P&&(m.isEncoding===b||!b(T)))throw new Error("Unknown encoding: "+T);return P||T}(T),this.encoding){case"utf16le":this.text=p,this.end=v,P=4;break;case"utf8":this.fillLast=n,P=4;break;case"base64":this.text=h,this.end=i,P=3;break;default:return this.write=w,void(this.end=S)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(P)}function t(T){return T<=127?0:T>>5==6?2:T>>4==14?3:T>>3==30?4:T>>6==2?-1:-2}function n(T){var P=this.lastTotal-this.lastNeed,O=function e(T,P,O){if(128!=(192&P[0]))return T.lastNeed=0,"\ufffd";if(T.lastNeed>1&&P.length>1){if(128!=(192&P[1]))return T.lastNeed=1,"\ufffd";if(T.lastNeed>2&&P.length>2&&128!=(192&P[2]))return T.lastNeed=2,"\ufffd"}}(this,T);return void 0!==O?O:this.lastNeed<=T.length?(T.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(T.copy(this.lastChar,P,0,T.length),void(this.lastNeed-=T.length))}function p(T,P){if((T.length-P)%2==0){var O=T.toString("utf16le",P);if(O){var M=O.charCodeAt(O.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1],O.slice(0,-1)}return O}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=T[T.length-1],T.toString("utf16le",P,T.length-1)}function v(T){var P=T&&T.length?this.write(T):"";return this.lastNeed?P+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):P}function h(T,P){var O=(T.length-P)%3;return 0===O?T.toString("base64",P):(this.lastNeed=3-O,this.lastTotal=3,1===O?this.lastChar[0]=T[T.length-1]:(this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1]),T.toString("base64",P,T.length-O))}function i(T){var P=T&&T.length?this.write(T):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function w(T){return T.toString(this.encoding)}function S(T){return T&&T.length?this.write(T):""}j.StringDecoder=s,s.prototype.write=function(T){if(0===T.length)return"";var P,O;if(this.lastNeed){if(void 0===(P=this.fillLast(T)))return"";O=this.lastNeed,this.lastNeed=0}else O=0;return O<T.length?P?P+this.text(T,O):this.text(T,O):P||""},s.prototype.end=function a(T){var P=T&&T.length?this.write(T):"";return this.lastNeed?P+"\ufffd":P},s.prototype.text=function o(T,P){var O=function r(T,P,O){var M=P.length-1;if(M<O)return 0;var H=t(P[M]);return H>=0?(H>0&&(T.lastNeed=H-1),H):--M<O||-2===H?0:(H=t(P[M]))>=0?(H>0&&(T.lastNeed=H-2),H):--M<O||-2===H?0:(H=t(P[M]))>=0?(H>0&&(2===H?H=0:T.lastNeed=H-3),H):0}(this,T,P);if(!this.lastNeed)return T.toString("utf8",P);this.lastTotal=O;var M=T.length-(O-this.lastNeed);return T.copy(this.lastChar,0,M),T.toString("utf8",P,M)},s.prototype.fillLast=function(T){if(this.lastNeed<=T.length)return T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,T.length),this.lastNeed-=T.length}},{"safe-buffer":73}],76:[function(A,K,j){"use strict";var m=A("punycode"),b=A("./util");function g(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}j.parse=P,j.resolve=function M(f,_){return P(f,!1,!0).resolve(_)},j.resolveObject=function H(f,_){return f?P(f,!1,!0).resolveObject(_):_},j.format=function O(f){return b.isString(f)&&(f=P(f)),f instanceof g?f.format():g.prototype.format.call(f)},j.Url=g;var d=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,t=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,e=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),n=["'"].concat(e),o=["%","/","?",";","#"].concat(n),a=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,i={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=A("querystring");function P(f,_,y){if(f&&b.isObject(f)&&f instanceof g)return f;var I=new g;return I.parse(f,_,y),I}g.prototype.parse=function(f,_,y){if(!b.isString(f))throw new TypeError("Parameter 'url' must be a string, not "+typeof f);var I=f.indexOf("?"),N=-1!==I&&I<f.indexOf("#")?"?":"#",q=f.split(N);q[0]=q[0].replace(/\\/g,"/");var E=f=q.join(N);if(E=E.trim(),!y&&1===f.split("#").length){var k=t.exec(E);if(k)return this.path=E,this.href=E,this.pathname=k[1],k[2]?(this.search=k[2],this.query=_?T.parse(this.search.substr(1)):this.search.substr(1)):_&&(this.search="",this.query={}),this}var D=d.exec(E);if(D){var $=(D=D[0]).toLowerCase();this.protocol=$,E=E.substr(D.length)}if(y||D||E.match(/^\/\/[^@\/]+@[^@\/]+/)){var ie="//"===E.substr(0,2);ie&&(!D||!w[D])&&(E=E.substr(2),this.slashes=!0)}if(!w[D]&&(ie||D&&!S[D])){for(var re=-1,Q=0;Q<a.length;Q++)-1!==(W=E.indexOf(a[Q]))&&(-1===re||W<re)&&(re=W);var te,J;for(-1!==(J=-1===re?E.lastIndexOf("@"):E.lastIndexOf("@",re))&&(te=E.slice(0,J),E=E.slice(J+1),this.auth=decodeURIComponent(te)),re=-1,Q=0;Q<o.length;Q++){var W;-1!==(W=E.indexOf(o[Q]))&&(-1===re||W<re)&&(re=W)}-1===re&&(re=E.length),this.host=E.slice(0,re),E=E.slice(re),this.parseHost(),this.hostname=this.hostname||"";var se="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!se)for(var ne=this.hostname.split(/\./),V=(Q=0,ne.length);Q<V;Q++){var B=ne[Q];if(B&&!B.match(v)){for(var Y="",oe=0,L=B.length;oe<L;oe++)B.charCodeAt(oe)>127?Y+="x":Y+=B[oe];if(!Y.match(v)){var R=ne.slice(0,Q),F=ne.slice(Q+1),G=B.match(h);G&&(R.push(G[1]),F.unshift(G[2])),F.length&&(E="/"+F.join(".")+E),this.hostname=R.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),se||(this.hostname=m.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,se&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==E[0]&&(E="/"+E))}if(!i[$])for(Q=0,V=n.length;Q<V;Q++){var c=n[Q];if(-1!==E.indexOf(c)){var l=encodeURIComponent(c);l===c&&(l=escape(c)),E=E.split(c).join(l)}}var u=E.indexOf("#");-1!==u&&(this.hash=E.substr(u),E=E.slice(0,u));var C=E.indexOf("?");return-1!==C?(this.search=E.substr(C),this.query=E.substr(C+1),_&&(this.query=T.parse(this.query)),E=E.slice(0,C)):_&&(this.search="",this.query={}),E&&(this.pathname=E),S[$]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},g.prototype.format=function(){var f=this.auth||"";f&&(f=(f=encodeURIComponent(f)).replace(/%3A/i,":"),f+="@");var _=this.protocol||"",y=this.pathname||"",I=this.hash||"",N=!1,q="";this.host?N=f+this.host:this.hostname&&(N=f+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(N+=":"+this.port)),this.query&&b.isObject(this.query)&&Object.keys(this.query).length&&(q=T.stringify(this.query));var z=this.search||q&&"?"+q||"";return _&&":"!==_.substr(-1)&&(_+=":"),this.slashes||(!_||S[_])&&!1!==N?(N="//"+(N||""),y&&"/"!==y.charAt(0)&&(y="/"+y)):N||(N=""),I&&"#"!==I.charAt(0)&&(I="#"+I),z&&"?"!==z.charAt(0)&&(z="?"+z),_+N+(y=y.replace(/[?#]/g,function(E){return encodeURIComponent(E)}))+(z=z.replace("#","%23"))+I},g.prototype.resolve=function(f){return this.resolveObject(P(f,!1,!0)).format()},g.prototype.resolveObject=function(f){if(b.isString(f)){var _=new g;_.parse(f,!1,!0),f=_}for(var y=new g,I=Object.keys(this),N=0;N<I.length;N++){var q=I[N];y[q]=this[q]}if(y.hash=f.hash,""===f.href)return y.href=y.format(),y;if(f.slashes&&!f.protocol){for(var z=Object.keys(f),E=0;E<z.length;E++){var k=z[E];"protocol"!==k&&(y[k]=f[k])}return S[y.protocol]&&y.hostname&&!y.pathname&&(y.path=y.pathname="/"),y.href=y.format(),y}if(f.protocol&&f.protocol!==y.protocol){if(!S[f.protocol]){for(var D=Object.keys(f),$=0;$<D.length;$++){var ie=D[$];y[ie]=f[ie]}return y.href=y.format(),y}if(y.protocol=f.protocol,f.host||w[f.protocol])y.pathname=f.pathname;else{for(var V=(f.pathname||"").split("/");V.length&&!(f.host=V.shift()););f.host||(f.host=""),f.hostname||(f.hostname=""),""!==V[0]&&V.unshift(""),V.length<2&&V.unshift(""),y.pathname=V.join("/")}return y.search=f.search,y.query=f.query,y.host=f.host||"",y.auth=f.auth,y.hostname=f.hostname||f.host,y.port=f.port,(y.pathname||y.search)&&(y.path=(y.pathname||"")+(y.search||"")),y.slashes=y.slashes||f.slashes,y.href=y.format(),y}var W=y.pathname&&"/"===y.pathname.charAt(0),te=f.host||f.pathname&&"/"===f.pathname.charAt(0),J=te||W||y.host&&f.pathname,se=J,ne=y.pathname&&y.pathname.split("/")||[],B=(V=f.pathname&&f.pathname.split("/")||[],y.protocol&&!S[y.protocol]);if(B&&(y.hostname="",y.port=null,y.host&&(""===ne[0]?ne[0]=y.host:ne.unshift(y.host)),y.host="",f.protocol&&(f.hostname=null,f.port=null,f.host&&(""===V[0]?V[0]=f.host:V.unshift(f.host)),f.host=null),J=J&&(""===V[0]||""===ne[0])),te)y.host=f.host||""===f.host?f.host:y.host,y.hostname=f.hostname||""===f.hostname?f.hostname:y.hostname,y.search=f.search,y.query=f.query,ne=V;else if(V.length)ne||(ne=[]),ne.pop(),ne=ne.concat(V),y.search=f.search,y.query=f.query;else if(!b.isNullOrUndefined(f.search))return B&&(y.hostname=y.host=ne.shift(),(Y=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=Y.shift(),y.host=y.hostname=Y.shift())),y.search=f.search,y.query=f.query,(!b.isNull(y.pathname)||!b.isNull(y.search))&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.href=y.format(),y;if(!ne.length)return y.pathname=null,y.path=y.search?"/"+y.search:null,y.href=y.format(),y;for(var oe=ne.slice(-1)[0],L=(y.host||f.host||ne.length>1)&&("."===oe||".."===oe)||""===oe,R=0,F=ne.length;F>=0;F--)"."===(oe=ne[F])?ne.splice(F,1):".."===oe?(ne.splice(F,1),R++):R&&(ne.splice(F,1),R--);if(!J&&!se)for(;R--;R)ne.unshift("..");J&&""!==ne[0]&&(!ne[0]||"/"!==ne[0].charAt(0))&&ne.unshift(""),L&&"/"!==ne.join("/").substr(-1)&&ne.push("");var Y,G=""===ne[0]||ne[0]&&"/"===ne[0].charAt(0);return B&&(y.hostname=y.host=G?"":ne.length?ne.shift():"",(Y=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=Y.shift(),y.host=y.hostname=Y.shift())),(J=J||y.host&&ne.length)&&!G&&ne.unshift(""),ne.length?y.pathname=ne.join("/"):(y.pathname=null,y.path=null),(!b.isNull(y.pathname)||!b.isNull(y.search))&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.auth=f.auth||y.auth,y.slashes=y.slashes||f.slashes,y.href=y.format(),y},g.prototype.parseHost=function(){var f=this.host,_=s.exec(f);_&&(":"!==(_=_[0])&&(this.port=_.substr(1)),f=f.substr(0,f.length-_.length)),f&&(this.hostname=f)}},{"./util":77,punycode:51,querystring:54}],77:[function(A,K,j){"use strict";K.exports={isString:function(m){return"string"==typeof m},isObject:function(m){return"object"==typeof m&&null!==m},isNull:function(m){return null===m},isNullOrUndefined:function(m){return null==m}}},{}],78:[function(A,K,j){(function(m){(function(){function g(d){try{if(!m.localStorage)return!1}catch{return!1}var s=m.localStorage[d];return null!=s&&"true"===String(s).toLowerCase()}K.exports=function b(d,s){if(g("noDeprecation"))return d;var t=!1;return function r(){if(!t){if(g("throwDeprecation"))throw new Error(s);g("traceDeprecation")?console.trace(s):console.warn(s),t=!0}return d.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],79:[function(A,K,j){K.exports=function m(b,g){if(b&&g)return m(b)(g);if("function"!=typeof b)throw new TypeError("need wrapper function");return Object.keys(b).forEach(function(s){d[s]=b[s]}),d;function d(){for(var s=new Array(arguments.length),t=0;t<s.length;t++)s[t]=arguments[t];var r=b.apply(this,s),e=s[s.length-1];return"function"==typeof r&&r!==e&&Object.keys(e).forEach(function(n){r[n]=e[n]}),r}}},{}],80:[function(A,K,j){"use strict";K.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(A,K,j){K.exports=function b(){for(var g={},d=0;d<arguments.length;d++){var s=arguments[d];for(var t in s)m.call(s,t)&&(g[t]=s[t])}return g};var m=Object.prototype.hasOwnProperty},{}],82:[function(A,K,j){"use strict";K.exports=function(m){m.prototype[Symbol.iterator]=function*(){for(let b=this.head;b;b=b.next)yield b.value}}},{}],83:[function(A,K,j){"use strict";function m(t){var r=this;if(r instanceof m||(r=new m),r.tail=null,r.head=null,r.length=0,t&&"function"==typeof t.forEach)t.forEach(function(o){r.push(o)});else if(arguments.length>0)for(var e=0,n=arguments.length;e<n;e++)r.push(arguments[e]);return r}function b(t,r,e){var n=r===t.head?new s(e,null,r,t):new s(e,r,r.next,t);return null===n.next&&(t.tail=n),null===n.prev&&(t.head=n),t.length++,n}function g(t,r){t.tail=new s(r,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function d(t,r){t.head=new s(r,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function s(t,r,e,n){if(!(this instanceof s))return new s(t,r,e,n);this.list=n,this.value=t,r?(r.next=this,this.prev=r):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}K.exports=m,m.Node=s,m.create=m,m.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var r=t.next,e=t.prev;return r&&(r.prev=e),e&&(e.next=r),t===this.head&&(this.head=r),t===this.tail&&(this.tail=e),t.list.length--,t.next=null,t.prev=null,t.list=null,r},m.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var r=this.head;t.list=this,t.next=r,r&&(r.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},m.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var r=this.tail;t.list=this,t.prev=r,r&&(r.next=t),this.tail=t,this.head||(this.head=t),this.length++}},m.prototype.push=function(){for(var t=0,r=arguments.length;t<r;t++)g(this,arguments[t]);return this.length},m.prototype.unshift=function(){for(var t=0,r=arguments.length;t<r;t++)d(this,arguments[t]);return this.length},m.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},m.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},m.prototype.forEach=function(t,r){r=r||this;for(var e=this.head,n=0;null!==e;n++)t.call(r,e.value,n,this),e=e.next},m.prototype.forEachReverse=function(t,r){r=r||this;for(var e=this.tail,n=this.length-1;null!==e;n--)t.call(r,e.value,n,this),e=e.prev},m.prototype.get=function(t){for(var r=0,e=this.head;null!==e&&r<t;r++)e=e.next;if(r===t&&null!==e)return e.value},m.prototype.getReverse=function(t){for(var r=0,e=this.tail;null!==e&&r<t;r++)e=e.prev;if(r===t&&null!==e)return e.value},m.prototype.map=function(t,r){r=r||this;for(var e=new m,n=this.head;null!==n;)e.push(t.call(r,n.value,this)),n=n.next;return e},m.prototype.mapReverse=function(t,r){r=r||this;for(var e=new m,n=this.tail;null!==n;)e.push(t.call(r,n.value,this)),n=n.prev;return e},m.prototype.reduce=function(t,r){var e,n=this.head;if(arguments.length>1)e=r;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,e=this.head.value}for(var o=0;null!==n;o++)e=t(e,n.value,o),n=n.next;return e},m.prototype.reduceReverse=function(t,r){var e,n=this.tail;if(arguments.length>1)e=r;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,e=this.tail.value}for(var o=this.length-1;null!==n;o--)e=t(e,n.value,o),n=n.prev;return e},m.prototype.toArray=function(){for(var t=new Array(this.length),r=0,e=this.head;null!==e;r++)t[r]=e.value,e=e.next;return t},m.prototype.toArrayReverse=function(){for(var t=new Array(this.length),r=0,e=this.tail;null!==e;r++)t[r]=e.value,e=e.prev;return t},m.prototype.slice=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var e=new m;if(r<t||r<0)return e;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=0,o=this.head;null!==o&&n<t;n++)o=o.next;for(;null!==o&&n<r;n++,o=o.next)e.push(o.value);return e},m.prototype.sliceReverse=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var e=new m;if(r<t||r<0)return e;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=this.length,o=this.tail;null!==o&&n>r;n--)o=o.prev;for(;null!==o&&n>t;n--,o=o.prev)e.push(o.value);return e},m.prototype.splice=function(t,r,...e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,o=this.head;null!==o&&n<t;n++)o=o.next;var a=[];for(n=0;o&&n<r;n++)a.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),n=0;n<e.length;n++)o=b(this,o,e[n]);return a},m.prototype.reverse=function(){for(var t=this.head,r=this.tail,e=t;null!==e;e=e.prev){var n=e.prev;e.prev=e.next,e.next=n}return this.head=r,this.tail=t,this};try{A("./iterator.js")(m)}catch{}},{"./iterator.js":82}]},{},[12])(12)}}]);