"use strict";(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[595],{2595:(cn,ae,g)=>{g.r(ae),g.d(ae,{AppZonesModule:()=>ln});var b=g(8267),A=g(9902),F=g(525),le=g(1292),Ze=g(3083),q=g(8806),T=g(8999),z=g(1119),J=g(899),be=g(8252),Ne=g(9820),D=g(9026),M=g(8377),G=g(592),Q=g(8537),Me=g(4452),re=g(6133),Pe=g(2378),y=g(3829),Re=g(129),e=g(2222),ce=g(6298);let L=(()=>{class o{constructor(t,n){this._service=t,this._dialog=n,this._loading=new z.X(!1),this._change=new z.X(!1),this.loading=this._loading.asObservable(),this.item=this._service.item,this.counts=(0,J.aj)([this._service.all_item,this._change]).pipe((0,Ne.b)(300),(0,D.w)(s=>(0,q.mG)(this,void 0,void 0,function*(){const[_]=s;if(!(_ instanceof T.TT8))return{};this._loading.next(!0);const a=yield Promise.all([(0,T.vIL)({zone_id:_.id,limit:1}).pipe((0,M.U)(h=>h.total)).toPromise().catch(h=>0),(0,T.Vgq)(_.id).pipe((0,M.U)(h=>h.total)).toPromise().catch(h=>0),(0,T.Eio)(_.id).pipe((0,M.U)(h=>h.length)).toPromise().catch(h=>0),(0,T.I0G)({parent:_.id,limit:1}).pipe((0,M.U)(h=>h.total)).toPromise().catch(h=>0)]),[l,c,m,f]=a;return this._loading.next(!1),{systems:l,triggers:c,metadata:m,children:f}}))),this.systems=this.item.pipe((0,D.w)(s=>s instanceof T.TT8?(0,T.vIL)({zone_id:s.id}):[]),(0,M.U)(s=>s.data),(0,G.K)(s=>[]),(0,Q.d)()),this.triggers=this.item.pipe((0,D.w)(s=>s instanceof T.TT8?(0,T.Vgq)(s.id):[]),(0,M.U)(s=>s.data),(0,G.K)(s=>[]),(0,Q.d)()),this.metadata=this.item.pipe((0,D.w)(s=>s instanceof T.TT8?(0,T.Eio)(s.id):(0,be.of)([])),(0,G.K)(s=>[]),(0,Q.d)(1)),this.children=this.item.pipe((0,D.w)(s=>s instanceof T.TT8?(0,T.I0G)({parent:s.id}):[]),(0,M.U)(s=>s.data),(0,G.K)(s=>[]),(0,Q.d)()),setTimeout(()=>this._change.next(!this._change.getValue()),1e3)}get active_item(){return this._service.active_item}selectTrigger(){return(0,q.mG)(this,void 0,void 0,function*(){const t=this._dialog.open(Re.f,{data:{service_name:"Triggers",query_fn:_=>(0,T.$Um)({q:_}).pipe((0,M.U)(a=>a.data))}}),n=yield Promise.race([t.componentInstance.event.pipe((0,Me.P)(_=>"action"===_.reason)).toPromise(),t.afterClosed().toPromise()]);if(!n||!n.reason)return t.close();const s=yield this.addTrigger(t.componentInstance.item);t.close(),s&&this._service.replaceItem(s)})}addTrigger(t){return(0,q.mG)(this,void 0,void 0,function*(){return(0,T.BfP)(this.active_item.id,Object.assign(Object.assign({},this.active_item),{triggers:(0,re.Tw)([...this.active_item.triggers,t.id])})).toPromise()})}removeTrigger(t){return(0,q.mG)(this,void 0,void 0,function*(){const n=yield(0,re._5)({title:"Remove trigger",content:`<p>Are you sure you want remove trigger "${t.name}"?</p><p>Configuration will be updated <strong>immediately</strong>.</p>`,icon:{type:"icon",class:"backoffice-trash"}},this._dialog);if(!n||!n.reason)return;const s=yield(0,T.BfP)(this.active_item.id,Object.assign(Object.assign({},this.active_item),{triggers:this.active_item.triggers.filter(_=>_!==t.id)})).toPromise().catch(_=>{throw n.close(),(0,y.cB)(`Error removing trigger ${t.id} from zone. Error: ${_.statusText||_.message||_}`),_});n.close(),(0,y.t5)("Successfully removed trigger from zone."),s&&this._service.replaceItem(s)})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Pe.L),e.LFG(ce.uw))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var ke=g(2016),ve=g(2874);let Fe=(()=>{class o extends le.K{constructor(t,n,s){super(),this._service=t,this._route=n,this._router=s,this.name="zones",this.tab_list=[]}get extensions(){return(0,Ze.fq)(this._service.active_item,this.name)}updateTabList(t){console.log("Details:",t),this.tab_list=[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"systems",name:"Systems",count:t.systems,icon:{class:"backoffice-documents"}},{id:"triggers",name:"Triggers",count:t.triggers,icon:{class:"backoffice-stopwatch"}},{id:"metadata",name:"Metadata",count:t.metadata,icon:{class:"backoffice-gist"}},{id:"children",name:"Children",count:t.children,icon:{class:"backoffice-flow-tree"}},{id:"history",name:"Settings History",icon:{class:"backoffice-clock"}}].concat(this.extensions)}ngOnInit(){this.subscription("item",this._service.counts.subscribe(t=>this.updateTabList(t))),this.updateTabList({})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L),e.Y36(F.gz),e.Y36(F.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-zones"]],features:[e.qOj],decls:3,vars:1,consts:[[1,"flex-1","flex-col","sm:flex-row","flex","h-full","w-full","relative"],["heading","Zones","name","zones",1,"absolute","top-0","left-0","h-12","w-full","sm:h-full","sm:static"],["name","zone","route","zones",1,"flex-1","relative","mt-12","sm:mt-0","w-full","sm:w-1/2",3,"tabs"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"sidebar",1),e._UZ(2,"item-display",2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("tabs",n.tab_list))},directives:[ke.k,ve.s],styles:["sidebar[_ngcontent-%COMP%]{transition:height .3s}@media screen and (min-width: 640px){sidebar[_ngcontent-%COMP%]{width:20em!important}}\n/*# sourceMappingURL=zones.component.ts-angular-inline--45.css.map*/"]}),o})();let B={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const Ie=/[&<>"']/,we=/[&<>"']/g,Ue=/[<>"']|&(?!#?\w+;)/,$e=/[<>"']|&(?!#?\w+;)/g,Le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},de=o=>Le[o];function x(o,i){if(i){if(Ie.test(o))return o.replace(we,de)}else if(Ue.test(o))return o.replace($e,de);return o}const Be=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function ge(o){return o.replace(Be,(i,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const ze=/(^|[^\[])\^/g;function E(o,i){o=o.source||o,i=i||"";const t={replace:(n,s)=>(s=(s=s.source||s).replace(ze,"$1"),o=o.replace(n,s),t),getRegex:()=>new RegExp(o,i)};return t}const De=/[^\w:]/g,Ke=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function ue(o,i,t){if(o){let n;try{n=decodeURIComponent(ge(t)).replace(De,"").toLowerCase()}catch(s){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}i&&!Ke.test(t)&&(t=function(o,i){Y[" "+o]||(Y[" "+o]=Xe.test(o)?o+"/":H(o,"/",!0));const t=-1===(o=Y[" "+o]).indexOf(":");return"//"===i.substring(0,2)?t?i:o.replace(qe,"$1")+i:"/"===i.charAt(0)?t?i:o.replace(Je,"$1")+i:o+i}(i,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch(n){return null}return t}const Y={},Xe=/^[^:]+:\/*[^/]*$/,qe=/^([^:]+:)[\s\S]*$/,Je=/^([^:]+:\/*[^/]*)[\s\S]*$/,j={exec:function(){}};function P(o){let t,n,i=1;for(;i<arguments.length;i++)for(n in t=arguments[i],t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o}function me(o,i){const n=o.replace(/\|/g,(_,a,l)=>{let c=!1,m=a;for(;--m>=0&&"\\"===l[m];)c=!c;return c?"|":" |"}).split(/ \|/);let s=0;if(n[0].trim()||n.shift(),n[n.length-1].trim()||n.pop(),n.length>i)n.splice(i);else for(;n.length<i;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(/\\\|/g,"|");return n}function H(o,i,t){const n=o.length;if(0===n)return"";let s=0;for(;s<n;){const _=o.charAt(n-s-1);if(_!==i||t){if(_===i||!t)break;s++}else s++}return o.substr(0,n-s)}function fe(o){o&&o.sanitize&&!o.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function he(o,i){if(i<1)return"";let t="";for(;i>1;)1&i&&(t+=o),i>>=1,o+=o;return t+o}function Se(o,i,t,n){const s=i.href,_=i.title?x(i.title):null,a=o[1].replace(/\\([\[\]])/g,"$1");if("!"!==o[0].charAt(0)){n.state.inLink=!0;const l={type:"link",raw:t,href:s,title:_,text:a,tokens:n.inlineTokens(a,[])};return n.state.inLink=!1,l}return{type:"image",raw:t,href:s,title:_,text:x(a)}}class te{constructor(i){this.options=i||B}space(i){const t=this.rules.block.newline.exec(i);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(i){const t=this.rules.block.code.exec(i);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:H(n,"\n")}}}fences(i){const t=this.rules.block.fences.exec(i);if(t){const n=t[0],s=function(o,i){const t=o.match(/^(\s+)(?:```)/);if(null===t)return i;const n=t[1];return i.split("\n").map(s=>{const _=s.match(/^\s+/);if(null===_)return s;const[a]=_;return a.length>=n.length?s.slice(n.length):s}).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:s}}}heading(i){const t=this.rules.block.heading.exec(i);if(t){let n=t[2].trim();if(/#$/.test(n)){const _=H(n,"#");(this.options.pedantic||!_||/ $/.test(_))&&(n=_.trim())}const s={type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}hr(i){const t=this.rules.block.hr.exec(i);if(t)return{type:"hr",raw:t[0]}}blockquote(i){const t=this.rules.block.blockquote.exec(i);if(t){const n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(n,[]),text:n}}}list(i){let t=this.rules.block.list.exec(i);if(t){let n,s,_,a,l,c,m,f,h,S,d,v,N=t[1].trim();const O=N.length>1,C={type:"list",raw:"",ordered:O,start:O?+N.slice(0,-1):"",loose:!1,items:[]};N=O?`\\d{1,9}\\${N.slice(-1)}`:`\\${N}`,this.options.pedantic&&(N=O?N:"[*+-]");const Z=new RegExp(`^( {0,3}${N})((?: [^\\n]*)?(?:\\n|$))`);for(;i&&(v=!1,(t=Z.exec(i))&&!this.rules.block.hr.test(i));){if(n=t[0],i=i.substring(n.length),f=t[2].split("\n",1)[0],h=i.split("\n",1)[0],this.options.pedantic?(a=2,d=f.trimLeft()):(a=t[2].search(/[^ ]/),a=a>4?1:a,d=f.slice(a),a+=t[1].length),c=!1,!f&&/^ *$/.test(h)&&(n+=h+"\n",i=i.substring(h.length+1),v=!0),!v){const w=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;i&&(S=i.split("\n",1)[0],f=S,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!w.test(f));){if(f.search(/[^ ]/)>=a||!f.trim())d+="\n"+f.slice(a);else{if(c)break;d+="\n"+f}!c&&!f.trim()&&(c=!0),n+=S+"\n",i=i.substring(S.length+1)}}C.loose||(m?C.loose=!0:/\n *\n *$/.test(n)&&(m=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(d),s&&(_="[ ] "!==s[0],d=d.replace(/^\[[ xX]\] +/,""))),C.items.push({type:"list_item",raw:n,task:!!s,checked:_,loose:!1,text:d}),C.raw+=n}C.items[C.items.length-1].raw=n.trimRight(),C.items[C.items.length-1].text=d.trimRight(),C.raw=C.raw.trimRight();const K=C.items.length;for(l=0;l<K;l++){this.lexer.state.top=!1,C.items[l].tokens=this.lexer.blockTokens(C.items[l].text,[]);const w=C.items[l].tokens.filter($=>"space"===$.type),U=w.every($=>{const ee=$.raw.split("");let X=0;for(const rn of ee)if("\n"===rn&&(X+=1),X>1)return!0;return!1});!C.loose&&w.length&&U&&(C.loose=!0,C.items[l].loose=!0)}return C}}html(i){const t=this.rules.block.html.exec(i);if(t){const n={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(t[0]):x(t[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}}def(i){const t=this.rules.block.def.exec(i);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(i){const t=this.rules.block.table.exec(i);if(t){const n={type:"table",header:me(t[1]).map(s=>({text:s})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];let _,a,l,c,s=n.align.length;for(_=0;_<s;_++)n.align[_]=/^ *-+: *$/.test(n.align[_])?"right":/^ *:-+: *$/.test(n.align[_])?"center":/^ *:-+ *$/.test(n.align[_])?"left":null;for(s=n.rows.length,_=0;_<s;_++)n.rows[_]=me(n.rows[_],n.header.length).map(m=>({text:m}));for(s=n.header.length,a=0;a<s;a++)n.header[a].tokens=[],this.lexer.inlineTokens(n.header[a].text,n.header[a].tokens);for(s=n.rows.length,a=0;a<s;a++)for(c=n.rows[a],l=0;l<c.length;l++)c[l].tokens=[],this.lexer.inlineTokens(c[l].text,c[l].tokens);return n}}}lheading(i){const t=this.rules.block.lheading.exec(i);if(t){const n={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}paragraph(i){const t=this.rules.block.paragraph.exec(i);if(t){const n={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}text(i){const t=this.rules.block.text.exec(i);if(t){const n={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}escape(i){const t=this.rules.inline.escape.exec(i);if(t)return{type:"escape",raw:t[0],text:x(t[1])}}tag(i){const t=this.rules.inline.tag.exec(i);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):x(t[0]):t[0]}}link(i){const t=this.rules.inline.link.exec(i);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const a=H(n.slice(0,-1),"\\");if((n.length-a.length)%2==0)return}else{const a=function(o,i){if(-1===o.indexOf(i[1]))return-1;const t=o.length;let n=0,s=0;for(;s<t;s++)if("\\"===o[s])s++;else if(o[s]===i[0])n++;else if(o[s]===i[1]&&(n--,n<0))return s;return-1}(t[2],"()");if(a>-1){const c=(0===t[0].indexOf("!")?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let s=t[2],_="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);a&&(s=a[1],_=a[3])}else _=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),Se(t,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:_&&_.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(i,t){let n;if((n=this.rules.inline.reflink.exec(i))||(n=this.rules.inline.nolink.exec(i))){let s=(n[2]||n[1]).replace(/\s+/g," ");if(s=t[s.toLowerCase()],!s||!s.href){const _=n[0].charAt(0);return{type:"text",raw:_,text:_}}return Se(n,s,n[0],this.lexer)}}emStrong(i,t,n=""){let s=this.rules.inline.emStrong.lDelim.exec(i);if(!s||s[3]&&n.match(/[\p{L}\p{N}]/u))return;const _=s[1]||s[2]||"";if(!_||_&&(""===n||this.rules.inline.punctuation.exec(n))){const a=s[0].length-1;let l,c,m=a,f=0;const h="*"===s[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*i.length+a);null!=(s=h.exec(t));){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l)continue;if(c=l.length,s[3]||s[4]){m+=c;continue}if((s[5]||s[6])&&a%3&&!((a+c)%3)){f+=c;continue}if(m-=c,m>0)continue;if(c=Math.min(c,c+m+f),Math.min(a,c)%2){const d=i.slice(1,a+s.index+c);return{type:"em",raw:i.slice(0,a+s.index+c+1),text:d,tokens:this.lexer.inlineTokens(d,[])}}const S=i.slice(2,a+s.index+c-1);return{type:"strong",raw:i.slice(0,a+s.index+c+1),text:S,tokens:this.lexer.inlineTokens(S,[])}}}}codespan(i){const t=this.rules.inline.code.exec(i);if(t){let n=t[2].replace(/\n/g," ");const s=/[^ ]/.test(n),_=/^ /.test(n)&&/ $/.test(n);return s&&_&&(n=n.substring(1,n.length-1)),n=x(n,!0),{type:"codespan",raw:t[0],text:n}}}br(i){const t=this.rules.inline.br.exec(i);if(t)return{type:"br",raw:t[0]}}del(i){const t=this.rules.inline.del.exec(i);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(i,t){const n=this.rules.inline.autolink.exec(i);if(n){let s,_;return"@"===n[2]?(s=x(this.options.mangle?t(n[1]):n[1]),_="mailto:"+s):(s=x(n[1]),_=s),{type:"link",raw:n[0],text:s,href:_,tokens:[{type:"text",raw:s,text:s}]}}}url(i,t){let n;if(n=this.rules.inline.url.exec(i)){let s,_;if("@"===n[2])s=x(this.options.mangle?t(n[0]):n[0]),_="mailto:"+s;else{let a;do{a=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(a!==n[0]);s=x(n[0]),_="www."===n[1]?"http://"+s:s}return{type:"link",raw:n[0],text:s,href:_,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(i,t){const n=this.rules.inline.text.exec(i);if(n){let s;return s=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):x(n[0]):n[0]:x(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:s}}}}const p={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:j,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};p.def=E(p.def).replace("label",p._label).replace("title",p._title).getRegex(),p.bullet=/(?:[*+-]|\d{1,9}[.)])/,p.listItemStart=E(/^( *)(bull) */).replace("bull",p.bullet).getRegex(),p.list=E(p.list).replace(/bull/g,p.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+p.def.source+")").getRegex(),p._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",p._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,p.html=E(p.html,"i").replace("comment",p._comment).replace("tag",p._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),p.paragraph=E(p._paragraph).replace("hr",p.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",p._tag).getRegex(),p.blockquote=E(p.blockquote).replace("paragraph",p.paragraph).getRegex(),p.normal=P({},p),p.gfm=P({},p.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),p.gfm.table=E(p.gfm.table).replace("hr",p.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",p._tag).getRegex(),p.gfm.paragraph=E(p._paragraph).replace("hr",p.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",p.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",p._tag).getRegex(),p.pedantic=P({},p.normal,{html:E("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",p._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:j,paragraph:E(p.normal._paragraph).replace("hr",p.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",p.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const r={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:j,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:j,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function je(o){return o.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function Ee(o){let t,n,i="";const s=o.length;for(t=0;t<s;t++)n=o.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}r._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",r.punctuation=E(r.punctuation).replace(/punctuation/g,r._punctuation).getRegex(),r.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,r.escapedEmSt=/\\\*|\\_/g,r._comment=E(p._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),r.emStrong.lDelim=E(r.emStrong.lDelim).replace(/punct/g,r._punctuation).getRegex(),r.emStrong.rDelimAst=E(r.emStrong.rDelimAst,"g").replace(/punct/g,r._punctuation).getRegex(),r.emStrong.rDelimUnd=E(r.emStrong.rDelimUnd,"g").replace(/punct/g,r._punctuation).getRegex(),r._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=E(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,r.tag=E(r.tag).replace("comment",r._comment).replace("attribute",r._attribute).getRegex(),r._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,r._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,r._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,r.link=E(r.link).replace("label",r._label).replace("href",r._href).replace("title",r._title).getRegex(),r.reflink=E(r.reflink).replace("label",r._label).replace("ref",p._label).getRegex(),r.nolink=E(r.nolink).replace("ref",p._label).getRegex(),r.reflinkSearch=E(r.reflinkSearch,"g").replace("reflink",r.reflink).replace("nolink",r.nolink).getRegex(),r.normal=P({},r),r.pedantic=P({},r.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",r._label).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",r._label).getRegex()}),r.gfm=P({},r.normal,{escape:E(r.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),r.gfm.url=E(r.gfm.url,"i").replace("email",r.gfm._extended_email).getRegex(),r.breaks=P({},r.gfm,{br:E(r.br).replace("{2,}","*").getRegex(),text:E(r.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class R{constructor(i){this.tokens=[],this.tokens.links=Object.create(null),this.options=i||B,this.options.tokenizer=this.options.tokenizer||new te,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:p.normal,inline:r.normal};this.options.pedantic?(t.block=p.pedantic,t.inline=r.pedantic):this.options.gfm&&(t.block=p.gfm,t.inline=this.options.breaks?r.breaks:r.gfm),this.tokenizer.rules=t}static get rules(){return{block:p,inline:r}}static lex(i,t){return new R(t).lex(i)}static lexInline(i,t){return new R(t).inlineTokens(i)}lex(i){let t;for(i=i.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(i,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(i,t=[]){let n,s,_,a;for(this.options.pedantic&&(i=i.replace(/^ +$/gm,""));i;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>!!(n=l.call({lexer:this},i,t))&&(i=i.substring(n.raw.length),t.push(n),!0)))){if(n=this.tokenizer.space(i)){i=i.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);continue}if(n=this.tokenizer.code(i)){i=i.substring(n.raw.length),s=t[t.length-1],!s||"paragraph"!==s.type&&"text"!==s.type?t.push(n):(s.raw+="\n"+n.raw,s.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);continue}if(n=this.tokenizer.fences(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(i)){i=i.substring(n.raw.length),s=t[t.length-1],!s||"paragraph"!==s.type&&"text"!==s.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(s.raw+="\n"+n.raw,s.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);continue}if(n=this.tokenizer.table(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(i)){i=i.substring(n.raw.length),t.push(n);continue}if(_=i,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=i.slice(1);let m;this.options.extensions.startBlock.forEach(function(f){m=f.call({lexer:this},c),"number"==typeof m&&m>=0&&(l=Math.min(l,m))}),l<1/0&&l>=0&&(_=i.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(_))){s=t[t.length-1],a&&"paragraph"===s.type?(s.raw+="\n"+n.raw,s.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n),a=_.length!==i.length,i=i.substring(n.raw.length);continue}if(n=this.tokenizer.text(i)){i=i.substring(n.raw.length),s=t[t.length-1],s&&"text"===s.type?(s.raw+="\n"+n.raw,s.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n);continue}if(i){const l="Infinite loop on byte: "+i.charCodeAt(0);if(this.options.silent){console.error(l);break}throw new Error(l)}}return this.state.top=!0,t}inline(i,t){this.inlineQueue.push({src:i,tokens:t})}inlineTokens(i,t=[]){let n,s,_,l,c,m,a=i;if(this.tokens.links){const f=Object.keys(this.tokens.links);if(f.length>0)for(;null!=(l=this.tokenizer.rules.inline.reflinkSearch.exec(a));)f.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,l.index)+"["+he("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(l=this.tokenizer.rules.inline.blockSkip.exec(a));)a=a.slice(0,l.index)+"["+he("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(l=this.tokenizer.rules.inline.escapedEmSt.exec(a));)a=a.slice(0,l.index)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;i;)if(c||(m=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(f=>!!(n=f.call({lexer:this},i,t))&&(i=i.substring(n.raw.length),t.push(n),!0)))){if(n=this.tokenizer.escape(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(i)){i=i.substring(n.raw.length),s=t[t.length-1],s&&"text"===n.type&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(i,this.tokens.links)){i=i.substring(n.raw.length),s=t[t.length-1],s&&"text"===n.type&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(i,a,m)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(i)){i=i.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(i,Ee)){i=i.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(i,Ee))){i=i.substring(n.raw.length),t.push(n);continue}if(_=i,this.options.extensions&&this.options.extensions.startInline){let f=1/0;const h=i.slice(1);let S;this.options.extensions.startInline.forEach(function(d){S=d.call({lexer:this},h),"number"==typeof S&&S>=0&&(f=Math.min(f,S))}),f<1/0&&f>=0&&(_=i.substring(0,f+1))}if(n=this.tokenizer.inlineText(_,je)){i=i.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(m=n.raw.slice(-1)),c=!0,s=t[t.length-1],s&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);continue}if(i){const f="Infinite loop on byte: "+i.charCodeAt(0);if(this.options.silent){console.error(f);break}throw new Error(f)}}return t}}class ne{constructor(i){this.options=i||B}code(i,t,n){const s=(t||"").match(/\S*/)[0];if(this.options.highlight){const _=this.options.highlight(i,s);null!=_&&_!==i&&(n=!0,i=_)}return i=i.replace(/\n$/,"")+"\n",s?'<pre><code class="'+this.options.langPrefix+x(s,!0)+'">'+(n?i:x(i,!0))+"</code></pre>\n":"<pre><code>"+(n?i:x(i,!0))+"</code></pre>\n"}blockquote(i){return"<blockquote>\n"+i+"</blockquote>\n"}html(i){return i}heading(i,t,n,s){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+s.slug(n)+'">'+i+"</h"+t+">\n":"<h"+t+">"+i+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(i,t,n){const s=t?"ol":"ul";return"<"+s+(t&&1!==n?' start="'+n+'"':"")+">\n"+i+"</"+s+">\n"}listitem(i){return"<li>"+i+"</li>\n"}checkbox(i){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(i){return"<p>"+i+"</p>\n"}table(i,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+i+"</thead>\n"+t+"</table>\n"}tablerow(i){return"<tr>\n"+i+"</tr>\n"}tablecell(i,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+i+"</"+n+">\n"}strong(i){return"<strong>"+i+"</strong>"}em(i){return"<em>"+i+"</em>"}codespan(i){return"<code>"+i+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(i){return"<del>"+i+"</del>"}link(i,t,n){if(null===(i=ue(this.options.sanitize,this.options.baseUrl,i)))return n;let s='<a href="'+x(i)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>",s}image(i,t,n){if(null===(i=ue(this.options.sanitize,this.options.baseUrl,i)))return n;let s='<img src="'+i+'" alt="'+n+'"';return t&&(s+=' title="'+t+'"'),s+=this.options.xhtml?"/>":">",s}text(i){return i}}class Ae{strong(i){return i}em(i){return i}codespan(i){return i}del(i){return i}html(i){return i}text(i){return i}link(i,t,n){return""+n}image(i,t,n){return""+n}br(){return""}}class Oe{constructor(){this.seen={}}serialize(i){return i.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(i,t){let n=i,s=0;if(this.seen.hasOwnProperty(n)){s=this.seen[i];do{s++,n=i+"-"+s}while(this.seen.hasOwnProperty(n))}return t||(this.seen[i]=s,this.seen[n]=0),n}slug(i,t={}){const n=this.serialize(i);return this.getNextSafeSlug(n,t.dryrun)}}class k{constructor(i){this.options=i||B,this.options.renderer=this.options.renderer||new ne,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ae,this.slugger=new Oe}static parse(i,t){return new k(t).parse(i)}static parseInline(i,t){return new k(t).parseInline(i)}parse(i,t=!0){let s,_,a,l,c,m,f,h,S,d,v,N,O,C,Z,K,w,U,$,n="";const ee=i.length;for(s=0;s<ee;s++)if(d=i[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&($=this.options.extensions.renderers[d.type].call({parser:this},d),!1!==$||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)))n+=$||"";else switch(d.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":n+=this.renderer.heading(this.parseInline(d.tokens),d.depth,ge(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":n+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(h="",f="",l=d.header.length,_=0;_<l;_++)f+=this.renderer.tablecell(this.parseInline(d.header[_].tokens),{header:!0,align:d.align[_]});for(h+=this.renderer.tablerow(f),S="",l=d.rows.length,_=0;_<l;_++){for(m=d.rows[_],f="",c=m.length,a=0;a<c;a++)f+=this.renderer.tablecell(this.parseInline(m[a].tokens),{header:!1,align:d.align[a]});S+=this.renderer.tablerow(f)}n+=this.renderer.table(h,S);continue;case"blockquote":S=this.parse(d.tokens),n+=this.renderer.blockquote(S);continue;case"list":for(v=d.ordered,N=d.start,O=d.loose,l=d.items.length,S="",_=0;_<l;_++)Z=d.items[_],K=Z.checked,w=Z.task,C="",Z.task&&(U=this.renderer.checkbox(K),O?Z.tokens.length>0&&"paragraph"===Z.tokens[0].type?(Z.tokens[0].text=U+" "+Z.tokens[0].text,Z.tokens[0].tokens&&Z.tokens[0].tokens.length>0&&"text"===Z.tokens[0].tokens[0].type&&(Z.tokens[0].tokens[0].text=U+" "+Z.tokens[0].tokens[0].text)):Z.tokens.unshift({type:"text",text:U}):C+=U),C+=this.parse(Z.tokens,O),S+=this.renderer.listitem(C,w,K);n+=this.renderer.list(S,v,N);continue;case"html":n+=this.renderer.html(d.text);continue;case"paragraph":n+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(S=d.tokens?this.parseInline(d.tokens):d.text;s+1<ee&&"text"===i[s+1].type;)d=i[++s],S+="\n"+(d.tokens?this.parseInline(d.tokens):d.text);n+=t?this.renderer.paragraph(S):S;continue;default:{const X='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(X);throw new Error(X)}}return n}parseInline(i,t){t=t||this.renderer;let s,_,a,n="";const l=i.length;for(s=0;s<l;s++)if(_=i[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]&&(a=this.options.extensions.renderers[_.type].call({parser:this},_),!1!==a||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(_.type)))n+=a||"";else switch(_.type){case"escape":case"text":n+=t.text(_.text);break;case"html":n+=t.html(_.text);break;case"link":n+=t.link(_.href,_.title,this.parseInline(_.tokens,t));break;case"image":n+=t.image(_.href,_.title,_.text);break;case"strong":n+=t.strong(this.parseInline(_.tokens,t));break;case"em":n+=t.em(this.parseInline(_.tokens,t));break;case"codespan":n+=t.codespan(_.text);break;case"br":n+=t.br();break;case"del":n+=t.del(this.parseInline(_.tokens,t));break;default:{const c='Token with "'+_.type+'" type was not found.';if(this.options.silent)return void console.error(c);throw new Error(c)}}return n}}function u(o,i,t){if(null==o)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof o)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(o)+", string expected");if("function"==typeof i&&(t=i,i=null),fe(i=P({},u.defaults,i||{})),t){const n=i.highlight;let s;try{s=R.lex(o,i)}catch(l){return t(l)}const _=function(l){let c;if(!l)try{i.walkTokens&&u.walkTokens(s,i.walkTokens),c=k.parse(s,i)}catch(m){l=m}return i.highlight=n,l?t(l):t(null,c)};if(!n||n.length<3||(delete i.highlight,!s.length))return _();let a=0;return u.walkTokens(s,function(l){"code"===l.type&&(a++,setTimeout(()=>{n(l.text,l.lang,function(c,m){if(c)return _(c);null!=m&&m!==l.text&&(l.text=m,l.escaped=!0),a--,0===a&&_()})},0))}),void(0===a&&_())}try{const n=R.lex(o,i);return i.walkTokens&&u.walkTokens(n,i.walkTokens),k.parse(n,i)}catch(n){if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",i.silent)return"<p>An error occurred:</p><pre>"+x(n.message+"",!0)+"</pre>";throw n}}u.options=u.setOptions=function(o){return P(u.defaults,o),function(o){B=o}(u.defaults),u},u.getDefaults=function(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},u.defaults=B,u.use=function(...o){const i=P({},...o),t=u.defaults.extensions||{renderers:{},childTokens:{}};let n;o.forEach(s=>{if(s.extensions&&(n=!0,s.extensions.forEach(_=>{if(!_.name)throw new Error("extension name required");if(_.renderer){const a=t.renderers?t.renderers[_.name]:null;t.renderers[_.name]=a?function(...l){let c=_.renderer.apply(this,l);return!1===c&&(c=a.apply(this,l)),c}:_.renderer}if(_.tokenizer){if(!_.level||"block"!==_.level&&"inline"!==_.level)throw new Error("extension level must be 'block' or 'inline'");t[_.level]?t[_.level].unshift(_.tokenizer):t[_.level]=[_.tokenizer],_.start&&("block"===_.level?t.startBlock?t.startBlock.push(_.start):t.startBlock=[_.start]:"inline"===_.level&&(t.startInline?t.startInline.push(_.start):t.startInline=[_.start]))}_.childTokens&&(t.childTokens[_.name]=_.childTokens)})),s.renderer){const _=u.defaults.renderer||new ne;for(const a in s.renderer){const l=_[a];_[a]=(...c)=>{let m=s.renderer[a].apply(_,c);return!1===m&&(m=l.apply(_,c)),m}}i.renderer=_}if(s.tokenizer){const _=u.defaults.tokenizer||new te;for(const a in s.tokenizer){const l=_[a];_[a]=(...c)=>{let m=s.tokenizer[a].apply(_,c);return!1===m&&(m=l.apply(_,c)),m}}i.tokenizer=_}if(s.walkTokens){const _=u.defaults.walkTokens;i.walkTokens=function(a){s.walkTokens.call(this,a),_&&_.call(this,a)}}n&&(i.extensions=t),u.setOptions(i)})},u.walkTokens=function(o,i){for(const t of o)switch(i.call(u,t),t.type){case"table":for(const n of t.header)u.walkTokens(n.tokens,i);for(const n of t.rows)for(const s of n)u.walkTokens(s.tokens,i);break;case"list":u.walkTokens(t.items,i);break;default:u.defaults.extensions&&u.defaults.extensions.childTokens&&u.defaults.extensions.childTokens[t.type]?u.defaults.extensions.childTokens[t.type].forEach(function(n){u.walkTokens(t[n],i)}):t.tokens&&u.walkTokens(t.tokens,i)}},u.parseInline=function(o,i){if(null==o)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof o)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(o)+", string expected");fe(i=P({},u.defaults,i||{}));try{const t=R.lexInline(o,i);return i.walkTokens&&u.walkTokens(t,i.walkTokens),k.parseInline(t,i)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",i.silent)return"<p>An error occurred:</p><pre>"+x(t.message+"",!0)+"</pre>";throw t}},u.Parser=k,u.parser=k.parse,u.Renderer=ne,u.TextRenderer=Ae,u.Lexer=R,u.lexer=R.lex,u.Tokenizer=te,u.Slugger=Oe,u.parse=u;var I=g(6752),He=g(1036),We=g(2157),Ve=g(9688),Ce=g(1933),et=g(2433),ie=g(9372),se=g(6835);function tt(o,i){1&o&&(e.TgZ(0,"header",7),e.SDv(1,12),e.qZA())}function nt(o,i){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function it(o,i){if(1&o&&e._UZ(0,"execute-method-field",19),2&o){const t=e.oxw(2);e.Q6J("system",t.active_system)}}function st(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",13),e.TgZ(1,"mat-form-field",14),e.TgZ(2,"mat-select",15),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().active_system=s}),e.YNc(3,nt,2,2,"mat-option",16),e.ALo(4,"async"),e.qZA(),e.qZA(),e.YNc(5,it,1,1,"execute-method-field",17),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.active_system),e.xp6(1),e.Q6J("ngForOf",e.lcZ(4,3,t.systems)),e.xp6(2),e.Q6J("ngIf",t.active_system&&t.active_system.id)}}const ot=function(o){return["/zones",o,"about"]};function _t(o,i){if(1&o&&(e.TgZ(0,"div",20),e.TgZ(1,"label"),e.SDv(2,21),e.qZA(),e.TgZ(3,"div",22),e.TgZ(4,"a",23),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("routerLink",e.VKq(2,ot,null==t.item?null:t.item.parent_id)),e.xp6(1),e.Oqu(null==t.item?null:t.item.parent_id)}}function at(o,i){if(1&o&&(e.TgZ(0,"div",20),e.TgZ(1,"label"),e.SDv(2,24),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.ALo(5,"dateFrom"),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,1,1e3*(null==t.item?null:t.item.created_at))," ")}}function lt(o,i){if(1&o&&(e.TgZ(0,"div",20),e.TgZ(1,"label"),e.SDv(2,26),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.ALo(5,"dateFrom"),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,1,1e3*(null==t.item?null:t.item.updated_at))," ")}}function rt(o,i){if(1&o&&(e.TgZ(0,"div",20),e.TgZ(1,"label"),e.SDv(2,27),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.location)}}function ct(o,i){if(1&o&&(e.TgZ(0,"div",20),e.TgZ(1,"label"),e.SDv(2,28),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.code)}}function pt(o,i){if(1&o&&(e.TgZ(0,"div",20),e.TgZ(1,"label"),e.SDv(2,29),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.type)}}function dt(o,i){if(1&o&&(e.TgZ(0,"div",20),e.TgZ(1,"label"),e.SDv(2,30),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.count)}}function gt(o,i){if(1&o&&(e.TgZ(0,"div",20),e.TgZ(1,"label"),e.SDv(2,31),e.qZA(),e.TgZ(3,"div",25),e._uU(4),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.capacity)}}function ut(o,i){if(1&o&&(e.TgZ(0,"div",20),e.TgZ(1,"label"),e.SDv(2,32),e.qZA(),e.TgZ(3,"a",33),e._uU(4),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("href",null==t.item?null:t.item.map_id,e.LSH),e.xp6(1),e.Oqu(null==t.item?null:t.item.map_id)}}function mt(o,i){1&o&&(e.TgZ(0,"header",7),e.SDv(1,34),e.qZA())}function ft(o,i){if(1&o&&e._UZ(0,"section",35),2&o){const t=e.oxw();e.Q6J("innerHTML",t.parsed_description,e.oJD)}}function ht(o,i){if(1&o&&(e.TgZ(0,"mat-chip"),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}function St(o,i){if(1&o&&(e.TgZ(0,"div",25),e.TgZ(1,"mat-chip-list",40),e.YNc(2,ht,2,1,"mat-chip",41),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.tag_list)}}function Et(o,i){if(1&o&&(e.TgZ(0,"section",36),e.TgZ(1,"label",37),e.SDv(2,38),e.qZA(),e.YNc(3,St,3,1,"div",39),e.qZA()),2&o){const t=e.oxw(),n=e.MAs(24);e.xp6(3),e.Q6J("ngIf",t.tag_list&&t.tag_list.length)("ngIfElse",n)}}function At(o,i){if(1&o&&(e.TgZ(0,"section"),e._UZ(1,"a-settings-form",42),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("merge",!0)("id",null==t.item?null:t.item.id)("settings",null==t.item?null:t.item.settings)}}function Ot(o,i){1&o&&(e.TgZ(0,"div",43),e._UZ(1,"mat-spinner",44),e.TgZ(2,"p"),e.SDv(3,45),e.qZA(),e.qZA())}function Ct(o,i){1&o&&(e.TgZ(0,"p",46),e.SDv(1,47),e.qZA())}let Tt=(()=>{class o{constructor(t){this._service=t,this.systems=this._service.systems}get item(){return this._service.active_item}get parsed_description(){var t;return this.item?u(null===(t=this.item)||void 0===t?void 0:t.description):""}get tag_list(){var t;return this.item?null===(t=this.item)||void 0===t?void 0:t.tags:[]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["zone-about"]],decls:25,vars:20,consts:function(){let i,t,n,s,_,a,l,c,m,f,h,S,d,v,N;return i=$localize`:@@settingsLabel␟5ba97a3f90a79c4d7720b941ae416c8c84337e38␟180274732945114229: Settings `,t=$localize`:@@execHeader␟6e9fe55331b587290e95336846799c928c323b8f␟5406219849635212445: Execute Command `,n=$localize`:@@zoneParentLabel␟8dce5a1b53185785ceb8eaece03a45f95a1058ae␟1730450554195977822:Parent ID:`,s=$localize`:@@zoneCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,_=$localize`:@@zoneUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,a=$localize`:@@zoneLocationLabel␟4bebbae34f84157c0b5b852529f0bc2c39a5a38a␟4510013877734913501:Location:`,l=$localize`:@@zoneCodeLabel␟08a3263c58aafca24f31b3f312d90934a14069e5␟4793952596010266372:Code:`,c=$localize`:@@zoneTypeLabel␟b2ec946dbfa29aa3430b9999250edf9a2a6e3552␟2473796624751549543:Type: `,m=$localize`:@@zoneCountLabel␟e684046d73bcee88e82f7ff01e2852789a05fc32␟6836949342567686088:Count:`,f=$localize`:@@zoneCapacityLabel␟a1170e85d1897210d5fe03d1f363587de15d02cd␟8062822823331512246:Capacity:`,h=$localize`:@@zoneMapLabel␟b59ac98267a9fea534d729d6021e4ad108b9166e␟5947091241433737383:Map:`,S=$localize`:@@descriptionLabel␟91d130f4d03590d2ab82ec6ccd644aaff7dbf49c␟7630730180260398735: Description `,d=$localize`:@@zoneTagsLabel␟d1c4e9d07d3789fb1c66dec61f2d52c6b81b10f6␟7952806382632077864:Tags:`,v=$localize`:@@zoneLoadingLabel␟adb8ef1c4f047ddce91397fb4d8f83acc47f4649␟1768664919049731907:Loading zone settings...`,N=$localize`:@@zoneTagsEmpty␟48171f6d8b15daa87a49496d685bd03bb4f84253␟1765229228159298837: <No Tags> `,[["class","font-medium text-lg",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"space-y-2"],["class","flex items-center space-x-2",4,"ngIf"],["class","description",3,"innerHTML",4,"ngIf"],["class","flex space-x-2 mt-1",4,"ngIf"],[1,"my-4"],[1,"font-medium","text-lg"],i,[4,"ngIf","ngIfElse"],["load_state",""],["empty_tag_state",""],t,[1,"mb-4"],["appearance","outline",1,"h-12"],["placeholder","Select system",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"system",4,"ngIf"],[3,"value"],[3,"system"],[1,"flex","items-center","space-x-2"],n,[1,"value","underline"],[3,"routerLink"],s,[1,"value"],_,a,l,c,m,f,h,[1,"underline",3,"href"],S,[1,"description",3,"innerHTML"],[1,"flex","space-x-2","mt-1"],["for","tags",1,"my-1"],d,["class","value",4,"ngIf","ngIfElse"],["name","tags"],[4,"ngFor","ngForOf"],[3,"merge","id","settings"],[1,"flex","flex-col","items-center","p-8"],["diameter","48",1,"mb-4"],v,[1,"text-center","py-1"],N]},template:function(t,n){if(1&t&&(e.YNc(0,tt,2,0,"header",0),e.ALo(1,"async"),e.YNc(2,st,6,5,"section",1),e.ALo(3,"async"),e.TgZ(4,"section",2),e.YNc(5,_t,6,4,"div",3),e.YNc(6,at,6,3,"div",3),e.YNc(7,lt,6,3,"div",3),e.YNc(8,rt,5,1,"div",3),e.YNc(9,ct,5,1,"div",3),e.YNc(10,pt,5,1,"div",3),e.YNc(11,dt,5,1,"div",3),e.YNc(12,gt,5,1,"div",3),e.YNc(13,ut,5,2,"div",3),e.qZA(),e.YNc(14,mt,2,0,"header",0),e.YNc(15,ft,1,1,"section",4),e.YNc(16,Et,4,2,"section",5),e._UZ(17,"hr",6),e.TgZ(18,"header",7),e.SDv(19,8),e.qZA(),e.YNc(20,At,2,3,"section",9),e.YNc(21,Ot,4,0,"ng-template",null,10,e.W1O),e.YNc(23,Ct,2,0,"ng-template",null,11,e.W1O)),2&t){const s=e.MAs(22);let _,a;e.Q6J("ngIf",null==(_=e.lcZ(1,16,n.systems))?null:_.length),e.xp6(2),e.Q6J("ngIf",null==(a=e.lcZ(3,18,n.systems))?null:a.length),e.xp6(3),e.Q6J("ngIf",null==n.item?null:n.item.parent_id),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.created_at),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.updated_at),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.location),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.code),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.type),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.count),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.capacity),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.map_id),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.description),e.xp6(1),e.Q6J("ngIf",null==n.item?null:n.item.description),e.xp6(1),e.Q6J("ngIf",n.item&&n.tag_list),e.xp6(4),e.Q6J("ngIf",null==n.item?null:n.item.settings)("ngIfElse",s)}},directives:[b.O5,I.KE,He.gD,A.JJ,A.On,b.sg,We.ey,Ve.Q,F.yS,Ce.qn,Ce.HS,et.v,ie.$g],pipes:[b.Ov,se.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}\n/*# sourceMappingURL=zone-about.component.ts-angular-inline--46.css.map*/"]}),o})();var W=g(9499),oe=g(8482),_e=g(4731);const xt=function(o){return["/systems",o]};function Zt(o,i){if(1&o&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"a",18),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",10),e._uU(5),e.qZA(),e.TgZ(6,"div",12),e._uU(7),e.ALo(8,"dateFrom"),e.qZA(),e.qZA()),2&o){const t=i.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(7,xt,t.id))("matTooltip",t.id),e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.Oqu(t.modules.length),e.xp6(2),e.Oqu(e.lcZ(8,5,1e3*(null==t?null:t.created_at)))}}function bt(o,i){if(1&o&&(e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"div",8),e.SDv(3,9),e.qZA(),e.TgZ(4,"div",10),e.SDv(5,11),e.qZA(),e.TgZ(6,"div",12),e.SDv(7,13),e.qZA(),e.qZA(),e.TgZ(8,"div",14),e.YNc(9,Zt,9,9,"div",15),e.ALo(10,"async"),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",e.lcZ(10,1,t.systems))}}function Nt(o,i){1&o&&(e.TgZ(0,"div",19),e.TgZ(1,"p"),e.SDv(2,20),e.qZA(),e.qZA())}let Mt=(()=>{class o{constructor(t){this._state=t,this.filter$=new z.X(""),this.systems=(0,J.aj)([this.filter$,this._state.systems]).pipe((0,M.U)(n=>{const[s,_]=n,a=s.toLowerCase();return s?_.filter(l=>l.name.toLowerCase().includes(a)):_}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["zone-systems"]],decls:8,vars:5,consts:function(){let i,t,n,s;return i=$localize`:@@systemTableName␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:@@systemTablePanelCount␟6c24d3e08bc16576fbd5580dc255a31c4b08c366␟8919524640139321287:No. Modules`,n=$localize`:@@systemTableCreated␟1b051734b0ee9021991c91b3ed4e81c244322462␟4207916966377787111:Created`,s=$localize`:@@systemTableEmpty␟443361e57db2ac76049b227574b4a6b8a67ae879␟6249884397292386469:No systems found`,[[1,"flex"],["appearance","outline",1,"flex-1"],["matPrefix","","className","backoffice-magnifying-glass",1,"text-lg"],["matInput","","name","search-filter","placeholder","Filter Systems",3,"ngModel","ngModelChange"],["role","table",4,"ngIf","ngIfElse"],["empty_state",""],["role","table"],["table-head",""],[1,"flex-1","p-2"],i,[1,"w-28","p-2"],t,[1,"w-32","p-2"],n,["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2","underline"],["matTooltipPosition","right",3,"routerLink","matTooltip"],[1,"flex","flex-col","items-center","p-8"],s]},template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-form-field",1),e._UZ(2,"app-icon",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(_){return n.filter$.next(_)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(4,bt,11,3,"div",4),e.ALo(5,"async"),e.YNc(6,Nt,3,0,"ng-template",null,5,e.W1O)),2&t){const s=e.MAs(7);let _;e.xp6(3),e.Q6J("ngModel",""),e.xp6(1),e.Q6J("ngIf",null==(_=e.lcZ(5,3,n.systems))?null:_.length)("ngIfElse",s)}},directives:[I.KE,W.o,I.qo,oe.Nt,A.Fj,A.JJ,A.On,b.O5,b.sg,F.yS,_e.gM],pipes:[b.Ov,se.R],styles:["[_nghost-%COMP%]{padding:1rem;width:100%;height:100%}\n/*# sourceMappingURL=zone-systems.component.ts-angular-inline--47.css.map*/"]}),o})();var Te=g(7752);const Pt=function(o){return["/triggers",o]};function Rt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"div",11),e.TgZ(2,"a",19),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",20),e._uU(5),e.ALo(6,"dateFrom"),e.qZA(),e.TgZ(7,"div",21),e.TgZ(8,"button",22),e.NdJ("click",function(){const _=e.CHM(t).$implicit;return e.oxw(3).deleteTrigger(_)}),e._UZ(9,"app-icon",23),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(5,Pt,t.id)),e.xp6(1),e.Oqu(t.name),e.xp6(2),e.hij(" ",e.lcZ(6,3,1e3*+t.created_at)," ")}}function kt(o,i){if(1&o&&(e.TgZ(0,"div",9),e.TgZ(1,"div",10),e.TgZ(2,"div",11),e.SDv(3,12),e.qZA(),e.TgZ(4,"div",13),e.SDv(5,14),e.qZA(),e._UZ(6,"div",15),e.qZA(),e.TgZ(7,"div",16),e.YNc(8,Rt,10,7,"div",17),e.ALo(9,"async"),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(8),e.Q6J("ngForOf",e.lcZ(9,1,t.triggers))}}function vt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,kt,10,3,"div",8),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(),n=e.MAs(12);let s;e.xp6(1),e.Q6J("ngIf",null==(s=e.lcZ(2,2,t.triggers))?null:s.length)("ngIfElse",n)}}function Ft(o,i){1&o&&(e.TgZ(0,"div",24),e._UZ(1,"mat-spinner",25),e.TgZ(2,"p"),e._uU(3,"Loading triggers..."),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.Q6J("diameter",48))}function yt(o,i){1&o&&(e.TgZ(0,"div",24),e.TgZ(1,"p"),e._uU(2,"No triggers for zone"),e.qZA(),e.qZA())}let It=(()=>{class o{constructor(t){this._state=t,this.filter$=new z.X(""),this.triggers=(0,J.aj)([this.filter$,this._state.triggers]).pipe((0,M.U)(n=>{const[s,_]=n,a=s.toLowerCase();return s?_.filter(l=>l.name.toLowerCase().includes(a)):_})),this.loading=this._state.loading,this.selectTrigger=()=>this._state.selectTrigger(),this.deleteTrigger=n=>this._state.removeTrigger(n)}get item(){return this._state.active_item}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["zone-triggers"]],decls:13,vars:5,consts:function(){let i,t;return i=$localize`:@@nameLabel␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:@@descriptionLabel␟80e3b490720757978c99a7b5af3885faf202b955␟231679111972850796:Added`,[[1,"flex","items-center","mb-4","space-x-2"],["mat-button","",2,"min-width","8rem",3,"click"],["appearance","outline",1,"h-12","flex-1"],["matPrefix","","className","backoffice-magnifying-glass text-xl mr-2"],["matInput","","placeholder","Filter triggers...",1,"rounded-none",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["role","table","class","overflow-x-auto",4,"ngIf","ngIfElse"],["role","table",1,"overflow-x-auto"],["table-head",""],["flex","",1,"flex-1","p-2"],i,[1,"w-28","p-2"],t,[1,"w-32","p-2"],["table-body","",1,"overflow-y-auto"],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"truncate",3,"routerLink"],["desc","",1,"w-28","p-2"],[1,"w-32","p-2","items-center","justify-center"],["mat-icon-button","",3,"click"],["className","backoffice-trash"],[1,"flex","flex-col","items-center","p-8","mx-auto"],[1,"mb-4",3,"diameter"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return n.selectTrigger()}),e._uU(2," Add Trigger "),e.qZA(),e.TgZ(3,"mat-form-field",2),e._UZ(4,"app-icon",3),e.TgZ(5,"input",4),e.NdJ("ngModelChange",function(_){return n.filter$.next(_)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"section"),e.YNc(7,vt,3,4,"ng-container",5),e.ALo(8,"async"),e.qZA(),e.YNc(9,Ft,4,1,"ng-template",null,6,e.W1O),e.YNc(11,yt,3,0,"ng-template",null,7,e.W1O)),2&t){const s=e.MAs(10);e.xp6(5),e.Q6J("ngModel",""),e.xp6(2),e.Q6J("ngIf",!e.lcZ(8,3,n.loading))("ngIfElse",s)}},directives:[Te.lW,I.KE,W.o,I.qo,oe.Nt,A.Fj,A.JJ,A.On,b.O5,b.sg,F.yS,ie.$g],pipes:[b.Ov,se.R],styles:["[_nghost-%COMP%]{padding:1rem;width:100%;height:100%}\n/*# sourceMappingURL=zone-triggers.component.ts-angular-inline--48.css.map*/"]}),o})();const wt=function(o){return["/zone",o]};function Ut(o,i){if(1&o&&(e.TgZ(0,"div",14),e.TgZ(1,"div",15),e.TgZ(2,"a",16),e._uU(3),e.TgZ(4,"span",17),e._uU(5),e.qZA(),e._uU(6,") "),e.qZA(),e.qZA(),e.TgZ(7,"div",10),e._uU(8),e.qZA(),e.qZA()),2&o){const t=i.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(5,wt,t.id))("matTooltip",t.id),e.xp6(1),e.hij(" ",t.name," ("),e.xp6(2),e.Oqu(t.id),e.xp6(3),e.Oqu(t.description)}}function $t(o,i){if(1&o&&(e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"div",8),e.SDv(3,9),e.qZA(),e.TgZ(4,"div",10),e.SDv(5,11),e.qZA(),e.qZA(),e.TgZ(6,"div",12),e.YNc(7,Ut,9,7,"div",13),e.ALo(8,"async"),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",e.lcZ(8,1,t.children))}}function Lt(o,i){1&o&&(e.TgZ(0,"div",18),e.SDv(1,19),e.qZA())}let Bt=(()=>{class o{constructor(t){this._state=t,this.filter$=new z.X(""),this.children=(0,J.aj)([this.filter$,this._state.children]).pipe((0,M.U)(n=>{const[s,_]=n,a=s.toLowerCase();return s?_.filter(l=>l.name.toLowerCase().includes(a)):_})),this.loading=this._state.loading}get item(){return this._state.active_item}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["zone-children"]],decls:8,vars:5,consts:function(){let i,t,n,s;return i=$localize`:@@zoneChildrenTableFilter␟48b4cc111b7400e0a4602f4805cab66025dbb55d␟8361856721210143570:Filter Zones`,t=$localize`:@@zoneChildrenTableName␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,n=$localize`:@@descriptionLabel␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,s=$localize`:@@zoneChildrenTableEmpty␟1b895a59396d575379143c2deec22ed0c1d65834␟1207585495728440175: No child zones found `,[[1,"flex","items-center"],["appearance","outline",1,"flex-1"],["matPrefix","","className","backoffice-magnifying-glass",1,"text-lg"],["matInput","","name","search-filter","placeholder",i,3,"ngModel","ngModelChange"],["role","table",4,"ngIf","ngIfElse"],["empty_state",""],["role","table"],["table-head",""],[1,"flex-1","p-2"],t,[1,"w-3/5","p-2"],n,["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2","underline"],["routerLinkActive","router-link-active",3,"routerLink","matTooltip"],[1,"id"],[1,"flex","flex-col","items-center","p-8"],s]},template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-form-field",1),e._UZ(2,"app-icon",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(_){return n.filter$.next(_)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(4,$t,9,3,"div",4),e.ALo(5,"async"),e.YNc(6,Lt,2,0,"ng-template",null,5,e.W1O)),2&t){const s=e.MAs(7);let _;e.xp6(3),e.Q6J("ngModel",""),e.xp6(1),e.Q6J("ngIf",(null==(_=e.lcZ(5,3,n.children))?null:_.length)>0)("ngIfElse",s)}},directives:[I.KE,W.o,I.qo,oe.Nt,A.Fj,A.JJ,A.On,b.O5,b.sg,F.yS,F.Od,_e.gM],pipes:[b.Ov],styles:["[_nghost-%COMP%]{padding:1rem;width:100%;height:100%}\n/*# sourceMappingURL=zone-children.component.ts-angular-inline--49.css.map*/"]}),o})();var zt=g(3427),Dt=g(4307),xe=g(395),Kt=g(6195),V=g(8420),Xt=g(3013);function qt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(s){return s.stopPropagation()})("click",function(){e.CHM(t);const s=e.oxw(3).$implicit;return e.oxw(3).saveMetadata(s)}),e.SDv(1,20),e.qZA()}}function Jt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,qt,2,0,"button",18),e.BQk()),2&o){const t=e.oxw(2).$implicit,n=e.oxw(3),s=e.MAs(4);e.xp6(1),e.Q6J("ngIf",!n.loading[t.name])("ngIfElse",s)}}const Gt=function(){return{class:"backoffice-trash"}};function Qt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw(3).deleteMetadata(s.name)}),e._UZ(2,"app-icon",14),e.qZA(),e.qZA()}2&o&&(e.xp6(2),e.Q6J("icon",e.DdM(1,Gt)))}const Yt=function(){return{class:"backoffice-edit"}};function jt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",10),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e.TgZ(3,"div",11),e._uU(4),e.qZA(),e.YNc(5,Jt,2,2,"ng-container",12),e.TgZ(6,"button",13),e.NdJ("click",function(s){e.CHM(t);const _=e.oxw().$implicit;return e.oxw(3).editMetadataDetails(_),s.stopPropagation()}),e._UZ(7,"app-icon",14),e.qZA(),e.YNc(8,Qt,3,2,"div",15),e.qZA(),e.qZA(),e.TgZ(9,"div",16),e._UZ(10,"settings-form-field",17),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.ekj("no-padding",!0),e.Q6J("formGroup",n.form_map[t.name]),e.xp6(4),e.hij(" ",n.form_map[t.name].controls.name.value," "),e.xp6(1),e.Q6J("ngIf",n.edited[t.name]),e.xp6(2),e.Q6J("icon",e.DdM(9,Yt)),e.xp6(1),e.Q6J("ngIf",!t.new),e.xp6(2),e.Q6J("schema",n.schema_map[t.name])("readonly",!1)}}function Ht(o,i){if(1&o&&(e.ynx(0),e.YNc(1,jt,11,10,"mat-expansion-panel",9),e.BQk()),2&o){const t=i.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.form_map[t.name])}}function Wt(o,i){if(1&o&&(e.TgZ(0,"div",7),e.TgZ(1,"mat-accordion"),e.YNc(2,Ht,2,1,"ng-container",8),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.metadata)}}function Vt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().newMetadata()}),e.SDv(2,5),e.qZA(),e.YNc(3,Wt,3,1,"div",6),e.qZA()}if(2&o){const t=e.oxw(),n=e.MAs(2);e.xp6(3),e.Q6J("ngIf",null==t.metadata?null:t.metadata.length)("ngIfElse",n)}}function en(o,i){1&o&&(e.TgZ(0,"div",23),e.SDv(1,24),e.qZA())}function tn(o,i){1&o&&e._UZ(0,"mat-spinner",25)}let nn=(()=>{class o extends le.K{constructor(t,n,s){super(),this._dialog=t,this._service=n,this._schemas=s,this.form_map={},this.edited={},this.loading={},this.schema_map={}}get item(){return this._service.active_item}validateName(t){return n=>t.indexOf(n.value)>=0?{name:!0}:null}ngOnInit(){this.subscription("metadata",this._service.metadata.subscribe(t=>{this.metadata=t||[],this.generateForms()}))}newMetadata(){this.metadata||(this.metadata=[]),this.metadata.push({name:`new_field_${Math.floor(999999999*Math.random())}`,description:"",new:!0,details:{}}),this.generateForms()}editMetadataDetails(t){this._dialog.open(Dt.v,{maxWidth:"95vw",data:{form:this.form_map[t.name]}})}deleteMetadata(t){const n=this._dialog.open(xe.z,Object.assign(Object.assign({},xe.t),{data:{title:"Kill process",content:`\n                    <p>Are you sure you want delete the metadata property "${t}"?</p>\n                `,icon:{type:"icon",class:"backoffice-trash"}}}));this.subscription("confirm",n.componentInstance.event.subscribe(s=>{"done"===s.reason&&(0,T._p1)(this.item.id,{name:t}).subscribe(()=>{(0,y.t5)(`Successfully removed "${t}" metadata.`),this.metadata=this.metadata.filter(_=>_.name!==t),this.generateForms()},_=>(0,y.cB)(`Error removing old "${t}" metadata. Error: ${_.response||_.message||_}`)),n.close()}))}saveMetadata(t){const n=this.form_map[t.name];if(n.markAllAsTouched(),!n.valid)return(0,y.cB)(`JSON for property "${n.controls.name.value}" is invalid`);const s=n.value;this.loading[t.name]=!0,(0,T.Ymr)(this.item.id,Object.assign(Object.assign({},s),{details:JSON.parse(s.details)})).subscribe(_=>{this.loading[t.name]=!1;const a=this.metadata.findIndex(l=>l.name===t.name);this.edited[t.name]=!1,t.name!==_.name&&(0,T._p1)(this.item.id,t).toPromise().catch(l=>(0,y.cB)(`Error removing old "${t.name}" metadata. Error: ${JSON.stringify(l.response||l.message||l)}`)),a>=0&&this.metadata.splice(a,1,Object.assign(Object.assign({},_),{new:!1})),(0,y.t5)(`Saved "${s.name}" metadata.`),this.generateForms()},_=>{this.loading[t.name]=!1,(0,y.cB)(`Error saving "${s.name}" metadata. Error: ${JSON.stringify(_.response||_.message||_)}`)})}generateForms(){delete this.form_map,this.form_map={},this.metadata.forEach(t=>{const n="string"==typeof t.details?JSON.parse(t.details):t.details;this.form_map[t.name]=new A.cw({name:new A.NI(t.name,[A.kI.required,this.validateName(this.metadata.filter(s=>s.name!==t.name).map(s=>s.name))]),description:new A.NI(t.description),editors:new A.NI(t.editors),details:new A.NI(JSON.stringify(n||{},void 0,4),[A.kI.required,zt.NS]),schema:new A.NI(t.schema)}),this.subscription(`${t.name}_changes`,this.form_map[t.name].valueChanges.subscribe(()=>this.edited[t.name]=!0)),this.subscription(`${t.name}_schema`,this.form_map[t.name].controls.schema.valueChanges.subscribe(s=>{let _=this._schemas.getSchema(s);if(!_)try{_=JSON.parse(s)}catch(a){_={}}this.schema_map[t.name]=_}))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ce.uw),e.Y36(L),e.Y36(Kt.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["zone-metadata"]],features:[e.qOj],decls:5,vars:1,consts:function(){let i,t,n;return i=$localize`:@@addMetadataAction␟21539c364f82b6b766d912c3734a014cb30f27a9␟6503325999299484981: Add new Metadata Field `,t=$localize`:@@saveAction␟baa3a276f05a6226cb663918714882c53b84da34␟25086637338905953: Save `,n=$localize`:@@zoneMetadataEmpty␟2bd9761768337769895eb2434531437eff6955ec␟5420436980181509251: No zone metadata found `,[["class","p-4",4,"ngIf"],["empty_state",""],["load_state",""],[1,"p-4"],["mat-button","",3,"click"],i,["class","mt-4",4,"ngIf","ngIfElse"],[1,"mt-4"],[4,"ngFor","ngForOf"],[3,"no-padding","formGroup",4,"ngIf"],[3,"formGroup"],["edit","",1,"flex-1"],[4,"ngIf"],["mat-icon-button","","matTooltip","Edit Metadata Settings",3,"click"],[3,"icon"],["class","contents",4,"ngIf"],[1,"settings"],["formControlName","details","lang","json",3,"schema","readonly"],["mat-button","","save","",3,"click",4,"ngIf","ngIfElse"],["mat-button","","save","",3,"click"],t,[1,"contents"],["mat-icon-button","","matTooltip","Remove Metadata",3,"click"],[1,"p-8","text-center"],n,["diameter","32"]]},template:function(t,n){1&t&&(e.YNc(0,Vt,4,2,"div",0),e.YNc(1,en,2,0,"ng-template",null,1,e.W1O),e.YNc(3,tn,1,0,"ng-template",null,2,e.W1O)),2&t&&e.Q6J("ngIf",n.item)},directives:[b.O5,Te.lW,V.pp,b.sg,V.ib,A.JL,A.sg,V.yz,V.yK,_e.gM,W.o,Xt.x,A.JJ,A.u,ie.$g],styles:["[edit][_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}[edit][_ngcontent-%COMP%]:hover   app-icon[_ngcontent-%COMP%]{opacity:1}mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;height:1.2em;overflow:visible}mat-panel-title[_ngcontent-%COMP%]   [save][_ngcontent-%COMP%]{font-size:.8em;background:none;border:none;text-decoration:underline;color:inherit}mat-form-field[_ngcontent-%COMP%]{height:3em}.settings[_ngcontent-%COMP%]{width:100%}.contents[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex:1;min-width:2em}.contents[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-decoration:none}\n/*# sourceMappingURL=zone-metadata.component.ts-angular-inline--50.css.map*/"]}),o})();var sn=g(5605),on=g(8051);const _n=[{path:":id",component:Fe,children:[{path:"about",component:Tt},{path:"systems",component:Mt},{path:"triggers",component:It},{path:"children",component:Bt},{path:"metadata",component:nn},{path:"extend/:id",component:sn.z},{path:"history",component:on.D},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var an=g(1226);let ln=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[b.ez,A.u5,A.UX,F.Bz.forChild(_n),an.X]]}),o})()}}]);
//# sourceMappingURL=595.fdecef46b71f5499.js.map