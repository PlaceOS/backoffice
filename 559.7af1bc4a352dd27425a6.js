(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([[559],{7559:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AppTriggersModule:()=>ce});var n=i(1511),o=i(3695),s=i(6898),c=i(8975),r=i(4762),a=i(5546),d=i(5697),l=i(8194),g=i(1572),m=i(5712),f=i(4608),p=i(7096),u=i(6478);let v=(()=>{class e extends l.K{constructor(e,t){super(),this._service=e,this._dialog=t,this.name="triggers",this.show_options=this._service.show_options,this.tab_list=[]}get extensions(){return(0,d.fq)(this._service.active_item,this.name)}updateTabList(){this.tab_list=[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"instances",name:"Instances",count:this.instance_count,icon:{class:"backoffice-documents"}}].concat(this.extensions)}ngOnInit(){this.subscription("item",this._service.item.subscribe(e=>{this.loadValues(e)})),this.updateTabList()}loadValues(e){return(0,r.mG)(this,void 0,void 0,function*(){e&&(this.instance_count=(yield(0,a.o$$)(e.id).toPromise()).length,this.updateTabList())})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.L),g.Y36(f.uw))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-triggers"]],features:[g.qOj],decls:3,vars:1,consts:[[1,"flex-1","flex-col","sm:flex-row","flex","h-full","w-full","relative"],["heading","Triggers","name","triggers",1,"absolute","top-0","left-0","h-12","w-full","sm:h-full","sm:static"],["name","trigger","route","triggers",1,"flex-1","relative","mt-12","sm:mt-0","w-full","sm:w-1/2",3,"tabs"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"sidebar",1),g._UZ(2,"item-display",2),g.qZA()),2&e&&(g.xp6(2),g.Q6J("tabs",t.tab_list))},directives:[p.k,u.s],styles:["sidebar[_ngcontent-%COMP%]{transition:height .3s}@media screen and (min-width:640px){sidebar[_ngcontent-%COMP%]{width:20em!important}}"]}),e})();var h=i(9996),Z=i(878),b=i(4689),_=i(8303),A=i(3530),y=i(4103),T=i(8739),x=i(6164),q=i(1972);let w=(()=>{class e{constructor(e,t){this._service=e,this._dialog=t,this.item=this._service.item,this.instances=this.item.pipe((0,b.w)(e=>e instanceof a.cgz?(0,a.o$$)(e.id):(0,Z.of)([])),(0,_.d)(1))}get active_item(){return this._service.active_item}editCondition(e=null,t){return(0,r.mG)(this,void 0,void 0,function*(){if(!t)return;const i=this._dialog.open(q.P,{width:"auto",height:"auto",data:{trigger:this.active_item,condition:e?JSON.parse(JSON.stringify(e)):void 0,system:t}}),n=yield Promise.race([i.componentInstance.event.pipe((0,A.P)(e=>"done"===e.reason)).toPromise(),i.afterClosed().toPromise()]);(null==n?void 0:n.reason)&&this._service.replaceItem(n.metadata.trigger)})}editAction(e=null,t){return(0,r.mG)(this,void 0,void 0,function*(){if(!t)return;const i=this._dialog.open(x.L,{data:{trigger:this.active_item,action:e,system:t}}),n=yield Promise.race([i.componentInstance.event.pipe((0,A.P)(e=>"done"===e.reason)).toPromise(),i.afterClosed().toPromise()]);(null==n?void 0:n.reason)&&this._service.replaceItem(n.metadata.trigger)})}reorderAction(e,t,i){return(0,r.mG)(this,void 0,void 0,function*(){const n=yield(0,y._5)({title:`Reoreder trigger ${e} action`,content:"Are you sure you want remove this trigger condition?<br>All systems using this trigger will be updated <strong>immediately</strong>.",icon:{type:"icon",class:"backoffice-trash"}},this._dialog);if(!n)return;const o=[..."function"===e?this.active_item.actions.functions:this.active_item.actions.mailers];(0,c.bA)(o,t,i);const s={functions:"function"===e?o:this.active_item.actions.functions,mailers:"function"===e?this.active_item.actions.mailers:o};n.loading("Re-ordering triggger actions...");const r=yield(0,a.dqJ)(this.active_item.id,Object.assign(Object.assign({},this.active_item.toJSON()),{actions:s})).toPromise().catch(e=>e);if(!(r instanceof a.cgz))return(0,T.cB)(`Error re-ordered trigger ${e} action. Error: ${JSON.stringify(r.response||r.message||r)}`);this._service.replaceItem(r),(0,T.t5)(`Successfully re-ordered trigger ${e} action.`)})}removeCondition(e){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield(0,y._5)({title:"Remove trigger condition",content:"Are you sure you want remove this trigger condition?<br>All systems using this trigger will be updated <strong>immediately</strong>.",icon:{type:"icon",class:"backoffice-trash"}},this._dialog);if(!(null==t?void 0:t.reason))return;t.loading("Removing trigger condition...");const i=this.active_item,n={comparisons:[...i.conditions.comparisons],time_dependents:[...i.conditions.time_dependents]},o=(e.type?i.conditions.time_dependents:i.conditions.comparisons).findIndex(t=>JSON.stringify(t)===JSON.stringify(e));n.time_dependents.splice(o,1),(e.type?n.time_dependents:n.comparisons).splice(o,1);const s=yield(0,a.dqJ)(i.id,Object.assign(Object.assign({},i.toJSON()),{conditions:n})).toPromise().catch(e=>e);if(t.close(),!(s instanceof a.cgz))return(0,T.cB)(`Error removing trigger condition. Error: ${JSON.stringify(s.response||s.message||s)}`);this._service.replaceItem(s),(0,T.t5)("Successfully removed trigger condition.")})}removeAction(e){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield(0,y._5)({title:"Remove trigger action",content:"Are you sure you want remove this trigger action?<br>All systems using this trigger will be updated <strong>immediately</strong>.",icon:{type:"icon",class:"backoffice-trash"}},this._dialog);if(!(null==t?void 0:t.reason))return;t.loading("Removing trigger action...");const i=this.active_item,n={functions:[...i.actions.functions],mailers:[...i.actions.mailers]},o=(e.emails?i.actions.mailers:i.actions.functions).findIndex(t=>JSON.stringify(t)===JSON.stringify(e));(e.emails?n.mailers:n.functions).splice(o,1);const s=yield(0,a.dqJ)(i.id,Object.assign(Object.assign({},i.toJSON()),{actions:n})).toPromise().catch(e=>e);if(t.close(),!(s instanceof a.cgz))return(0,T.cB)(`Error removing trigger action. Error: ${JSON.stringify(s.response||s.message||s)}`);this._service.replaceItem(s),(0,T.t5)("Successfully removed trigger action.")})}removeTriggerFromSystem(e){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield(0,y._5)({title:"Remove trigger from system",content:`Are you sure you want remove this trigger from ${e.name}?<br>The system will be updated <strong>immediately</strong>.`,icon:{type:"icon",class:"backoffice-trash"}},this._dialog);if(!(null==t?void 0:t.reason))return;t.loading("Removing trigger from system...");const i=yield(0,a.LfU)(e.id,this.active_item.id).toPromise().catch(e=>e);if(t.close(),i)return(0,T.cB)(`Error removing trigger from system. Error: ${i.responseText||i.message||i}`);(0,T.t5)("Successfully removed trigger from system.")})}}return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.L),g.LFG(f.uw))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var J=i(6828),N=i(6678),$=i(5980),k=i(3609),C=i(6529),O=i(9083);function I(e,t){if(1&e&&(g.TgZ(0,"div",3),g.TgZ(1,"label"),g.SDv(2,17),g.qZA(),g.TgZ(3,"div",18),g._uU(4),g.ALo(5,"dateFrom"),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,1,1e3*e.item.created_at))}}function L(e,t){if(1&e&&(g.TgZ(0,"div",3),g.TgZ(1,"label"),g.SDv(2,19),g.qZA(),g.TgZ(3,"div",18),g._uU(4),g.ALo(5,"dateFrom"),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,1,1e3*e.item.updated_at))}}function S(e,t){1&e&&(g.TgZ(0,"div",24),g.tHW(1,25),g._UZ(2,"div",26),g.N_p(),g.qZA())}const U=function(){return{class:"backoffice-edit"}},D=function(){return{class:"backoffice-trash"}};function M(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27),g._UZ(1,"div",28),g.TgZ(2,"div",26),g._uU(3),g.ALo(4,"json"),g.ALo(5,"json"),g.qZA(),g.TgZ(6,"div",29),g.TgZ(7,"button",8),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).editCondition(t)}),g._UZ(8,"app-icon",30),g.qZA(),g.TgZ(9,"button",31),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).removeCondition(t)}),g._UZ(10,"app-icon",30),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,i=g.oxw(2);g.xp6(3),g.lnq(" ",g.lcZ(4,6,e.left)," ",e.operator," ",g.lcZ(5,8,e.right)," "),g.xp6(4),g.Q6J("disabled",!i.template_system),g.xp6(1),g.Q6J("icon",g.DdM(10,U)),g.xp6(2),g.Q6J("icon",g.DdM(11,D))}}function Q(e,t){1&e&&(g.TgZ(0,"div",24),g.tHW(1,32),g._UZ(2,"div",26),g.N_p(),g.qZA())}function E(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27),g._UZ(1,"div",28),g.TgZ(2,"div",26),g._uU(3),g.qZA(),g.TgZ(4,"div",29),g.TgZ(5,"button",8),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).editCondition(t)}),g._UZ(6,"app-icon",33),g.qZA(),g.TgZ(7,"button",31),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).removeCondition(t)}),g._UZ(8,"app-icon",34),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,i=g.oxw(2);g.xp6(3),g.AsE(" ","at"===e.type?"At time":"CRON"," ","at"===e.type?e.time:e.cron," "),g.xp6(2),g.Q6J("disabled",!i.template_system)}}function z(e,t){if(1&e&&(g.TgZ(0,"section",20),g.YNc(1,S,3,0,"div",21),g.TgZ(2,"div",22),g.YNc(3,M,11,12,"div",23),g.qZA(),g.YNc(4,Q,3,0,"div",21),g.TgZ(5,"div",22),g.YNc(6,E,9,3,"div",23),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngIf",e.comparisons.length),g.xp6(2),g.Q6J("ngForOf",e.comparisons),g.xp6(1),g.Q6J("ngIf",e.time_dependents.length),g.xp6(2),g.Q6J("ngForOf",e.time_dependents)}}function F(e,t){1&e&&(g.TgZ(0,"div",24),g.tHW(1,37),g._UZ(2,"div",26),g.N_p(),g.qZA())}function Y(e,t){1&e&&g._UZ(0,"div",41)}const P=function(){return{class:"backoffice-select-arrows"}};function R(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",38),g.TgZ(1,"div",39),g._UZ(2,"app-icon",30),g.qZA(),g.TgZ(3,"div",26),g._uU(4),g.ALo(5,"json"),g.qZA(),g.TgZ(6,"div",29),g.TgZ(7,"button",8),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).editAction(t)}),g._UZ(8,"app-icon",30),g.qZA(),g.TgZ(9,"button",31),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).removeAction(t)}),g._UZ(10,"app-icon",30),g.qZA(),g.qZA(),g.YNc(11,Y,1,0,"div",40),g.qZA()}if(2&e){const e=t.$implicit,i=g.oxw(2);g.xp6(2),g.Q6J("icon",g.DdM(9,P)),g.xp6(2),g.lnq(" ",e.mod,", ",e.method,"(",g.lcZ(5,7,e.args),") "),g.xp6(3),g.Q6J("disabled",!i.template_system),g.xp6(1),g.Q6J("icon",g.DdM(10,U)),g.xp6(2),g.Q6J("icon",g.DdM(11,D))}}function j(e,t){1&e&&(g.TgZ(0,"div",24),g.tHW(1,42),g._UZ(2,"div",26),g.N_p(),g.qZA())}function H(e,t){1&e&&g._UZ(0,"div",41)}function G(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",38),g.TgZ(1,"div",39),g._UZ(2,"app-icon",30),g.qZA(),g.TgZ(3,"div",26),g.TgZ(4,"span",43),g.SDv(5,44),g.ALo(6,"formatList"),g.qZA(),g._uU(7),g.qZA(),g.TgZ(8,"div",29),g.TgZ(9,"button",8),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).editAction(t)}),g._UZ(10,"app-icon",30),g.qZA(),g.TgZ(11,"button",31),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).removeAction(t)}),g._UZ(12,"app-icon",30),g.qZA(),g.qZA(),g.YNc(13,H,1,0,"div",40),g.qZA()}if(2&e){const e=t.$implicit,i=g.oxw(2);g.xp6(2),g.Q6J("icon",g.DdM(10,P)),g.xp6(2),g.Q6J("matTooltip",g.lcZ(6,8,e.emails)),g.xp6(2),g.pQV(e.emails.length)(e.emails.length),g.QtT(5),g.xp6(1),g.hij("\xa0 | Body Length: ",e.content.length," "),g.xp6(2),g.Q6J("disabled",!i.template_system),g.xp6(1),g.Q6J("icon",g.DdM(11,U)),g.xp6(2),g.Q6J("icon",g.DdM(12,D))}}function V(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"section",20),g.YNc(1,F,3,0,"div",21),g.TgZ(2,"div",35),g.NdJ("cdkDropListDropped",function(t){return g.CHM(e),g.oxw().confirmReorder("function",t)}),g.YNc(3,R,12,12,"div",36),g.qZA(),g.YNc(4,j,3,0,"div",21),g.TgZ(5,"div",35),g.NdJ("cdkDropListDropped",function(t){return g.CHM(e),g.oxw().confirmReorder("mailer",t)}),g.YNc(6,G,14,13,"div",36),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngIf",e.functions.length),g.xp6(2),g.Q6J("ngForOf",e.functions),g.xp6(1),g.Q6J("ngIf",e.mailers.length),g.xp6(2),g.Q6J("ngForOf",e.mailers)}}function W(e,t){1&e&&(g.TgZ(0,"div",45),g.SDv(1,46),g.qZA())}function B(e,t){1&e&&(g.TgZ(0,"div",45),g.SDv(1,47),g.qZA())}const K=function(e){return["/zones",e]},X=function(e){return["/systems",e]};function ee(e,t){if(1&e&&(g.TgZ(0,"a",19),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.Q6J("routerLink",e.zone_id?g.VKq(3,K,e.zone_id):g.VKq(5,X,e.control_system_id))("matTooltip",e.zone_id||e.control_system_id),g.xp6(1),g.hij(" ",e.name||e.zone_id||e.control_system_id," ")}}function te(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",11),g.TgZ(1,"div",12),g._UZ(2,"div",13),g.qZA(),g.TgZ(3,"div",14),g.YNc(4,ee,2,7,"a",15),g.qZA(),g.TgZ(5,"div",16),g._uU(6),g.ALo(7,"dateFrom"),g.qZA(),g.TgZ(8,"div",12),g.TgZ(9,"button",17),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).deleteTrigger(t)}),g._UZ(10,"app-icon",18),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit;g.xp6(2),g.ekj("active",e.bookable),g.xp6(2),g.Q6J("ngIf",e.id),g.xp6(2),g.hij(" ",g.lcZ(7,4,1e3*+e.created_at)," ")}}function ie(e,t){if(1&e&&(g.TgZ(0,"div",2),g.TgZ(1,"div",3),g._UZ(2,"td",4),g.TgZ(3,"td",5),g.SDv(4,6),g.qZA(),g.TgZ(5,"td",7),g.SDv(6,8),g.qZA(),g._UZ(7,"td",4),g.qZA(),g.TgZ(8,"div",9),g.YNc(9,te,11,6,"div",10),g.ALo(10,"async"),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(9),g.Q6J("ngForOf",g.lcZ(10,1,e.instances))}}function ne(e,t){1&e&&(g.TgZ(0,"div",20),g.TgZ(1,"div",21),g.SDv(2,22),g.qZA(),g.qZA())}const oe=[{path:":id",component:v,children:[{path:"about",component:(()=>{class e extends l.K{constructor(e){super(),this._service=e,this.comparisons=[],this.time_dependents=[],this.functions=[],this.mailers=[],this.query_fn=e=>(0,a.vIL)({q:e}).pipe((0,h.U)(e=>e.data)),this.editCondition=e=>this._service.editCondition(e,this.template_system),this.removeCondition=e=>this._service.removeCondition(e),this.editAction=e=>this._service.editAction(e,this.template_system),this.removeAction=e=>this._service.removeAction(e)}get item(){return this._service.active_item}ngOnInit(){this.subscription("item",this._service.item.subscribe(e=>{this.item&&this.item.conditions&&(this.comparisons=this.item.conditions.comparisons||[],this.time_dependents=this.item.conditions.time_dependents||[],this.functions=this.item.actions.functions||[],this.mailers=this.item.actions.mailers||[])}))}confirmReorder(e,t){t&&t.previousIndex!==t.currentIndex&&this._service.reorderAction(e,t.previousIndex,t.currentIndex)}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(w))},e.\u0275cmp=g.Xpm({type:e,selectors:[["trigger-about"]],features:[g.qOj],decls:24,vars:10,consts:function(){let e,t,i,n,o,s,c,r,a,d,l,m,f;return e=$localize`:@@triggerTemplateSystemLabel␟f137c1d09ed9de301a81d208b8cdad80a968dcaf␟6860745490563598830:Template System: `,t=$localize`:@@triggerConditionsHeader␟1020647667eed59388dbc8a6094558415ad60d7d␟1021838865383496895: Conditions `,i=$localize`:@@triggerActionsHeader␟208b27e7a9b133922050b947e10f18db10b61114␟6653730762255659549: Actions `,n=$localize`:@@triggerCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,o=$localize`:@triggerUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,s=$localize`:@@triggerComparisonLabel␟2c50e7b3646c263fc578eebbc9d6088cc3afb6a9␟3927510240684371304:${"\ufffd#2\ufffd"}:START_TAG_DIV:Variable Comparison Condtions${"\ufffd/#2\ufffd"}:CLOSE_TAG_DIV:`,c=$localize`:@@triggerTimeLabel␟9fc71327ed24f47d8e496dae7e04e96b20509d93␟997506514207464791:${"\ufffd#2\ufffd"}:START_TAG_DIV:Time Dependent Conditions${"\ufffd/#2\ufffd"}:CLOSE_TAG_DIV:`,r=$localize`:@@triggerFunctionsLabel␟86ae51bf8b293757b07a57dc39d9c3d0ad92f6fa␟6665573509830119346:${"\ufffd#2\ufffd"}:START_TAG_DIV:Function Call Actions${"\ufffd/#2\ufffd"}:CLOSE_TAG_DIV:`,a=$localize`:@@triggerEmailsLabel␟c4c4274d639d6589ecedd093580919ca1b680d51␟611546964449236535:${"\ufffd#2\ufffd"}:START_TAG_DIV:Email Actions${"\ufffd/#2\ufffd"}:CLOSE_TAG_DIV:`,d=$localize`:␟6e542484e5a5b97451d8db2f7dfdbb6ae9882409␟3981906223455182500:{VAR_PLURAL, plural, =1 {Address } other {Addresses }}`,d=g.Zx4(d,{VAR_PLURAL:"\ufffd1\ufffd"}),l=$localize`:@@emailCountDisplay␟0999296882eee5cef69cbe222cf6f242c97a20f5␟468872276403073781:${"\ufffd0\ufffd"}:INTERPOLATION: ${d}:ICU:`,m=$localize`:@@triggerConditionsEmpty␟2ceae343187bb2de41817089be3056066fd4c8a4␟1442769940044870194: No condtions for trigger `,f=$localize`:@@triggerActionsEmpty␟2bb8a715685fabfcbc42e7d2bbab46768d101c53␟4672676563300001774: No actions for trigger `,[[1,"space-y-2"],["class","flex items-center space-x-2",4,"ngIf"],[1,"my-4"],[1,"flex","items-center","space-x-2"],["for","driver","matTooltip","System to use for available status variables and function calls",1,"whitespace-nowrap"],e,["name","system",1,"h-12",3,"query_fn","ngModel","ngModelChange"],[1,"flex","items-center","my-4"],["mat-icon-button","",3,"disabled","click"],["className","backoffice-plus"],[1,"font-medium","text-lg"],t,["role","table",4,"ngIf","ngIfElse"],[1,"flex","items-center","space-x-2","my-4"],i,["no_conditions",""],["no_actions",""],n,[1,"value"],o,["role","table"],["table-head","",4,"ngIf"],["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-head",""],s,[1,"flex-1","p-2"],["table-row",""],[1,"w-12"],[1,"w-24","flex","items-center","justify-center"],[3,"icon"],["mat-icon-button","",3,"click"],c,["className","backoffice-edit"],["className","backoffice-trash"],["table-body","","cdkDropList","",3,"cdkDropListDropped"],["table-row","","cdkDrag","",4,"ngFor","ngForOf"],r,["table-row","","cdkDrag",""],["cdkDragHandle","",1,"w-12","flex","items-center","justify-center"],["class","p-4 border-4 border-dashed border-black bg-gray-300",4,"cdkDragPlaceholder"],[1,"p-4","border-4","border-dashed","border-black","bg-gray-300"],a,[3,"matTooltip"],l,[1,"flex","flex-col","items-center","p-8"],m,f]},template:function(e,t){if(1&e&&(g.TgZ(0,"section",0),g.YNc(1,I,6,3,"div",1),g.YNc(2,L,6,3,"div",1),g.qZA(),g._UZ(3,"hr",2),g.TgZ(4,"div",3),g.TgZ(5,"label",4),g.SDv(6,5),g.qZA(),g.TgZ(7,"item-search-field",6),g.NdJ("ngModelChange",function(e){return t.template_system=e}),g.qZA(),g.qZA(),g.TgZ(8,"header",7),g.TgZ(9,"button",8),g.NdJ("click",function(){return t.editCondition()}),g._UZ(10,"app-icon",9),g.qZA(),g.TgZ(11,"div",10),g.SDv(12,11),g.qZA(),g.qZA(),g.YNc(13,z,7,4,"section",12),g.TgZ(14,"header",13),g.TgZ(15,"button",8),g.NdJ("click",function(){return t.editAction()}),g._UZ(16,"app-icon",9),g.qZA(),g.TgZ(17,"div",10),g.SDv(18,14),g.qZA(),g.qZA(),g.YNc(19,V,7,4,"section",12),g.YNc(20,W,2,0,"ng-template",null,15,g.W1O),g.YNc(22,B,2,0,"ng-template",null,16,g.W1O)),2&e){const e=g.MAs(21),i=g.MAs(23);g.xp6(1),g.Q6J("ngIf",t.item.created_at),g.xp6(1),g.Q6J("ngIf",t.item.updated_at),g.xp6(5),g.Q6J("query_fn",t.query_fn)("ngModel",t.template_system),g.xp6(2),g.Q6J("disabled",!t.template_system),g.xp6(4),g.Q6J("ngIf",t.comparisons.length||t.time_dependents.length)("ngIfElse",e),g.xp6(2),g.Q6J("disabled",!t.template_system),g.xp6(4),g.Q6J("ngIf",t.functions.length||t.mailers.length)("ngIfElse",i)}},directives:[n.O5,J.gM,N.y,o.JJ,o.On,$.lW,k.o,n.sg,c.Wj,c.Zt,c.Bh,c.Hk],pipes:[C.R,n.Ts,O.M],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}"]}),e})()},{path:"instances",component:(()=>{class e{constructor(e){this._service=e,this.instances=this._service.instances,this.connected={},this.deleteTrigger=e=>this._service.removeTriggerFromSystem(e)}get item(){return this._service.active_item}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(w))},e.\u0275cmp=g.Xpm({type:e,selectors:[["trigger-systems"]],decls:4,vars:4,consts:function(){let e,t,i;return e=$localize`:@@systemTableName␟a00b3fab0247b5f24e425efaeb163f6e0a46bf41␟8903333566889559902: Parent ID `,t=$localize`:@@systemTableAdded␟2eb7d7c2b3e22d1a719fb20ddf67d87c565f4c7a␟4724324591383487398: Added `,i=$localize`:@@systemTableEmpty␟0c246c3a5d499a8fa40ffd072ae9bd7ff1c2d5ca␟4487301581823190563: No instances of trigger `,[["role","table",4,"ngIf","ngIfElse"],["empty_state",""],["role","table"],["table-head",""],[1,"w-12","h-10"],[1,"flex-1","h-10","flex","items-center"],e,[1,"w-32","h-10","flex","items-center"],t,["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"w-12","flex","items-center","justify-center"],[1,"h-2","w-2","rounded-full","bg-black"],[1,"flex-1","p-2"],["class","underline",3,"routerLink","matTooltip",4,"ngIf"],[1,"w-32","p-2"],["mat-icon-button","",3,"click"],["className","backoffice-trash"],[1,"underline",3,"routerLink","matTooltip"],[1,"flex","flex-col","items-center","p-8"],[1,"text"],i]},template:function(e,t){if(1&e&&(g.YNc(0,ie,11,3,"div",0),g.ALo(1,"async"),g.YNc(2,ne,3,0,"ng-template",null,1,g.W1O)),2&e){const e=g.MAs(3);let i;g.Q6J("ngIf",null==(i=g.lcZ(1,2,t.instances))?null:i.length)("ngIfElse",e)}},directives:[n.O5,n.sg,$.lW,k.o,s.yS,J.gM],pipes:[n.Ov,C.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}.active[_ngcontent-%COMP%]{background-color:var(--success)!important}"]}),e})()},{path:"extend/:id",component:i(3511).z},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var se=i(7561);let ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[n.ez,o.u5,s.Bz.forChild(oe),se.X,c._t]]}),e})()}}]);
//# sourceMappingURL=559.7af1bc4a352dd27425a6.js.map