"use strict";(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[432],{6179:(p_,f,n)=>{n.r(f),n.d(f,{AppModulesModule:()=>T_});var a=n(4666),E=n(609),u=n(959),C=n(1670),d=n(3698),T=n(6123),D=n(1843),h=n(8537),_=n(9676),b=n(1609),y=n(9101);let Z=(()=>{class t extends D.K{constructor(e){super(),this._service=e,this.name="modules",this.show_options=this._service.show_options,this.tab_list=[]}get extensions(){return(0,h.fq)(this._service.active_item,this.name)}updateTabList(){this.tab_list=[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"systems",name:"Systems",count:this.system_count,icon:{class:"backoffice-documents"}},{id:"history",name:"Settings History",icon:{class:"backoffice-clock"}}].concat(this.extensions)}ngOnInit(){this.subscription("item",this._service.item.subscribe(e=>{this.loadValues(e),this.updateTabList()})),this.updateTabList()}loadValues(e){var i=this;return(0,C.Z)(function*(){if(!e)return;const o={offset:0,limit:1,module_id:e.id};i.system_count=(yield(0,d.vIL)(o).toPromise()).total})()}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(T.L))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-modules"]],features:[_.qOj],decls:3,vars:1,consts:[[1,"flex-1","flex-col","sm:flex-row","flex","h-full","w-full","relative"],["heading","Modules","name","modules",1,"absolute","top-0","left-0","h-12","w-full","sm:h-full","sm:static"],["name","module","route","modules",1,"flex-1","relative","mt-12","sm:mt-0","w-full","sm:w-1/2",3,"tabs"]],template:function(e,i){1&e&&(_.TgZ(0,"div",0),_._UZ(1,"sidebar",1)(2,"item-display",2),_.qZA()),2&e&&(_.xp6(2),_.Q6J("tabs",i.tab_list))},dependencies:[b.s,y.k],styles:["sidebar[_ngcontent-%COMP%]{transition:height .3s}@media screen and (min-width: 640px){sidebar[_ngcontent-%COMP%]{width:20em!important}}\n/*# sourceMappingURL=modules.component.ts-angular-inline--29.css.map*/"]}),t})();var p=n(4505),x=n(4139),$=n(9151),K=n(823),O=n(9095),r=n(9128),m=n(6942),X=n(7418),G=n(8759),g=n(2016),J=n(7701),Y=n(640);let U=(()=>{class t{constructor(e,i){this._state=e,this._dialog=i,this._loading=new p.X(!1),this.loading=this._loading.asObservable(),this.item=this._state.item.pipe((0,$.h)(o=>o instanceof d.SQz)),this.associated_settings=this._state.all_item.pipe((0,K.b)(300),(0,O.w)(o=>o&&o instanceof d.SQz?(0,d.eRm)(o.id):[])),this.driver=this.item.pipe((0,O.w)(o=>(0,d.L4d)(o.driver_id)),(0,r.d)(1)),this.system=this.item.pipe((0,O.w)(o=>o.system_id?(0,d.hMA)(o.system_id):(0,x.of)(null)),(0,r.d)(1)),this.system_list=this.item.pipe((0,O.w)(o=>(this._loading.next(!0),console.log("Loading Systems..."),(0,d.vIL)({module_id:o.id}))),(0,m.U)(o=>o.data),(0,X.K)(()=>[]),(0,G.b)(o=>this._loading.next(!1)),(0,r.d)(1))}get active_item(){return this._state.active_item}toggleModuleState(){var e=this;return(0,C.Z)(function*(){const o=yield(e.active_item.running?d.iAP:d.Dqv)(e.active_item.id).pipe((0,m.U)(S=>null)).toPromise().catch(S=>S);if(o)return console.log("Error:",o),void("string"==typeof o&&o.length<64?(0,g.cB)(o):(0,g.cB)(`Failed to ${e.active_item.running?"stop":"start"} device '${e.active_item.id}'.\nView Error?`,"View",()=>e.viewDetails(o)));(0,g.t5)("Module successfully "+(e.active_item.running?"stopped":"started")),e.active_item.running=!e.active_item.running})()}viewDetails(e){this._dialog.open(J.a,{data:{content:e}})}}return t.\u0275fac=function(e){return new(e||t)(_.LFG(T.L),_.LFG(Y.uw))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=n(3436),z=n(4522),P=n(1708),L=n(239);function w(t,s){if(1&t&&(_.TgZ(0,"div",2)(1,"label"),_.SDv(2,14),_.qZA(),_.TgZ(3,"div",4),_._uU(4),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(e.item.notes)}}function q(t,s){if(1&t&&(_.TgZ(0,"div",2)(1,"label"),_.SDv(2,15),_.qZA(),_.TgZ(3,"div",4),_._uU(4),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(e.item.ip)}}function V(t,s){if(1&t&&(_.TgZ(0,"div",2)(1,"label"),_.SDv(2,16),_.qZA(),_.TgZ(3,"div",4),_._uU(4),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(e.item.port)}}function j(t,s){if(1&t&&(_.TgZ(0,"div",2)(1,"label"),_.SDv(2,17),_.qZA(),_.TgZ(3,"div",4),_._uU(4),_.ALo(5,"dateFrom"),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(_.lcZ(5,1,1e3*e.item.created_at))}}function W(t,s){if(1&t&&(_.TgZ(0,"div",2)(1,"label"),_.SDv(2,18),_.qZA(),_.TgZ(3,"div",4),_._uU(4),_.ALo(5,"dateFrom"),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(_.lcZ(5,1,1e3*e.item.updated_at))}}const H=function(t){return["/drivers",t]};function k(t,s){if(1&t&&(_.TgZ(0,"div",2)(1,"label"),_.SDv(2,19),_.qZA(),_.TgZ(3,"a",20),_._uU(4),_.ALo(5,"async"),_.qZA()()),2&t){const e=_.oxw();_.xp6(3),_.Q6J("routerLink",_.VKq(4,H,e.item.driver_id)),_.xp6(1),_.hij(" ",_.lcZ(5,2,e.driver).name||"<Unnamed>"," ")}}const __=function(t){return["/systems",t,"modules"]};function e_(t,s){if(1&t&&(_.TgZ(0,"div",2)(1,"label"),_.SDv(2,21),_.qZA(),_.TgZ(3,"a",20),_.ALo(4,"async"),_._uU(5),_.ALo(6,"async"),_.qZA()()),2&t){const e=_.oxw();_.xp6(3),_.Q6J("routerLink",_.VKq(6,__,_.lcZ(4,2,e.system).id)),_.xp6(2),_.hij(" ",_.lcZ(6,4,e.system).name," ")}}function t_(t,s){if(1&t&&(_.TgZ(0,"div",22),_.SDv(1,23),_.qZA()),2&t){const e=_.oxw();_.xp6(1),_.pQV(e.item.running),_.QtT(1)}}function o_(t,s){1&t&&_._UZ(0,"mat-spinner",24)}const n_=function(){return[]};function s_(t,s){if(1&t&&(_.TgZ(0,"section"),_._UZ(1,"a-settings-form",25),_.ALo(2,"async"),_.qZA()),2&t){const e=_.oxw();_.xp6(1),_.Q6J("id",e.item.id)("merge",!0)("settings",e.item.settings)("merge_settings",_.lcZ(2,4,e.other_settings)||_.DdM(6,n_))}}function i_(t,s){1&t&&(_.TgZ(0,"div",26),_._UZ(1,"mat-spinner",27),_.TgZ(2,"p"),_.SDv(3,28),_.qZA()())}let l_=(()=>{class t{constructor(e){this._service=e,this.driver=this._service.driver,this.system=this._service.system,this.other_settings=this._service.associated_settings}get item(){return this._service.active_item}toggleModuleState(){var e=this;return(0,C.Z)(function*(){e.stopping=!0,yield e._service.toggleModuleState(),e.stopping=!1})()}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(U))},t.\u0275cmp=_.Xpm({type:t,selectors:[["module-about"]],decls:32,vars:20,consts:function(){let s,e,i,o,S,A,c,R,v,N,M,I,B;return s=$localize`:@moduleTLSLabel␟fc14542d8661d50a55ec617e759b8275266b4084␟6787048658913260060:TLS:`,e=$localize`:@moduleUDPLabel␟45a627302b2be9d4d92e8361c28128b8747a3a76␟9217682045572066115:UDP:`,i=$localize`:@@settingsLabel␟121cc5391cd2a5115bc2b3160379ee5b36cd7716␟4930506384627295710:Settings`,o=$localize`:@moduleNotesLabel␟3b193ba24bd715ed412f5419df3acb59090141d3␟8421971980013015956:Notes:`,S=$localize`:@moduleIPLabel␟8271bb466916303dc1516952bf50e7e6626f7b2c␟253752108238785328:IP:`,A=$localize`:@modulePortLabel␟a2ceedad860954f374fc1ac8bae057292b1cec2e␟6167294183925653141:Port:`,c=$localize`:@@moduleCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,R=$localize`:@moduleUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,v=$localize`:@moduleUpdatedAtLabel␟797f76e214854e3930b89347440a035b92fb3adb␟1174891546565206449:Driver:`,N=$localize`:@moduleUpdatedAtLabel␟9680e97832208eb205d7d7e643c30265d8b4e9f5␟4615578067123890535:Logic for system:`,M=$localize`:␟2e434410a64453fd12259ac38cfcb4f7b4b26137␟2537520834646109979:{VAR_SELECT, select, true {Stop Module } false {Start Module }}`,M=_.Zx4(M,{VAR_SELECT:"\ufffd0\ufffd"}),I=$localize`:@@moduleStateToggle␟d09fa3d7f10a3f4ba1dbb8ede1ea6f993f0adc3b␟6594646568873405470: ${M}:ICU: `,B=$localize`:@@moduleDetailsLoading␟cb7cffb188a2b0bce758e40f67c29387dd6ccfcf␟3678638452756535871:Loading module settings...`,[[1,"space-y-2"],["class","flex items-center space-x-2",4,"ngIf"],[1,"flex","items-center","space-x-2"],s,[1,"value"],e,[1,"my-4"],["mat-button","",1,"w-32",3,"disabled","click"],["class","text",4,"ngIf"],["diameter","32",4,"ngIf"],[1,"font-medium","text-lg"],i,[4,"ngIf","ngIfElse"],["load_state",""],o,S,A,c,R,v,[1,"underline",3,"routerLink"],N,[1,"text"],I,["diameter","32"],[3,"id","merge","settings","merge_settings"],[1,"p-8","flex","flex-col","items-center","justify-center","m-auto"],["diameter","48",1,"mb-4"],B]},template:function(e,i){if(1&e&&(_.TgZ(0,"section",0),_.YNc(1,w,5,1,"div",1),_.YNc(2,q,5,1,"div",1),_.YNc(3,V,5,1,"div",1),_.TgZ(4,"div",2)(5,"label"),_.SDv(6,3),_.qZA(),_.TgZ(7,"div",4),_._uU(8),_.qZA()(),_.TgZ(9,"div",2)(10,"label"),_.SDv(11,5),_.qZA(),_.TgZ(12,"div",4),_._uU(13),_.qZA()(),_.YNc(14,j,6,3,"div",1),_.YNc(15,W,6,3,"div",1),_.YNc(16,k,6,6,"div",1),_.ALo(17,"async"),_.YNc(18,e_,7,8,"div",1),_.ALo(19,"async"),_.qZA(),_._UZ(20,"hr",6),_.TgZ(21,"section")(22,"button",7),_.NdJ("click",function(){return i.toggleModuleState()}),_.YNc(23,t_,2,1,"div",8),_.YNc(24,o_,1,0,"mat-spinner",9),_.qZA()(),_._UZ(25,"hr",6),_.TgZ(26,"header",10),_.SDv(27,11),_.qZA(),_.YNc(28,s_,3,7,"section",12),_.ALo(29,"async"),_.YNc(30,i_,4,0,"ng-template",null,13,_.W1O)),2&e){const o=_.MAs(31);_.xp6(1),_.Q6J("ngIf",i.item.notes),_.xp6(1),_.Q6J("ngIf",i.item.ip),_.xp6(1),_.Q6J("ngIf",i.item.port),_.xp6(5),_.Oqu(i.item.tls),_.xp6(5),_.Oqu(i.item.udp),_.xp6(1),_.Q6J("ngIf",i.item.created_at),_.xp6(1),_.Q6J("ngIf",i.item.updated_at),_.xp6(1),_.Q6J("ngIf",_.lcZ(17,14,i.driver)),_.xp6(2),_.Q6J("ngIf",_.lcZ(19,16,i.system)),_.xp6(4),_.Q6J("disabled",i.stopping),_.xp6(1),_.Q6J("ngIf",!i.stopping),_.xp6(1),_.Q6J("ngIf",i.stopping),_.xp6(4),_.Q6J("ngIf",i.item.settings&&_.lcZ(29,18,i.other_settings))("ngIfElse",o)}},dependencies:[a.O5,u.yS,Q.v,z.lW,P.Ou,a.Ov,L.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}\n/*# sourceMappingURL=module-about.component.ts-angular-inline--30.css.map*/"]}),t})();var S_=n(7716),d_=n(1259),F=n(5074),a_=n(1267);const E_=function(t){return["/systems",t]};function O_(t,s){if(1&t&&(_.TgZ(0,"div",18)(1,"div",19)(2,"a",20),_._uU(3),_.qZA()(),_.TgZ(4,"div",12),_._uU(5),_.qZA(),_.TgZ(6,"div",14),_._uU(7),_.ALo(8,"dateFrom"),_.qZA()()),2&t){const e=s.$implicit;_.xp6(2),_.Q6J("routerLink",_.VKq(6,E_,e.id)),_.xp6(1),_.Oqu(e.name),_.xp6(2),_.hij(" ",e.installed_ui_devices||"0"," "),_.xp6(2),_.hij(" ",_.lcZ(8,4,1e3*e.created_at)," ")}}function A_(t,s){if(1&t&&(_.TgZ(0,"div",8)(1,"div",9)(2,"div",10),_.SDv(3,11),_.qZA(),_.TgZ(4,"div",12),_.SDv(5,13),_.qZA(),_.TgZ(6,"div",14),_.SDv(7,15),_.qZA()(),_.TgZ(8,"div",16),_.YNc(9,O_,9,8,"div",17),_.ALo(10,"async"),_.qZA()()),2&t){const e=_.oxw(2);_.xp6(9),_.Q6J("ngForOf",_.lcZ(10,1,e.system_list))}}function c_(t,s){if(1&t&&(_.TgZ(0,"section"),_.YNc(1,A_,11,3,"div",7),_.ALo(2,"async"),_.qZA()),2&t){const e=_.oxw(),i=_.MAs(9);let o;_.xp6(1),_.Q6J("ngIf",null==(o=_.lcZ(2,2,e.system_list))?null:o.length)("ngIfElse",i)}}function M_(t,s){1&t&&(_.TgZ(0,"div",21),_._UZ(1,"mat-spinner",22),_.TgZ(2,"p"),_._uU(3,"Loading systems..."),_.qZA()()),2&t&&(_.xp6(1),_.Q6J("diameter",48))}function u_(t,s){1&t&&(_.TgZ(0,"div",21)(1,"p"),_._uU(2,"No systems with module"),_.qZA()())}let C_=(()=>{class t{constructor(e){this._service=e,this.filter$=new p.X(""),this.loading=this._service.loading,this.system_list=(0,S_.aj)([this.filter$,this._service.system_list]).pipe((0,m.U)(i=>{const[o,S]=i,A=o.toLowerCase();return o?S.filter(c=>c.name.toLowerCase().includes(A)):S}))}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(U))},t.\u0275cmp=_.Xpm({type:t,selectors:[["module-systems"]],decls:10,vars:5,consts:function(){let s,e,i;return s=$localize`:@@nameLabel␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,e=$localize`:@@systemLabel␟6c24d3e08bc16576fbd5580dc255a31c4b08c366␟8919524640139321287:No. Modules`,i=$localize`:@@createdLabel␟1b051734b0ee9021991c91b3ed4e81c244322462␟4207916966377787111:Created`,[[1,"flex","items-center","mb-4"],["appearance","outline",1,"h-12","flex-1"],["matPrefix","","className","backoffice-magnifying-glass text-xl mr-2"],["matInput","","placeholder","Filter systems...",1,"rounded-none",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["role","table","class","overflow-x-auto",4,"ngIf","ngIfElse"],["role","table",1,"overflow-x-auto"],["table-head",""],["flex","",1,"flex-1","p-2"],s,[1,"w-48","p-2"],e,[1,"w-36","p-2"],i,["table-body","",1,"overflow-y-auto"],["table-row","",4,"ngFor","ngForOf"],["table-row",""],["flex","",1,"flex-1","p-2","underline"],[3,"routerLink"],[1,"flex","flex-col","items-center","p-8","mx-auto"],[1,"mb-4",3,"diameter"]]},template:function(e,i){if(1&e&&(_.TgZ(0,"section",0)(1,"mat-form-field",1),_._UZ(2,"app-icon",2),_.TgZ(3,"input",3),_.NdJ("ngModelChange",function(S){return i.filter$.next(S)}),_.qZA()()(),_.YNc(4,c_,3,4,"section",4),_.ALo(5,"async"),_.YNc(6,M_,4,1,"ng-template",null,5,_.W1O),_.YNc(8,u_,3,0,"ng-template",null,6,_.W1O)),2&e){const o=_.MAs(7);_.xp6(3),_.Q6J("ngModel",""),_.xp6(1),_.Q6J("ngIf",!_.lcZ(5,3,i.loading))("ngIfElse",o)}},dependencies:[a.sg,a.O5,E.Fj,E.JJ,E.On,u.yS,d_.o,F.KE,F.qo,a_.Nt,P.Ou,a.Ov,L.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}\n/*# sourceMappingURL=module-systems.component.ts-angular-inline--31.css.map*/"]}),t})();var r_=n(9960),m_=n(5558);const g_=[{path:":id",component:Z,children:[{path:"about",component:l_},{path:"systems",component:C_},{path:"extend/:id",component:r_.z},{path:"history",component:m_.D},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var f_=n(9522);let T_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[a.ez,E.u5,u.Bz.forChild(g_),f_.X]}),t})()}}]);
//# sourceMappingURL=432.b382d58ddbdf6491.js.map