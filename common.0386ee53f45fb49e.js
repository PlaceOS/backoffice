"use strict";(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[592],{6195:(O,_,c)=>{c.d(_,{O:()=>u});var h=c(4762),n=c(6605),m=c(4099),l=c(8053),d=c(6079);let u=(()=>{class o{constructor(){this._schemas=new m.X([]),this.schemas=this._schemas.asObservable(),this.loadSchemas()}getSchema(e){const a=this._schemas.getValue().find(t=>t.id===e);return a?JSON.parse(a.schema||"{}"):null}loadSchemas(){return(0,h.mG)(this,void 0,void 0,function*(){const e=yield(0,n.IOR)({query_params:{},fn:s=>s,path:"schema"}).pipe((0,l.U)(s=>s.data)).toPromise();console.log("Schema List:",e),e.sort((s,a)=>{var t;return null===(t=s.name)||void 0===t?void 0:t.localeCompare(a.name)}),this._schemas.next(e)})}saveSchema(e){return(0,h.mG)(this,void 0,void 0,function*(){let s=this._schemas.getValue();const a={query_params:{},fn:i=>i,form_data:e,path:"schema"},t=yield(e.id?(0,n.Vxg)(Object.assign(Object.assign({},a),{id:e.id,method:"patch"})):(0,n.Ue8)(Object.assign({},a))).toPromise();s=[...s.filter(i=>e.id!==i.id),t],s.sort((i,f)=>{var r;return null===(r=i.name)||void 0===r?void 0:r.localeCompare(f.name)}),this._schemas.next(s)})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=d.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);