var ke=Object.defineProperty,Ae=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,xe=(pe,de,fe)=>de in pe?ke(pe,de,{enumerable:!0,configurable:!0,writable:!0,value:fe}):pe[de]=fe,_e=(pe,de)=>{for(var fe in de||(de={}))Re.call(de,fe)&&xe(pe,fe,de[fe]);if(Ce)for(var fe of Ce(de))Me.call(de,fe)&&xe(pe,fe,de[fe]);return pe},Ee=(pe,de)=>Ae(pe,Ie(de));(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[301],{1301:(pe,de,fe)=>{"use strict";fe.r(de),fe.d(de,{MqttDashboardModule:()=>R});var ye=fe(8267),Se=fe(9902),Te=fe(7752),A=fe(6752),K=fe(1036),z=fe(525),_=fe(1226),b=fe(8806),y=fe(8999),d=fe(8644),o=fe(1119),r=fe(4452),n=fe(6133),t=fe(4418),e=fe(2222);let s=(()=>{class U{constructor(){this._connected=new o.X(!1),this._topics={},this.connected=this._connected.asObservable(),(0,y.ttN)().pipe((0,r.P)(m=>m)).subscribe(()=>this._init())}_init(){return(0,b.mG)(this,void 0,void 0,function*(){const m=location.protocol.includes("https");this._client=t.connect(`ws${m?"s":""}://${location.host}/api/mqtt/`,{username:(0,y.rao)(),password:(0,y.rao)()}),this._client.on("connect",()=>this._connected.next(!0)),this._client.on("message",(g,B)=>{const H=this.findMatchingTopic(g);if(H){let q=B.toString();try{q=JSON.parse(B.toString())}catch(S){}const N=this._topics[H].getValue().filter(([S])=>S.join("/")!==g);this._topics[H].next([...N,[g.split("/"),q]])}})})}query(m){if(!this._client)throw new Error("MQTT connection not setup.");if(!this._connected)throw new Error("MQTT connection is pending.");return this._topics[m]||(this._topics[m]=new o.X([])),this._client.subscribe(m,{},g=>null),this._topics[m].asObservable()}findMatchingTopic(m){const g=Object.keys(this._topics),B=m.split("/");for(const H of g){const q=H.split("/");let N=0;for(;N<B.length&&("+"===q[N]||q[N]===B[N]);N++);if(N===B.length)return H}return""}}return U.\u0275fac=function(m){return new(m||U)},U.\u0275prov=e.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();var p=fe(1292);let v=(()=>{class U extends p.K{ngOnInit(){this.updateTime(),this.interval("time",()=>this.updateTime(),1e3)}updateTime(){const m=new Date;this.hour_angle=(m.getHours()%12+m.getMinutes()/60)/12*360,this.minute_angle=(m.getMinutes()+m.getSeconds()/60)/60*360,this.second_angle=m.getSeconds()/60*360}}return U.\u0275fac=function(){let l;return function(g){return(l||(l=e.n5z(U)))(g||U)}}(),U.\u0275cmp=e.Xpm({type:U,selectors:[["clock"]],features:[e.qOj],decls:5,vars:6,consts:[[1,"rounded-full","h-12","w-12","border-2","border-white","relative"],[1,"hand","absolute","bottom-1/2","left-1/2","bg-white","h-3","w-1","rounded"],[1,"hand","absolute","bottom-1/2","left-1/2","bg-white","h-4","minute"],[1,"hand","absolute","bottom-1/2","left-1/2","bg-white","h-5","w-px"],[1,"absolute","top-1/2","left-1/2","h-2","w-2","transform","-translate-x-1/2","-translate-y-1/2","bg-white","rounded-full"]],template:function(m,g){1&m&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e._UZ(2,"div",2),e._UZ(3,"div",3),e._UZ(4,"div",4),e.qZA()),2&m&&(e.xp6(1),e.Udp("transform","translateX(-50%) rotate("+g.hour_angle+"deg)"),e.xp6(1),e.Udp("transform","translateX(-50%) rotate("+g.minute_angle+"deg)"),e.xp6(1),e.Udp("transform","translateX(-50%) rotate("+g.second_angle+"deg)"))},styles:[".hand[_ngcontent-%COMP%]{transform-origin:50% 100%}.minute[_ngcontent-%COMP%]{width:2px;border-radius:1px}\n/*# sourceMappingURL=clock.component.ts-angular-inline--14.css.map*/"]}),U})();var f=fe(9499),i=fe(6835);function w(U,l){if(1&U&&(e.TgZ(0,"div",12),e.TgZ(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",14),e._uU(4),e.qZA(),e.TgZ(5,"div",13),e._uU(6),e.qZA(),e.TgZ(7,"div",13),e._uU(8),e.qZA(),e.TgZ(9,"div",13),e._uU(10),e.ALo(11,"dateFrom"),e.qZA(),e.TgZ(12,"button",15),e.TgZ(13,"app-icon",10),e._uU(14,"done"),e.qZA(),e.qZA(),e.qZA()),2&U){const m=l.$implicit;e.ekj("bg-red-600",!m.value)("bg-teal-800",m.value),e.xp6(2),e.Oqu(m.mod),e.xp6(2),e.Oqu(m.driver_id),e.xp6(2),e.Oqu(m.ip),e.xp6(2),e.hij(" ",m.value?"Connected":"Disconnected"," "),e.xp6(2),e.Oqu(e.lcZ(11,9,1e3*m.timestamp))}}function E(U,l){if(1&U&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"h2",10),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,w,15,11,"div",11),e.qZA()),2&U){const m=l.$implicit;e.xp6(3),e.AsE(" ",m.display_name||m.name," (",m.id,") "),e.xp6(1),e.Q6J("ngForOf",m.events)}}const T={},O=[{component:(()=>{class U{constructor(m){this._state=m,this.systems=new o.X([]),this._state.connected.pipe((0,r.P)(g=>g)).subscribe(()=>this._state.query("placeos/+/state/+/+/+/+/+/+/+/connected").subscribe(g=>this._processQuery(g)))}get time(){return(0,d.Z)(Date.now())}_processQuery(m){return(0,b.mG)(this,void 0,void 0,function*(){const g=m.map(([q,N])=>Object.assign(Object.assign({},N),{id:`event-${(0,n.Iy)(999999999999)}`,sys_id:q[6],driver_id:q[7],mod:`${q[8]}_${q[9]}`})),B=(0,n.Tw)(g.map(q=>q.sys_id)),H=[];for(const q of B){const N=T[q]||(yield(0,y.hMA)(q).toPromise());H.push(Object.assign(Object.assign({id:q},N),{events:g.filter(S=>S.sys_id===q)})),T[q]=N}this.systems.next(H)})}}return U.\u0275fac=function(m){return new(m||U)(e.Y36(s))},U.\u0275cmp=e.Xpm({type:U,selectors:[["mqtt-dashboard"]],decls:16,vars:11,consts:[[1,"h-full","w-full","bg-white","dark:bg-[#424242]","flex","flex-col"],[1,"w-full","px-4","py-2","bg-secondary","flex","items-center","justify-between","text-white"],[1,"text-2xl"],[1,"flex","items-center","space-x-2"],[1,"text-right","flex","flex-col","items-center","justify-center"],[1,""],[1,"w-full","h-1/2","flex-1","overflow-auto","p-4","space-y-4"],["class","divide-y divide-white/50 border border-white/50",4,"ngFor","ngForOf"],[1,"divide-y","divide-white/50","border","border-white/50"],[1,"bg-[#212121]","text-white","p-2"],[1,"text-xl"],["class","px-2 flex items-center text-white",3,"bg-red-600","bg-teal-800",4,"ngFor","ngForOf"],[1,"px-2","flex","items-center","text-white"],[1,"w-1/6"],[1,"flex-1"],["mat-icon-button",""]],template:function(m,g){1&m&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2",2),e._uU(3,"PlaceOS Alerts"),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"clock"),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.YNc(14,E,5,3,"div",7),e.ALo(15,"async"),e.qZA(),e.qZA()),2&m&&(e.xp6(8),e.Oqu(e.xi3(9,3,g.time,"shortTime")),e.xp6(3),e.Oqu(e.xi3(12,6,g.time,"EEE, MMM d")),e.xp6(3),e.Q6J("ngForOf",e.lcZ(15,9,g.systems)))},directives:[v,ye.sg,Te.lW,f.o],pipes:[ye.uU,ye.Ov,i.R],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{z-index:9999}\n/*# sourceMappingURL=dashboard.component.ts-angular-inline--15.css.map*/"]}),U})(),path:""},{path:"**",redirectTo:""}];let R=(()=>{class U{}return U.\u0275fac=function(m){return new(m||U)},U.\u0275mod=e.oAB({type:U}),U.\u0275inj=e.cJS({imports:[[ye.ez,z.Bz.forChild(O),Te.ot,A.lN,K.LD,Se.u5,_.X]]}),U})()},4418:(pe,de,fe)=>{pe.exports=function A(K,z,_){function b(o,r){if(!z[o]){if(!K[o]){if(y)return y(o,!0);var t=new Error("Cannot find module '"+o+"'");throw t.code="MODULE_NOT_FOUND",t}var e=z[o]={exports:{}};K[o][0].call(e.exports,function(c){return b(K[o][1][c]||c)},e,e.exports,A,K,z,_)}return z[o].exports}for(var y=void 0,d=0;d<_.length;d++)b(_[d]);return b}({1:[function(A,K,z){(function(_,b){(function(){"use strict";const y=A("events").EventEmitter,d=A("./store"),o=A("./topic-alias-recv"),r=A("./topic-alias-send"),n=A("mqtt-packet"),t=A("./default-message-id-provider"),e=A("readable-stream").Writable,c=A("inherits"),s=A("reinterval"),p=A("rfdc/default"),v=A("./validations"),f=A("xtend"),i=A("debug")("mqttjs:client"),w=_?_.nextTick:function(S){setTimeout(S,0)},E=b.setImmediate||function(S){w(S)},T={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},M=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],O={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function l(S,k){let j;k.properties&&(j=k.properties.topicAlias);let Z=k.topic.toString();if(0===Z.length){if(void 0===j)return new Error("Unregistered Topic Alias");if(Z=S.topicAliasSend.getTopicByAlias(j),void 0===Z)return new Error("Unregistered Topic Alias");k.topic=Z}j&&delete k.properties.topicAlias}function m(S,k,j){i("sendPacket :: packet: %O",k),i("sendPacket :: emitting `packetsend`"),S.emit("packetsend",k),i("sendPacket :: writing to stream");const Z=n.writeToStream(k,S.stream,S.options);i("sendPacket :: writeToStream result %s",Z),!Z&&j?(i("sendPacket :: handle events on `drain` once through callback."),S.stream.once("drain",j)):j&&(i("sendPacket :: invoking cb"),j())}function g(S){S&&(i("flush: queue exists? %b",!!S),Object.keys(S).forEach(function(k){"function"==typeof S[k].cb&&(S[k].cb(new Error("Connection closed")),delete S[k])}))}function H(S,k,j,Z){i("storeAndSend :: store packet with cmd %s to outgoingStore",k.cmd);let re,ie=k;if("publish"===ie.cmd&&(ie=p(k),re=l(S,ie),re))return j&&j(re);S.outgoingStore.put(ie,function(W){if(W)return j&&j(W);Z(),m(S,k,j)})}function q(S){i("nop ::",S)}function N(S,k){let j;const Z=this;if(!(this instanceof N))return new N(S,k);for(j in this.options=k||{},T)this.options[j]=void 0===this.options[j]?T[j]:k[j];i("MqttClient :: options.protocol",k.protocol),i("MqttClient :: options.protocolVersion",k.protocolVersion),i("MqttClient :: options.username",k.username),i("MqttClient :: options.keepalive",k.keepalive),i("MqttClient :: options.reconnectPeriod",k.reconnectPeriod),i("MqttClient :: options.rejectUnauthorized",k.rejectUnauthorized),i("MqttClient :: options.topicAliasMaximum",k.topicAliasMaximum),this.options.clientId="string"==typeof k.clientId?k.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),i("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===k.protocolVersion&&k.customHandleAcks?k.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=S,this.messageIdProvider=void 0===this.options.messageIdProvider?new t:this.options.messageIdProvider,this.outgoingStore=k.outgoingStore||new d,this.incomingStore=k.incomingStore||new d,this.queueQoSZero=void 0===k.queueQoSZero||k.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,k.topicAliasMaximum>0&&(k.topicAliasMaximum>65535?i("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new o(k.topicAliasMaximum)),this.on("connect",function(){const ie=this.queue;i("connect :: sending queued packets"),function re(){const Q=ie.shift();i("deliver :: entry %o",Q);let W=null;if(!Q)return void Z._resubscribe();W=Q.packet,i("deliver :: call _sendPacket for %o",W);let te=!0;W.messageId&&0!==W.messageId&&(Z.messageIdProvider.register(W.messageId)||(te=!1)),te?Z._sendPacket(W,function(J){Q.cb&&Q.cb(J),re()}):(i("messageId: %d has already used. The message is skipped and removed.",W.messageId),re())}()}),this.on("close",function(){i("close :: connected set to `false`"),this.connected=!1,i("close :: clearing connackTimer"),clearTimeout(this.connackTimer),i("close :: clearing ping timer"),null!==Z.pingTimer&&(Z.pingTimer.clear(),Z.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),i("close :: calling _setupReconnect"),this._setupReconnect()}),y.call(this),i("MqttClient :: setting up stream"),this._setupStream()}c(N,y),N.prototype._setupStream=function(){const S=this,k=new e,j=n.parser(this.options);let Z=null;const ie=[];function re(){if(ie.length)w(Q);else{const J=Z;Z=null,J()}}function Q(){i("work :: getting next packet in queue");const J=ie.shift();if(J)i("work :: packet pulled from queue"),S._handlePacket(J,re);else{i("work :: no packets in queue");const se=Z;Z=null,i("work :: done flag is %s",!!se),se&&se()}}i("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),i("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),j.on("packet",function(J){i("parser :: on packet push to packets array."),ie.push(J)}),k._write=function(J,se,ne){Z=ne,i("writable stream :: parsing buffer"),j.parse(J),Q()},i("_setupStream :: pipe stream to writable stream"),this.stream.pipe(k),this.stream.on("error",function(J){i("streamErrorHandler :: error",J.message),M.includes(J.code)?(i("streamErrorHandler :: emitting error"),S.emit("error",J)):q(J)}),this.stream.on("close",function(){i("(%s)stream :: on close",S.options.clientId),function(S){S&&(i("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(S).forEach(function(k){S[k].volatile&&"function"==typeof S[k].cb&&(S[k].cb(new Error("Connection closed")),delete S[k])}))}(S.outgoing),i("stream: emit close to MqttClient"),S.emit("close")}),i("_setupStream: sending packet `connect`");const te=Object.create(this.options);if(te.cmd="connect",this.topicAliasRecv&&(te.properties||(te.properties={}),this.topicAliasRecv&&(te.properties.topicAliasMaximum=this.topicAliasRecv.max)),m(this,te),j.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return S.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&m(this,f({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){i("!!connectTimeout hit!! Calling _cleanUp with force `true`"),S._cleanUp(!0)},this.options.connectTimeout)},N.prototype._handlePacket=function(S,k){const j=this.options;if(5===j.protocolVersion&&j.properties&&j.properties.maximumPacketSize&&j.properties.maximumPacketSize<S.length)return this.emit("error",new Error("exceeding packets size "+S.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(i("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",S),S.cmd){case"publish":this._handlePublish(S,k);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(S),k();break;case"pubrel":this._handlePubrel(S,k);break;case"connack":this._handleConnack(S),k();break;case"auth":this._handleAuth(S),k();break;case"pingresp":this._handlePingresp(S),k();break;case"disconnect":this._handleDisconnect(S),k()}},N.prototype._checkDisconnecting=function(S){return this.disconnecting&&(S?S(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},N.prototype.publish=function(S,k,j,Z){i("publish :: message `%s` to topic `%s`",k,S);const ie=this.options;if("function"==typeof j&&(Z=j,j=null),j=f({qos:0,retain:!1,dup:!1},j),this._checkDisconnecting(Z))return this;const Q=this,W=function(){let te=0;if((1===j.qos||2===j.qos)&&(te=Q._nextId(),null===te))return i("No messageId left"),!1;const J={cmd:"publish",topic:S,payload:k,qos:j.qos,retain:j.retain,messageId:te,dup:j.dup};switch(5===ie.protocolVersion&&(J.properties=j.properties),i("publish :: qos",j.qos),j.qos){case 1:case 2:Q.outgoing[J.messageId]={volatile:!1,cb:Z||q},i("MqttClient:publish: packet cmd: %s",J.cmd),Q._sendPacket(J,void 0,j.cbStorePut);break;default:i("MqttClient:publish: packet cmd: %s",J.cmd),Q._sendPacket(J,Z,j.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!W())&&this._storeProcessingQueue.push({invoke:W,cbStorePut:j.cbStorePut,callback:Z}),this},N.prototype.subscribe=function(){const S=this,k=new Array(arguments.length);for(let ne=0;ne<arguments.length;ne++)k[ne]=arguments[ne];const j=[];let Z=k.shift();const ie=Z.resubscribe;let re=k.pop()||q,Q=k.pop();const W=this.options.protocolVersion;delete Z.resubscribe,"string"==typeof Z&&(Z=[Z]),"function"!=typeof re&&(Q=re,re=q);const te=v.validateTopics(Z);if(null!==te)return E(re,new Error("Invalid topic "+te)),this;if(this._checkDisconnecting(re))return i("subscribe: discconecting true"),this;const J={qos:0};if(5===W&&(J.nl=!1,J.rap=!1,J.rh=0),Q=f(J,Q),Array.isArray(Z)?Z.forEach(function(ne){if(i("subscribe: array topic %s",ne),!Object.prototype.hasOwnProperty.call(S._resubscribeTopics,ne)||S._resubscribeTopics[ne].qos<Q.qos||ie){const V={topic:ne,qos:Q.qos};5===W&&(V.nl=Q.nl,V.rap=Q.rap,V.rh=Q.rh,V.properties=Q.properties),i("subscribe: pushing topic `%s` and qos `%s` to subs list",V.topic,V.qos),j.push(V)}}):Object.keys(Z).forEach(function(ne){if(i("subscribe: object topic %s",ne),!Object.prototype.hasOwnProperty.call(S._resubscribeTopics,ne)||S._resubscribeTopics[ne].qos<Z[ne].qos||ie){const V={topic:ne,qos:Z[ne].qos};5===W&&(V.nl=Z[ne].nl,V.rap=Z[ne].rap,V.rh=Z[ne].rh,V.properties=Q.properties),i("subscribe: pushing `%s` to subs list",V),j.push(V)}}),!j.length)return re(null,[]),this;const se=function(){const ne=S._nextId();if(null===ne)return i("No messageId left"),!1;const V={cmd:"subscribe",subscriptions:j,qos:1,retain:!1,dup:!1,messageId:ne};if(Q.properties&&(V.properties=Q.properties),S.options.resubscribe){i("subscribe :: resubscribe true");const L=[];j.forEach(function(Y){if(S.options.reconnectPeriod>0){const oe={qos:Y.qos};5===W&&(oe.nl=Y.nl||!1,oe.rap=Y.rap||!1,oe.rh=Y.rh||0,oe.properties=Y.properties),S._resubscribeTopics[Y.topic]=oe,L.push(Y.topic)}}),S.messageIdToTopic[V.messageId]=L}return S.outgoing[V.messageId]={volatile:!0,cb:function(L,Y){if(!L){const oe=Y.granted;for(let P=0;P<oe.length;P+=1)j[P].qos=oe[P]}re(L,j)}},i("subscribe :: call _sendPacket"),S._sendPacket(V),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!se())&&this._storeProcessingQueue.push({invoke:se,callback:re}),this},N.prototype.unsubscribe=function(){const S=this,k=new Array(arguments.length);for(let W=0;W<arguments.length;W++)k[W]=arguments[W];let j=k.shift(),Z=k.pop()||q,ie=k.pop();"string"==typeof j&&(j=[j]),"function"!=typeof Z&&(ie=Z,Z=q);const re=v.validateTopics(j);if(null!==re)return E(Z,new Error("Invalid topic "+re)),this;if(S._checkDisconnecting(Z))return this;const Q=function(){const W=S._nextId();if(null===W)return i("No messageId left"),!1;const te={cmd:"unsubscribe",qos:1,messageId:W};return"string"==typeof j?te.unsubscriptions=[j]:Array.isArray(j)&&(te.unsubscriptions=j),S.options.resubscribe&&te.unsubscriptions.forEach(function(J){delete S._resubscribeTopics[J]}),"object"==typeof ie&&ie.properties&&(te.properties=ie.properties),S.outgoing[te.messageId]={volatile:!0,cb:Z},i("unsubscribe: call _sendPacket"),S._sendPacket(te),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Q())&&this._storeProcessingQueue.push({invoke:Q,callback:Z}),this},N.prototype.end=function(S,k,j){const Z=this;function ie(){i("end :: closeStores: closing incoming and outgoing stores"),Z.disconnected=!0,Z.incomingStore.close(function(Q){Z.outgoingStore.close(function(W){if(i("end :: closeStores: emitting end"),Z.emit("end"),j){const te=Q||W;i("end :: closeStores: invoking callback with args"),j(te)}})}),Z._deferredReconnect&&Z._deferredReconnect()}function re(){i("end :: (%s) :: finish :: calling _cleanUp with force %s",Z.options.clientId,S),Z._cleanUp(S,()=>{i("end :: finish :: calling process.nextTick on closeStores"),w(ie.bind(Z))},k)}return i("end :: (%s)",this.options.clientId),(null==S||"boolean"!=typeof S)&&(j=k||q,k=S,S=!1,"object"!=typeof k&&(j=k,k=null,"function"!=typeof j&&(j=q))),"object"!=typeof k&&(j=k,k=null),i("end :: cb? %s",!!j),j=j||q,this.disconnecting?(j(),this):(this._clearReconnect(),this.disconnecting=!0,!S&&Object.keys(this.outgoing).length>0?(i("end :: (%s) :: calling finish in 10ms once outgoing is empty",Z.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,re,10))):(i("end :: (%s) :: immediately calling finish",Z.options.clientId),re()),this)},N.prototype.removeOutgoingMessage=function(S){const k=this.outgoing[S]?this.outgoing[S].cb:null;return delete this.outgoing[S],this.outgoingStore.del({messageId:S},function(){k(new Error("Message removed"))}),this},N.prototype.reconnect=function(S){i("client reconnect");const k=this,j=function(){S?(k.options.incomingStore=S.incomingStore,k.options.outgoingStore=S.outgoingStore):(k.options.incomingStore=null,k.options.outgoingStore=null),k.incomingStore=k.options.incomingStore||new d,k.outgoingStore=k.options.outgoingStore||new d,k.disconnecting=!1,k.disconnected=!1,k._deferredReconnect=null,k._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=j:j(),this},N.prototype._reconnect=function(){i("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),i("client already connected. disconnecting first.")):(i("_reconnect: calling _setupStream"),this._setupStream())},N.prototype._setupReconnect=function(){const S=this;!S.disconnecting&&!S.reconnectTimer&&S.options.reconnectPeriod>0?(this.reconnecting||(i("_setupReconnect :: emit `offline` state"),this.emit("offline"),i("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),i("_setupReconnect :: setting reconnectTimer for %d ms",S.options.reconnectPeriod),S.reconnectTimer=setInterval(function(){i("reconnectTimer :: reconnect triggered!"),S._reconnect()},S.options.reconnectPeriod)):i("_setupReconnect :: doing nothing...")},N.prototype._clearReconnect=function(){i("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},N.prototype._cleanUp=function(S,k){const j=arguments[2];if(k&&(i("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",k)),i("_cleanUp :: forced? %s",S),S)0===this.options.reconnectPeriod&&this.options.clean&&g(this.outgoing),i("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const Z=f({cmd:"disconnect"},j);i("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(Z,E.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(i("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(i("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),k&&!this.connected&&(i("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",k),k())},N.prototype._sendPacket=function(S,k,j){i("_sendPacket :: (%s) ::  start",this.options.clientId),j=j||q,k=k||q;const Z=function(S,k){if(5===S.options.protocolVersion&&"publish"===k.cmd){let j;k.properties&&(j=k.properties.topicAlias);const Z=k.topic.toString();if(S.topicAliasSend)if(j){if(0!==Z.length&&(i("applyTopicAlias :: register topic: %s - alias: %d",Z,j),!S.topicAliasSend.put(Z,j)))return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",Z,j),new Error("Sending Topic Alias out of range")}else 0!==Z.length&&(S.options.autoAssignTopicAlias?(j=S.topicAliasSend.getAliasByTopic(Z),j?(k.topic="",k.properties=Ee(_e({},k.properties),{topicAlias:j}),i("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",Z,j)):(j=S.topicAliasSend.getLruAlias(),S.topicAliasSend.put(Z,j),k.properties=Ee(_e({},k.properties),{topicAlias:j}),i("applyTopicAlias :: auto assign topic: %s - alias: %d",Z,j))):S.options.autoUseTopicAlias&&(j=S.topicAliasSend.getAliasByTopic(Z),j&&(k.topic="",k.properties=Ee(_e({},k.properties),{topicAlias:j}),i("applyTopicAlias :: auto use topic: %s - alias: %d",Z,j))));else if(j)return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",Z,j),new Error("Sending Topic Alias out of range")}}(this,S);if(Z)k(Z);else{if(!this.connected)return"auth"===S.cmd?(this._shiftPingInterval(),void m(this,S,k)):(i("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(S,k,j));switch(this._shiftPingInterval(),S.cmd){case"publish":break;case"pubrel":return void H(this,S,k,j);default:return void m(this,S,k)}switch(S.qos){case 2:case 1:H(this,S,k,j);break;default:m(this,S,k)}i("_sendPacket :: (%s) ::  end",this.options.clientId)}},N.prototype._storePacket=function(S,k,j){i("_storePacket :: packet: %o",S),i("_storePacket :: cb? %s",!!k),j=j||q;let Z=S;if("publish"===Z.cmd){Z=p(S);const ie=l(this,Z);if(ie)return k&&k(ie)}0===(Z.qos||0)&&this.queueQoSZero||"publish"!==Z.cmd?this.queue.push({packet:Z,cb:k}):Z.qos>0?(k=this.outgoing[Z.messageId]?this.outgoing[Z.messageId].cb:null,this.outgoingStore.put(Z,function(ie){if(ie)return k&&k(ie);j()})):k&&k(new Error("No connection to broker"))},N.prototype._setupPingTimer=function(){i("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const S=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=s(function(){S._checkPing()},1e3*this.options.keepalive))},N.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},N.prototype._checkPing=function(){i("_checkPing :: checking ping..."),this.pingResp?(i("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(i("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},N.prototype._handlePingresp=function(){this.pingResp=!0},N.prototype._handleConnack=function(S){i("_handleConnack");const k=this.options,Z=5===k.protocolVersion?S.reasonCode:S.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,S.properties){if(S.properties.topicAliasMaximum){if(S.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));S.properties.topicAliasMaximum>0&&(this.topicAliasSend=new r(S.properties.topicAliasMaximum))}S.properties.serverKeepAlive&&k.keepalive&&(k.keepalive=S.properties.serverKeepAlive,this._shiftPingInterval()),S.properties.maximumPacketSize&&(k.properties||(k.properties={}),k.properties.maximumPacketSize=S.properties.maximumPacketSize)}if(0===Z)this.reconnecting=!1,this._onConnect(S);else if(Z>0){const ie=new Error("Connection refused: "+O[Z]);ie.code=Z,this.emit("error",ie)}},N.prototype._handleAuth=function(S){const j=this.options.protocolVersion,Z=5===j?S.reasonCode:S.returnCode;if(5!==j){const re=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+j);return re.code=Z,void this.emit("error",re)}const ie=this;this.handleAuth(S,function(re,Q){if(re)ie.emit("error",re);else if(24===Z)ie.reconnecting=!1,ie._sendPacket(Q);else{const W=new Error("Connection refused: "+O[Z]);re.code=Z,ie.emit("error",W)}})},N.prototype.handleAuth=function(S,k){k()},N.prototype._handlePublish=function(S,k){i("_handlePublish: packet %o",S),k=void 0!==k?k:q;let j=S.topic.toString();const Z=S.payload,ie=S.qos,re=S.messageId,Q=this,W=this.options,te=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let J;if(S.properties&&(J=S.properties.topicAlias),void 0!==J)if(0===j.length){if(!(J>0&&J<=65535))return i("_handlePublish :: topic alias out of range. alias: %d",J),void this.emit("error",new Error("Received Topic Alias is out of range"));{const se=this.topicAliasRecv.getTopicByAlias(J);if(!se)return i("_handlePublish :: unregistered topic alias. alias: %d",J),void this.emit("error",new Error("Received unregistered Topic Alias"));j=se,i("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",j,J)}}else{if(!this.topicAliasRecv.put(j,J))return i("_handlePublish :: topic alias out of range. alias: %d",J),void this.emit("error",new Error("Received Topic Alias is out of range"));i("_handlePublish :: registered topic: %s - alias: %d",j,J)}}switch(i("_handlePublish: qos %d",ie),ie){case 2:W.customHandleAcks(j,Z,S,function(J,se){return J instanceof Error||(se=J,J=null),J?Q.emit("error",J):-1===te.indexOf(se)?Q.emit("error",new Error("Wrong reason code for pubrec")):void(se?Q._sendPacket({cmd:"pubrec",messageId:re,reasonCode:se},k):Q.incomingStore.put(S,function(){Q._sendPacket({cmd:"pubrec",messageId:re},k)}))});break;case 1:W.customHandleAcks(j,Z,S,function(J,se){return J instanceof Error||(se=J,J=null),J?Q.emit("error",J):-1===te.indexOf(se)?Q.emit("error",new Error("Wrong reason code for puback")):(se||Q.emit("message",j,Z,S),void Q.handleMessage(S,function(ne){if(ne)return k&&k(ne);Q._sendPacket({cmd:"puback",messageId:re,reasonCode:se},k)}))});break;case 0:this.emit("message",j,Z,S),this.handleMessage(S,k);break;default:i("_handlePublish: unknown QoS. Doing nothing.")}},N.prototype.handleMessage=function(S,k){k()},N.prototype._handleAck=function(S){const k=S.messageId,j=S.cmd;let Z=null;const ie=this.outgoing[k]?this.outgoing[k].cb:null,re=this;let Q;if(ie){switch(i("_handleAck :: packet type",j),j){case"pubcomp":case"puback":{const W=S.reasonCode;W&&W>0&&16!==W&&(Q=new Error("Publish error: "+O[W]),Q.code=W,ie(Q,S)),delete this.outgoing[k],this.outgoingStore.del(S,ie),this.messageIdProvider.deallocate(k),this._invokeStoreProcessingQueue();break}case"pubrec":{Z={cmd:"pubrel",qos:2,messageId:k};const W=S.reasonCode;W&&W>0&&16!==W?(Q=new Error("Publish error: "+O[W]),Q.code=W,ie(Q,S)):this._sendPacket(Z);break}case"suback":delete this.outgoing[k],this.messageIdProvider.deallocate(k);for(let W=0;W<S.granted.length;W++)if(0!=(128&S.granted[W])){const te=this.messageIdToTopic[k];te&&te.forEach(function(J){delete re._resubscribeTopics[J]})}this._invokeStoreProcessingQueue(),ie(null,S);break;case"unsuback":delete this.outgoing[k],this.messageIdProvider.deallocate(k),this._invokeStoreProcessingQueue(),ie(null);break;default:re.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else i("_handleAck :: Server sent an ack in error. Ignoring.")},N.prototype._handlePubrel=function(S,k){i("handling pubrel packet"),k=void 0!==k?k:q;const Z=this,ie={cmd:"pubcomp",messageId:S.messageId};Z.incomingStore.get(S,function(re,Q){re?Z._sendPacket(ie,k):(Z.emit("message",Q.topic,Q.payload,Q),Z.handleMessage(Q,function(W){if(W)return k(W);Z.incomingStore.del(Q,q),Z._sendPacket(ie,k)}))})},N.prototype._handleDisconnect=function(S){this.emit("disconnect",S)},N.prototype._nextId=function(){return this.messageIdProvider.allocate()},N.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},N.prototype._resubscribe=function(){i("_resubscribe");const S=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&S.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){i("_resubscribe: protocolVersion 5");for(let k=0;k<S.length;k++){const j={};j[S[k]]=this._resubscribeTopics[S[k]],j.resubscribe=!0,this.subscribe(j,{properties:j[S[k]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},N.prototype._onConnect=function(S){if(this.disconnected)return void this.emit("connect",S);const k=this;this.connackPacket=S,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function j(){let Z=k.outgoingStore.createStream();function ie(){k._storeProcessing=!1,k._packetIdsDuringStoreProcessing={}}function re(){Z.destroy(),Z=null,k._flushStoreProcessingQueue(),ie()}k.once("close",re),Z.on("error",function(W){ie(),k._flushStoreProcessingQueue(),k.removeListener("close",re),k.emit("error",W)}),Z.on("end",function(){let W=!0;for(const te in k._packetIdsDuringStoreProcessing)if(!k._packetIdsDuringStoreProcessing[te]){W=!1;break}W?(ie(),k.removeListener("close",re),k._invokeAllStoreProcessingQueue(),k.emit("connect",S)):j()}),function Q(){if(!Z)return;k._storeProcessing=!0;const W=Z.read(1);let te;W?k._packetIdsDuringStoreProcessing[W.messageId]?Q():k.disconnecting||k.reconnectTimer?Z.destroy&&Z.destroy():(te=k.outgoing[W.messageId]?k.outgoing[W.messageId].cb:null,k.outgoing[W.messageId]={volatile:!1,cb:function(J,se){te&&te(J,se),Q()}},k._packetIdsDuringStoreProcessing[W.messageId]=!0,k.messageIdProvider.register(W.messageId)?k._sendPacket(W):i("messageId: %d has already used.",W.messageId)):Z.once("readable",Q)}()}()},N.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const S=this._storeProcessingQueue[0];if(S&&S.invoke())return this._storeProcessingQueue.shift(),!0}return!1},N.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},N.prototype._flushStoreProcessingQueue=function(){for(const S of this._storeProcessingQueue)S.cbStorePut&&S.cbStorePut(new Error("Connection closed")),S.callback&&S.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},K.exports=N}).call(this)}).call(this,A("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(A,K,z){(function(_){(function(){"use strict";const b=A("readable-stream").Transform,y=A("duplexify");let d,o,r,n=!1;K.exports=function(v,f){if(f.hostname=f.hostname||f.host,!f.hostname)throw new Error("Could not determine host. Specify host manually.");const i="MQIsdp"===f.protocolId&&3===f.protocolVersion?"mqttv3.1":"mqtt";!function(v){v.hostname||(v.hostname="localhost"),v.path||(v.path="/"),v.wsOptions||(v.wsOptions={})}(f);const w=function(v,f){const i="alis"===v.protocol?"wss":"ws";let w=i+"://"+v.hostname+v.path;return v.port&&80!==v.port&&443!==v.port&&(w=i+"://"+v.hostname+":"+v.port+v.path),"function"==typeof v.transformWsUrl&&(w=v.transformWsUrl(w,v,f)),w}(f,v);return d=f.my,d.connectSocket({url:w,protocols:i}),o=function(){const v=new b;return v._write=function(f,i,w){d.sendSocketMessage({data:f.buffer,success:function(){w()},fail:function(){w(new Error)}})},v._flush=function(i){d.closeSocket({success:function(){i()}})},v}(),r=y.obj(),n||(n=!0,d.onSocketOpen(function(){r.setReadable(o),r.setWritable(o),r.emit("connect")}),d.onSocketMessage(function(v){if("string"==typeof v.data){const f=_.from(v.data,"base64");o.push(f)}else{const f=new FileReader;f.addEventListener("load",function(){let i=f.result;i=i instanceof ArrayBuffer?_.from(i):_.from(i,"utf8"),o.push(i)}),f.readAsArrayBuffer(v.data)}}),d.onSocketClose(function(){r.end(),r.destroy()}),d.onSocketError(function(v){r.destroy(v)})),r}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(A,K,z){"use strict";const _=A("net"),b=A("debug")("mqttjs:tcp");K.exports=function(d,o){o.port=o.port||1883,o.hostname=o.hostname||o.host||"localhost";const r=o.port,n=o.hostname;return b("port %d and host %s",r,n),_.createConnection(r,n)}},{debug:18,net:16}],4:[function(A,K,z){"use strict";const _=A("tls"),b=A("net"),y=A("debug")("mqttjs:tls");K.exports=function(o,r){r.port=r.port||8883,r.host=r.hostname||r.host||"localhost",0===b.isIP(r.host)&&(r.servername=r.host),r.rejectUnauthorized=!1!==r.rejectUnauthorized,delete r.path,y("port %d host %s rejectUnauthorized %b",r.port,r.host,r.rejectUnauthorized);const n=_.connect(r);function t(e){r.rejectUnauthorized&&o.emit("error",e),n.end()}return n.on("secureConnect",function(){r.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",t)}),n.on("error",t),n}},{debug:18,net:16,tls:16}],5:[function(A,K,z){(function(_,b){(function(){"use strict";const y=A("ws"),d=A("debug")("mqttjs:ws"),o=A("duplexify"),r=A("readable-stream").Transform,n=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],t=void 0!==_&&"browser"===_.title||"function"==typeof fe;function e(w,E){let T=w.protocol+"://"+w.hostname+":"+w.port+w.path;return"function"==typeof w.transformWsUrl&&(T=w.transformWsUrl(T,w,E)),T}function c(w){const E=w;return w.hostname||(E.hostname="localhost"),w.port||(E.port="wss"===w.protocol?443:80),w.path||(E.path="/"),w.wsOptions||(E.wsOptions={}),!t&&"wss"===w.protocol&&n.forEach(function(T){Object.prototype.hasOwnProperty.call(w,T)&&!Object.prototype.hasOwnProperty.call(w.wsOptions,T)&&(E.wsOptions[T]=w[T])}),E}K.exports=t?function(w,E){let T;d("browserStreamBuilder");const O=function(w){const E=c(w);if(E.hostname||(E.hostname=E.host),!E.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");const T=new URL(document.URL);E.hostname=T.hostname,E.port||(E.port=T.port)}return void 0===E.objectMode&&(E.objectMode=!(!0===E.binary||void 0===E.binary)),E}(E).browserBufferSize||524288,R=E.browserBufferTimeout||1e3,U=!E.objectMode,l=function(w,E){const T="MQIsdp"===E.protocolId&&3===E.protocolVersion?"mqttv3.1":"mqtt",M=e(E,w),O=new WebSocket(M,[T]);return O.binaryType="arraybuffer",O}(w,E),m=function(ie,re,Q){const W=new r({objectModeMode:ie.objectMode});return W._write=re,W._flush=Q,W}(E,function j(ie,re,Q){l.bufferedAmount>O&&setTimeout(j,R,ie,re,Q),U&&"string"==typeof ie&&(ie=b.from(ie,"utf8"));try{l.send(ie)}catch(W){return Q(W)}Q()},function(ie){l.close(),ie()});E.objectMode||(m._writev=k),m.on("close",()=>{l.close()});const g=void 0!==l.addEventListener;function H(){T.setReadable(m),T.setWritable(m),T.emit("connect")}function q(){T.end(),T.destroy()}function N(ie){T.destroy(ie)}function S(ie){let re=ie.data;re=re instanceof ArrayBuffer?b.from(re):b.from(re,"utf8"),m.push(re)}function k(ie,re){const Q=new Array(ie.length);for(let W=0;W<ie.length;W++)Q[W]="string"==typeof ie[W].chunk?b.from(ie[W],"utf8"):ie[W].chunk;this._write(b.concat(Q),"binary",re)}return l.readyState===l.OPEN?T=m:(T=T=o(void 0,void 0,E),E.objectMode||(T._writev=k),g?l.addEventListener("open",H):l.onopen=H),T.socket=l,g?(l.addEventListener("close",q),l.addEventListener("error",N),l.addEventListener("message",S)):(l.onclose=q,l.onerror=N,l.onmessage=S),T}:function(w,E){d("streamBuilder");const T=c(E),M=e(T,w),O=function(w,E,T){d("createWebSocket"),d("protocol: "+T.protocolId+" "+T.protocolVersion);const M="MQIsdp"===T.protocolId&&3===T.protocolVersion?"mqttv3.1":"mqtt";return d("creating new Websocket for url: "+E+" and protocol: "+M),new y(E,[M],T.wsOptions)}(0,M,T),R=y.createWebSocketStream(O,T.wsOptions);return R.url=M,O.on("close",()=>{R.destroy()}),R}}).call(this)}).call(this,A("_process"),A("buffer").Buffer)},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(A,K,z){(function(_){(function(){"use strict";const b=A("readable-stream").Transform,y=A("duplexify");let d,o,r;K.exports=function(p,v){if(v.hostname=v.hostname||v.host,!v.hostname)throw new Error("Could not determine host. Specify host manually.");const f="MQIsdp"===v.protocolId&&3===v.protocolVersion?"mqttv3.1":"mqtt";!function(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}(v);const i=function(p,v){const f="wxs"===p.protocol?"wss":"ws";let i=f+"://"+p.hostname+p.path;return p.port&&80!==p.port&&443!==p.port&&(i=f+"://"+p.hostname+":"+p.port+p.path),"function"==typeof p.transformWsUrl&&(i=p.transformWsUrl(i,p,v)),i}(v,p);d=wx.connectSocket({url:i,protocols:[f]}),o=function(){const p=new b;return p._write=function(v,f,i){d.send({data:v.buffer,success:function(){i()},fail:function(w){i(new Error(w))}})},p._flush=function(f){d.close({success:function(){f()}})},p}(),r=y.obj(),r._destroy=function(E,T){d.close({success:function(){T&&T(E)}})};const w=r.destroy;return r.destroy=function(){r.destroy=w;const E=this;setTimeout(function(){d.close({fail:function(){E._destroy(new Error)}})},0)}.bind(r),d.onOpen(function(){r.setReadable(o),r.setWritable(o),r.emit("connect")}),d.onMessage(function(p){let v=p.data;v=v instanceof ArrayBuffer?_.from(v):_.from(v,"utf8"),o.push(v)}),d.onClose(function(){r.end(),r.destroy()}),d.onError(function(p){r.destroy(new Error(p.errMsg))}),r}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(A,K,z){"use strict";function _(){if(!(this instanceof _))return new _;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}_.prototype.allocate=function(){const b=this.nextId++;return 65536===this.nextId&&(this.nextId=1),b},_.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},_.prototype.register=function(b){return!0},_.prototype.deallocate=function(b){},_.prototype.clear=function(){},K.exports=_},{}],8:[function(A,K,z){"use strict";const _=A("xtend"),b=A("readable-stream").Readable,y={objectMode:!0},d={clean:!0};function o(r){if(!(this instanceof o))return new o(r);this.options=r||{},this.options=_(d,r),this._inflights=new Map}o.prototype.put=function(r,n){return this._inflights.set(r.messageId,r),n&&n(),this},o.prototype.createStream=function(){const r=new b(y),n=[];let t=!1,e=0;return this._inflights.forEach(function(c,s){n.push(c)}),r._read=function(){this.push(!t&&e<n.length?n[e++]:null)},r.destroy=function(){if(t)return;const c=this;t=!0,setTimeout(function(){c.emit("close")},0)},r},o.prototype.del=function(r,n){return(r=this._inflights.get(r.messageId))?(this._inflights.delete(r.messageId),n(null,r)):n&&n(new Error("missing packet")),this},o.prototype.get=function(r,n){return(r=this._inflights.get(r.messageId))?n(null,r):n&&n(new Error("missing packet")),this},o.prototype.close=function(r){this.options.clean&&(this._inflights=null),r&&r()},K.exports=o},{"readable-stream":69,xtend:81}],9:[function(A,K,z){"use strict";function _(b){if(!(this instanceof _))return new _(b);this.aliasToTopic={},this.max=b}_.prototype.put=function(b,y){return!(0===y||y>this.max||(this.aliasToTopic[y]=b,this.length=Object.keys(this.aliasToTopic).length,0))},_.prototype.getTopicByAlias=function(b){return this.aliasToTopic[b]},_.prototype.clear=function(){this.aliasToTopic={}},K.exports=_},{}],10:[function(A,K,z){"use strict";const _=A("lru-cache"),b=A("number-allocator").NumberAllocator;function y(d){if(!(this instanceof y))return new y(d);d>0&&(this.aliasToTopic=new _({max:d}),this.topicToAlias={},this.numberAllocator=new b(1,d),this.max=d,this.length=0)}y.prototype.put=function(d,o){if(0===o||o>this.max)return!1;const r=this.aliasToTopic.get(o);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(o,d),this.topicToAlias[d]=o,this.numberAllocator.use(o),this.length=this.aliasToTopic.length,!0},y.prototype.getTopicByAlias=function(d){return this.aliasToTopic.get(d)},y.prototype.getAliasByTopic=function(d){const o=this.topicToAlias[d];return void 0!==o&&this.aliasToTopic.get(o),o},y.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},y.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},K.exports=y},{"lru-cache":37,"number-allocator":46}],11:[function(A,K,z){"use strict";function _(y){const d=y.split("/");for(let o=0;o<d.length;o++)if("+"!==d[o]){if("#"===d[o])return o===d.length-1;if(-1!==d[o].indexOf("+")||-1!==d[o].indexOf("#"))return!1}return!0}K.exports={validateTopics:function(y){if(0===y.length)return"empty_topic_list";for(let d=0;d<y.length;d++)if(!_(y[d]))return y[d];return null}}},{}],12:[function(A,K,z){(function(_){(function(){"use strict";const b=A("../client"),y=A("../store"),d=A("url"),o=A("xtend"),r=A("debug")("mqttjs"),n={};function e(c,s){if(r("connecting to an MQTT broker..."),"object"==typeof c&&!s&&(s=c,c=null),s=s||{},c){const f=d.parse(c,!0);if(null!=f.port&&(f.port=Number(f.port)),null===(s=o(f,s)).protocol)throw new Error("Missing protocol");s.protocol=s.protocol.replace(/:$/,"")}if(function(c){let s;c.auth&&(s=c.auth.match(/^(.+):(.+)$/),s?(c.username=s[1],c.password=s[2]):c.username=c.auth)}(s),s.query&&"string"==typeof s.query.clientId&&(s.clientId=s.query.clientId),s.cert&&s.key){if(!s.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(s.protocol))switch(s.protocol){case"mqtt":s.protocol="mqtts";break;case"ws":s.protocol="wss";break;case"wx":s.protocol="wxs";break;case"ali":s.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+s.protocol+'"!')}}if(!n[s.protocol]){const f=-1!==["mqtts","wss"].indexOf(s.protocol);s.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(i,w){return(!f||w%2!=0)&&"function"==typeof n[i]})[0]}if(!1===s.clean&&!s.clientId)throw new Error("Missing clientId for unclean clients");s.protocol&&(s.defaultProtocol=s.protocol);const v=new b(function(f){return s.servers&&((!f._reconnectCount||f._reconnectCount===s.servers.length)&&(f._reconnectCount=0),s.host=s.servers[f._reconnectCount].host,s.port=s.servers[f._reconnectCount].port,s.protocol=s.servers[f._reconnectCount].protocol?s.servers[f._reconnectCount].protocol:s.defaultProtocol,s.hostname=s.host,f._reconnectCount++),r("calling streambuilder for",s.protocol),n[s.protocol](f,s)},s);return v.on("error",function(){}),v}void 0!==_&&"browser"!==_.title||"function"!=typeof fe?(n.mqtt=A("./tcp"),n.tcp=A("./tcp"),n.ssl=A("./tls"),n.tls=A("./tls"),n.mqtts=A("./tls")):(n.wx=A("./wx"),n.wxs=A("./wx"),n.ali=A("./ali"),n.alis=A("./ali")),n.ws=A("./ws"),n.wss=A("./ws"),K.exports=e,K.exports.connect=e,K.exports.MqttClient=b,K.exports.Store=y}).call(this)}).call(this,A("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(A,K,z){"use strict";z.byteLength=function(f){var i=n(f),E=i[1];return 3*(i[0]+E)/4-E},z.toByteArray=function(f){var i,U,w=n(f),E=w[0],T=w[1],M=new y(function(f,i,w){return 3*(i+w)/4-w}(0,E,T)),O=0,R=T>0?E-4:E;for(U=0;U<R;U+=4)i=b[f.charCodeAt(U)]<<18|b[f.charCodeAt(U+1)]<<12|b[f.charCodeAt(U+2)]<<6|b[f.charCodeAt(U+3)],M[O++]=i>>16&255,M[O++]=i>>8&255,M[O++]=255&i;return 2===T&&(i=b[f.charCodeAt(U)]<<2|b[f.charCodeAt(U+1)]>>4,M[O++]=255&i),1===T&&(i=b[f.charCodeAt(U)]<<10|b[f.charCodeAt(U+1)]<<4|b[f.charCodeAt(U+2)]>>2,M[O++]=i>>8&255,M[O++]=255&i),M},z.fromByteArray=function(f){for(var i,w=f.length,E=w%3,T=[],M=16383,O=0,R=w-E;O<R;O+=M)T.push(p(f,O,O+M>R?R:O+M));return 1===E?T.push(_[(i=f[w-1])>>2]+_[i<<4&63]+"=="):2===E&&T.push(_[(i=(f[w-2]<<8)+f[w-1])>>10]+_[i>>4&63]+_[i<<2&63]+"="),T.join("")};for(var _=[],b=[],y="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,r=d.length;o<r;++o)_[o]=d[o],b[d.charCodeAt(o)]=o;function n(f){var i=f.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=f.indexOf("=");return-1===w&&(w=i),[w,w===i?0:4-w%4]}function s(f){return _[f>>18&63]+_[f>>12&63]+_[f>>6&63]+_[63&f]}function p(f,i,w){for(var T=[],M=i;M<w;M+=3)T.push(s((f[M]<<16&16711680)+(f[M+1]<<8&65280)+(255&f[M+2])));return T.join("")}b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63},{}],14:[function(A,K,z){"use strict";const{Buffer:_}=A("buffer"),b=Symbol.for("BufferList");function y(d){if(!(this instanceof y))return new y(d);y._init.call(this,d)}y._init=function(o){Object.defineProperty(this,b,{value:!0}),this._bufs=[],this.length=0,o&&this.append(o)},y.prototype._new=function(o){return new y(o)},y.prototype._offset=function(o){if(0===o)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){const t=r+this._bufs[n].length;if(o<t||n===this._bufs.length-1)return[n,o-r];r=t}},y.prototype._reverseOffset=function(d){const o=d[0];let r=d[1];for(let n=0;n<o;n++)r+=this._bufs[n].length;return r},y.prototype.get=function(o){if(o>this.length||o<0)return;const r=this._offset(o);return this._bufs[r[0]][r[1]]},y.prototype.slice=function(o,r){return"number"==typeof o&&o<0&&(o+=this.length),"number"==typeof r&&r<0&&(r+=this.length),this.copy(null,0,o,r)},y.prototype.copy=function(o,r,n,t){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof t||t>this.length)&&(t=this.length),n>=this.length||t<=0)return o||_.alloc(0);const e=!!o,c=this._offset(n),s=t-n;let p=s,v=e&&r||0,f=c[1];if(0===n&&t===this.length){if(!e)return 1===this._bufs.length?this._bufs[0]:_.concat(this._bufs,this.length);for(let i=0;i<this._bufs.length;i++)this._bufs[i].copy(o,v),v+=this._bufs[i].length;return o}if(p<=this._bufs[c[0]].length-f)return e?this._bufs[c[0]].copy(o,r,f,f+p):this._bufs[c[0]].slice(f,f+p);e||(o=_.allocUnsafe(s));for(let i=c[0];i<this._bufs.length;i++){const w=this._bufs[i].length-f;if(!(p>w)){this._bufs[i].copy(o,v,f,f+p),v+=w;break}this._bufs[i].copy(o,v,f),v+=w,p-=w,f&&(f=0)}return o.length>v?o.slice(0,v):o},y.prototype.shallowSlice=function(o,r){if((o=o||0)<0&&(o+=this.length),(r="number"!=typeof r?this.length:r)<0&&(r+=this.length),o===r)return this._new();const n=this._offset(o),t=this._offset(r),e=this._bufs.slice(n[0],t[0]+1);return 0===t[1]?e.pop():e[e.length-1]=e[e.length-1].slice(0,t[1]),0!==n[1]&&(e[0]=e[0].slice(n[1])),this._new(e)},y.prototype.toString=function(o,r,n){return this.slice(r,n).toString(o)},y.prototype.consume=function(o){if(o=Math.trunc(o),Number.isNaN(o)||o<=0)return this;for(;this._bufs.length;){if(!(o>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(o),this.length-=o;break}o-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},y.prototype.duplicate=function(){const o=this._new();for(let r=0;r<this._bufs.length;r++)o.append(this._bufs[r]);return o},y.prototype.append=function(o){if(null==o)return this;if(o.buffer)this._appendBuffer(_.from(o.buffer,o.byteOffset,o.byteLength));else if(Array.isArray(o))for(let r=0;r<o.length;r++)this.append(o[r]);else if(this._isBufferList(o))for(let r=0;r<o._bufs.length;r++)this.append(o._bufs[r]);else"number"==typeof o&&(o=o.toString()),this._appendBuffer(_.from(o));return this},y.prototype._appendBuffer=function(o){this._bufs.push(o),this.length+=o.length},y.prototype.indexOf=function(d,o,r){if(void 0===r&&"string"==typeof o&&(r=o,o=void 0),"function"==typeof d||Array.isArray(d))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof d?d=_.from([d]):"string"==typeof d?d=_.from(d,r):this._isBufferList(d)?d=d.slice():Array.isArray(d.buffer)?d=_.from(d.buffer,d.byteOffset,d.byteLength):_.isBuffer(d)||(d=_.from(d)),o=Number(o||0),isNaN(o)&&(o=0),o<0&&(o=this.length+o),o<0&&(o=0),0===d.length)return o>this.length?this.length:o;const n=this._offset(o);let t=n[0],e=n[1];for(;t<this._bufs.length;t++){const c=this._bufs[t];for(;e<c.length;)if(c.length-e>=d.length){const p=c.indexOf(d,e);if(-1!==p)return this._reverseOffset([t,p]);e=c.length-d.length+1}else{const p=this._reverseOffset([t,e]);if(this._match(p,d))return p;e++}e=0}return-1},y.prototype._match=function(d,o){if(this.length-d<o.length)return!1;for(let r=0;r<o.length;r++)if(this.get(d+r)!==o[r])return!1;return!0},function(){const d={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const o in d)!function(r){y.prototype[r]=null===d[r]?function(n,t){return this.slice(n,n+t)[r](0,t)}:function(n=0){return this.slice(n,n+d[r])[r](0)}}(o)}(),y.prototype._isBufferList=function(o){return o instanceof y||y.isBufferList(o)},y.isBufferList=function(o){return null!=o&&o[b]},K.exports=y},{buffer:17}],15:[function(A,K,z){"use strict";const _=A("readable-stream").Duplex,b=A("inherits"),y=A("./BufferList");function d(o){if(!(this instanceof d))return new d(o);if("function"==typeof o){this._callback=o;const r=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",r)}),this.on("unpipe",function(t){t.removeListener("error",r)}),o=null}y._init.call(this,o),_.call(this)}b(d,_),Object.assign(d.prototype,y.prototype),d.prototype._new=function(r){return new d(r)},d.prototype._write=function(r,n,t){this._appendBuffer(r),"function"==typeof t&&t()},d.prototype._read=function(r){if(!this.length)return this.push(null);r=Math.min(r,this.length),this.push(this.slice(0,r)),this.consume(r)},d.prototype.end=function(r){_.prototype.end.call(this,r),this._callback&&(this._callback(null,this.slice()),this._callback=null)},d.prototype._destroy=function(r,n){this._bufs.length=0,this.length=0,n(r)},d.prototype._isBufferList=function(r){return r instanceof d||r instanceof y||d.isBufferList(r)},d.isBufferList=y.isBufferList,K.exports=d,K.exports.BufferListStream=d,K.exports.BufferList=y},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(A,K,z){},{}],17:[function(A,K,z){(function(_){(function(){"use strict";var b=A("base64-js"),y=A("ieee754");z.Buffer=n,z.SlowBuffer=function(h){return+h!=h&&(h=0),n.alloc(+h)},z.INSPECT_MAX_BYTES=50;var d=2147483647;function r(h){if(h>d)throw new RangeError('The value "'+h+'" is invalid for option "size"');var a=new Uint8Array(h);return a.__proto__=n.prototype,a}function n(h,a,u){if("number"==typeof h){if("string"==typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return s(h)}return t(h,a,u)}function t(h,a,u){if("string"==typeof h)return function(h,a){if(("string"!=typeof a||""===a)&&(a="utf8"),!n.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var u=0|T(h,a),x=r(u),D=x.write(h,a);return D!==u&&(x=x.slice(0,D)),x}(h,a);if(ArrayBuffer.isView(h))return v(h);if(null==h)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(X(h,ArrayBuffer)||h&&X(h.buffer,ArrayBuffer))return function(h,a,u){if(a<0||h.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');var x;return(x=void 0===a&&void 0===u?new Uint8Array(h):void 0===u?new Uint8Array(h,a):new Uint8Array(h,a,u)).__proto__=n.prototype,x}(h,a,u);if("number"==typeof h)throw new TypeError('The "value" argument must not be of type number. Received type number');var x=h.valueOf&&h.valueOf();if(null!=x&&x!==h)return n.from(x,a,u);var D=function(h){if(n.isBuffer(h)){var a=0|w(h.length),u=r(a);return 0===u.length||h.copy(u,0,0,a),u}return void 0!==h.length?"number"!=typeof h.length||C(h.length)?r(0):v(h):"Buffer"===h.type&&Array.isArray(h.data)?v(h.data):void 0}(h);if(D)return D;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof h[Symbol.toPrimitive])return n.from(h[Symbol.toPrimitive]("string"),a,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}function e(h){if("number"!=typeof h)throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function s(h){return e(h),r(h<0?0:0|w(h))}function v(h){for(var a=h.length<0?0:0|w(h.length),u=r(a),x=0;x<a;x+=1)u[x]=255&h[x];return u}function w(h){if(h>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|h}function T(h,a){if(n.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||X(h,ArrayBuffer))return h.byteLength;if("string"!=typeof h)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var u=h.length,x=arguments.length>2&&!0===arguments[2];if(!x&&0===u)return 0;for(var D=!1;;)switch(a){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return oe(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*u;case"hex":return u>>>1;case"base64":return F(h).length;default:if(D)return x?-1:oe(h).length;a=(""+a).toLowerCase(),D=!0}}function M(h,a,u){var x=!1;if((void 0===a||a<0)&&(a=0),a>this.length||((void 0===u||u>this.length)&&(u=this.length),u<=0)||(u>>>=0)<=(a>>>=0))return"";for(h||(h="utf8");;)switch(h){case"hex":return re(this,a,u);case"utf8":case"utf-8":return S(this,a,u);case"ascii":return Z(this,a,u);case"latin1":case"binary":return ie(this,a,u);case"base64":return N(this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,a,u);default:if(x)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),x=!0}}function O(h,a,u){var x=h[a];h[a]=h[u],h[u]=x}function R(h,a,u,x,D){if(0===h.length)return-1;if("string"==typeof u?(x=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),C(u=+u)&&(u=D?0:h.length-1),u<0&&(u=h.length+u),u>=h.length){if(D)return-1;u=h.length-1}else if(u<0){if(!D)return-1;u=0}if("string"==typeof a&&(a=n.from(a,x)),n.isBuffer(a))return 0===a.length?-1:U(h,a,u,x,D);if("number"==typeof a)return a&=255,"function"==typeof Uint8Array.prototype.indexOf?D?Uint8Array.prototype.indexOf.call(h,a,u):Uint8Array.prototype.lastIndexOf.call(h,a,u):U(h,[a],u,x,D);throw new TypeError("val must be string, number or Buffer")}function U(h,a,u,x,D){var ue,G=1,ee=h.length,ae=a.length;if(void 0!==x&&("ucs2"===(x=String(x).toLowerCase())||"ucs-2"===x||"utf16le"===x||"utf-16le"===x)){if(h.length<2||a.length<2)return-1;G=2,ee/=2,ae/=2,u/=2}function le(be,ve){return 1===G?be[ve]:be.readUInt16BE(ve*G)}if(D){var he=-1;for(ue=u;ue<ee;ue++)if(le(h,ue)===le(a,-1===he?0:ue-he)){if(-1===he&&(he=ue),ue-he+1===ae)return he*G}else-1!==he&&(ue-=ue-he),he=-1}else for(u+ae>ee&&(u=ee-ae),ue=u;ue>=0;ue--){for(var ce=!0,ge=0;ge<ae;ge++)if(le(h,ue+ge)!==le(a,ge)){ce=!1;break}if(ce)return ue}return-1}function l(h,a,u,x){u=Number(u)||0;var D=h.length-u;x?(x=Number(x))>D&&(x=D):x=D;var G=a.length;x>G/2&&(x=G/2);for(var ee=0;ee<x;++ee){var ae=parseInt(a.substr(2*ee,2),16);if(C(ae))return ee;h[u+ee]=ae}return ee}function m(h,a,u,x){return $(oe(a,h.length-u),h,u,x)}function g(h,a,u,x){return $(function(h){for(var a=[],u=0;u<h.length;++u)a.push(255&h.charCodeAt(u));return a}(a),h,u,x)}function B(h,a,u,x){return g(h,a,u,x)}function H(h,a,u,x){return $(F(a),h,u,x)}function q(h,a,u,x){return $(function(h,a){for(var u,x,G=[],ee=0;ee<h.length&&!((a-=2)<0);++ee)x=(u=h.charCodeAt(ee))>>8,G.push(u%256),G.push(x);return G}(a,h.length-u),h,u,x)}function N(h,a,u){return b.fromByteArray(0===a&&u===h.length?h:h.slice(a,u))}function S(h,a,u){u=Math.min(h.length,u);for(var x=[],D=a;D<u;){var le,ue,he,ce,G=h[D],ee=null,ae=G>239?4:G>223?3:G>191?2:1;if(D+ae<=u)switch(ae){case 1:G<128&&(ee=G);break;case 2:128==(192&(le=h[D+1]))&&(ce=(31&G)<<6|63&le)>127&&(ee=ce);break;case 3:ue=h[D+2],128==(192&(le=h[D+1]))&&128==(192&ue)&&(ce=(15&G)<<12|(63&le)<<6|63&ue)>2047&&(ce<55296||ce>57343)&&(ee=ce);break;case 4:ue=h[D+2],he=h[D+3],128==(192&(le=h[D+1]))&&128==(192&ue)&&128==(192&he)&&(ce=(15&G)<<18|(63&le)<<12|(63&ue)<<6|63&he)>65535&&ce<1114112&&(ee=ce)}null===ee?(ee=65533,ae=1):ee>65535&&(x.push((ee-=65536)>>>10&1023|55296),ee=56320|1023&ee),x.push(ee),D+=ae}return function(h){var a=h.length;if(a<=k)return String.fromCharCode.apply(String,h);for(var u="",x=0;x<a;)u+=String.fromCharCode.apply(String,h.slice(x,x+=k));return u}(x)}z.kMaxLength=d,!(n.TYPED_ARRAY_SUPPORT=function(){try{var h=new Uint8Array(1);return h.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===h.foo()}catch(a){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(h,a,u){return t(h,a,u)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(h,a,u){return function(h,a,u){return e(h),h<=0?r(h):void 0!==a?"string"==typeof u?r(h).fill(a,u):r(h).fill(a):r(h)}(h,a,u)},n.allocUnsafe=function(h){return s(h)},n.allocUnsafeSlow=function(h){return s(h)},n.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==n.prototype},n.compare=function(a,u){if(X(a,Uint8Array)&&(a=n.from(a,a.offset,a.byteLength)),X(u,Uint8Array)&&(u=n.from(u,u.offset,u.byteLength)),!n.isBuffer(a)||!n.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===u)return 0;for(var x=a.length,D=u.length,G=0,ee=Math.min(x,D);G<ee;++G)if(a[G]!==u[G]){x=a[G],D=u[G];break}return x<D?-1:D<x?1:0},n.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(a,u){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return n.alloc(0);var x;if(void 0===u)for(u=0,x=0;x<a.length;++x)u+=a[x].length;var D=n.allocUnsafe(u),G=0;for(x=0;x<a.length;++x){var ee=a[x];if(X(ee,Uint8Array)&&(ee=n.from(ee)),!n.isBuffer(ee))throw new TypeError('"list" argument must be an Array of Buffers');ee.copy(D,G),G+=ee.length}return D},n.byteLength=T,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<a;u+=2)O(this,u,u+1);return this},n.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<a;u+=4)O(this,u,u+3),O(this,u+1,u+2);return this},n.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<a;u+=8)O(this,u,u+7),O(this,u+1,u+6),O(this,u+2,u+5),O(this,u+3,u+4);return this},n.prototype.toLocaleString=n.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?S(this,0,a):M.apply(this,arguments)},n.prototype.equals=function(a){if(!n.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===n.compare(this,a)},n.prototype.inspect=function(){var a="",u=z.INSPECT_MAX_BYTES;return a=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(a+=" ... "),"<Buffer "+a+">"},n.prototype.compare=function(a,u,x,D,G){if(X(a,Uint8Array)&&(a=n.from(a,a.offset,a.byteLength)),!n.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===u&&(u=0),void 0===x&&(x=a?a.length:0),void 0===D&&(D=0),void 0===G&&(G=this.length),u<0||x>a.length||D<0||G>this.length)throw new RangeError("out of range index");if(D>=G&&u>=x)return 0;if(D>=G)return-1;if(u>=x)return 1;if(this===a)return 0;for(var ee=(G>>>=0)-(D>>>=0),ae=(x>>>=0)-(u>>>=0),le=Math.min(ee,ae),ue=this.slice(D,G),he=a.slice(u,x),ce=0;ce<le;++ce)if(ue[ce]!==he[ce]){ee=ue[ce],ae=he[ce];break}return ee<ae?-1:ae<ee?1:0},n.prototype.includes=function(a,u,x){return-1!==this.indexOf(a,u,x)},n.prototype.indexOf=function(a,u,x){return R(this,a,u,x,!0)},n.prototype.lastIndexOf=function(a,u,x){return R(this,a,u,x,!1)},n.prototype.write=function(a,u,x,D){if(void 0===u)D="utf8",x=this.length,u=0;else if(void 0===x&&"string"==typeof u)D=u,x=this.length,u=0;else{if(!isFinite(u))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");u>>>=0,isFinite(x)?(x>>>=0,void 0===D&&(D="utf8")):(D=x,x=void 0)}var G=this.length-u;if((void 0===x||x>G)&&(x=G),a.length>0&&(x<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");for(var ee=!1;;)switch(D){case"hex":return l(this,a,u,x);case"utf8":case"utf-8":return m(this,a,u,x);case"ascii":return g(this,a,u,x);case"latin1":case"binary":return B(this,a,u,x);case"base64":return H(this,a,u,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,a,u,x);default:if(ee)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),ee=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function Z(h,a,u){var x="";u=Math.min(h.length,u);for(var D=a;D<u;++D)x+=String.fromCharCode(127&h[D]);return x}function ie(h,a,u){var x="";u=Math.min(h.length,u);for(var D=a;D<u;++D)x+=String.fromCharCode(h[D]);return x}function re(h,a,u){var x=h.length;(!a||a<0)&&(a=0),(!u||u<0||u>x)&&(u=x);for(var D="",G=a;G<u;++G)D+=Y(h[G]);return D}function Q(h,a,u){for(var x=h.slice(a,u),D="",G=0;G<x.length;G+=2)D+=String.fromCharCode(x[G]+256*x[G+1]);return D}function W(h,a,u){if(h%1!=0||h<0)throw new RangeError("offset is not uint");if(h+a>u)throw new RangeError("Trying to access beyond buffer length")}function te(h,a,u,x,D,G){if(!n.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>D||a<G)throw new RangeError('"value" argument is out of bounds');if(u+x>h.length)throw new RangeError("Index out of range")}function J(h,a,u,x,D,G){if(u+x>h.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function se(h,a,u,x,D){return a=+a,u>>>=0,D||J(h,0,u,4),y.write(h,a,u,x,23,4),u+4}function ne(h,a,u,x,D){return a=+a,u>>>=0,D||J(h,0,u,8),y.write(h,a,u,x,52,8),u+8}n.prototype.slice=function(a,u){var x=this.length;(a=~~a)<0?(a+=x)<0&&(a=0):a>x&&(a=x),(u=void 0===u?x:~~u)<0?(u+=x)<0&&(u=0):u>x&&(u=x),u<a&&(u=a);var D=this.subarray(a,u);return D.__proto__=n.prototype,D},n.prototype.readUIntLE=function(a,u,x){a>>>=0,u>>>=0,x||W(a,u,this.length);for(var D=this[a],G=1,ee=0;++ee<u&&(G*=256);)D+=this[a+ee]*G;return D},n.prototype.readUIntBE=function(a,u,x){a>>>=0,u>>>=0,x||W(a,u,this.length);for(var D=this[a+--u],G=1;u>0&&(G*=256);)D+=this[a+--u]*G;return D},n.prototype.readUInt8=function(a,u){return a>>>=0,u||W(a,1,this.length),this[a]},n.prototype.readUInt16LE=function(a,u){return a>>>=0,u||W(a,2,this.length),this[a]|this[a+1]<<8},n.prototype.readUInt16BE=function(a,u){return a>>>=0,u||W(a,2,this.length),this[a]<<8|this[a+1]},n.prototype.readUInt32LE=function(a,u){return a>>>=0,u||W(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},n.prototype.readUInt32BE=function(a,u){return a>>>=0,u||W(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},n.prototype.readIntLE=function(a,u,x){a>>>=0,u>>>=0,x||W(a,u,this.length);for(var D=this[a],G=1,ee=0;++ee<u&&(G*=256);)D+=this[a+ee]*G;return D>=(G*=128)&&(D-=Math.pow(2,8*u)),D},n.prototype.readIntBE=function(a,u,x){a>>>=0,u>>>=0,x||W(a,u,this.length);for(var D=u,G=1,ee=this[a+--D];D>0&&(G*=256);)ee+=this[a+--D]*G;return ee>=(G*=128)&&(ee-=Math.pow(2,8*u)),ee},n.prototype.readInt8=function(a,u){return a>>>=0,u||W(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},n.prototype.readInt16LE=function(a,u){a>>>=0,u||W(a,2,this.length);var x=this[a]|this[a+1]<<8;return 32768&x?4294901760|x:x},n.prototype.readInt16BE=function(a,u){a>>>=0,u||W(a,2,this.length);var x=this[a+1]|this[a]<<8;return 32768&x?4294901760|x:x},n.prototype.readInt32LE=function(a,u){return a>>>=0,u||W(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},n.prototype.readInt32BE=function(a,u){return a>>>=0,u||W(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},n.prototype.readFloatLE=function(a,u){return a>>>=0,u||W(a,4,this.length),y.read(this,a,!0,23,4)},n.prototype.readFloatBE=function(a,u){return a>>>=0,u||W(a,4,this.length),y.read(this,a,!1,23,4)},n.prototype.readDoubleLE=function(a,u){return a>>>=0,u||W(a,8,this.length),y.read(this,a,!0,52,8)},n.prototype.readDoubleBE=function(a,u){return a>>>=0,u||W(a,8,this.length),y.read(this,a,!1,52,8)},n.prototype.writeUIntLE=function(a,u,x,D){a=+a,u>>>=0,x>>>=0,D||te(this,a,u,x,Math.pow(2,8*x)-1,0);var ee=1,ae=0;for(this[u]=255&a;++ae<x&&(ee*=256);)this[u+ae]=a/ee&255;return u+x},n.prototype.writeUIntBE=function(a,u,x,D){a=+a,u>>>=0,x>>>=0,D||te(this,a,u,x,Math.pow(2,8*x)-1,0);var ee=x-1,ae=1;for(this[u+ee]=255&a;--ee>=0&&(ae*=256);)this[u+ee]=a/ae&255;return u+x},n.prototype.writeUInt8=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,1,255,0),this[u]=255&a,u+1},n.prototype.writeUInt16LE=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,2,65535,0),this[u]=255&a,this[u+1]=a>>>8,u+2},n.prototype.writeUInt16BE=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,2,65535,0),this[u]=a>>>8,this[u+1]=255&a,u+2},n.prototype.writeUInt32LE=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,4,4294967295,0),this[u+3]=a>>>24,this[u+2]=a>>>16,this[u+1]=a>>>8,this[u]=255&a,u+4},n.prototype.writeUInt32BE=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,4,4294967295,0),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=255&a,u+4},n.prototype.writeIntLE=function(a,u,x,D){if(a=+a,u>>>=0,!D){var G=Math.pow(2,8*x-1);te(this,a,u,x,G-1,-G)}var ee=0,ae=1,le=0;for(this[u]=255&a;++ee<x&&(ae*=256);)a<0&&0===le&&0!==this[u+ee-1]&&(le=1),this[u+ee]=(a/ae>>0)-le&255;return u+x},n.prototype.writeIntBE=function(a,u,x,D){if(a=+a,u>>>=0,!D){var G=Math.pow(2,8*x-1);te(this,a,u,x,G-1,-G)}var ee=x-1,ae=1,le=0;for(this[u+ee]=255&a;--ee>=0&&(ae*=256);)a<0&&0===le&&0!==this[u+ee+1]&&(le=1),this[u+ee]=(a/ae>>0)-le&255;return u+x},n.prototype.writeInt8=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,1,127,-128),a<0&&(a=255+a+1),this[u]=255&a,u+1},n.prototype.writeInt16LE=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,2,32767,-32768),this[u]=255&a,this[u+1]=a>>>8,u+2},n.prototype.writeInt16BE=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,2,32767,-32768),this[u]=a>>>8,this[u+1]=255&a,u+2},n.prototype.writeInt32LE=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,4,2147483647,-2147483648),this[u]=255&a,this[u+1]=a>>>8,this[u+2]=a>>>16,this[u+3]=a>>>24,u+4},n.prototype.writeInt32BE=function(a,u,x){return a=+a,u>>>=0,x||te(this,a,u,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=255&a,u+4},n.prototype.writeFloatLE=function(a,u,x){return se(this,a,u,!0,x)},n.prototype.writeFloatBE=function(a,u,x){return se(this,a,u,!1,x)},n.prototype.writeDoubleLE=function(a,u,x){return ne(this,a,u,!0,x)},n.prototype.writeDoubleBE=function(a,u,x){return ne(this,a,u,!1,x)},n.prototype.copy=function(a,u,x,D){if(!n.isBuffer(a))throw new TypeError("argument should be a Buffer");if(x||(x=0),!D&&0!==D&&(D=this.length),u>=a.length&&(u=a.length),u||(u=0),D>0&&D<x&&(D=x),D===x||0===a.length||0===this.length)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),a.length-u<D-x&&(D=a.length-u+x);var G=D-x;if(this===a&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(u,x,D);else if(this===a&&x<u&&u<D)for(var ee=G-1;ee>=0;--ee)a[ee+u]=this[ee+x];else Uint8Array.prototype.set.call(a,this.subarray(x,D),u);return G},n.prototype.fill=function(a,u,x,D){if("string"==typeof a){if("string"==typeof u?(D=u,u=0,x=this.length):"string"==typeof x&&(D=x,x=this.length),void 0!==D&&"string"!=typeof D)throw new TypeError("encoding must be a string");if("string"==typeof D&&!n.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(1===a.length){var G=a.charCodeAt(0);("utf8"===D&&G<128||"latin1"===D)&&(a=G)}}else"number"==typeof a&&(a&=255);if(u<0||this.length<u||this.length<x)throw new RangeError("Out of range index");if(x<=u)return this;var ee;if(u>>>=0,x=void 0===x?this.length:x>>>0,a||(a=0),"number"==typeof a)for(ee=u;ee<x;++ee)this[ee]=a;else{var ae=n.isBuffer(a)?a:n.from(a,D),le=ae.length;if(0===le)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(ee=0;ee<x-u;++ee)this[ee+u]=ae[ee%le]}return this};var V=/[^+/0-9A-Za-z-_]/g;function Y(h){return h<16?"0"+h.toString(16):h.toString(16)}function oe(h,a){a=a||1/0;for(var u,x=h.length,D=null,G=[],ee=0;ee<x;++ee){if((u=h.charCodeAt(ee))>55295&&u<57344){if(!D){if(u>56319){(a-=3)>-1&&G.push(239,191,189);continue}if(ee+1===x){(a-=3)>-1&&G.push(239,191,189);continue}D=u;continue}if(u<56320){(a-=3)>-1&&G.push(239,191,189),D=u;continue}u=65536+(D-55296<<10|u-56320)}else D&&(a-=3)>-1&&G.push(239,191,189);if(D=null,u<128){if((a-=1)<0)break;G.push(u)}else if(u<2048){if((a-=2)<0)break;G.push(u>>6|192,63&u|128)}else if(u<65536){if((a-=3)<0)break;G.push(u>>12|224,u>>6&63|128,63&u|128)}else{if(!(u<1114112))throw new Error("Invalid code point");if((a-=4)<0)break;G.push(u>>18|240,u>>12&63|128,u>>6&63|128,63&u|128)}}return G}function F(h){return b.toByteArray(function(h){if((h=(h=h.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;h.length%4!=0;)h+="=";return h}(h))}function $(h,a,u,x){for(var D=0;D<x&&!(D+u>=a.length||D>=h.length);++D)a[D+u]=h[D];return D}function X(h,a){return h instanceof a||null!=h&&null!=h.constructor&&null!=h.constructor.name&&h.constructor.name===a.name}function C(h){return h!=h}}).call(this)}).call(this,A("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(A,K,z){(function(_){(function(){z.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+K.exports.humanize(this.diff),!this.useColors)return;const e="color: "+this.color;t.splice(1,0,e,"color: inherit");let c=0,s=0;t[0].replace(/%[a-zA-Z%]/g,p=>{"%%"!==p&&(c++,"%c"===p&&(s=c))}),t.splice(s,0,e)},z.save=function(t){try{t?z.storage.setItem("debug",t):z.storage.removeItem("debug")}catch(e){}},z.load=function(){let t;try{t=z.storage.getItem("debug")}catch(e){}return!t&&void 0!==_&&"env"in _&&(t=_.env.DEBUG),t},z.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},z.storage=function(){try{return localStorage}catch(t){}}(),z.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),z.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],z.log=console.debug||console.log||(()=>{}),K.exports=A("./common")(z);const{formatters:n}=K.exports;n.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,A("_process"))},{"./common":19,_process:50}],19:[function(A,K,z){K.exports=function(b){function d(p){let v,i,w,f=null;function E(...T){if(!E.enabled)return;const M=E,O=Number(new Date);M.diff=O-(v||O),M.prev=v,M.curr=O,v=O,T[0]=d.coerce(T[0]),"string"!=typeof T[0]&&T.unshift("%O");let U=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(m,g)=>{if("%%"===m)return"%";U++;const B=d.formatters[g];return"function"==typeof B&&(m=B.call(M,T[U]),T.splice(U,1),U--),m}),d.formatArgs.call(M,T),(M.log||d.log).apply(M,T)}return E.namespace=p,E.useColors=d.useColors(),E.color=d.selectColor(p),E.extend=o,E.destroy=d.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==f?f:(i!==d.namespaces&&(i=d.namespaces,w=d.enabled(p)),w),set:T=>{f=T}}),"function"==typeof d.init&&d.init(E),E}function o(p,v){const f=d(this.namespace+(void 0===v?":":v)+p);return f.log=this.log,f}function e(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}return d.debug=d,d.default=d,d.coerce=function(p){return p instanceof Error?p.stack||p.message:p},d.disable=function(){const p=[...d.names.map(e),...d.skips.map(e).map(v=>"-"+v)].join(",");return d.enable(""),p},d.enable=function(p){let v;d.save(p),d.namespaces=p,d.names=[],d.skips=[];const f=("string"==typeof p?p:"").split(/[\s,]+/),i=f.length;for(v=0;v<i;v++)!f[v]||("-"===(p=f[v].replace(/\*/g,".*?"))[0]?d.skips.push(new RegExp("^"+p.substr(1)+"$")):d.names.push(new RegExp("^"+p+"$")))},d.enabled=function(p){if("*"===p[p.length-1])return!0;let v,f;for(v=0,f=d.skips.length;v<f;v++)if(d.skips[v].test(p))return!1;for(v=0,f=d.names.length;v<f;v++)if(d.names[v].test(p))return!0;return!1},d.humanize=A("ms"),d.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(b).forEach(p=>{d[p]=b[p]}),d.names=[],d.skips=[],d.formatters={},d.selectColor=function(p){let v=0;for(let f=0;f<p.length;f++)v=(v<<5)-v+p.charCodeAt(f),v|=0;return d.colors[Math.abs(v)%d.colors.length]},d.enable(d.load()),d}},{ms:45}],20:[function(A,K,z){(function(_,b){(function(){var y=A("readable-stream"),d=A("end-of-stream"),o=A("inherits"),r=A("stream-shift"),n=b.from&&b.from!==Uint8Array.from?b.from([0]):new b([0]),t=function(i,w){i._corked?i.once("uncork",w):w()},c=function(i,w){return function(E){E?function(i,w){i._autoDestroy&&i.destroy(w)}(i,"premature close"===E.message?null:E):w&&!i._ended&&i.end()}},p=function(){},f=function(i,w,E){if(!(this instanceof f))return new f(i,w,E);y.Duplex.call(this,E),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!E||!1!==E.autoDestroy,this._forwardDestroy=!E||!1!==E.destroy,this._forwardEnd=!E||!1!==E.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,i&&this.setWritable(i),w&&this.setReadable(w)};o(f,y.Duplex),f.obj=function(i,w,E){return E||(E={}),E.objectMode=!0,E.highWaterMark=16,new f(i,w,E)},f.prototype.cork=function(){1==++this._corked&&this.emit("cork")},f.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},f.prototype.setWritable=function(i){if(this._unwrite&&this._unwrite(),this.destroyed)i&&i.destroy&&i.destroy();else if(null!==i&&!1!==i){var w=this,E=d(i,{writable:!0,readable:!1},c(this,this._forwardEnd)),T=function(){var O=w._ondrain;w._ondrain=null,O&&O()};this._unwrite&&_.nextTick(T),this._writable=i,this._writable.on("drain",T),this._unwrite=function(){w._writable.removeListener("drain",T),E()},this.uncork()}else this.end()},f.prototype.setReadable=function(i){if(this._unread&&this._unread(),this.destroyed)i&&i.destroy&&i.destroy();else{if(null===i||!1===i)return this.push(null),void this.resume();var w=this,E=d(i,{writable:!1,readable:!0},c(this)),T=function(){w._forward()},M=function(){w.push(null)};this._drained=!0,this._readable=i,this._readable2=i._readableState?i:function(i){return new y.Readable({objectMode:!0,highWaterMark:16}).wrap(i)}(i),this._readable2.on("readable",T),this._readable2.on("end",M),this._unread=function(){w._readable2.removeListener("readable",T),w._readable2.removeListener("end",M),E()},this._forward()}},f.prototype._read=function(){this._drained=!0,this._forward()},f.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var i;this._drained&&null!==(i=r(this._readable2));)this.destroyed||(this._drained=this.push(i));this._forwarding=!1}},f.prototype.destroy=function(i,w){if(w||(w=p),this.destroyed)return w(null);this.destroyed=!0;var E=this;_.nextTick(function(){E._destroy(i),w(null)})},f.prototype._destroy=function(i){if(i){var w=this._ondrain;this._ondrain=null,w?w(i):this.emit("error",i)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},f.prototype._write=function(i,w,E){if(!this.destroyed){if(this._corked)return t(this,this._write.bind(this,i,w,E));if(i===n)return this._finish(E);if(!this._writable)return E();!1===this._writable.write(i)?this._ondrain=E:this.destroyed||E()}},f.prototype._finish=function(i){var w=this;this.emit("preend"),t(this,function(){!function(i,w){!i||i._writableState&&i._writableState.finished?w():i._writableState?i.end(w):(i.end(),w())}(w._forwardEnd&&w._writable,function(){!1===w._writableState.prefinished&&(w._writableState.prefinished=!0),w.emit("prefinish"),t(w,i)})})},f.prototype.end=function(i,w,E){return"function"==typeof i?this.end(null,null,i):"function"==typeof w?this.end(i,null,w):(this._ended=!0,i&&this.write(i),!this._writableState.ending&&!this._writableState.destroyed&&this.write(n),y.Writable.prototype.end.call(this,E))},K.exports=f}).call(this)}).call(this,A("_process"),A("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(A,K,z){(function(_){(function(){var b=A("once"),y=function(){},r=function(n,t,e){if("function"==typeof t)return r(n,null,t);t||(t={}),e=b(e||y);var c=n._writableState,s=n._readableState,p=t.readable||!1!==t.readable&&n.readable,v=t.writable||!1!==t.writable&&n.writable,f=!1,i=function(){n.writable||w()},w=function(){v=!1,p||e.call(n)},E=function(){p=!1,v||e.call(n)},T=function(l){e.call(n,l?new Error("exited with error code: "+l):null)},M=function(l){e.call(n,l)},O=function(){_.nextTick(R)},R=function(){if(!f){if(p&&(!s||!s.ended||s.destroyed))return e.call(n,new Error("premature close"));if(v&&(!c||!c.ended||c.destroyed))return e.call(n,new Error("premature close"))}},U=function(){n.req.on("finish",w)};return function(n){return n.setHeader&&"function"==typeof n.abort}(n)?(n.on("complete",w),n.on("abort",O),n.req?U():n.on("request",U)):v&&!c&&(n.on("end",i),n.on("close",i)),function(n){return n.stdio&&Array.isArray(n.stdio)&&3===n.stdio.length}(n)&&n.on("exit",T),n.on("end",E),n.on("finish",w),!1!==t.error&&n.on("error",M),n.on("close",O),function(){f=!0,n.removeListener("complete",w),n.removeListener("abort",O),n.removeListener("request",U),n.req&&n.req.removeListener("finish",w),n.removeListener("end",i),n.removeListener("close",i),n.removeListener("finish",w),n.removeListener("exit",T),n.removeListener("end",E),n.removeListener("error",M),n.removeListener("close",O)}};K.exports=r}).call(this)}).call(this,A("_process"))},{_process:50,once:48}],22:[function(A,K,z){var _=Object.create||function(g){var B=function(){};return B.prototype=g,new B},b=Object.keys||function(g){var B=[];for(var H in g)Object.prototype.hasOwnProperty.call(g,H)&&B.push(H);return H},y=Function.prototype.bind||function(g){var B=this;return function(){return B.apply(g,arguments)}};function d(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=_(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}K.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0;var r,o=10;try{var n={};Object.defineProperty&&Object.defineProperty(n,"x",{value:0}),r=0===n.x}catch(g){r=!1}function t(g){return void 0===g._maxListeners?d.defaultMaxListeners:g._maxListeners}function e(g,B,H){if(B)g.call(H);else for(var q=g.length,N=O(g,q),S=0;S<q;++S)N[S].call(H)}function c(g,B,H,q){if(B)g.call(H,q);else for(var N=g.length,S=O(g,N),k=0;k<N;++k)S[k].call(H,q)}function s(g,B,H,q,N){if(B)g.call(H,q,N);else for(var S=g.length,k=O(g,S),j=0;j<S;++j)k[j].call(H,q,N)}function p(g,B,H,q,N,S){if(B)g.call(H,q,N,S);else for(var k=g.length,j=O(g,k),Z=0;Z<k;++Z)j[Z].call(H,q,N,S)}function v(g,B,H,q){if(B)g.apply(H,q);else for(var N=g.length,S=O(g,N),k=0;k<N;++k)S[k].apply(H,q)}function f(g,B,H,q){var N,S,k;if("function"!=typeof H)throw new TypeError('"listener" argument must be a function');if((S=g._events)?(S.newListener&&(g.emit("newListener",B,H.listener?H.listener:H),S=g._events),k=S[B]):(S=g._events=_(null),g._eventsCount=0),k){if("function"==typeof k?k=S[B]=q?[H,k]:[k,H]:q?k.unshift(H):k.push(H),!k.warned&&(N=t(g))&&N>0&&k.length>N){k.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+k.length+' "'+String(B)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');j.name="MaxListenersExceededWarning",j.emitter=g,j.type=B,j.count=k.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",j.name,j.message)}}else k=S[B]=H,++g._eventsCount;return g}function i(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var g=new Array(arguments.length),B=0;B<g.length;++B)g[B]=arguments[B];this.listener.apply(this.target,g)}}function w(g,B,H){var q={fired:!1,wrapFn:void 0,target:g,type:B,listener:H},N=y.call(i,q);return N.listener=H,q.wrapFn=N,N}function E(g,B,H){var q=g._events;if(!q)return[];var N=q[B];return N?"function"==typeof N?H?[N.listener||N]:[N]:H?function(g){for(var B=new Array(g.length),H=0;H<B.length;++H)B[H]=g[H].listener||g[H];return B}(N):O(N,N.length):[]}function T(g){var B=this._events;if(B){var H=B[g];if("function"==typeof H)return 1;if(H)return H.length}return 0}function O(g,B){for(var H=new Array(B),q=0;q<B;++q)H[q]=g[q];return H}r?Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(g){if("number"!=typeof g||g<0||g!=g)throw new TypeError('"defaultMaxListeners" must be a positive number');o=g}}):d.defaultMaxListeners=o,d.prototype.setMaxListeners=function(B){if("number"!=typeof B||B<0||isNaN(B))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=B,this},d.prototype.getMaxListeners=function(){return t(this)},d.prototype.emit=function(B){var H,q,N,S,k,j,Z="error"===B;if(j=this._events)Z=Z&&null==j.error;else if(!Z)return!1;if(Z){if(arguments.length>1&&(H=arguments[1]),H instanceof Error)throw H;var ie=new Error('Unhandled "error" event. ('+H+")");throw ie.context=H,ie}if(!(q=j[B]))return!1;var re="function"==typeof q;switch(N=arguments.length){case 1:e(q,re,this);break;case 2:c(q,re,this,arguments[1]);break;case 3:s(q,re,this,arguments[1],arguments[2]);break;case 4:p(q,re,this,arguments[1],arguments[2],arguments[3]);break;default:for(S=new Array(N-1),k=1;k<N;k++)S[k-1]=arguments[k];v(q,re,this,S)}return!0},d.prototype.on=d.prototype.addListener=function(B,H){return f(this,B,H,!1)},d.prototype.prependListener=function(B,H){return f(this,B,H,!0)},d.prototype.once=function(B,H){if("function"!=typeof H)throw new TypeError('"listener" argument must be a function');return this.on(B,w(this,B,H)),this},d.prototype.prependOnceListener=function(B,H){if("function"!=typeof H)throw new TypeError('"listener" argument must be a function');return this.prependListener(B,w(this,B,H)),this},d.prototype.removeListener=function(B,H){var q,N,S,k,j;if("function"!=typeof H)throw new TypeError('"listener" argument must be a function');if(!(N=this._events))return this;if(!(q=N[B]))return this;if(q===H||q.listener===H)0==--this._eventsCount?this._events=_(null):(delete N[B],N.removeListener&&this.emit("removeListener",B,q.listener||H));else if("function"!=typeof q){for(S=-1,k=q.length-1;k>=0;k--)if(q[k]===H||q[k].listener===H){j=q[k].listener,S=k;break}if(S<0)return this;0===S?q.shift():function(g,B){for(var H=B,q=H+1,N=g.length;q<N;H+=1,q+=1)g[H]=g[q];g.pop()}(q,S),1===q.length&&(N[B]=q[0]),N.removeListener&&this.emit("removeListener",B,j||H)}return this},d.prototype.removeAllListeners=function(B){var H,q,N;if(!(q=this._events))return this;if(!q.removeListener)return 0===arguments.length?(this._events=_(null),this._eventsCount=0):q[B]&&(0==--this._eventsCount?this._events=_(null):delete q[B]),this;if(0===arguments.length){var k,S=b(q);for(N=0;N<S.length;++N)"removeListener"!==(k=S[N])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=_(null),this._eventsCount=0,this}if("function"==typeof(H=q[B]))this.removeListener(B,H);else if(H)for(N=H.length-1;N>=0;N--)this.removeListener(B,H[N]);return this},d.prototype.listeners=function(B){return E(this,B,!0)},d.prototype.rawListeners=function(B){return E(this,B,!1)},d.listenerCount=function(g,B){return"function"==typeof g.listenerCount?g.listenerCount(B):T.call(g,B)},d.prototype.listenerCount=T,d.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],23:[function(A,K,z){z.read=function(_,b,y,d,o){var r,n,t=8*o-d-1,e=(1<<t)-1,c=e>>1,s=-7,p=y?o-1:0,v=y?-1:1,f=_[b+p];for(p+=v,r=f&(1<<-s)-1,f>>=-s,s+=t;s>0;r=256*r+_[b+p],p+=v,s-=8);for(n=r&(1<<-s)-1,r>>=-s,s+=d;s>0;n=256*n+_[b+p],p+=v,s-=8);if(0===r)r=1-c;else{if(r===e)return n?NaN:1/0*(f?-1:1);n+=Math.pow(2,d),r-=c}return(f?-1:1)*n*Math.pow(2,r-d)},z.write=function(_,b,y,d,o,r){var n,t,e,c=8*r-o-1,s=(1<<c)-1,p=s>>1,v=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=d?0:r-1,i=d?1:-1,w=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(t=isNaN(b)?1:0,n=s):(n=Math.floor(Math.log(b)/Math.LN2),b*(e=Math.pow(2,-n))<1&&(n--,e*=2),(b+=n+p>=1?v/e:v*Math.pow(2,1-p))*e>=2&&(n++,e/=2),n+p>=s?(t=0,n=s):n+p>=1?(t=(b*e-1)*Math.pow(2,o),n+=p):(t=b*Math.pow(2,p-1)*Math.pow(2,o),n=0));o>=8;_[y+f]=255&t,f+=i,t/=256,o-=8);for(n=n<<o|t,c+=o;c>0;_[y+f]=255&n,f+=i,n/=256,c-=8);_[y+f-i]|=128*w}},{}],24:[function(A,K,z){K.exports="function"==typeof Object.create?function(b,y){y&&(b.super_=y,b.prototype=Object.create(y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,y){if(y){b.super_=y;var d=function(){};d.prototype=y.prototype,b.prototype=new d,b.prototype.constructor=b}}},{}],25:[function(A,K,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var _=function(){function b(y,d){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=y,this.value=d}return b.prototype.rotateLeft=function(){var y=this.parent,d=this.brother,o=this.leftChild,r=this.rightChild;if(!r)throw new Error("unknown error");var n=r.leftChild,t=r.rightChild;return y&&(y.leftChild===this?y.leftChild=r:y.rightChild===this&&(y.rightChild=r)),r.parent=y,r.brother=d,r.leftChild=this,r.rightChild=t,d&&(d.brother=r),this.parent=r,this.brother=t,this.leftChild=o,this.rightChild=n,t&&(t.parent=r,t.brother=this),o&&(o.parent=this,o.brother=n),n&&(n.parent=this,n.brother=o),r},b.prototype.rotateRight=function(){var y=this.parent,d=this.brother,o=this.leftChild;if(!o)throw new Error("unknown error");var r=this.rightChild,n=o.leftChild,t=o.rightChild;return y&&(y.leftChild===this?y.leftChild=o:y.rightChild===this&&(y.rightChild=o)),o.parent=y,o.brother=d,o.leftChild=n,o.rightChild=this,d&&(d.brother=o),n&&(n.parent=o,n.brother=this),this.parent=o,this.brother=n,this.leftChild=t,this.rightChild=r,t&&(t.parent=this,t.brother=r),r&&(r.parent=this,r.brother=t),o},b.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},b.TreeNodeColorType={red:!0,black:!1},b}();Object.freeze(_),z.default=_},{}],26:[function(A,K,z){"use strict";var _=this&&this.__generator||function(y,d){var r,n,t,e,o={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return e={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function c(p){return function(v){return function(p){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(t=2&p[0]?n.return:p[0]?n.throw||((t=n.return)&&t.call(n),0):n.next)&&!(t=t.call(n,p[1])).done)return t;switch(n=0,t&&(p=[2&p[0],t.value]),p[0]){case 0:case 1:t=p;break;case 4:return o.label++,{value:p[1],done:!1};case 5:o.label++,n=p[1],p=[0];continue;case 7:p=o.ops.pop(),o.trys.pop();continue;default:if(!(t=(t=o.trys).length>0&&t[t.length-1])&&(6===p[0]||2===p[0])){o=0;continue}if(3===p[0]&&(!t||p[1]>t[0]&&p[1]<t[3])){o.label=p[1];break}if(6===p[0]&&o.label<t[1]){o.label=t[1],t=p;break}if(t&&o.label<t[2]){o.label=t[2],o.ops.push(p);break}t[2]&&o.ops.pop(),o.trys.pop();continue}p=d.call(y,o)}catch(v){p=[6,v],n=0}finally{r=t=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,v])}}};function b(y){var d=this;void 0===y&&(y=[]);var o=[],r=0,n=0,t=0,e=0,c=0,s=0;this.size=function(){return s},this.empty=function(){return 0===s},this.clear=function(){r=t=n=e=c=s=0,v.call(this,b.bucketSize),s=0},this.front=function(){return o[r][n]},this.back=function(){return o[t][e]},this.forEach=function(f){if(!this.empty()){var i=0;if(r===t){for(var w=n;w<=e;++w)f(o[r][w],i++);return}for(w=n;w<b.bucketSize;++w)f(o[r][w],i++);for(w=r+1;w<t;++w)for(var E=0;E<b.bucketSize;++E)f(o[w][E],i++);for(w=0;w<=e;++w)f(o[t][w],i++)}};var p=function(f){var i=r*b.bucketSize+n,w=i+f;if(w<i||w>t*b.bucketSize+e)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(w/b.bucketSize),curNodePointerIndex:w%b.bucketSize}};this.getElementByPos=function(f){var i=p(f);return o[i.curNodeBucketIndex][i.curNodePointerIndex]},this.eraseElementByPos=function(f){var i=this;if(f<0||f>s)throw new Error("pos should more than 0 and less than queue's size");if(0===f)this.popFront();else if(f===this.size())this.popBack();else{for(var w=[],E=f+1;E<s;++E)w.push(this.getElementByPos(E));this.cut(f),this.popBack(),w.forEach(function(T){return i.pushBack(T)})}},this.eraseElementByValue=function(f){if(!this.empty()){var i=[];this.forEach(function(T){T!==f&&i.push(T)});for(var w=i.length,E=0;E<w;++E)this.setElementByPos(E,i[E]);this.cut(w-1)}};var v=function(f){for(var i=[],E=Math.max(Math.ceil(f*b.sigma/b.bucketSize),2),T=0;T<E;++T)i.push(new Array(b.bucketSize));var M=Math.ceil(f/b.bucketSize),O=Math.floor(E/2)-Math.floor(M/2),R=O,U=0;if(this.size())for(T=0;T<M;++T){for(var l=0;l<b.bucketSize;++l)if(i[O+T][l]=this.front(),this.popFront(),this.empty()){R=O+T,U=l;break}if(this.empty())break}o=i,r=O,n=0,t=R,e=U,c=E,s=f};this.pushBack=function(f){this.empty()||(t===c-1&&e===b.bucketSize-1&&v.call(this,this.size()),e<b.bucketSize-1?++e:t<c-1&&(++t,e=0)),++s,o[t][e]=f},this.popBack=function(){this.empty()||(1!==this.size()&&(e>0?--e:r<t&&(--t,e=b.bucketSize-1)),s>0&&--s)},this.setElementByPos=function(f,i){var w=p(f);o[w.curNodeBucketIndex][w.curNodePointerIndex]=i},this.insert=function(f,i,w){var E=this;if(void 0===w&&(w=1),0===f)for(;w--;)this.pushFront(i);else if(f===this.size())for(;w--;)this.pushBack(i);else{for(var T=[],M=f;M<s;++M)T.push(this.getElementByPos(M));for(this.cut(f-1),M=0;M<w;++M)this.pushBack(i);T.forEach(function(O){return E.pushBack(O)})}},this.find=function(f){if(r===t){for(var i=n;i<=e;++i)if(o[r][i]===f)return!0;return!1}for(i=n;i<b.bucketSize;++i)if(o[r][i]===f)return!0;for(i=r+1;i<t;++i)for(var w=0;w<b.bucketSize;++w)if(o[i][w]===f)return!0;for(i=0;i<=e;++i)if(o[t][i]===f)return!0;return!1},this.reverse=function(){for(var f=0,i=s-1;f<i;){var w=this.getElementByPos(f);this.setElementByPos(f,this.getElementByPos(i)),this.setElementByPos(i,w),++f,--i}},this.unique=function(){if(!this.empty()){var f=[],i=this.front();this.forEach(function(E,T){(0===T||E!==i)&&(f.push(E),i=E)});for(var w=0;w<s;++w)this.setElementByPos(w,f[w]);this.cut(f.length-1)}},this.sort=function(f){var i=[];this.forEach(function(E){i.push(E)}),i.sort(f);for(var w=0;w<s;++w)this.setElementByPos(w,i[w])},this.pushFront=function(f){this.empty()||(0===r&&0===n&&v.call(this,this.size()),n>0?--n:r>0&&(--r,n=b.bucketSize-1)),++s,o[r][n]=f},this.popFront=function(){this.empty()||(1!==this.size()&&(n<b.bucketSize-1?++n:r<t&&(++r,n=0)),s>0&&--s)},this.shrinkToFit=function(){var f=this,i=[];this.forEach(function(M){i.push(M)}),o=[];for(var E=Math.ceil(i.length/b.bucketSize),T=0;T<E;++T)o.push(new Array(b.bucketSize));this.clear(),i.forEach(function(M){return f.pushBack(M)})},this.cut=function(f){if(f<0)this.clear();else{var i=p(f);t=i.curNodeBucketIndex,e=i.curNodePointerIndex,s=f+1}},this[Symbol.iterator]=function(){return function(){var i,f;return _(this,function(w){switch(w.label){case 0:if(0===s)return[2];if(r!==t)return[3,5];f=n,w.label=1;case 1:return f<=e?[4,o[r][f]]:[3,4];case 2:w.sent(),w.label=3;case 3:return++f,[3,1];case 4:return[2];case 5:f=n,w.label=6;case 6:return f<b.bucketSize?[4,o[r][f]]:[3,9];case 7:w.sent(),w.label=8;case 8:return++f,[3,6];case 9:f=r+1,w.label=10;case 10:if(!(f<t))return[3,15];i=0,w.label=11;case 11:return i<b.bucketSize?[4,o[f][i]]:[3,14];case 12:w.sent(),w.label=13;case 13:return++i,[3,11];case 14:return++f,[3,10];case 15:f=0,w.label=16;case 16:return f<=e?[4,o[t][f]]:[3,19];case 17:w.sent(),w.label=18;case 18:return++f,[3,16];case 19:return[2]}})}()},function(){var f=b.bucketSize;y.size?f=y.size():y.length&&(f=y.length),c=Math.ceil(f*b.sigma/b.bucketSize),c=Math.max(c,3);for(var w=0;w<c;++w)o.push(new Array(b.bucketSize));var E=Math.ceil(f/b.bucketSize);r=Math.floor(c/2)-Math.floor(E/2),t=r,y.forEach(function(T){return d.pushBack(T)})}(),Object.freeze(this)}Object.defineProperty(z,"__esModule",{value:!0}),b.sigma=3,b.bucketSize=5e3,Object.freeze(b),z.default=b},{}],27:[function(A,K,z){"use strict";var _=this&&this.__generator||function(r,n){var e,c,s,p,t={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function v(i){return function(w){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,c&&(s=2&i[0]?c.return:i[0]?c.throw||((s=c.return)&&s.call(c),0):c.next)&&!(s=s.call(c,i[1])).done)return s;switch(c=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,c=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(!(s=(s=t.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){t=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){t.label=i[1];break}if(6===i[0]&&t.label<s[1]){t.label=s[1],s=i;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(i);break}s[2]&&t.ops.pop(),t.trys.pop();continue}i=n.call(r,t)}catch(w){i=[6,w],c=0}finally{e=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,w])}}},b=this&&this.__values||function(r){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&r[n],e=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(z,"__esModule",{value:!0});var y=A("../LinkList/LinkList"),d=A("../Map/Map");function o(r,n,t){var e=this;if(void 0===r&&(r=[]),void 0===n&&(n=o.initSize),t=t||function(f){var i,w,E=0,T="";if("number"==typeof f)E=((E=Math.floor(f))<<5)-E,E&=E;else{T="string"!=typeof f?JSON.stringify(f):f;try{for(var M=b(T),O=M.next();!O.done;O=M.next())E=(E<<5)-E+O.value.charCodeAt(0),E&=E}catch(l){i={error:l}}finally{try{O&&!O.done&&(w=M.return)&&w.call(M)}finally{if(i)throw i.error}}}return E^E>>>16},0!=(n&n-1))throw new Error("initBucketNum must be 2 to the power of n");var c=0,s=[],p=Math.max(o.initSize,Math.min(o.maxSize,n));this.size=function(){return c},this.empty=function(){return 0===c},this.clear=function(){c=0,p=n,s=[]},this.forEach=function(f){var i=0;s.forEach(function(w){w.forEach(function(E){f(E,i++)})})};var v=function(f){if(!(f>=o.maxSize)){p=2*f;var i=[];s.forEach(function(w,E){if(!w.empty()){if(w instanceof y.default&&1===w.size()){var T=w.front(),M=T.key,O=T.value;i[t(M)&p-1]=new y.default([{key:M,value:O}])}else if(w instanceof d.default){var R=new y.default,U=new y.default;w.forEach(function(g){0==(t(g.key)&f)?R.pushBack(g):U.pushBack(g)}),R.size()>o.untreeifyThreshold?i[E]=new d.default(R):R.size()&&(i[E]=R),U.size()>o.untreeifyThreshold?i[E+f]=new d.default(U):U.size()&&(i[E+f]=U)}else{var l=new y.default,m=new y.default;w.forEach(function(g){0==(t(g.key)&f)?l.pushBack(g):m.pushBack(g)}),l.size()&&(i[E]=l),m.size()&&(i[E+f]=m)}s[E].clear()}}),s=i}};this.setElement=function(f,i){var w,E;if(null==f)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=i){var T=t(f)&p-1;if(s[T]){var M=s[T].size();if(s[T]instanceof y.default){try{for(var O=b(s[T]),R=O.next();!R.done;R=O.next()){var U=R.value;if(U.key===f)return void(U.value=i)}}catch(m){w={error:m}}finally{try{R&&!R.done&&(E=O.return)&&E.call(O)}finally{if(w)throw w.error}}s[T].pushBack({key:f,value:i}),s[T].size()>=o.treeifyThreshold&&(s[T]=new d.default(s[T]))}else s[T].setElement(f,i);var l=s[T].size();c+=l-M}else++c,s[T]=new y.default([{key:f,value:i}]);c>p*o.sigma&&v.call(this,p)}else this.eraseElementByKey(f)},this.getElementByKey=function(f){var i,w,E=t(f)&p-1;if(s[E]){if(s[E]instanceof d.default)return s[E].getElementByKey(f);try{for(var T=b(s[E]),M=T.next();!M.done;M=T.next()){var O=M.value;if(O.key===f)return O.value}}catch(R){i={error:R}}finally{try{M&&!M.done&&(w=T.return)&&w.call(T)}finally{if(i)throw i.error}}}},this.eraseElementByKey=function(f){var i,w,E=t(f)&p-1;if(s[E]){var T=s[E].size();if(s[E]instanceof d.default)s[E].eraseElementByKey(f),s[E].size()<=o.untreeifyThreshold&&(s[E]=new y.default(s[E]));else{var M=-1;try{for(var O=b(s[E]),R=O.next();!R.done;R=O.next())if(++M,R.value.key===f){s[E].eraseElementByPos(M);break}}catch(m){i={error:m}}finally{try{R&&!R.done&&(w=O.return)&&w.call(O)}finally{if(i)throw i.error}}}var l=s[E].size();c+=l-T}},this.find=function(f){var i,w,E=t(f)&p-1;if(!s[E])return!1;if(s[E]instanceof d.default)return s[E].find(f);try{for(var T=b(s[E]),M=T.next();!M.done;M=T.next())if(M.value.key===f)return!0}catch(R){i={error:R}}finally{try{M&&!M.done&&(w=T.return)&&w.call(T)}finally{if(i)throw i.error}}return!1},this[Symbol.iterator]=function(){return function(){var f,i,w,T,M,O;return _(this,function(R){switch(R.label){case 0:f=0,R.label=1;case 1:if(!(f<p))return[3,10];for(;f<p&&!s[f];)++f;if(f>=p)return[3,10];R.label=2;case 2:R.trys.push([2,7,8,9]),M=void 0,i=b(s[f]),w=i.next(),R.label=3;case 3:return w.done?[3,6]:[4,w.value];case 4:R.sent(),R.label=5;case 5:return w=i.next(),[3,3];case 6:return[3,9];case 7:return T=R.sent(),M={error:T},[3,9];case 8:try{w&&!w.done&&(O=i.return)&&O.call(i)}finally{if(M)throw M.error}return[7];case 9:return++f,[3,1];case 10:return[2]}})}()},r.forEach(function(f){return e.setElement(f.key,f.value)}),Object.freeze(this)}o.initSize=16,o.maxSize=1<<30,o.sigma=.75,o.treeifyThreshold=8,o.untreeifyThreshold=6,o.minTreeifySize=64,Object.freeze(o),z.default=o},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(A,K,z){"use strict";var _=this&&this.__generator||function(r,n){var e,c,s,p,t={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function v(i){return function(w){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,c&&(s=2&i[0]?c.return:i[0]?c.throw||((s=c.return)&&s.call(c),0):c.next)&&!(s=s.call(c,i[1])).done)return s;switch(c=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,c=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(!(s=(s=t.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){t=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){t.label=i[1];break}if(6===i[0]&&t.label<s[1]){t.label=s[1],s=i;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(i);break}s[2]&&t.ops.pop(),t.trys.pop();continue}i=n.call(r,t)}catch(w){i=[6,w],c=0}finally{e=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,w])}}},b=this&&this.__values||function(r){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&r[n],e=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(z,"__esModule",{value:!0});var y=A("../Set/Set"),d=A("../LinkList/LinkList");function o(r,n,t){var e=this;if(void 0===r&&(r=[]),void 0===n&&(n=o.initSize),t=t||function(f){var i=0,w="";if("number"==typeof f)i=((i=Math.floor(f))<<5)-i,i&=i;else{w="string"!=typeof f?JSON.stringify(f):f;for(var E=0;E<w.length;E++)i=(i<<5)-i+w.charCodeAt(E),i&=i}return i^i>>>16},0!=(n&n-1))throw new Error("initBucketNum must be 2 to the power of n");var c=0,s=[],p=Math.max(o.initSize,Math.min(o.maxSize,n));this.size=function(){return c},this.empty=function(){return 0===c},this.clear=function(){c=0,p=n,s=[]},this.forEach=function(f){var i=0;s.forEach(function(w){w.forEach(function(E){f(E,i++)})})};var v=function(f){if(!(f>=o.maxSize)){p=2*f;var i=[];s.forEach(function(w,E){if(!w.empty()){if(w instanceof d.default&&1===w.size()){var T=w.front();if(void 0===T)throw new Error("unknown error");i[t(T)&p-1]=new d.default([T])}else if(w instanceof y.default){var M=new d.default,O=new d.default;w.forEach(function(l){0==(t(l)&f)?M.pushBack(l):O.pushBack(l)}),M.size()>o.untreeifyThreshold?i[E]=new y.default(M):M.size()&&(i[E]=M),O.size()>o.untreeifyThreshold?i[E+f]=new y.default(O):O.size()&&(i[E+f]=O)}else{var R=new d.default,U=new d.default;w.forEach(function(l){0==(t(l)&f)?R.pushBack(l):U.pushBack(l)}),R.size()&&(i[E]=R),U.size()&&(i[E+f]=U)}s[E].clear()}}),s=i}};this.insert=function(f){if(null==f)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var i=t(f)&p-1;if(s[i]){var w=s[i].size();if(s[i]instanceof d.default){if(s[i].find(f))return;s[i].pushBack(f),s[i].size()>=o.treeifyThreshold&&(s[i]=new y.default(s[i]))}else s[i].insert(f);var E=s[i].size();c+=E-w}else s[i]=new d.default([f]),++c;c>p*o.sigma&&v.call(this,p)},this.eraseElementByValue=function(f){var i=t(f)&p-1;if(s[i]){var w=s[i].size();s[i].eraseElementByValue(f),s[i]instanceof y.default&&s[i].size()<=o.untreeifyThreshold&&(s[i]=new d.default(s[i]));var E=s[i].size();c+=E-w}},this.find=function(f){var i=t(f)&p-1;return!!s[i]&&s[i].find(f)},this[Symbol.iterator]=function(){return function(){var f,i,w,T,M,O;return _(this,function(R){switch(R.label){case 0:f=0,R.label=1;case 1:if(!(f<p))return[3,10];for(;f<p&&!s[f];)++f;if(f>=p)return[3,10];R.label=2;case 2:R.trys.push([2,7,8,9]),M=void 0,i=b(s[f]),w=i.next(),R.label=3;case 3:return w.done?[3,6]:[4,w.value];case 4:R.sent(),R.label=5;case 5:return w=i.next(),[3,3];case 6:return[3,9];case 7:return T=R.sent(),M={error:T},[3,9];case 8:try{w&&!w.done&&(O=i.return)&&O.call(i)}finally{if(M)throw M.error}return[7];case 9:return++f,[3,1];case 10:return[2]}})}()},r.forEach(function(f){return e.insert(f)}),Object.freeze(this)}o.initSize=16,o.maxSize=1<<30,o.sigma=.75,o.treeifyThreshold=8,o.untreeifyThreshold=6,o.minTreeifySize=64,Object.freeze(o),z.default=o},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(A,K,z){"use strict";var _=this&&this.__generator||function(d,o){var n,t,e,c,r={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(v){return function(f){return function(v){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,t&&(e=2&v[0]?t.return:v[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,v[1])).done)return e;switch(t=0,e&&(v=[2&v[0],e.value]),v[0]){case 0:case 1:e=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,t=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(!(e=(e=r.trys).length>0&&e[e.length-1])&&(6===v[0]||2===v[0])){r=0;continue}if(3===v[0]&&(!e||v[1]>e[0]&&v[1]<e[3])){r.label=v[1];break}if(6===v[0]&&r.label<e[1]){r.label=e[1],e=v;break}if(e&&r.label<e[2]){r.label=e[2],r.ops.push(v);break}e[2]&&r.ops.pop(),r.trys.pop();continue}v=o.call(d,r)}catch(f){v=[6,f],t=0}finally{n=e=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,f])}}};Object.defineProperty(z,"__esModule",{value:!0});var b=function(o){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=o};function y(d){var o=this;void 0===d&&(d=[]);var r=0,n=void 0,t=void 0;this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){n=t=void 0,r=0},this.front=function(){return null==n?void 0:n.value},this.back=function(){return null==t?void 0:t.value},this.forEach=function(e){for(var c=n,s=0;c;){if(void 0===c.value)throw new Error("unknown error");e(c.value,s++),c=c.next}},this.getElementByPos=function(e){if(e<0||e>=r)throw new Error("pos must more then 0 and less then the list length");for(var c=n;e--&&c;)c=c.next;if(!c||void 0===c.value)throw new Error("unknown error");return c.value},this.eraseElementByPos=function(e){if(e<0||e>=r)throw new Error("erase pos must more then 0 and less then the list length");if(0===e)this.popFront();else if(e===r-1)this.popBack();else{for(var c=n;e--;){if(!(null==c?void 0:c.next))throw new Error("unknown error");c=c.next}if(!c||!c.pre||!c.next)throw new Error("unknown error");var s=c.pre,p=c.next;p.pre=s,s.next=p,r>0&&--r}},this.eraseElementByValue=function(e){for(;n&&n.value===e;)this.popFront();for(;t&&t.value===e;)this.popBack();if(n)for(var c=n;c;){if(c.value===e){var s=c.pre,p=c.next;p&&(p.pre=s),s&&(s.next=p),r>0&&--r}c=c.next}},this.pushBack=function(e){if(null==e)throw new Error("you can't push null or undefined here");++r;var c=new b(e);t?(t.next=c,c.pre=t,t=c):n=t=c},this.popBack=function(){!t||(r>0&&--r,t&&(n===t?n=t=void 0:(t=t.pre)&&(t.next=void 0)))},this.setElementByPos=function(e,c){if(null==c)throw new Error("you can't set null or undefined here");if(e<0||e>=r)throw new Error("pos must more then 0 and less then the list length");for(var s=n;e--;){if(!s)throw new Error("unknown error");s=s.next}s&&(s.value=c)},this.insert=function(e,c,s){if(void 0===s&&(s=1),null==c)throw new Error("you can't insert null or undefined here");if(e<0||e>r)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(s<0)throw new Error("insert size must more than 0");if(0===e)for(;s--;)this.pushFront(c);else if(e===r)for(;s--;)this.pushBack(c);else{for(var p=n,v=1;v<e;++v){if(!(null==p?void 0:p.next))throw new Error("unknown error");p=null==p?void 0:p.next}if(!p)throw new Error("unknown error");var f=p.next;for(r+=s;s--;)p.next=new b(c),p.next.pre=p,p=p.next;p.next=f,f&&(f.pre=p)}},this.find=function(e){for(var c=n;c;){if(c.value===e)return!0;c=c.next}return!1},this.reverse=function(){for(var e=n,c=t,s=0;e&&c&&2*s<r;){var p=e.value;e.value=c.value,c.value=p,e=e.next,c=c.pre,++s}},this.unique=function(){for(var e=n;e;){for(var c=e;c&&c.next&&c.value===c.next.value;)c=c.next,r>0&&--r;e.next=c.next,e.next&&(e.next.pre=e),e=e.next}},this.sort=function(e){var c=[];this.forEach(function(p){c.push(p)}),c.sort(e);var s=n;c.forEach(function(p){s&&(s.value=p,s=s.next)})},this.pushFront=function(e){if(null==e)throw new Error("you can't push null or undefined here");++r;var c=new b(e);n?(c.next=n,n.pre=c,n=c):n=t=c},this.popFront=function(){!n||(r>0&&--r,n&&(n===t?n=t=void 0:(n=n.next)&&(n.pre=void 0)))},this.merge=function(e){var c=this,s=n;e.forEach(function(p){for(;s&&void 0!==s.value&&s.value<=p;)s=s.next;if(void 0===s)c.pushBack(p),s=t;else if(s===n)c.pushFront(p),s=n;else{++r;var v=s.pre;v&&(v.next=new b(p),v.next.pre=v,v.next.next=s,s&&(s.pre=v.next))}})},this[Symbol.iterator]=function(){return function(){var e;return _(this,function(c){switch(c.label){case 0:e=n,c.label=1;case 1:if(void 0===e)return[3,3];if(!e.value)throw new Error("unknown error");return[4,e.value];case 2:return c.sent(),e=e.next,[3,1];case 3:return[2]}})}()},d.forEach(function(e){return o.pushBack(e)}),Object.freeze(this)}Object.freeze(y),z.default=y},{}],30:[function(A,K,z){"use strict";var _=this&&this.__generator||function(o,r){var t,e,c,s,n={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return s={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function p(f){return function(i){return function(f){if(t)throw new TypeError("Generator is already executing.");for(;n;)try{if(t=1,e&&(c=2&f[0]?e.return:f[0]?e.throw||((c=e.return)&&c.call(e),0):e.next)&&!(c=c.call(e,f[1])).done)return c;switch(e=0,c&&(f=[2&f[0],c.value]),f[0]){case 0:case 1:c=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,e=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(!(c=(c=n.trys).length>0&&c[c.length-1])&&(6===f[0]||2===f[0])){n=0;continue}if(3===f[0]&&(!c||f[1]>c[0]&&f[1]<c[3])){n.label=f[1];break}if(6===f[0]&&n.label<c[1]){n.label=c[1],c=f;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(f);break}c[2]&&n.ops.pop(),n.trys.pop();continue}f=r.call(o,n)}catch(i){f=[6,i],e=0}finally{t=c=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,i])}}},b=this&&this.__values||function(o){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&o[r],t=0;if(n)return n.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&t>=o.length&&(o=void 0),{value:o&&o[t++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(z,"__esModule",{value:!0});var y=A("../Base/TreeNode");function d(o,r){var n=this;void 0===o&&(o=[]),r=r||function(l,m){return l<m?-1:l>m?1:0};var t=0,e=new y.default;e.color=y.default.TreeNodeColorType.black,this.size=function(){return t},this.empty=function(){return 0===t},this.clear=function(){t=0,e.key=e.value=void 0,e.leftChild=e.rightChild=e.brother=void 0};var c=function(l){if(!l||void 0===l.key)throw new Error("unknown error");return l.leftChild?c(l.leftChild):l},s=function(l){if(!l||void 0===l.key)throw new Error("unknown error");return l.rightChild?s(l.rightChild):l};this.front=function(){if(!this.empty()){var l=c(e);if(void 0===l.key||void 0===l.value)throw new Error("unknown error");return{key:l.key,value:l.value}}},this.back=function(){if(!this.empty()){var l=s(e);if(void 0===l.key||void 0===l.value)throw new Error("unknown error");return{key:l.key,value:l.value}}},this.forEach=function(l){var m,g,B=0;try{for(var H=b(this),q=H.next();!q.done;q=H.next())l(q.value,B++)}catch(S){m={error:S}}finally{try{q&&!q.done&&(g=H.return)&&g.call(H)}finally{if(m)throw m.error}}},this.getElementByPos=function(l){var m,g;if(l<0||l>=this.size())throw new Error("pos must more than 0 and less than set's size");var B=0;try{for(var H=b(this),q=H.next();!q.done;q=H.next()){if(B===l)return q.value;++B}}catch(S){m={error:S}}finally{try{q&&!q.done&&(g=H.return)&&g.call(H)}finally{if(m)throw m.error}}throw new Error("unknown Error")};var p=function(l,m){if(l&&void 0!==l.key&&void 0!==l.value){var g=r(l.key,m);return 0===g?{key:l.key,value:l.value}:g<0?p(l.rightChild,m):p(l.leftChild,m)||{key:l.key,value:l.value}}};this.lowerBound=function(l){return p(e,l)};var v=function(l,m){if(l&&void 0!==l.key&&void 0!==l.value)return r(l.key,m)<=0?v(l.rightChild,m):v(l.leftChild,m)||{key:l.key,value:l.value}};this.upperBound=function(l){return v(e,l)};var f=function(l,m){if(l&&void 0!==l.key&&void 0!==l.value){var g=r(l.key,m);return 0===g?{key:l.key,value:l.value}:g>0?f(l.leftChild,m):f(l.rightChild,m)||{key:l.key,value:l.value}}};this.reverseLowerBound=function(l){return f(e,l)};var i=function(l,m){if(l&&void 0!==l.key&&void 0!==l.value)return r(l.key,m)>=0?i(l.leftChild,m):i(l.rightChild,m)||{key:l.key,value:l.value}};this.reverseUpperBound=function(l){return i(e,l)};var w=function(l){var m=l.parent;if(!m){if(l===e)return;throw new Error("unknown error")}if(l.color!==y.default.TreeNodeColorType.red){var g=l.brother;if(!g)throw new Error("unknown error");if(l===m.leftChild)if(g.color===y.default.TreeNodeColorType.red){g.color=y.default.TreeNodeColorType.black,m.color=y.default.TreeNodeColorType.red;var B=m.rotateLeft();e===m&&(e=B),w(l)}else g.color===y.default.TreeNodeColorType.black&&(g.rightChild&&g.rightChild.color===y.default.TreeNodeColorType.red?(g.color=m.color,m.color=y.default.TreeNodeColorType.black,g.rightChild&&(g.rightChild.color=y.default.TreeNodeColorType.black),B=m.rotateLeft(),e===m&&(e=B),l.color=y.default.TreeNodeColorType.black):g.rightChild&&g.rightChild.color!==y.default.TreeNodeColorType.black||!g.leftChild||g.leftChild.color!==y.default.TreeNodeColorType.red?(!g.leftChild||g.leftChild.color===y.default.TreeNodeColorType.black)&&(!g.rightChild||g.rightChild.color===y.default.TreeNodeColorType.black)&&(g.color=y.default.TreeNodeColorType.red,w(m)):(g.color=y.default.TreeNodeColorType.red,g.leftChild&&(g.leftChild.color=y.default.TreeNodeColorType.black),B=g.rotateRight(),e===g&&(e=B),w(l)));else l===m.rightChild&&(g.color===y.default.TreeNodeColorType.red?(g.color=y.default.TreeNodeColorType.black,m.color=y.default.TreeNodeColorType.red,B=m.rotateRight(),e===m&&(e=B),w(l)):g.color===y.default.TreeNodeColorType.black&&(g.leftChild&&g.leftChild.color===y.default.TreeNodeColorType.red?(g.color=m.color,m.color=y.default.TreeNodeColorType.black,g.leftChild&&(g.leftChild.color=y.default.TreeNodeColorType.black),B=m.rotateRight(),e===m&&(e=B),l.color=y.default.TreeNodeColorType.black):g.leftChild&&g.leftChild.color!==y.default.TreeNodeColorType.black||!g.rightChild||g.rightChild.color!==y.default.TreeNodeColorType.red?(!g.leftChild||g.leftChild.color===y.default.TreeNodeColorType.black)&&(!g.rightChild||g.rightChild.color===y.default.TreeNodeColorType.black)&&(g.color=y.default.TreeNodeColorType.red,w(m)):(g.color=y.default.TreeNodeColorType.red,g.rightChild&&(g.rightChild.color=y.default.TreeNodeColorType.black),B=g.rotateLeft(),e===g&&(e=B),w(l))))}else l.color=y.default.TreeNodeColorType.black},E=function(l){for(var m=l;m.leftChild||m.rightChild;){if(m.rightChild){m=c(m.rightChild);var g=l.key;l.key=m.key,m.key=g;var B=l.value;l.value=m.value,m.value=B,l=m}m.leftChild&&(m=s(m.leftChild),g=l.key,l.key=m.key,m.key=g,B=l.value,l.value=m.value,m.value=B,l=m)}w(m),m&&m.remove(),--t,e.color=y.default.TreeNodeColorType.black},T=function(l,m){return!(!l||void 0===l.key)&&(!(!T(l.leftChild,m)&&!m(l))||T(l.rightChild,m))};this.eraseElementByPos=function(l){if(l<0||l>=t)throw new Error("pos must more than 0 and less than set's size");var m=0;T(e,function(g){return l===m?(E(g),!0):(++m,!1)})},this.eraseElementByKey=function(l){if(!this.empty()){var m=R(e,l);void 0===m||void 0===m.key||0!==r(m.key,l)||E(m)}};var M=function(l,m){if(!l||void 0===l.key)throw new Error("unknown error");var g=r(m,l.key);return g<0?l.leftChild?M(l.leftChild,m):(l.leftChild=new y.default,l.leftChild.parent=l,l.leftChild.brother=l.rightChild,l.rightChild&&(l.rightChild.brother=l.leftChild),l.leftChild):g>0?l.rightChild?M(l.rightChild,m):(l.rightChild=new y.default,l.rightChild.parent=l,l.rightChild.brother=l.leftChild,l.leftChild&&(l.leftChild.brother=l.rightChild),l.rightChild):l},O=function(l){var m=l.parent;if(!m){if(l===e)return;throw new Error("unknown error")}if(m.color!==y.default.TreeNodeColorType.black&&m.color===y.default.TreeNodeColorType.red){var g=m.brother,B=m.parent;if(!B)throw new Error("unknown error");if(g&&g.color===y.default.TreeNodeColorType.red)g.color=m.color=y.default.TreeNodeColorType.black,B.color=y.default.TreeNodeColorType.red,O(B);else if(!g||g.color===y.default.TreeNodeColorType.black)if(m===B.leftChild)if(l===m.leftChild){m.color=y.default.TreeNodeColorType.black,B.color=y.default.TreeNodeColorType.red;var H=B.rotateRight();B===e&&(e=H)}else l===m.rightChild&&(H=m.rotateLeft(),B===e&&(e=H),O(m));else m===B.rightChild&&(l===m.leftChild?(H=m.rotateRight(),B===e&&(e=H),O(m)):l===m.rightChild&&(m.color=y.default.TreeNodeColorType.black,B.color=y.default.TreeNodeColorType.red,H=B.rotateLeft(),B===e&&(e=H)))}};this.setElement=function(l,m){if(null==l)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=m){if(this.empty())return++t,e.key=l,e.value=m,void(e.color=y.default.TreeNodeColorType.black);var g=M(e,l);void 0===g.key||0!==r(g.key,l)?(++t,g.key=l,g.value=m,O(g),e.color=y.default.TreeNodeColorType.black):g.value=m}else this.eraseElementByKey(l)};var R=function(l,m){if(l&&void 0!==l.key){var g=r(m,l.key);return g<0?R(l.leftChild,m):g>0?R(l.rightChild,m):l}};this.find=function(l){return!!R(e,l)},this.getElementByKey=function(l){var m=R(e,l);if(void 0===(null==m?void 0:m.key)||void 0===(null==m?void 0:m.value))throw new Error("unknown error");return m.value},this.union=function(l){var m=this;l.forEach(function(g){return m.setElement(g.key,g.value)})},this.getHeight=function(){if(this.empty())return 0;var l=function(m){return m?Math.max(l(m.leftChild),l(m.rightChild))+1:1};return l(e)};var U=function(l){return _(this,function(m){switch(m.label){case 0:return l&&void 0!==l.key&&void 0!==l.value?[5,b(U(l.leftChild))]:[2];case 1:return m.sent(),[4,{key:l.key,value:l.value}];case 2:return m.sent(),[5,b(U(l.rightChild))];case 3:return m.sent(),[2]}})};this[Symbol.iterator]=function(){return U(e)},o.forEach(function(l){return n.setElement(l.key,l.value)}),Object.freeze(this)}Object.freeze(d),z.default=d},{"../Base/TreeNode":25}],31:[function(A,K,z){"use strict";function _(b,y){void 0===b&&(b=[]),y=y||function(t,e){return t>e?-1:t<e?1:0};var d=[];b.forEach(function(t){return d.push(t)});var o=d.length,r=function(t,e){if(t<0||t>=o)throw new Error("unknown error");if(e<0||e>=o)throw new Error("unknown error");var c=d[t];d[t]=d[e],d[e]=c},n=function(t){if(t<0||t>=o)throw new Error("unknown error");var e=2*t+1,c=2*t+2;e<o&&y(d[t],d[e])>0&&r(t,e),c<o&&y(d[t],d[c])>0&&r(t,c)};(function(){for(var t=Math.floor((o-1)/2);t>=0;--t)for(var e=t,c=2*e+1;c<o;){var p=c+1,v=c;if(p<o&&y(d[c],d[p])>0&&(v=p),y(d[e],d[v])<=0)break;r(e,v),c=2*(e=v)+1}})(),this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,d.length=0},this.push=function(t){if(d.push(t),1!=++o)for(var e=o-1;e>0;){var c=Math.floor((e-1)/2);if(y(d[c],t)<=0)break;n(c),e=c}},this.pop=function(){if(!this.empty()){if(1===this.size())return void--o;var t=d[o-1];--o;for(var e=0;e<this.size();){var c=2*e+1,s=2*e+2;if(c>=this.size())break;var p=c;if(s<this.size()&&y(d[c],d[s])>0&&(p=s),y(d[p],t)>=0)break;d[e]=d[p],e=p}d[e]=t}},this.top=function(){return d[0]},Object.freeze(this)}Object.defineProperty(z,"__esModule",{value:!0}),Object.freeze(_),z.default=_},{}],32:[function(A,K,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var _=A("../LinkList/LinkList");function b(y){void 0===y&&(y=[]);var d=new _.default(y);this.size=function(){return d.size()},this.empty=function(){return d.empty()},this.clear=function(){d.clear()},this.push=function(o){d.pushBack(o)},this.pop=function(){d.popFront()},this.front=function(){return d.front()},Object.freeze(this)}Object.freeze(b),z.default=b},{"../LinkList/LinkList":29}],33:[function(A,K,z){"use strict";var _=this&&this.__generator||function(o,r){var t,e,c,s,n={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return s={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function p(f){return function(i){return function(f){if(t)throw new TypeError("Generator is already executing.");for(;n;)try{if(t=1,e&&(c=2&f[0]?e.return:f[0]?e.throw||((c=e.return)&&c.call(e),0):e.next)&&!(c=c.call(e,f[1])).done)return c;switch(e=0,c&&(f=[2&f[0],c.value]),f[0]){case 0:case 1:c=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,e=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(!(c=(c=n.trys).length>0&&c[c.length-1])&&(6===f[0]||2===f[0])){n=0;continue}if(3===f[0]&&(!c||f[1]>c[0]&&f[1]<c[3])){n.label=f[1];break}if(6===f[0]&&n.label<c[1]){n.label=c[1],c=f;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(f);break}c[2]&&n.ops.pop(),n.trys.pop();continue}f=r.call(o,n)}catch(i){f=[6,i],e=0}finally{t=c=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,i])}}},b=this&&this.__values||function(o){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&o[r],t=0;if(n)return n.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&t>=o.length&&(o=void 0),{value:o&&o[t++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(z,"__esModule",{value:!0});var y=A("../Base/TreeNode");function d(o,r){var n=this;void 0===o&&(o=[]),r=r||function(l,m){return l<m?-1:l>m?1:0};var t=0,e=new y.default;e.color=y.default.TreeNodeColorType.black,this.size=function(){return t},this.empty=function(){return 0===t},this.clear=function(){t=0,e.key=void 0,e.leftChild=e.rightChild=e.brother=e.parent=void 0,e.color=y.default.TreeNodeColorType.black};var c=function(l){if(!l||void 0===l.key)throw new Error("unknown error");return l.leftChild?c(l.leftChild):l},s=function(l){if(!l||void 0===l.key)throw new Error("unknown error");return l.rightChild?s(l.rightChild):l};this.front=function(){if(!this.empty())return c(e).key},this.back=function(){if(!this.empty())return s(e).key},this.forEach=function(l){var m,g,B=0;try{for(var H=b(this),q=H.next();!q.done;q=H.next())l(q.value,B++)}catch(S){m={error:S}}finally{try{q&&!q.done&&(g=H.return)&&g.call(H)}finally{if(m)throw m.error}}},this.getElementByPos=function(l){var m,g;if(l<0||l>=this.size())throw new Error("pos must more than 0 and less than set's size");var B=0;try{for(var H=b(this),q=H.next();!q.done;q=H.next()){if(B===l)return q.value;++B}}catch(S){m={error:S}}finally{try{q&&!q.done&&(g=H.return)&&g.call(H)}finally{if(m)throw m.error}}throw new Error("unknown error")};var p=function(l){var m=l.parent;if(!m){if(l===e)return;throw new Error("unknown error")}if(l.color!==y.default.TreeNodeColorType.red){var g=l.brother;if(!g)throw new Error("unknown error");if(l===m.leftChild)if(g.color===y.default.TreeNodeColorType.red){g.color=y.default.TreeNodeColorType.black,m.color=y.default.TreeNodeColorType.red;var B=m.rotateLeft();e===m&&(e=B),p(l)}else g.color===y.default.TreeNodeColorType.black&&(g.rightChild&&g.rightChild.color===y.default.TreeNodeColorType.red?(g.color=m.color,m.color=y.default.TreeNodeColorType.black,g.rightChild&&(g.rightChild.color=y.default.TreeNodeColorType.black),B=m.rotateLeft(),e===m&&(e=B),l.color=y.default.TreeNodeColorType.black):g.rightChild&&g.rightChild.color!==y.default.TreeNodeColorType.black||!g.leftChild||g.leftChild.color!==y.default.TreeNodeColorType.red?(!g.leftChild||g.leftChild.color===y.default.TreeNodeColorType.black)&&(!g.rightChild||g.rightChild.color===y.default.TreeNodeColorType.black)&&(g.color=y.default.TreeNodeColorType.red,p(m)):(g.color=y.default.TreeNodeColorType.red,g.leftChild&&(g.leftChild.color=y.default.TreeNodeColorType.black),B=g.rotateRight(),e===g&&(e=B),p(l)));else l===m.rightChild&&(g.color===y.default.TreeNodeColorType.red?(g.color=y.default.TreeNodeColorType.black,m.color=y.default.TreeNodeColorType.red,B=m.rotateRight(),e===m&&(e=B),p(l)):g.color===y.default.TreeNodeColorType.black&&(g.leftChild&&g.leftChild.color===y.default.TreeNodeColorType.red?(g.color=m.color,m.color=y.default.TreeNodeColorType.black,g.leftChild&&(g.leftChild.color=y.default.TreeNodeColorType.black),B=m.rotateRight(),e===m&&(e=B),l.color=y.default.TreeNodeColorType.black):g.leftChild&&g.leftChild.color!==y.default.TreeNodeColorType.black||!g.rightChild||g.rightChild.color!==y.default.TreeNodeColorType.red?(!g.leftChild||g.leftChild.color===y.default.TreeNodeColorType.black)&&(!g.rightChild||g.rightChild.color===y.default.TreeNodeColorType.black)&&(g.color=y.default.TreeNodeColorType.red,p(m)):(g.color=y.default.TreeNodeColorType.red,g.rightChild&&(g.rightChild.color=y.default.TreeNodeColorType.black),B=g.rotateLeft(),e===g&&(e=B),p(l))))}else l.color=y.default.TreeNodeColorType.black},v=function(l){for(var m=l;m.leftChild||m.rightChild;){if(m.rightChild){m=c(m.rightChild);var g=l.key;l.key=m.key,m.key=g,l=m}m.leftChild&&(m=s(m.leftChild),g=l.key,l.key=m.key,m.key=g,l=m)}p(m),m&&m.remove(),--t,e.color=y.default.TreeNodeColorType.black},f=function(l,m){return!(!l||void 0===l.key)&&(!(!f(l.leftChild,m)&&!m(l))||f(l.rightChild,m))};this.eraseElementByPos=function(l){if(l<0||l>=t)throw new Error("pos must more than 0 and less than set's size");var m=0;f(e,function(g){return l===m?(v(g),!0):(++m,!1)})},this.eraseElementByValue=function(l){if(!this.empty()){var m=E(e,l);void 0===m||void 0===m.key||0!==r(m.key,l)||v(m)}};var i=function(l,m){if(!l||void 0===l.key)throw new Error("unknown error");var g=r(m,l.key);return g<0?l.leftChild?i(l.leftChild,m):(l.leftChild=new y.default,l.leftChild.parent=l,l.leftChild.brother=l.rightChild,l.rightChild&&(l.rightChild.brother=l.leftChild),l.leftChild):g>0?l.rightChild?i(l.rightChild,m):(l.rightChild=new y.default,l.rightChild.parent=l,l.rightChild.brother=l.leftChild,l.leftChild&&(l.leftChild.brother=l.rightChild),l.rightChild):l},w=function(l){var m=l.parent;if(!m){if(l===e)return;throw new Error("unknown error")}if(m.color!==y.default.TreeNodeColorType.black&&m.color===y.default.TreeNodeColorType.red){var g=m.brother,B=m.parent;if(!B)throw new Error("unknown error");if(g&&g.color===y.default.TreeNodeColorType.red)g.color=m.color=y.default.TreeNodeColorType.black,B.color=y.default.TreeNodeColorType.red,w(B);else if(!g||g.color===y.default.TreeNodeColorType.black)if(m===B.leftChild)if(l===m.leftChild){m.color=y.default.TreeNodeColorType.black,B.color=y.default.TreeNodeColorType.red;var H=B.rotateRight();B===e&&(e=H)}else l===m.rightChild&&(H=m.rotateLeft(),B===e&&(e=H),w(m));else m===B.rightChild&&(l===m.leftChild?(H=m.rotateRight(),B===e&&(e=H),w(m)):l===m.rightChild&&(m.color=y.default.TreeNodeColorType.black,B.color=y.default.TreeNodeColorType.red,H=B.rotateLeft(),B===e&&(e=H)))}};this.insert=function(l){if(null==l)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++t,e.key=l,void(e.color=y.default.TreeNodeColorType.black);var m=i(e,l);void 0!==m.key&&0===r(m.key,l)||(++t,m.key=l,w(m),e.color=y.default.TreeNodeColorType.black)};var E=function(l,m){if(l&&void 0!==l.key){var g=r(m,l.key);return g<0?E(l.leftChild,m):g>0?E(l.rightChild,m):l}};this.find=function(l){var m=E(e,l);return void 0!==m&&void 0!==m.key&&0===r(m.key,l)};var T=function(l,m){if(l&&void 0!==l.key){var g=r(l.key,m);return 0===g?l.key:g<0?T(l.rightChild,m):T(l.leftChild,m)||l.key}};this.lowerBound=function(l){return T(e,l)};var M=function(l,m){if(l&&void 0!==l.key)return r(l.key,m)<=0?M(l.rightChild,m):M(l.leftChild,m)||l.key};this.upperBound=function(l){return M(e,l)};var O=function(l,m){if(l&&void 0!==l.key){var g=r(l.key,m);return 0===g?l.key:g>0?O(l.leftChild,m):O(l.rightChild,m)||l.key}};this.reverseLowerBound=function(l){return O(e,l)};var R=function(l,m){if(l&&void 0!==l.key)return r(l.key,m)>=0?R(l.leftChild,m):R(l.rightChild,m)||l.key};this.reverseUpperBound=function(l){return R(e,l)},this.union=function(l){var m=this;l.forEach(function(g){return m.insert(g)})},this.getHeight=function(){if(this.empty())return 0;var l=function(m){return m?Math.max(l(m.leftChild),l(m.rightChild))+1:1};return l(e)};var U=function(l){return _(this,function(m){switch(m.label){case 0:return l&&void 0!==l.key?[5,b(U(l.leftChild))]:[2];case 1:return m.sent(),[4,l.key];case 2:return m.sent(),[5,b(U(l.rightChild))];case 3:return m.sent(),[2]}})};this[Symbol.iterator]=function(){return U(e)},o.forEach(function(l){return n.insert(l)}),Object.freeze(this)}Object.freeze(d),z.default=d},{"../Base/TreeNode":25}],34:[function(A,K,z){"use strict";function _(b){var y=this;void 0===b&&(b=[]);var d=0,o=[];this.size=function(){return d},this.empty=function(){return 0===d},this.clear=function(){d=0,o.length=0},this.push=function(r){o.push(r),++d},this.pop=function(){o.pop(),d>0&&--d},this.top=function(){return o[d-1]},b.forEach(function(r){return y.push(r)}),Object.freeze(this)}Object.defineProperty(z,"__esModule",{value:!0}),Object.freeze(_),z.default=_},{}],35:[function(A,K,z){"use strict";var _=this&&this.__generator||function(r,n){var e,c,s,p,t={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function v(i){return function(w){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,c&&(s=2&i[0]?c.return:i[0]?c.throw||((s=c.return)&&s.call(c),0):c.next)&&!(s=s.call(c,i[1])).done)return s;switch(c=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return t.label++,{value:i[1],done:!1};case 5:t.label++,c=i[1],i=[0];continue;case 7:i=t.ops.pop(),t.trys.pop();continue;default:if(!(s=(s=t.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){t=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){t.label=i[1];break}if(6===i[0]&&t.label<s[1]){t.label=s[1],s=i;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(i);break}s[2]&&t.ops.pop(),t.trys.pop();continue}i=n.call(r,t)}catch(w){i=[6,w],c=0}finally{e=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,w])}}},b=this&&this.__read||function(r,n){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var c,p,e=t.call(r),s=[];try{for(;(void 0===n||n-- >0)&&!(c=e.next()).done;)s.push(c.value)}catch(v){p={error:v}}finally{try{c&&!c.done&&(t=e.return)&&t.call(e)}finally{if(p)throw p.error}}return s},y=this&&this.__spreadArray||function(r,n,t){if(t||2===arguments.length)for(var s,e=0,c=n.length;e<c;e++)(s||!(e in n))&&(s||(s=Array.prototype.slice.call(n,0,e)),s[e]=n[e]);return r.concat(s||Array.prototype.slice.call(n))},d=this&&this.__values||function(r){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&r[n],e=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};function o(r){var n=this;void 0===r&&(r=[]);var t=0,e=[];this.size=function(){return t},this.empty=function(){return 0===t},this.clear=function(){t=0,e.length=0},this.front=function(){if(!this.empty())return e[0]},this.back=function(){if(!this.empty())return e[t-1]},this.forEach=function(c){e.forEach(c)},this.getElementByPos=function(c){if(c<0||c>=t)throw new Error("pos must more than 0 and less than vector's size");return e[c]},this.eraseElementByPos=function(c){if(c<0||c>=t)throw new Error("pos must more than 0 and less than vector's size");for(var s=c;s<t-1;++s)e[s]=e[s+1];this.popBack()},this.eraseElementByValue=function(c){var s=[];this.forEach(function(v){v!==c&&s.push(v)}),s.forEach(function(v,f){e[f]=v});for(var p=s.length;t>p;)this.popBack()},this.pushBack=function(c){e.push(c),++t},this.popBack=function(){e.pop(),t>0&&--t},this.setElementByPos=function(c,s){if(c<0||c>=t)throw new Error("pos must more than 0 and less than vector's size");e[c]=s},this.insert=function(c,s,p){if(void 0===p&&(p=1),c<0||c>t)throw new Error("pos must more than 0 and less than or equal to vector's size");e.splice.apply(e,y([c,0],b(new Array(p).fill(s)),!1)),t+=p},this.find=function(c){return e.includes(c)},this.reverse=function(){e.reverse()},this.unique=function(){var c,s=[];this.forEach(function(v,f){(0===f||v!==c)&&(s.push(v),c=v)}),s.forEach(function(v,f){e[f]=v});for(var p=s.length;t>p;)this.popBack()},this.sort=function(c){e.sort(c)},this[Symbol.iterator]=function(){return function(){return _(this,function(c){switch(c.label){case 0:return[5,d(e)];case 1:return[2,c.sent()]}})}()},r.forEach(function(c){return n.pushBack(c)}),Object.freeze(this)}Object.defineProperty(z,"__esModule",{value:!0}),Object.freeze(o),z.default=o},{}],36:[function(A,K,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.HashMap=z.HashSet=z.Map=z.Set=z.PriorityQueue=z.Deque=z.LinkList=z.Queue=z.Stack=z.Vector=void 0;var _=A("./Vector/Vector");z.Vector=_.default;var b=A("./Stack/Stack");z.Stack=b.default;var y=A("./Queue/Queue");z.Queue=y.default;var d=A("./LinkList/LinkList");z.LinkList=d.default;var o=A("./Deque/Deque");z.Deque=o.default;var r=A("./PriorityQueue/PriorityQueue");z.PriorityQueue=r.default;var n=A("./Set/Set");z.Set=n.default;var t=A("./Map/Map");z.Map=t.default;var e=A("./HashSet/HashSet");z.HashSet=e.default;var c=A("./HashMap/HashMap");z.HashMap=c.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(A,K,z){"use strict";const _=A("yallist"),b=Symbol("max"),y=Symbol("length"),d=Symbol("lengthCalculator"),o=Symbol("allowStale"),r=Symbol("maxAge"),n=Symbol("dispose"),t=Symbol("noDisposeOnSet"),e=Symbol("lruList"),c=Symbol("cache"),s=Symbol("updateAgeOnGet"),p=()=>1;const f=(O,R,U)=>{const l=O[c].get(R);if(l){const m=l.value;if(i(O,m)){if(E(O,l),!O[o])return}else U&&(O[s]&&(l.value.now=Date.now()),O[e].unshiftNode(l));return m.value}},i=(O,R)=>{if(!R||!R.maxAge&&!O[r])return!1;const U=Date.now()-R.now;return R.maxAge?U>R.maxAge:O[r]&&U>O[r]},w=O=>{if(O[y]>O[b])for(let R=O[e].tail;O[y]>O[b]&&null!==R;){const U=R.prev;E(O,R),R=U}},E=(O,R)=>{if(R){const U=R.value;O[n]&&O[n](U.key,U.value),O[y]-=U.length,O[c].delete(U.key),O[e].removeNode(R)}};class T{constructor(R,U,l,m,g){this.key=R,this.value=U,this.length=l,this.now=m,this.maxAge=g||0}}const M=(O,R,U,l)=>{let m=U.value;i(O,m)&&(E(O,U),O[o]||(m=void 0)),m&&R.call(l,m.value,m.key,O)};K.exports=class{constructor(R){if("number"==typeof R&&(R={max:R}),R||(R={}),R.max&&("number"!=typeof R.max||R.max<0))throw new TypeError("max must be a non-negative number");this[b]=R.max||1/0;const l=R.length||p;if(this[d]="function"!=typeof l?p:l,this[o]=R.stale||!1,R.maxAge&&"number"!=typeof R.maxAge)throw new TypeError("maxAge must be a number");this[r]=R.maxAge||0,this[n]=R.dispose,this[t]=R.noDisposeOnSet||!1,this[s]=R.updateAgeOnGet||!1,this.reset()}set max(R){if("number"!=typeof R||R<0)throw new TypeError("max must be a non-negative number");this[b]=R||1/0,w(this)}get max(){return this[b]}set allowStale(R){this[o]=!!R}get allowStale(){return this[o]}set maxAge(R){if("number"!=typeof R)throw new TypeError("maxAge must be a non-negative number");this[r]=R,w(this)}get maxAge(){return this[r]}set lengthCalculator(R){"function"!=typeof R&&(R=p),R!==this[d]&&(this[d]=R,this[y]=0,this[e].forEach(U=>{U.length=this[d](U.value,U.key),this[y]+=U.length})),w(this)}get lengthCalculator(){return this[d]}get length(){return this[y]}get itemCount(){return this[e].length}rforEach(R,U){U=U||this;for(let l=this[e].tail;null!==l;){const m=l.prev;M(this,R,l,U),l=m}}forEach(R,U){U=U||this;for(let l=this[e].head;null!==l;){const m=l.next;M(this,R,l,U),l=m}}keys(){return this[e].toArray().map(R=>R.key)}values(){return this[e].toArray().map(R=>R.value)}reset(){this[n]&&this[e]&&this[e].length&&this[e].forEach(R=>this[n](R.key,R.value)),this[c]=new Map,this[e]=new _,this[y]=0}dump(){return this[e].map(R=>!i(this,R)&&{k:R.key,v:R.value,e:R.now+(R.maxAge||0)}).toArray().filter(R=>R)}dumpLru(){return this[e]}set(R,U,l){if((l=l||this[r])&&"number"!=typeof l)throw new TypeError("maxAge must be a number");const m=l?Date.now():0,g=this[d](U,R);if(this[c].has(R)){if(g>this[b])return E(this,this[c].get(R)),!1;const q=this[c].get(R).value;return this[n]&&(this[t]||this[n](R,q.value)),q.now=m,q.maxAge=l,q.value=U,this[y]+=g-q.length,q.length=g,this.get(R),w(this),!0}const B=new T(R,U,g,m,l);return B.length>this[b]?(this[n]&&this[n](R,U),!1):(this[y]+=B.length,this[e].unshift(B),this[c].set(R,this[e].head),w(this),!0)}has(R){if(!this[c].has(R))return!1;const U=this[c].get(R).value;return!i(this,U)}get(R){return f(this,R,!0)}peek(R){return f(this,R,!1)}pop(){const R=this[e].tail;return R?(E(this,R),R.value):null}del(R){E(this,this[c].get(R))}load(R){this.reset();const U=Date.now();for(let l=R.length-1;l>=0;l--){const m=R[l],g=m.e||0;if(0===g)this.set(m.k,m.v);else{const B=g-U;B>0&&this.set(m.k,m.v,B)}}}prune(){this[c].forEach((R,U)=>f(this,U,!1))}}},{yallist:83}],38:[function(A,K,z){(function(_){(function(){const b=K.exports;b.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},b.codes={};for(const d in b.types)b.codes[b.types[d]]=d;b.CMD_SHIFT=4,b.CMD_MASK=240,b.DUP_MASK=8,b.QOS_MASK=3,b.QOS_SHIFT=1,b.RETAIN_MASK=1,b.VARBYTEINT_MASK=127,b.VARBYTEINT_FIN_MASK=128,b.VARBYTEINT_MAX=268435455,b.SESSIONPRESENT_MASK=1,b.SESSIONPRESENT_HEADER=_.from([b.SESSIONPRESENT_MASK]),b.CONNACK_HEADER=_.from([b.codes.connack<<b.CMD_SHIFT]),b.USERNAME_MASK=128,b.PASSWORD_MASK=64,b.WILL_RETAIN_MASK=32,b.WILL_QOS_MASK=24,b.WILL_QOS_SHIFT=3,b.WILL_FLAG_MASK=4,b.CLEAN_SESSION_MASK=2,b.CONNECT_HEADER=_.from([b.codes.connect<<b.CMD_SHIFT]),b.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},b.propertiesCodes={};for(const d in b.properties)b.propertiesCodes[b.properties[d]]=d;function y(d){return[0,1,2].map(o=>[0,1].map(r=>[0,1].map(n=>{const t=_.alloc(1);return t.writeUInt8(b.codes[d]<<b.CMD_SHIFT|(r?b.DUP_MASK:0)|o<<b.QOS_SHIFT|n,0,!0),t})))}b.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},b.PUBLISH_HEADER=y("publish"),b.SUBSCRIBE_HEADER=y("subscribe"),b.SUBSCRIBE_OPTIONS_QOS_MASK=3,b.SUBSCRIBE_OPTIONS_NL_MASK=1,b.SUBSCRIBE_OPTIONS_NL_SHIFT=2,b.SUBSCRIBE_OPTIONS_RAP_MASK=1,b.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,b.SUBSCRIBE_OPTIONS_RH_MASK=3,b.SUBSCRIBE_OPTIONS_RH_SHIFT=4,b.SUBSCRIBE_OPTIONS_RH=[0,16,32],b.SUBSCRIBE_OPTIONS_NL=4,b.SUBSCRIBE_OPTIONS_RAP=8,b.SUBSCRIBE_OPTIONS_QOS=[0,1,2],b.UNSUBSCRIBE_HEADER=y("unsubscribe"),b.ACKS={unsuback:y("unsuback"),puback:y("puback"),pubcomp:y("pubcomp"),pubrel:y("pubrel"),pubrec:y("pubrec")},b.SUBACK_HEADER=_.from([b.codes.suback<<b.CMD_SHIFT]),b.VERSION3=_.from([3]),b.VERSION4=_.from([4]),b.VERSION5=_.from([5]),b.VERSION131=_.from([131]),b.VERSION132=_.from([132]),b.QOS=[0,1,2].map(d=>_.from([d])),b.EMPTY={pingreq:_.from([b.codes.pingreq<<4,0]),pingresp:_.from([b.codes.pingresp<<4,0]),disconnect:_.from([b.codes.disconnect<<4,0])}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],39:[function(A,K,z){(function(_){(function(){const b=A("./writeToStream"),y=A("events");class o extends y{constructor(){super(),this._array=new Array(20),this._i=0}write(n){return this._array[this._i++]=n,!0}concat(){let n=0;const t=new Array(this._array.length),e=this._array;let s,c=0;for(s=0;s<e.length&&void 0!==e[s];s++)t[s]="string"!=typeof e[s]?e[s].length:_.byteLength(e[s]),n+=t[s];const p=_.allocUnsafe(n);for(s=0;s<e.length&&void 0!==e[s];s++)"string"!=typeof e[s]?(e[s].copy(p,c),c+=t[s]):(p.write(e[s],c),c+=t[s]);return p}}K.exports=function(r,n){const t=new o;return b(r,t,n),t.concat()}}).call(this)}).call(this,A("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(A,K,z){z.parser=A("./parser").parser,z.generate=A("./generate"),z.writeToStream=A("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(A,K,z){(function(_){(function(){const y={},d=_.isBuffer(_.from([1,2]).subarray(0,1));function o(e){const c=_.allocUnsafe(2);return c.writeUInt8(e>>8,0),c.writeUInt8(255&e,1),c}K.exports={cache:y,generateCache:function(){for(let e=0;e<65536;e++)y[e]=o(e)},generateNumber:o,genBufVariableByteInt:function(e){let s=0,p=0;const v=_.allocUnsafe(4);do{s=e%128|0,(e=e/128|0)>0&&(s|=128),v.writeUInt8(s,p++)}while(e>0&&p<4);return e>0&&(p=0),d?v.subarray(0,p):v.slice(0,p)},generate4ByteBuffer:function(e){const c=_.allocUnsafe(4);return c.writeUInt32BE(e,0),c}}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],42:[function(A,K,z){K.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],43:[function(A,K,z){const _=A("bl"),b=A("events"),y=A("./packet"),d=A("./constants"),o=A("debug")("mqtt-packet:parser");class r extends b{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof r?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new r).parser(t)}_resetState(){o("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new y,this.error=null,this._list=_(),this._stateCounter=0}parse(t){for(this.error&&this._resetState(),this._list.append(t),o("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,o("parse: state complete. _stateCounter is now: %d",this._stateCounter),o("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return o("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const t=this._list.readUInt8(0);return this.packet.cmd=d.types[t>>d.CMD_SHIFT],this.packet.retain=0!=(t&d.RETAIN_MASK),this.packet.qos=t>>d.QOS_SHIFT&d.QOS_MASK,this.packet.dup=0!=(t&d.DUP_MASK),o("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const t=this._parseVarByteNum(!0);return t&&(this.packet.length=t.value,this._list.consume(t.bytes)),o("_parseLength %d",t.value),!!t}_parsePayload(){o("_parsePayload: payload %O",this._list);let t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}t=!0}return o("_parsePayload complete result: %s",t),t}_parseConnect(){let t,e,c,s;o("_parseConnect");const p={},v=this.packet,f=this._parseString();if(null===f)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==f&&"MQIsdp"!==f)return this._emitError(new Error("Invalid protocolId"));if(v.protocolId=f,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(v.protocolVersion=this._list.readUInt8(this._pos),v.protocolVersion>=128&&(v.bridgeMode=!0,v.protocolVersion=v.protocolVersion-128),3!==v.protocolVersion&&4!==v.protocolVersion&&5!==v.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(p.username=this._list.readUInt8(this._pos)&d.USERNAME_MASK,p.password=this._list.readUInt8(this._pos)&d.PASSWORD_MASK,p.will=this._list.readUInt8(this._pos)&d.WILL_FLAG_MASK,p.will&&(v.will={},v.will.retain=0!=(this._list.readUInt8(this._pos)&d.WILL_RETAIN_MASK),v.will.qos=(this._list.readUInt8(this._pos)&d.WILL_QOS_MASK)>>d.WILL_QOS_SHIFT),v.clean=0!=(this._list.readUInt8(this._pos)&d.CLEAN_SESSION_MASK),this._pos++,v.keepalive=this._parseNum(),-1===v.keepalive)return this._emitError(new Error("Packet too short"));if(5===v.protocolVersion){const w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(v.properties=w)}const i=this._parseString();if(null===i)return this._emitError(new Error("Packet too short"));if(v.clientId=i,o("_parseConnect: packet.clientId: %s",v.clientId),p.will){if(5===v.protocolVersion){const w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(v.will.properties=w)}if(t=this._parseString(),null===t)return this._emitError(new Error("Cannot parse will topic"));if(v.will.topic=t,o("_parseConnect: packet.will.topic: %s",v.will.topic),e=this._parseBuffer(),null===e)return this._emitError(new Error("Cannot parse will payload"));v.will.payload=e,o("_parseConnect: packet.will.paylaod: %s",v.will.payload)}if(p.username){if(s=this._parseString(),null===s)return this._emitError(new Error("Cannot parse username"));v.username=s,o("_parseConnect: packet.username: %s",v.username)}if(p.password){if(c=this._parseBuffer(),null===c)return this._emitError(new Error("Cannot parse password"));v.password=c}return this.settings=v,o("_parseConnect: complete"),v}_parseConnack(){o("_parseConnack");const t=this.packet;if(this._list.length<1)return null;if(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&d.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)t.reasonCode=this._list.length>=2?this._list.readUInt8(this._pos++):0;else{if(this._list.length<2)return null;t.returnCode=this._list.readUInt8(this._pos++)}if(-1===t.returnCode||-1===t.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}o("_parseConnack: complete")}_parsePublish(){o("_parsePublish");const t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));if(!(t.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}t.payload=this._list.slice(this._pos,t.length),o("_parsePublish: payload from buffer list: %o",t.payload)}}_parseSubscribe(){o("_parseSubscribe");const t=this.packet;let e,c,s,p,v,f,i;if(1!==t.qos)return this._emitError(new Error("Wrong subscribe header"));if(t.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(t.properties=w)}for(;this._pos<t.length;){if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=t.length)return this._emitError(new Error("Malformed Subscribe Payload"));c=this._parseByte(),s=c&d.SUBSCRIBE_OPTIONS_QOS_MASK,f=0!=(c>>d.SUBSCRIBE_OPTIONS_NL_SHIFT&d.SUBSCRIBE_OPTIONS_NL_MASK),v=0!=(c>>d.SUBSCRIBE_OPTIONS_RAP_SHIFT&d.SUBSCRIBE_OPTIONS_RAP_MASK),p=c>>d.SUBSCRIBE_OPTIONS_RH_SHIFT&d.SUBSCRIBE_OPTIONS_RH_MASK,i={topic:e,qos:s},5===this.settings.protocolVersion?(i.nl=f,i.rap=v,i.rh=p):this.settings.bridgeMode&&(i.rh=0,i.rap=!0,i.nl=!0),o("_parseSubscribe: push subscription `%s` to subscription",i),t.subscriptions.push(i)}}}_parseSuback(){o("_parseSuback");const t=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){o("_parseUnsubscribe");const t=this.packet;if(t.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<t.length;){const e=this._parseString();if(null===e)return this._emitError(new Error("Cannot parse topic"));o("_parseUnsubscribe: push topic `%s` to unsubscriptions",e),t.unsubscriptions.push(e)}}}_parseUnsuback(){o("_parseUnsuback");const t=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const e=this._parseProperties();for(Object.getOwnPropertyNames(e).length&&(t.properties=e),t.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){o("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const t=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(t.length>2?(t.reasonCode=this._parseByte(),o("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)):t.reasonCode=0,t.length>3)){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}return!0}_parseDisconnect(){const t=this.packet;if(o("_parseDisconnect"),5===this.settings.protocolVersion){t.reasonCode=this._list.length>0?this._parseByte():0;const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}return o("_parseDisconnect result: true"),!0}_parseAuth(){o("_parseAuth");const t=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));t.reasonCode=this._parseByte();const e=this._parseProperties();return Object.getOwnPropertyNames(e).length&&(t.properties=e),o("_parseAuth: result: true"),!0}_parseMessageId(){const t=this.packet;return t.messageId=this._parseNum(),null===t.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(o("_parseMessageId: packet.messageId %d",t.messageId),!0)}_parseString(t){const e=this._parseNum(),c=e+this._pos;if(-1===e||c>this._list.length||c>this.packet.length)return null;const s=this._list.toString("utf8",this._pos,c);return this._pos+=e,o("_parseString: result: %s",s),s}_parseStringPair(){return o("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const t=this._parseNum(),e=t+this._pos;if(-1===t||e>this._list.length||e>this.packet.length)return null;const c=this._list.slice(this._pos,e);return this._pos+=t,o("_parseBuffer: result: %o",c),c}_parseNum(){if(this._list.length-this._pos<2)return-1;const t=this._list.readUInt16BE(this._pos);return this._pos+=2,o("_parseNum: result: %s",t),t}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const t=this._list.readUInt32BE(this._pos);return this._pos+=4,o("_parse4ByteNum: result: %s",t),t}_parseVarByteNum(t){o("_parseVarByteNum");let f,c=0,s=1,p=0,v=!1;const i=this._pos?this._pos:0;for(;c<4&&i+c<this._list.length;){if(f=this._list.readUInt8(i+c++),p+=s*(f&d.VARBYTEINT_MASK),s*=128,0==(f&d.VARBYTEINT_FIN_MASK)){v=!0;break}if(this._list.length<=c)break}return!v&&4===c&&this._list.length>=c&&this._emitError(new Error("Invalid variable byte integer")),i&&(this._pos+=c),v=!!v&&(t?{bytes:c,value:p}:p),o("_parseVarByteNum: result: %o",v),v}_parseByte(){let t;return this._pos<this._list.length&&(t=this._list.readUInt8(this._pos),this._pos++),o("_parseByte: result: %o",t),t}_parseByType(t){switch(o("_parseByType: type: %s",t),t){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){o("_parseProperties");const t=this._parseVarByteNum(),c=this._pos+t,s={};for(;this._pos<c;){const p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;const v=d.propertiesCodes[p];if(!v)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==v)s[v]?(Array.isArray(s[v])||(s[v]=[s[v]]),s[v].push(this._parseByType(d.propertiesTypes[v]))):s[v]=this._parseByType(d.propertiesTypes[v]);else{s[v]||(s[v]=Object.create(null));const f=this._parseByType(d.propertiesTypes[v]);s[v][f.name]?(Array.isArray(s[v][f.name])||(s[v][f.name]=[s[v][f.name]]),s[v][f.name].push(f.value)):s[v][f.name]=f.value}}return s}_newPacket(){return o("_newPacket"),this.packet&&(this._list.consume(this.packet.length),o("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),o("_newPacket: new packet"),this.packet=new y,this._pos=0,!0}_emitError(t){o("_emitError"),this.error=t,this.emit("error",t)}}K.exports=r},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(A,K,z){(function(_){(function(){const b=A("./constants"),y=_.allocUnsafe(0),d=_.from([0]),o=A("./numbers"),r=A("process-nextick-args").nextTick,n=A("debug")("mqtt-packet:writeToStream"),t=o.cache,e=o.generateNumber,c=o.generateCache,s=o.genBufVariableByteInt,p=o.generate4ByteBuffer;let v=j,f=!0;function i(V,L,Y){switch(n("generate called"),L.cork&&(L.cork(),r(w,L)),f&&(f=!1,c()),n("generate: packet.cmd: %s",V.cmd),V.cmd){case"connect":return function(V,L,Y){const oe=V||{},P=oe.protocolId||"MQTT";let I=oe.protocolVersion||4;const F=oe.will;let $=oe.clean;const X=oe.keepalive||0,C=oe.clientId||"",h=oe.username,a=oe.password,u=oe.properties;void 0===$&&($=!0);let x=0;if(!P||"string"!=typeof P&&!_.isBuffer(P))return L.emit("error",new Error("Invalid protocolId")),!1;if(x+=P.length+2,3!==I&&4!==I&&5!==I)return L.emit("error",new Error("Invalid protocol version")),!1;if(x+=1,("string"==typeof C||_.isBuffer(C))&&(C||I>=4)&&(C||$))x+=_.byteLength(C)+2;else{if(I<4)return L.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*$==0)return L.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof X||X<0||X>65535||X%1!=0)return L.emit("error",new Error("Invalid keepalive")),!1;if(x+=2,x+=1,5===I){var D=Q(L,u);if(!D)return!1;x+=D.length}if(F){if("object"!=typeof F)return L.emit("error",new Error("Invalid will")),!1;if(!F.topic||"string"!=typeof F.topic)return L.emit("error",new Error("Invalid will topic")),!1;if(x+=_.byteLength(F.topic)+2,x+=2,F.payload){if(!(F.payload.length>=0))return L.emit("error",new Error("Invalid will payload")),!1;x+="string"==typeof F.payload?_.byteLength(F.payload):F.payload.length}var G={};if(5===I){if(!(G=Q(L,F.properties)))return!1;x+=G.length}}let ee=!1;if(null!=h){if(!ne(h))return L.emit("error",new Error("Invalid username")),!1;ee=!0,x+=_.byteLength(h)+2}if(null!=a){if(!ee)return L.emit("error",new Error("Username is required to use password")),!1;if(!ne(a))return L.emit("error",new Error("Invalid password")),!1;x+=se(a)+2}L.write(b.CONNECT_HEADER),N(L,x),re(L,P),oe.bridgeMode&&(I+=128),L.write(131===I?b.VERSION131:132===I?b.VERSION132:4===I?b.VERSION4:5===I?b.VERSION5:b.VERSION3);let ae=0;return ae|=null!=h?b.USERNAME_MASK:0,ae|=null!=a?b.PASSWORD_MASK:0,ae|=F&&F.retain?b.WILL_RETAIN_MASK:0,ae|=F&&F.qos?F.qos<<b.WILL_QOS_SHIFT:0,ae|=F?b.WILL_FLAG_MASK:0,ae|=$?b.CLEAN_SESSION_MASK:0,L.write(_.from([ae])),v(L,X),5===I&&D.write(),re(L,C),F&&(5===I&&G.write(),S(L,F.topic),re(L,F.payload)),null!=h&&re(L,h),null!=a&&re(L,a),!0}(V,L);case"connack":return function(V,L,Y){const oe=Y?Y.protocolVersion:4,P=V||{},I=5===oe?P.reasonCode:P.returnCode,F=P.properties;let $=2;if("number"!=typeof I)return L.emit("error",new Error("Invalid return code")),!1;let X=null;if(5===oe){if(X=Q(L,F),!X)return!1;$+=X.length}return L.write(b.CONNACK_HEADER),N(L,$),L.write(P.sessionPresent?b.SESSIONPRESENT_HEADER:d),L.write(_.from([I])),null!=X&&X.write(),!0}(V,L,Y);case"publish":return function(V,L,Y){n("publish: packet: %o",V);const oe=Y?Y.protocolVersion:4,P=V||{},I=P.qos||0,F=P.retain?b.RETAIN_MASK:0,$=P.topic,X=P.payload||y,C=P.messageId,h=P.properties;let a=0;if("string"==typeof $)a+=_.byteLength($)+2;else{if(!_.isBuffer($))return L.emit("error",new Error("Invalid topic")),!1;a+=$.length+2}if(_.isBuffer(X)?a+=X.length:a+=_.byteLength(X),I&&"number"!=typeof C)return L.emit("error",new Error("Invalid messageId")),!1;I&&(a+=2);let u=null;if(5===oe){if(u=Q(L,h),!u)return!1;a+=u.length}return L.write(b.PUBLISH_HEADER[I][P.dup?1:0][F?1:0]),N(L,a),v(L,se($)),L.write($),I>0&&v(L,C),null!=u&&u.write(),n("publish: payload: %o",X),L.write(X)}(V,L,Y);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(V,L,Y){const oe=Y?Y.protocolVersion:4,P=V||{},I=P.cmd||"puback",F=P.messageId,$=P.dup&&"pubrel"===I?b.DUP_MASK:0;let X=0;const C=P.reasonCode,h=P.properties;let a=5===oe?3:2;if("pubrel"===I&&(X=1),"number"!=typeof F)return L.emit("error",new Error("Invalid messageId")),!1;let u=null;if(5===oe&&"object"==typeof h){if(u=W(L,h,Y,a),!u)return!1;a+=u.length}return L.write(b.ACKS[I][X][$][0]),N(L,a),v(L,F),5===oe&&L.write(_.from([C])),null!==u&&u.write(),!0}(V,L,Y);case"subscribe":return function(V,L,Y){n("subscribe: packet: ");const oe=Y?Y.protocolVersion:4,P=V||{},I=P.dup?b.DUP_MASK:0,F=P.messageId,$=P.subscriptions,X=P.properties;let C=0;if("number"!=typeof F)return L.emit("error",new Error("Invalid messageId")),!1;C+=2;let h=null;if(5===oe){if(h=Q(L,X),!h)return!1;C+=h.length}if("object"!=typeof $||!$.length)return L.emit("error",new Error("Invalid subscriptions")),!1;for(let u=0;u<$.length;u+=1){const x=$[u].topic,D=$[u].qos;if("string"!=typeof x)return L.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof D)return L.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===oe){if("boolean"!=typeof($[u].nl||!1))return L.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof($[u].rap||!1))return L.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ae=$[u].rh||0;if("number"!=typeof ae||ae>2)return L.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}C+=_.byteLength(x)+2+1}n("subscribe: writing to stream: %o",b.SUBSCRIBE_HEADER),L.write(b.SUBSCRIBE_HEADER[1][I?1:0][0]),N(L,C),v(L,F),null!==h&&h.write();let a=!0;for(const u of $){const D=u.qos,G=+u.nl,ee=+u.rap,ae=u.rh;let le;S(L,u.topic),le=b.SUBSCRIBE_OPTIONS_QOS[D],5===oe&&(le|=G?b.SUBSCRIBE_OPTIONS_NL:0,le|=ee?b.SUBSCRIBE_OPTIONS_RAP:0,le|=ae?b.SUBSCRIBE_OPTIONS_RH[ae]:0),a=L.write(_.from([le]))}return a}(V,L,Y);case"suback":return function(V,L,Y){const oe=Y?Y.protocolVersion:4,P=V||{},I=P.messageId,F=P.granted,$=P.properties;let X=0;if("number"!=typeof I)return L.emit("error",new Error("Invalid messageId")),!1;if(X+=2,"object"!=typeof F||!F.length)return L.emit("error",new Error("Invalid qos vector")),!1;for(let h=0;h<F.length;h+=1){if("number"!=typeof F[h])return L.emit("error",new Error("Invalid qos vector")),!1;X+=1}let C=null;if(5===oe){if(C=W(L,$,Y,X),!C)return!1;X+=C.length}return L.write(b.SUBACK_HEADER),N(L,X),v(L,I),null!==C&&C.write(),L.write(_.from(F))}(V,L,Y);case"unsubscribe":return function(V,L,Y){const oe=Y?Y.protocolVersion:4,P=V||{},I=P.messageId,F=P.dup?b.DUP_MASK:0,$=P.unsubscriptions,X=P.properties;let C=0;if("number"!=typeof I)return L.emit("error",new Error("Invalid messageId")),!1;if(C+=2,"object"!=typeof $||!$.length)return L.emit("error",new Error("Invalid unsubscriptions")),!1;for(let u=0;u<$.length;u+=1){if("string"!=typeof $[u])return L.emit("error",new Error("Invalid unsubscriptions")),!1;C+=_.byteLength($[u])+2}let h=null;if(5===oe){if(h=Q(L,X),!h)return!1;C+=h.length}L.write(b.UNSUBSCRIBE_HEADER[1][F?1:0][0]),N(L,C),v(L,I),null!==h&&h.write();let a=!0;for(let u=0;u<$.length;u++)a=S(L,$[u]);return a}(V,L,Y);case"unsuback":return function(V,L,Y){const oe=Y?Y.protocolVersion:4,P=V||{},I=P.messageId,F=P.dup?b.DUP_MASK:0,$=P.granted,X=P.properties,C=P.cmd,h=0;let a=2;if("number"!=typeof I)return L.emit("error",new Error("Invalid messageId")),!1;if(5===oe){if("object"!=typeof $||!$.length)return L.emit("error",new Error("Invalid qos vector")),!1;for(let x=0;x<$.length;x+=1){if("number"!=typeof $[x])return L.emit("error",new Error("Invalid qos vector")),!1;a+=1}}let u=null;if(5===oe){if(u=W(L,X,Y,a),!u)return!1;a+=u.length}return L.write(b.ACKS[C][h][F][0]),N(L,a),v(L,I),null!==u&&u.write(),5===oe&&L.write(_.from($)),!0}(V,L,Y);case"pingreq":case"pingresp":return function(V,L,Y){return L.write(b.EMPTY[V.cmd])}(V,L);case"disconnect":return function(V,L,Y){const oe=Y?Y.protocolVersion:4,P=V||{},I=P.reasonCode;let $=5===oe?1:0,X=null;if(5===oe){if(X=W(L,P.properties,Y,$),!X)return!1;$+=X.length}return L.write(_.from([b.codes.disconnect<<4])),N(L,$),5===oe&&L.write(_.from([I])),null!==X&&X.write(),!0}(V,L,Y);case"auth":return function(V,L,Y){const oe=Y?Y.protocolVersion:4,P=V||{},I=P.reasonCode,F=P.properties;let $=5===oe?1:0;5!==oe&&L.emit("error",new Error("Invalid mqtt version for auth packet"));const X=W(L,F,Y,$);return!!X&&($+=X.length,L.write(_.from([b.codes.auth<<4])),N(L,$),L.write(_.from([I])),null!==X&&X.write(),!0)}(V,L,Y);default:return L.emit("error",new Error("Unknown command")),!1}}function w(V){V.uncork()}Object.defineProperty(i,"cacheNumbers",{get:()=>v===j,set(V){V?((!t||0===Object.keys(t).length)&&(f=!0),v=j):(f=!1,v=Z)}});const q={};function N(V,L){if(L>b.VARBYTEINT_MAX)return V.emit("error",new Error(`Invalid variable byte integer: ${L}`)),!1;let Y=q[L];return Y||(Y=s(L),L<16384&&(q[L]=Y)),n("writeVarByteInt: writing to stream: %o",Y),V.write(Y)}function S(V,L){const Y=_.byteLength(L);return v(V,Y),n("writeString: %s",L),V.write(L,"utf8")}function k(V,L,Y){S(V,L),S(V,Y)}function j(V,L){return n("writeNumberCached: number: %d",L),n("writeNumberCached: %o",t[L]),V.write(t[L])}function Z(V,L){const Y=e(L);return n("writeNumberGenerated: %o",Y),V.write(Y)}function re(V,L){"string"==typeof L?S(V,L):L?(v(V,L.length),V.write(L)):v(V,0)}function Q(V,L){if("object"!=typeof L||null!=L.length)return{length:1,write(){J(V,{},0)}};let Y=0;function oe(I,F){let X=0;switch(b.propertiesTypes[I]){case"byte":if("boolean"!=typeof F)return V.emit("error",new Error(`Invalid ${I}: ${F}`)),!1;X+=2;break;case"int8":if("number"!=typeof F||F<0||F>255)return V.emit("error",new Error(`Invalid ${I}: ${F}`)),!1;X+=2;break;case"binary":if(F&&null===F)return V.emit("error",new Error(`Invalid ${I}: ${F}`)),!1;X+=1+_.byteLength(F)+2;break;case"int16":if("number"!=typeof F||F<0||F>65535)return V.emit("error",new Error(`Invalid ${I}: ${F}`)),!1;X+=3;break;case"int32":if("number"!=typeof F||F<0||F>4294967295)return V.emit("error",new Error(`Invalid ${I}: ${F}`)),!1;X+=5;break;case"var":if("number"!=typeof F||F<0||F>268435455)return V.emit("error",new Error(`Invalid ${I}: ${F}`)),!1;X+=1+_.byteLength(s(F));break;case"string":if("string"!=typeof F)return V.emit("error",new Error(`Invalid ${I}: ${F}`)),!1;X+=3+_.byteLength(F.toString());break;case"pair":if("object"!=typeof F)return V.emit("error",new Error(`Invalid ${I}: ${F}`)),!1;X+=Object.getOwnPropertyNames(F).reduce((C,h)=>{const a=F[h];return Array.isArray(a)?C+=a.reduce((u,x)=>u+(3+_.byteLength(h.toString())+2+_.byteLength(x.toString())),0):C+=3+_.byteLength(h.toString())+2+_.byteLength(F[h].toString()),C},0);break;default:return V.emit("error",new Error(`Invalid property ${I}: ${F}`)),!1}return X}if(L)for(const I in L){let F=0,$=0;const X=L[I];if(Array.isArray(X))for(let C=0;C<X.length;C++){if($=oe(I,X[C]),!$)return!1;F+=$}else{if($=oe(I,X),!$)return!1;F=$}if(!F)return!1;Y+=F}return{length:_.byteLength(s(Y))+Y,write(){J(V,L,Y)}}}function W(V,L,Y,oe){const P=["reasonString","userProperties"],I=Y&&Y.properties&&Y.properties.maximumPacketSize?Y.properties.maximumPacketSize:0;let F=Q(V,L);if(I)for(;oe+F.length>I;){const $=P.shift();if(!$||!L[$])return!1;delete L[$],F=Q(V,L)}return F}function te(V,L,Y){switch(b.propertiesTypes[L]){case"byte":V.write(_.from([b.properties[L]])),V.write(_.from([+Y]));break;case"int8":V.write(_.from([b.properties[L]])),V.write(_.from([Y]));break;case"binary":V.write(_.from([b.properties[L]])),re(V,Y);break;case"int16":V.write(_.from([b.properties[L]])),v(V,Y);break;case"int32":V.write(_.from([b.properties[L]])),function(V,L){const Y=p(L);n("write4ByteNumber: %o",Y),V.write(Y)}(V,Y);break;case"var":V.write(_.from([b.properties[L]])),N(V,Y);break;case"string":V.write(_.from([b.properties[L]])),S(V,Y);break;case"pair":Object.getOwnPropertyNames(Y).forEach(P=>{const I=Y[P];Array.isArray(I)?I.forEach(F=>{V.write(_.from([b.properties[L]])),k(V,P.toString(),F.toString())}):(V.write(_.from([b.properties[L]])),k(V,P.toString(),I.toString()))});break;default:return V.emit("error",new Error(`Invalid property ${L} value: ${Y}`)),!1}}function J(V,L,Y){N(V,Y);for(const oe in L)if(Object.prototype.hasOwnProperty.call(L,oe)&&null!==L[oe]){const P=L[oe];if(Array.isArray(P))for(let I=0;I<P.length;I++)te(V,oe,P[I]);else te(V,oe,P)}}function se(V){return V?V instanceof _?V.length:_.byteLength(V):0}function ne(V){return"string"==typeof V||V instanceof _}K.exports=i}).call(this)}).call(this,A("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(A,K,z){var _=1e3,b=60*_,y=60*b,d=24*y;function c(s,p,v,f){var i=p>=1.5*v;return Math.round(s/v)+" "+f+(i?"s":"")}K.exports=function(s,p){p=p||{};var v=typeof s;if("string"===v&&s.length>0)return function(s){if(!((s=String(s)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(p){var v=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*v;case"weeks":case"week":case"w":return 6048e5*v;case"days":case"day":case"d":return v*d;case"hours":case"hour":case"hrs":case"hr":case"h":return v*y;case"minutes":case"minute":case"mins":case"min":case"m":return v*b;case"seconds":case"second":case"secs":case"sec":case"s":return v*_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}}(s);if("number"===v&&isFinite(s))return p.long?function(s){var p=Math.abs(s);return p>=d?c(s,p,d,"day"):p>=y?c(s,p,y,"hour"):p>=b?c(s,p,b,"minute"):p>=_?c(s,p,_,"second"):s+" ms"}(s):function(s){var p=Math.abs(s);return p>=d?Math.round(s/d)+"d":p>=y?Math.round(s/y)+"h":p>=b?Math.round(s/b)+"m":p>=_?Math.round(s/_)+"s":s+"ms"}(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))}},{}],46:[function(A,K,z){const _=A("./lib/number-allocator.js");K.exports.NumberAllocator=_},{"./lib/number-allocator.js":47}],47:[function(A,K,z){"use strict";const _=A("js-sdsl").Set,b=A("debug")("number-allocator:trace"),y=A("debug")("number-allocator:error");function d(r,n){this.low=r,this.high=n}function o(r,n){if(!(this instanceof o))return new o(r,n);this.min=r,this.max=n,this.ss=new _([],(t,e)=>t.compare(e)),b("Create"),this.clear()}d.prototype.equals=function(r){return this.low===r.low&&this.high===r.high},d.prototype.compare=function(r){return this.low<r.low&&this.high<r.low?-1:r.low<this.low&&r.high<this.low?1:0},o.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},o.prototype.alloc=function(){if(0===this.ss.size())return b("alloc():empty"),null;const r=this.ss.front(),n=r.low;return n+1<=r.high?++r.low:this.ss.eraseElementByPos(0),b("alloc():"+n),n},o.prototype.use=function(r){const n=new d(r,r),t=this.ss.lowerBound(n);if(t){if(t.equals(n))return this.ss.eraseElementByValue(t),b("use():"+r),!0;if(t.low>r)return!1;if(t.low===r)return++t.low,b("use():"+r),!0;if(t.high===r)return--t.high,b("use():"+r),!0;const e=t.low;return t.low=r+1,this.ss.insert(new d(e,r-1)),b("use():"+r),!0}return b("use():failed"),!1},o.prototype.free=function(r){if(r<this.min||r>this.max)return void y("free():"+r+" is out of range");const n=new d(r,r),t=this.ss.lowerBound(n);if(t){if(t.low<=r&&r<=t.high)return void y("free():"+r+" has already been vacant");if(t===this.ss.front())r+1===t.low?--t.low:this.ss.insert(n);else{const e=this.ss.reverseLowerBound(n);e.high+1===r?r+1===t.low?(this.ss.eraseElementByValue(e),t.low=e.low):e.high=r:r+1===t.low?t.low=r:this.ss.insert(n)}}else{if(t===this.ss.front())return void this.ss.insert(n);const e=this.ss.reverseLowerBound(n);e.high+1===r?e.high=r:this.ss.insert(n)}b("free():"+r)},o.prototype.clear=function(){b("clear()"),this.ss.clear(),this.ss.insert(new d(this.min,this.max))},o.prototype.intervalCount=function(){return this.ss.size()},o.prototype.dump=function(){console.log("length:"+this.ss.size());for(const r of this.ss)console.log(r)},K.exports=o},{debug:18,"js-sdsl":36}],48:[function(A,K,z){var _=A("wrappy");function b(d){var o=function(){return o.called?o.value:(o.called=!0,o.value=d.apply(this,arguments))};return o.called=!1,o}function y(d){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=d.apply(this,arguments)};return o.onceError=(d.name||"Function wrapped with `once`")+" shouldn't be called more than once",o.called=!1,o}K.exports=_(b),K.exports.strict=_(y),b.proto=b(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return b(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return y(this)},configurable:!0})})},{wrappy:79}],49:[function(A,K,z){(function(_){(function(){"use strict";K.exports=void 0===_||!_.version||0===_.version.indexOf("v0.")||0===_.version.indexOf("v1.")&&0!==_.version.indexOf("v1.8.")?{nextTick:function(y,d,o,r){if("function"!=typeof y)throw new TypeError('"callback" argument must be a function');var t,e,n=arguments.length;switch(n){case 0:case 1:return _.nextTick(y);case 2:return _.nextTick(function(){y.call(null,d)});case 3:return _.nextTick(function(){y.call(null,d,o)});case 4:return _.nextTick(function(){y.call(null,d,o,r)});default:for(t=new Array(n-1),e=0;e<t.length;)t[e++]=arguments[e];return _.nextTick(function(){y.apply(null,t)})}}}:_}).call(this)}).call(this,A("_process"))},{_process:50}],50:[function(A,K,z){var b,y,_=K.exports={};function d(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(w){if(b===setTimeout)return setTimeout(w,0);if((b===d||!b)&&setTimeout)return b=setTimeout,setTimeout(w,0);try{return b(w,0)}catch(E){try{return b.call(null,w,0)}catch(T){return b.call(this,w,0)}}}!function(){try{b="function"==typeof setTimeout?setTimeout:d}catch(w){b=d}try{y="function"==typeof clearTimeout?clearTimeout:o}catch(w){y=o}}();var c,t=[],e=!1,s=-1;function p(){!e||!c||(e=!1,c.length?t=c.concat(t):s=-1,t.length&&v())}function v(){if(!e){var w=r(p);e=!0;for(var E=t.length;E;){for(c=t,t=[];++s<E;)c&&c[s].run();s=-1,E=t.length}c=null,e=!1,function(w){if(y===clearTimeout)return clearTimeout(w);if((y===o||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(w);try{y(w)}catch(E){try{return y.call(null,w)}catch(T){return y.call(this,w)}}}(w)}}function f(w,E){this.fun=w,this.array=E}function i(){}_.nextTick=function(w){var E=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)E[T-1]=arguments[T];t.push(new f(w,E)),1===t.length&&!e&&r(v)},f.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=i,_.addListener=i,_.once=i,_.off=i,_.removeListener=i,_.removeAllListeners=i,_.emit=i,_.prependListener=i,_.prependOnceListener=i,_.listeners=function(w){return[]},_.binding=function(w){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(w){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},{}],51:[function(A,K,z){(function(_){(function(){!function(b){var y="object"==typeof z&&z&&!z.nodeType&&z,d="object"==typeof K&&K&&!K.nodeType&&K,o="object"==typeof _&&_;(o.global===o||o.window===o||o.self===o)&&(b=o);var r,l,n=2147483647,t=36,w=/^xn--/,E=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=Math.floor,U=String.fromCharCode;function m(Q){throw new RangeError(M[Q])}function g(Q,W){for(var te=Q.length,J=[];te--;)J[te]=W(Q[te]);return J}function B(Q,W){var te=Q.split("@"),J="";return te.length>1&&(J=te[0]+"@",Q=te[1]),J+g((Q=Q.replace(T,".")).split("."),W).join(".")}function H(Q){for(var se,ne,W=[],te=0,J=Q.length;te<J;)(se=Q.charCodeAt(te++))>=55296&&se<=56319&&te<J?56320==(64512&(ne=Q.charCodeAt(te++)))?W.push(((1023&se)<<10)+(1023&ne)+65536):(W.push(se),te--):W.push(se);return W}function q(Q){return g(Q,function(W){var te="";return W>65535&&(te+=U((W-=65536)>>>10&1023|55296),W=56320|1023&W),te+U(W)}).join("")}function N(Q){return Q-48<10?Q-22:Q-65<26?Q-65:Q-97<26?Q-97:t}function S(Q,W){return Q+22+75*(Q<26)-((0!=W)<<5)}function k(Q,W,te){var J=0;for(Q=te?R(Q/700):Q>>1,Q+=R(Q/W);Q>455;J+=t)Q=R(Q/35);return R(J+36*Q/(Q+38))}function j(Q){var J,L,Y,oe,P,I,F,$,X,C,W=[],te=Q.length,se=0,ne=128,V=72;for((L=Q.lastIndexOf("-"))<0&&(L=0),Y=0;Y<L;++Y)Q.charCodeAt(Y)>=128&&m("not-basic"),W.push(Q.charCodeAt(Y));for(oe=L>0?L+1:0;oe<te;){for(P=se,I=1,F=t;oe>=te&&m("invalid-input"),(($=N(Q.charCodeAt(oe++)))>=t||$>R((n-se)/I))&&m("overflow"),se+=$*I,!($<(X=F<=V?1:F>=V+26?26:F-V));F+=t)I>R(n/(C=t-X))&&m("overflow"),I*=C;V=k(se-P,J=W.length+1,0==P),R(se/J)>n-ne&&m("overflow"),ne+=R(se/J),se%=J,W.splice(se++,0,ne)}return q(W)}function Z(Q){var W,te,J,se,ne,V,L,Y,oe,P,I,$,X,C,h,F=[];for($=(Q=H(Q)).length,W=128,te=0,ne=72,V=0;V<$;++V)(I=Q[V])<128&&F.push(U(I));for(J=se=F.length,se&&F.push("-");J<$;){for(L=n,V=0;V<$;++V)(I=Q[V])>=W&&I<L&&(L=I);for(L-W>R((n-te)/(X=J+1))&&m("overflow"),te+=(L-W)*X,W=L,V=0;V<$;++V)if((I=Q[V])<W&&++te>n&&m("overflow"),I==W){for(Y=te,oe=t;!(Y<(P=oe<=ne?1:oe>=ne+26?26:oe-ne));oe+=t)F.push(U(S(P+(h=Y-P)%(C=t-P),0))),Y=R(h/C);F.push(U(S(Y,0))),ne=k(te,X,J==se),te=0,++J}++te,++W}return F.join("")}if(r={version:"1.4.1",ucs2:{decode:H,encode:q},decode:j,encode:Z,toASCII:function(Q){return B(Q,function(W){return E.test(W)?"xn--"+Z(W):W})},toUnicode:function(Q){return B(Q,function(W){return w.test(W)?j(W.slice(4).toLowerCase()):W})}},y&&d)if(K.exports==y)d.exports=r;else for(l in r)r.hasOwnProperty(l)&&(y[l]=r[l]);else b.punycode=r}(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(A,K,z){"use strict";function _(y,d){return Object.prototype.hasOwnProperty.call(y,d)}K.exports=function(y,d,o,r){o=o||"=";var n={};if("string"!=typeof y||0===y.length)return n;var t=/\+/g;y=y.split(d=d||"&");var e=1e3;r&&"number"==typeof r.maxKeys&&(e=r.maxKeys);var c=y.length;e>0&&c>e&&(c=e);for(var s=0;s<c;++s){var f,i,w,E,p=y[s].replace(t,"%20"),v=p.indexOf(o);v>=0?(f=p.substr(0,v),i=p.substr(v+1)):(f=p,i=""),w=decodeURIComponent(f),E=decodeURIComponent(i),_(n,w)?b(n[w])?n[w].push(E):n[w]=[n[w],E]:n[w]=E}return n};var b=Array.isArray||function(y){return"[object Array]"===Object.prototype.toString.call(y)}},{}],53:[function(A,K,z){"use strict";var _=function(o){switch(typeof o){case"string":return o;case"boolean":return o?"true":"false";case"number":return isFinite(o)?o:"";default:return""}};K.exports=function(o,r,n,t){return r=r||"&",n=n||"=",null===o&&(o=void 0),"object"==typeof o?y(d(o),function(e){var c=encodeURIComponent(_(e))+n;return b(o[e])?y(o[e],function(s){return c+encodeURIComponent(_(s))}).join(r):c+encodeURIComponent(_(o[e]))}).join(r):t?encodeURIComponent(_(t))+n+encodeURIComponent(_(o)):""};var b=Array.isArray||function(o){return"[object Array]"===Object.prototype.toString.call(o)};function y(o,r){if(o.map)return o.map(r);for(var n=[],t=0;t<o.length;t++)n.push(r(o[t],t));return n}var d=Object.keys||function(o){var r=[];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.push(n);return r}},{}],54:[function(A,K,z){"use strict";z.decode=z.parse=A("./decode"),z.encode=z.stringify=A("./encode")},{"./decode":52,"./encode":53}],55:[function(A,K,z){"use strict";var b={};function y(t,e,c){c||(c=Error);var p=function(v){function f(i,w,E){return v.call(this,function(v,f,i){return"string"==typeof e?e:e(v,f,i)}(i,w,E))||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(f,v),f}(c);p.prototype.name=c.name,p.prototype.code=t,b[t]=p}function d(t,e){if(Array.isArray(t)){var c=t.length;return t=t.map(function(s){return String(s)}),c>2?"one of ".concat(e," ").concat(t.slice(0,c-1).join(", "),", or ")+t[c-1]:2===c?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}y("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),y("ERR_INVALID_ARG_TYPE",function(t,e,c){var s,p;if("string"==typeof e&&function(t,e,c){return t.substr(!c||c<0?0:+c,e.length)===e}(e,"not ")?(s="must not be",e=e.replace(/^not /,"")):s="must be",function(t,e,c){return(void 0===c||c>t.length)&&(c=t.length),t.substring(c-e.length,c)===e}(t," argument"))p="The ".concat(t," ").concat(s," ").concat(d(e,"type"));else{var v=function(t,e,c){return"number"!=typeof c&&(c=0),!(c+e.length>t.length)&&-1!==t.indexOf(e,c)}(t,".")?"property":"argument";p='The "'.concat(t,'" ').concat(v," ").concat(s," ").concat(d(e,"type"))}return p+". Received type ".concat(typeof c)},TypeError),y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),y("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),y("ERR_STREAM_PREMATURE_CLOSE","Premature close"),y("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),y("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),y("ERR_STREAM_WRITE_AFTER_END","write after end"),y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),y("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),K.exports.codes=b},{}],56:[function(A,K,z){(function(_){(function(){"use strict";var b=Object.keys||function(s){var p=[];for(var v in s)p.push(v);return p};K.exports=t;var y=A("./_stream_readable"),d=A("./_stream_writable");A("inherits")(t,y);for(var o=b(d.prototype),r=0;r<o.length;r++){var n=o[r];t.prototype[n]||(t.prototype[n]=d.prototype[n])}function t(s){if(!(this instanceof t))return new t(s);y.call(this,s),d.call(this,s),this.allowHalfOpen=!0,s&&(!1===s.readable&&(this.readable=!1),!1===s.writable&&(this.writable=!1),!1===s.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",e)))}function e(){this._writableState.ended||_.nextTick(c,this)}function c(s){s.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=p,this._writableState.destroyed=p)}})}).call(this)}).call(this,A("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(A,K,z){"use strict";K.exports=b;var _=A("./_stream_transform");function b(y){if(!(this instanceof b))return new b(y);_.call(this,y)}A("inherits")(b,_),b.prototype._transform=function(y,d,o){o(null,y)}},{"./_stream_transform":59,inherits:24}],58:[function(A,K,z){(function(_,b){(function(){"use strict";var y;K.exports=N,N.ReadableState=q,A("events");var o=function(h,a){return h.listeners(a).length},r=A("./internal/streams/stream"),n=A("buffer").Buffer,t=b.Uint8Array||function(){};var p,s=A("util");p=s&&s.debuglog?s.debuglog("stream"):function(){};var U,l,m,v=A("./internal/streams/buffer_list"),f=A("./internal/streams/destroy"),w=A("./internal/streams/state").getHighWaterMark,E=A("../errors").codes,T=E.ERR_INVALID_ARG_TYPE,M=E.ERR_STREAM_PUSH_AFTER_EOF,O=E.ERR_METHOD_NOT_IMPLEMENTED,R=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;A("inherits")(N,r);var g=f.errorOrDestroy,B=["error","close","destroy","pause","resume"];function q(C,h,a){y=y||A("./_stream_duplex"),"boolean"!=typeof a&&(a=h instanceof y),this.objectMode=!!(C=C||{}).objectMode,a&&(this.objectMode=this.objectMode||!!C.readableObjectMode),this.highWaterMark=w(this,C,"readableHighWaterMark",a),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==C.emitClose,this.autoDestroy=!!C.autoDestroy,this.destroyed=!1,this.defaultEncoding=C.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,C.encoding&&(U||(U=A("string_decoder/").StringDecoder),this.decoder=new U(C.encoding),this.encoding=C.encoding)}function N(C){if(y=y||A("./_stream_duplex"),!(this instanceof N))return new N(C);this._readableState=new q(C,this,this instanceof y),this.readable=!0,C&&("function"==typeof C.read&&(this._read=C.read),"function"==typeof C.destroy&&(this._destroy=C.destroy)),r.call(this)}function S(C,h,a,u,x){p("readableAddChunk",h);var G,D=C._readableState;if(null===h)D.reading=!1,function(C,h){if(p("onEofChunk"),!h.ended){if(h.decoder){var a=h.decoder.end();a&&a.length&&(h.buffer.push(a),h.length+=h.objectMode?1:a.length)}h.ended=!0,h.sync?W(C):(h.needReadable=!1,h.emittedReadable||(h.emittedReadable=!0,te(C)))}}(C,D);else if(x||(G=function(C,h){var a;return!function(C){return n.isBuffer(C)||C instanceof t}(h)&&"string"!=typeof h&&void 0!==h&&!C.objectMode&&(a=new T("chunk",["string","Buffer","Uint8Array"],h)),a}(D,h)),G)g(C,G);else if(D.objectMode||h&&h.length>0)if("string"!=typeof h&&!D.objectMode&&Object.getPrototypeOf(h)!==n.prototype&&(h=function(C){return n.from(C)}(h)),u)D.endEmitted?g(C,new R):k(C,D,h,!0);else if(D.ended)g(C,new M);else{if(D.destroyed)return!1;D.reading=!1,D.decoder&&!a?(h=D.decoder.write(h),D.objectMode||0!==h.length?k(C,D,h,!1):J(C,D)):k(C,D,h,!1)}else u||(D.reading=!1,J(C,D));return!D.ended&&(D.length<D.highWaterMark||0===D.length)}function k(C,h,a,u){h.flowing&&0===h.length&&!h.sync?(h.awaitDrain=0,C.emit("data",a)):(h.length+=h.objectMode?1:a.length,u?h.buffer.unshift(a):h.buffer.push(a),h.needReadable&&W(C)),J(C,h)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(h){!this._readableState||(this._readableState.destroyed=h)}}),N.prototype.destroy=f.destroy,N.prototype._undestroy=f.undestroy,N.prototype._destroy=function(C,h){h(C)},N.prototype.push=function(C,h){var u,a=this._readableState;return a.objectMode?u=!0:"string"==typeof C&&((h=h||a.defaultEncoding)!==a.encoding&&(C=n.from(C,h),h=""),u=!0),S(this,C,h,!1,u)},N.prototype.unshift=function(C){return S(this,C,null,!0,!1)},N.prototype.isPaused=function(){return!1===this._readableState.flowing},N.prototype.setEncoding=function(C){U||(U=A("string_decoder/").StringDecoder);var h=new U(C);this._readableState.decoder=h,this._readableState.encoding=this._readableState.decoder.encoding;for(var a=this._readableState.buffer.head,u="";null!==a;)u+=h.write(a.data),a=a.next;return this._readableState.buffer.clear(),""!==u&&this._readableState.buffer.push(u),this._readableState.length=u.length,this};var Z=1073741824;function re(C,h){return C<=0||0===h.length&&h.ended?0:h.objectMode?1:C!=C?h.flowing&&h.length?h.buffer.head.data.length:h.length:(C>h.highWaterMark&&(h.highWaterMark=function(C){return C>=Z?C=Z:(C--,C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,C|=C>>>16,C++),C}(C)),C<=h.length?C:h.ended?h.length:(h.needReadable=!0,0))}function W(C){var h=C._readableState;p("emitReadable",h.needReadable,h.emittedReadable),h.needReadable=!1,h.emittedReadable||(p("emitReadable",h.flowing),h.emittedReadable=!0,_.nextTick(te,C))}function te(C){var h=C._readableState;p("emitReadable_",h.destroyed,h.length,h.ended),!h.destroyed&&(h.length||h.ended)&&(C.emit("readable"),h.emittedReadable=!1),h.needReadable=!h.flowing&&!h.ended&&h.length<=h.highWaterMark,P(C)}function J(C,h){h.readingMore||(h.readingMore=!0,_.nextTick(se,C,h))}function se(C,h){for(;!h.reading&&!h.ended&&(h.length<h.highWaterMark||h.flowing&&0===h.length);){var a=h.length;if(p("maybeReadMore read 0"),C.read(0),a===h.length)break}h.readingMore=!1}function V(C){var h=C._readableState;h.readableListening=C.listenerCount("readable")>0,h.resumeScheduled&&!h.paused?h.flowing=!0:C.listenerCount("data")>0&&C.resume()}function L(C){p("readable nexttick read 0"),C.read(0)}function oe(C,h){p("resume",h.reading),h.reading||C.read(0),h.resumeScheduled=!1,C.emit("resume"),P(C),h.flowing&&!h.reading&&C.read(0)}function P(C){var h=C._readableState;for(p("flow",h.flowing);h.flowing&&null!==C.read(););}function I(C,h){return 0===h.length?null:(h.objectMode?a=h.buffer.shift():!C||C>=h.length?(a=h.decoder?h.buffer.join(""):1===h.buffer.length?h.buffer.first():h.buffer.concat(h.length),h.buffer.clear()):a=h.buffer.consume(C,h.decoder),a);var a}function F(C){var h=C._readableState;p("endReadable",h.endEmitted),h.endEmitted||(h.ended=!0,_.nextTick($,h,C))}function $(C,h){if(p("endReadableNT",C.endEmitted,C.length),!C.endEmitted&&0===C.length&&(C.endEmitted=!0,h.readable=!1,h.emit("end"),C.autoDestroy)){var a=h._writableState;(!a||a.autoDestroy&&a.finished)&&h.destroy()}}function X(C,h){for(var a=0,u=C.length;a<u;a++)if(C[a]===h)return a;return-1}N.prototype.read=function(C){p("read",C),C=parseInt(C,10);var h=this._readableState,a=C;if(0!==C&&(h.emittedReadable=!1),0===C&&h.needReadable&&((0!==h.highWaterMark?h.length>=h.highWaterMark:h.length>0)||h.ended))return p("read: emitReadable",h.length,h.ended),0===h.length&&h.ended?F(this):W(this),null;if(0===(C=re(C,h))&&h.ended)return 0===h.length&&F(this),null;var x,u=h.needReadable;return p("need readable",u),(0===h.length||h.length-C<h.highWaterMark)&&p("length less than watermark",u=!0),h.ended||h.reading?p("reading or ended",u=!1):u&&(p("do read"),h.reading=!0,h.sync=!0,0===h.length&&(h.needReadable=!0),this._read(h.highWaterMark),h.sync=!1,h.reading||(C=re(a,h))),null===(x=C>0?I(C,h):null)?(h.needReadable=h.length<=h.highWaterMark,C=0):(h.length-=C,h.awaitDrain=0),0===h.length&&(h.ended||(h.needReadable=!0),a!==C&&h.ended&&F(this)),null!==x&&this.emit("data",x),x},N.prototype._read=function(C){g(this,new O("_read()"))},N.prototype.pipe=function(C,h){var a=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=C;break;case 1:u.pipes=[u.pipes,C];break;default:u.pipes.push(C)}u.pipesCount+=1,p("pipe count=%d opts=%j",u.pipesCount,h);var D=h&&!1===h.end||C===_.stdout||C===_.stderr?ve:ee;function G(we,me){p("onunpipe"),we===a&&me&&!1===me.hasUnpiped&&(me.hasUnpiped=!0,p("cleanup"),C.removeListener("close",ge),C.removeListener("finish",be),C.removeListener("drain",ae),C.removeListener("error",ce),C.removeListener("unpipe",G),a.removeListener("end",ee),a.removeListener("end",ve),a.removeListener("data",he),le=!0,u.awaitDrain&&(!C._writableState||C._writableState.needDrain)&&ae())}function ee(){p("onend"),C.end()}u.endEmitted?_.nextTick(D):a.once("end",D),C.on("unpipe",G);var ae=function(C){return function(){var a=C._readableState;p("pipeOnDrain",a.awaitDrain),a.awaitDrain&&a.awaitDrain--,0===a.awaitDrain&&o(C,"data")&&(a.flowing=!0,P(C))}}(a);C.on("drain",ae);var le=!1;function he(we){p("ondata");var me=C.write(we);p("dest.write",me),!1===me&&((1===u.pipesCount&&u.pipes===C||u.pipesCount>1&&-1!==X(u.pipes,C))&&!le&&(p("false write response, pause",u.awaitDrain),u.awaitDrain++),a.pause())}function ce(we){p("onerror",we),ve(),C.removeListener("error",ce),0===o(C,"error")&&g(C,we)}function ge(){C.removeListener("finish",be),ve()}function be(){p("onfinish"),C.removeListener("close",ge),ve()}function ve(){p("unpipe"),a.unpipe(C)}return a.on("data",he),function(C,h,a){if("function"==typeof C.prependListener)return C.prependListener(h,a);C._events&&C._events[h]?Array.isArray(C._events[h])?C._events[h].unshift(a):C._events[h]=[a,C._events[h]]:C.on(h,a)}(C,"error",ce),C.once("close",ge),C.once("finish",be),C.emit("pipe",a),u.flowing||(p("pipe resume"),a.resume()),C},N.prototype.unpipe=function(C){var h=this._readableState,a={hasUnpiped:!1};if(0===h.pipesCount)return this;if(1===h.pipesCount)return C&&C!==h.pipes||(C||(C=h.pipes),h.pipes=null,h.pipesCount=0,h.flowing=!1,C&&C.emit("unpipe",this,a)),this;if(!C){var u=h.pipes,x=h.pipesCount;h.pipes=null,h.pipesCount=0,h.flowing=!1;for(var D=0;D<x;D++)u[D].emit("unpipe",this,{hasUnpiped:!1});return this}var G=X(h.pipes,C);return-1===G||(h.pipes.splice(G,1),h.pipesCount-=1,1===h.pipesCount&&(h.pipes=h.pipes[0]),C.emit("unpipe",this,a)),this},N.prototype.addListener=N.prototype.on=function(C,h){var a=r.prototype.on.call(this,C,h),u=this._readableState;return"data"===C?(u.readableListening=this.listenerCount("readable")>0,!1!==u.flowing&&this.resume()):"readable"===C&&!u.endEmitted&&!u.readableListening&&(u.readableListening=u.needReadable=!0,u.flowing=!1,u.emittedReadable=!1,p("on readable",u.length,u.reading),u.length?W(this):u.reading||_.nextTick(L,this)),a},N.prototype.removeListener=function(C,h){var a=r.prototype.removeListener.call(this,C,h);return"readable"===C&&_.nextTick(V,this),a},N.prototype.removeAllListeners=function(C){var h=r.prototype.removeAllListeners.apply(this,arguments);return("readable"===C||void 0===C)&&_.nextTick(V,this),h},N.prototype.resume=function(){var C=this._readableState;return C.flowing||(p("resume"),C.flowing=!C.readableListening,function(C,h){h.resumeScheduled||(h.resumeScheduled=!0,_.nextTick(oe,C,h))}(this,C)),C.paused=!1,this},N.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},N.prototype.wrap=function(C){var h=this,a=this._readableState,u=!1;for(var x in C.on("end",function(){if(p("wrapped end"),a.decoder&&!a.ended){var G=a.decoder.end();G&&G.length&&h.push(G)}h.push(null)}),C.on("data",function(G){p("wrapped data"),a.decoder&&(G=a.decoder.write(G)),a.objectMode&&null==G||!(a.objectMode||G&&G.length)||h.push(G)||(u=!0,C.pause())}),C)void 0===this[x]&&"function"==typeof C[x]&&(this[x]=function(ee){return function(){return C[ee].apply(C,arguments)}}(x));for(var D=0;D<B.length;D++)C.on(B[D],this.emit.bind(this,B[D]));return this._read=function(G){p("wrapped _read",G),u&&(u=!1,C.resume())},this},"function"==typeof Symbol&&(N.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=A("./internal/streams/async_iterator")),l(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(h){this._readableState&&(this._readableState.flowing=h)}}),N._fromList=I,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(N.from=function(C,h){return void 0===m&&(m=A("./internal/streams/from")),m(N,C,h)})}).call(this)}).call(this,A("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(A,K,z){"use strict";K.exports=t;var _=A("../errors").codes,b=_.ERR_METHOD_NOT_IMPLEMENTED,y=_.ERR_MULTIPLE_CALLBACK,d=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=_.ERR_TRANSFORM_WITH_LENGTH_0,r=A("./_stream_duplex");function n(s,p){var v=this._transformState;v.transforming=!1;var f=v.writecb;if(null===f)return this.emit("error",new y);v.writechunk=null,v.writecb=null,null!=p&&this.push(p),f(s);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function t(s){if(!(this instanceof t))return new t(s);r.call(this,s),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&("function"==typeof s.transform&&(this._transform=s.transform),"function"==typeof s.flush&&(this._flush=s.flush)),this.on("prefinish",e)}function e(){var s=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush(function(p,v){c(s,p,v)})}function c(s,p,v){if(p)return s.emit("error",p);if(null!=v&&s.push(v),s._writableState.length)throw new o;if(s._transformState.transforming)throw new d;return s.push(null)}A("inherits")(t,r),t.prototype.push=function(s,p){return this._transformState.needTransform=!1,r.prototype.push.call(this,s,p)},t.prototype._transform=function(s,p,v){v(new b("_transform()"))},t.prototype._write=function(s,p,v){var f=this._transformState;if(f.writecb=v,f.writechunk=s,f.writeencoding=p,!f.transforming){var i=this._readableState;(f.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},t.prototype._read=function(s){var p=this._transformState;null===p.writechunk||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},t.prototype._destroy=function(s,p){r.prototype._destroy.call(this,s,function(v){p(v)})}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(A,K,z){(function(_,b){(function(){"use strict";function d(P){var I=this;this.next=null,this.entry=null,this.finish=function(){!function(P,I,F){var $=P.entry;for(P.entry=null;$;){var X=$.callback;I.pendingcb--,X(F),$=$.next}I.corkedRequestsFree.next=P}(I,P)}}var o;K.exports=q,q.WritableState=B;var r={deprecate:A("util-deprecate")},n=A("./internal/streams/stream"),t=A("buffer").Buffer,e=b.Uint8Array||function(){};var H,p=A("./internal/streams/destroy"),f=A("./internal/streams/state").getHighWaterMark,i=A("../errors").codes,w=i.ERR_INVALID_ARG_TYPE,E=i.ERR_METHOD_NOT_IMPLEMENTED,T=i.ERR_MULTIPLE_CALLBACK,M=i.ERR_STREAM_CANNOT_PIPE,O=i.ERR_STREAM_DESTROYED,R=i.ERR_STREAM_NULL_VALUES,U=i.ERR_STREAM_WRITE_AFTER_END,l=i.ERR_UNKNOWN_ENCODING,m=p.errorOrDestroy;function g(){}function B(P,I,F){o=o||A("./_stream_duplex"),"boolean"!=typeof F&&(F=I instanceof o),this.objectMode=!!(P=P||{}).objectMode,F&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=f(this,P,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===P.decodeStrings),this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){!function(P,I){var F=P._writableState,$=F.sync,X=F.writecb;if("function"!=typeof X)throw new T;if(function(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}(F),I)!function(P,I,F,$,X){--I.pendingcb,F?(_.nextTick(X,$),_.nextTick(L,P,I),P._writableState.errorEmitted=!0,m(P,$)):(X($),P._writableState.errorEmitted=!0,m(P,$),L(P,I))}(P,F,$,I,X);else{var C=se(F)||P.destroyed;!C&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&J(P,F),$?_.nextTick(W,P,F,C,X):W(P,F,C,X)}}(I,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==P.emitClose,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function q(P){var I=this instanceof(o=o||A("./_stream_duplex"));if(!I&&!H.call(q,this))return new q(P);this._writableState=new B(P,this,I),this.writable=!0,P&&("function"==typeof P.write&&(this._write=P.write),"function"==typeof P.writev&&(this._writev=P.writev),"function"==typeof P.destroy&&(this._destroy=P.destroy),"function"==typeof P.final&&(this._final=P.final)),n.call(this)}function j(P,I,F,$,X,C){if(!F){var h=function(P,I,F){return!P.objectMode&&!1!==P.decodeStrings&&"string"==typeof I&&(I=t.from(I,F)),I}(I,$,X);$!==h&&(F=!0,X="buffer",$=h)}var a=I.objectMode?1:$.length;I.length+=a;var u=I.length<I.highWaterMark;if(u||(I.needDrain=!0),I.writing||I.corked){var x=I.lastBufferedRequest;I.lastBufferedRequest={chunk:$,encoding:X,isBuf:F,callback:C,next:null},x?x.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else Z(P,I,!1,a,$,X,C);return u}function Z(P,I,F,$,X,C,h){I.writelen=$,I.writecb=h,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new O("write")):F?P._writev(X,I.onwrite):P._write(X,C,I.onwrite),I.sync=!1}function W(P,I,F,$){F||function(P,I){0===I.length&&I.needDrain&&(I.needDrain=!1,P.emit("drain"))}(P,I),I.pendingcb--,$(),L(P,I)}function J(P,I){I.bufferProcessing=!0;var F=I.bufferedRequest;if(P._writev&&F&&F.next){var X=new Array(I.bufferedRequestCount),C=I.corkedRequestsFree;C.entry=F;for(var h=0,a=!0;F;)X[h]=F,F.isBuf||(a=!1),F=F.next,h+=1;X.allBuffers=a,Z(P,I,!0,I.length,X,"",C.finish),I.pendingcb++,I.lastBufferedRequest=null,C.next?(I.corkedRequestsFree=C.next,C.next=null):I.corkedRequestsFree=new d(I),I.bufferedRequestCount=0}else{for(;F;){var u=F.chunk;if(Z(P,I,!1,I.objectMode?1:u.length,u,F.encoding,F.callback),F=F.next,I.bufferedRequestCount--,I.writing)break}null===F&&(I.lastBufferedRequest=null)}I.bufferedRequest=F,I.bufferProcessing=!1}function se(P){return P.ending&&0===P.length&&null===P.bufferedRequest&&!P.finished&&!P.writing}function ne(P,I){P._final(function(F){I.pendingcb--,F&&m(P,F),I.prefinished=!0,P.emit("prefinish"),L(P,I)})}function L(P,I){var F=se(I);if(F&&(function(P,I){!I.prefinished&&!I.finalCalled&&("function"!=typeof P._final||I.destroyed?(I.prefinished=!0,P.emit("prefinish")):(I.pendingcb++,I.finalCalled=!0,_.nextTick(ne,P,I)))}(P,I),0===I.pendingcb&&(I.finished=!0,P.emit("finish"),I.autoDestroy))){var $=P._readableState;(!$||$.autoDestroy&&$.endEmitted)&&P.destroy()}return F}A("inherits")(q,n),B.prototype.getBuffer=function(){for(var I=this.bufferedRequest,F=[];I;)F.push(I),I=I.next;return F},function(){try{Object.defineProperty(B.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(P){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(H=Function.prototype[Symbol.hasInstance],Object.defineProperty(q,Symbol.hasInstance,{value:function(I){return!!H.call(this,I)||this===q&&I&&I._writableState instanceof B}})):H=function(I){return I instanceof this},q.prototype.pipe=function(){m(this,new M)},q.prototype.write=function(P,I,F){var $=this._writableState,X=!1,C=!$.objectMode&&function(P){return t.isBuffer(P)||P instanceof e}(P);return C&&!t.isBuffer(P)&&(P=function(P){return t.from(P)}(P)),"function"==typeof I&&(F=I,I=null),C?I="buffer":I||(I=$.defaultEncoding),"function"!=typeof F&&(F=g),$.ending?function(P,I){var F=new U;m(P,F),_.nextTick(I,F)}(this,F):(C||function(P,I,F,$){var X;return null===F?X=new R:"string"!=typeof F&&!I.objectMode&&(X=new w("chunk",["string","Buffer"],F)),!X||(m(P,X),_.nextTick($,X),!1)}(this,$,P,F))&&($.pendingcb++,X=j(this,$,C,P,I,F)),X},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.bufferProcessing&&P.bufferedRequest&&J(this,P))},q.prototype.setDefaultEncoding=function(I){if("string"==typeof I&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new l(I);return this._writableState.defaultEncoding=I,this},Object.defineProperty(q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),q.prototype._write=function(P,I,F){F(new E("_write()"))},q.prototype._writev=null,q.prototype.end=function(P,I,F){var $=this._writableState;return"function"==typeof P?(F=P,P=null,I=null):"function"==typeof I&&(F=I,I=null),null!=P&&this.write(P,I),$.corked&&($.corked=1,this.uncork()),$.ending||function(P,I,F){I.ending=!0,L(P,I),F&&(I.finished?_.nextTick(F):P.once("finish",F)),I.ended=!0,P.writable=!1}(this,$,F),this},Object.defineProperty(q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(q.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(I){!this._writableState||(this._writableState.destroyed=I)}}),q.prototype.destroy=p.destroy,q.prototype._undestroy=p.undestroy,q.prototype._destroy=function(P,I){I(P)}}).call(this)}).call(this,A("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(A,K,z){(function(_){(function(){"use strict";var b;function y(M,O,R){return O in M?Object.defineProperty(M,O,{value:R,enumerable:!0,configurable:!0,writable:!0}):M[O]=R,M}var d=A("./end-of-stream"),o=Symbol("lastResolve"),r=Symbol("lastReject"),n=Symbol("error"),t=Symbol("ended"),e=Symbol("lastPromise"),c=Symbol("handlePromise"),s=Symbol("stream");function p(M,O){return{value:M,done:O}}function v(M){var O=M[o];if(null!==O){var R=M[s].read();null!==R&&(M[e]=null,M[o]=null,M[r]=null,O(p(R,!1)))}}function f(M){_.nextTick(v,M)}var w=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((y(b={get stream(){return this[s]},next:function(){var O=this,R=this[n];if(null!==R)return Promise.reject(R);if(this[t])return Promise.resolve(p(void 0,!0));if(this[s].destroyed)return new Promise(function(g,B){_.nextTick(function(){O[n]?B(O[n]):g(p(void 0,!0))})});var l,U=this[e];if(U)l=new Promise(function(M,O){return function(R,U){M.then(function(){O[t]?R(p(void 0,!0)):O[c](R,U)},U)}}(U,this));else{var m=this[s].read();if(null!==m)return Promise.resolve(p(m,!1));l=new Promise(this[c])}return this[e]=l,l}},Symbol.asyncIterator,function(){return this}),y(b,"return",function(){var O=this;return new Promise(function(R,U){O[s].destroy(null,function(l){l?U(l):R(p(void 0,!0))})})}),b),w);K.exports=function(O){var R,U=Object.create(E,(y(R={},s,{value:O,writable:!0}),y(R,o,{value:null,writable:!0}),y(R,r,{value:null,writable:!0}),y(R,n,{value:null,writable:!0}),y(R,t,{value:O._readableState.endEmitted,writable:!0}),y(R,c,{value:function(m,g){var B=U[s].read();B?(U[e]=null,U[o]=null,U[r]=null,m(p(B,!1))):(U[o]=m,U[r]=g)},writable:!0}),R));return U[e]=null,d(O,function(l){if(l&&"ERR_STREAM_PREMATURE_CLOSE"!==l.code){var m=U[r];return null!==m&&(U[e]=null,U[o]=null,U[r]=null,m(l)),void(U[n]=l)}var g=U[o];null!==g&&(U[e]=null,U[o]=null,U[r]=null,g(p(void 0,!0))),U[t]=!0}),O.on("readable",f.bind(null,U)),U}}).call(this)}).call(this,A("_process"))},{"./end-of-stream":64,_process:50}],62:[function(A,K,z){"use strict";function _(v,f){var i=Object.keys(v);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(v);f&&(w=w.filter(function(E){return Object.getOwnPropertyDescriptor(v,E).enumerable})),i.push.apply(i,w)}return i}function y(v,f,i){return f in v?Object.defineProperty(v,f,{value:i,enumerable:!0,configurable:!0,writable:!0}):v[f]=i,v}function o(v,f){for(var i=0;i<f.length;i++){var w=f[i];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}var t=A("buffer").Buffer,c=A("util").inspect,s=c&&c.custom||"inspect";function p(v,f,i){t.prototype.copy.call(v,f,i)}K.exports=function(){function v(){(function(v,f){if(!(v instanceof f))throw new TypeError("Cannot call a class as a function")})(this,v),this.head=null,this.tail=null,this.length=0}return function(v,f,i){f&&o(v.prototype,f),i&&o(v,i)}(v,[{key:"push",value:function(i){var w={data:i,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(i){var w={data:i,next:this.head};0===this.length&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(0!==this.length){var i=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(0===this.length)return"";for(var w=this.head,E=""+w.data;w=w.next;)E+=i+w.data;return E}},{key:"concat",value:function(i){if(0===this.length)return t.alloc(0);for(var w=t.allocUnsafe(i>>>0),E=this.head,T=0;E;)p(E.data,w,T),T+=E.data.length,E=E.next;return w}},{key:"consume",value:function(i,w){var E;return i<this.head.data.length?(E=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):E=i===this.head.data.length?this.shift():w?this._getString(i):this._getBuffer(i),E}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var w=this.head,E=1,T=w.data;for(i-=T.length;w=w.next;){var M=w.data,O=i>M.length?M.length:i;if(T+=O===M.length?M:M.slice(0,i),0==(i-=O)){O===M.length?(++E,this.head=w.next?w.next:this.tail=null):(this.head=w,w.data=M.slice(O));break}++E}return this.length-=E,T}},{key:"_getBuffer",value:function(i){var w=t.allocUnsafe(i),E=this.head,T=1;for(E.data.copy(w),i-=E.data.length;E=E.next;){var M=E.data,O=i>M.length?M.length:i;if(M.copy(w,w.length-i,0,O),0==(i-=O)){O===M.length?(++T,this.head=E.next?E.next:this.tail=null):(this.head=E,E.data=M.slice(O));break}++T}return this.length-=T,w}},{key:s,value:function(i,w){return c(this,function(v){for(var f=1;f<arguments.length;f++){var i=null!=arguments[f]?arguments[f]:{};f%2?_(Object(i),!0).forEach(function(w){y(v,w,i[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach(function(w){Object.defineProperty(v,w,Object.getOwnPropertyDescriptor(i,w))})}return v}({},w,{depth:0,customInspect:!1}))}}]),v}()},{buffer:17,util:16}],63:[function(A,K,z){(function(_){(function(){"use strict";function y(t,e){r(t,e),d(t)}function d(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}K.exports={destroy:function(t,e){var c=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(r,this,t)):_.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(v){!e&&v?c._writableState?c._writableState.errorEmitted?_.nextTick(d,c):(c._writableState.errorEmitted=!0,_.nextTick(y,c,v)):_.nextTick(y,c,v):e?(_.nextTick(d,c),e(v)):_.nextTick(d,c)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var c=t._readableState,s=t._writableState;c&&c.autoDestroy||s&&s.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,A("_process"))},{_process:50}],64:[function(A,K,z){"use strict";var _=A("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function y(){}K.exports=function o(r,n,t){if("function"==typeof n)return o(r,null,n);n||(n={}),t=function(r){var n=!1;return function(){if(!n){n=!0;for(var t=arguments.length,e=new Array(t),c=0;c<t;c++)e[c]=arguments[c];r.apply(this,e)}}}(t||y);var e=n.readable||!1!==n.readable&&r.readable,c=n.writable||!1!==n.writable&&r.writable,s=function(){r.writable||v()},p=r._writableState&&r._writableState.finished,v=function(){c=!1,p=!0,e||t.call(r)},f=r._readableState&&r._readableState.endEmitted,i=function(){e=!1,f=!0,c||t.call(r)},w=function(O){t.call(r,O)},E=function(){var O;return e&&!f?((!r._readableState||!r._readableState.ended)&&(O=new _),t.call(r,O)):c&&!p?((!r._writableState||!r._writableState.ended)&&(O=new _),t.call(r,O)):void 0},T=function(){r.req.on("finish",v)};return function(r){return r.setHeader&&"function"==typeof r.abort}(r)?(r.on("complete",v),r.on("abort",E),r.req?T():r.on("request",T)):c&&!r._writableState&&(r.on("end",s),r.on("close",s)),r.on("end",i),r.on("finish",v),!1!==n.error&&r.on("error",w),r.on("close",E),function(){r.removeListener("complete",v),r.removeListener("abort",E),r.removeListener("request",T),r.req&&r.req.removeListener("finish",v),r.removeListener("end",s),r.removeListener("close",s),r.removeListener("finish",v),r.removeListener("end",i),r.removeListener("error",w),r.removeListener("close",E)}}},{"../../../errors":55}],65:[function(A,K,z){K.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(A,K,z){"use strict";var _;var y=A("../../../errors").codes,d=y.ERR_MISSING_ARGS,o=y.ERR_STREAM_DESTROYED;function r(v){if(v)throw v}function t(v,f,i,w){w=function(v){var f=!1;return function(){f||(f=!0,v.apply(void 0,arguments))}}(w);var E=!1;v.on("close",function(){E=!0}),void 0===_&&(_=A("./end-of-stream")),_(v,{readable:f,writable:i},function(M){if(M)return w(M);E=!0,w()});var T=!1;return function(M){if(!E&&!T){if(T=!0,function(v){return v.setHeader&&"function"==typeof v.abort}(v))return v.abort();if("function"==typeof v.destroy)return v.destroy();w(M||new o("pipe"))}}}function e(v){v()}function c(v,f){return v.pipe(f)}function s(v){return v.length&&"function"==typeof v[v.length-1]?v.pop():r}K.exports=function(){for(var v=arguments.length,f=new Array(v),i=0;i<v;i++)f[i]=arguments[i];var w=s(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new d("streams");var E,T=f.map(function(M,O){var R=O<f.length-1;return t(M,R,O>0,function(l){E||(E=l),l&&T.forEach(e),!R&&(T.forEach(e),w(E))})});return f.reduce(c)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(A,K,z){"use strict";var _=A("../../../errors").codes.ERR_INVALID_OPT_VALUE;K.exports={getHighWaterMark:function(d,o,r,n){var t=function(d,o,r){return null!=d.highWaterMark?d.highWaterMark:o?d[r]:null}(o,n,r);if(null!=t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new _(n?r:"highWaterMark",t);return Math.floor(t)}return d.objectMode?16:16384}}},{"../../../errors":55}],68:[function(A,K,z){K.exports=A("events").EventEmitter},{events:22}],69:[function(A,K,z){(z=K.exports=A("./lib/_stream_readable.js")).Stream=z,z.Readable=z,z.Writable=A("./lib/_stream_writable.js"),z.Duplex=A("./lib/_stream_duplex.js"),z.Transform=A("./lib/_stream_transform.js"),z.PassThrough=A("./lib/_stream_passthrough.js"),z.finished=A("./lib/internal/streams/end-of-stream.js"),z.pipeline=A("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(A,K,z){"use strict";function _(y,d,o){var r=this;this._callback=y,this._args=o,this._interval=setInterval(y,d,this._args),this.reschedule=function(n){n||(n=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,n,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}K.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var y;if(arguments.length>0){y=new Array(arguments.length-2);for(var d=0;d<y.length;d++)y[d]=arguments[d+2]}return new _(arguments[0],arguments[1],y)}},{}],71:[function(A,K,z){"use strict";K.exports=A("./index.js")()},{"./index.js":72}],72:[function(A,K,z){(function(_){(function(){"use strict";function b(o){return o instanceof _?_.from(o):new o.constructor(o.buffer.slice(),o.byteOffset,o.length)}K.exports=function(o){return(o=o||{}).circles?function(o){var r=[],n=[];return o.proto?c:e;function t(s,p){for(var v=Object.keys(s),f=new Array(v.length),i=0;i<v.length;i++){var w=v[i],E=s[w];if("object"!=typeof E||null===E)f[w]=E;else if(E instanceof Date)f[w]=new Date(E);else if(ArrayBuffer.isView(E))f[w]=b(E);else{var T=r.indexOf(E);f[w]=-1!==T?n[T]:p(E)}}return f}function e(s){if("object"!=typeof s||null===s)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return t(s,e);if(s instanceof Map)return new Map(t(Array.from(s),e));if(s instanceof Set)return new Set(t(Array.from(s),e));var p={};for(var v in r.push(s),n.push(p),s)if(!1!==Object.hasOwnProperty.call(s,v)){var f=s[v];if("object"!=typeof f||null===f)p[v]=f;else if(f instanceof Date)p[v]=new Date(f);else if(f instanceof Map)p[v]=new Map(t(Array.from(f),e));else if(f instanceof Set)p[v]=new Set(t(Array.from(f),e));else if(ArrayBuffer.isView(f))p[v]=b(f);else{var i=r.indexOf(f);p[v]=-1!==i?n[i]:e(f)}}return r.pop(),n.pop(),p}function c(s){if("object"!=typeof s||null===s)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return t(s,c);if(s instanceof Map)return new Map(t(Array.from(s),c));if(s instanceof Set)return new Set(t(Array.from(s),c));var p={};for(var v in r.push(s),n.push(p),s){var f=s[v];if("object"!=typeof f||null===f)p[v]=f;else if(f instanceof Date)p[v]=new Date(f);else if(f instanceof Map)p[v]=new Map(t(Array.from(f),c));else if(f instanceof Set)p[v]=new Set(t(Array.from(f),c));else if(ArrayBuffer.isView(f))p[v]=b(f);else{var i=r.indexOf(f);p[v]=-1!==i?n[i]:c(f)}}return r.pop(),n.pop(),p}}(o):o.proto?function t(e){if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return r(e,t);if(e instanceof Map)return new Map(r(Array.from(e),t));if(e instanceof Set)return new Set(r(Array.from(e),t));var c={};for(var s in e){var p=e[s];c[s]="object"!=typeof p||null===p?p:p instanceof Date?new Date(p):p instanceof Map?new Map(r(Array.from(p),t)):p instanceof Set?new Set(r(Array.from(p),t)):ArrayBuffer.isView(p)?b(p):t(p)}return c}:function n(e){if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return r(e,n);if(e instanceof Map)return new Map(r(Array.from(e),n));if(e instanceof Set)return new Set(r(Array.from(e),n));var c={};for(var s in e)if(!1!==Object.hasOwnProperty.call(e,s)){var p=e[s];c[s]="object"!=typeof p||null===p?p:p instanceof Date?new Date(p):p instanceof Map?new Map(r(Array.from(p),n)):p instanceof Set?new Set(r(Array.from(p),n)):ArrayBuffer.isView(p)?b(p):n(p)}return c};function r(e,c){for(var s=Object.keys(e),p=new Array(s.length),v=0;v<s.length;v++){var f=s[v],i=e[f];p[f]="object"!=typeof i||null===i?i:i instanceof Date?new Date(i):ArrayBuffer.isView(i)?b(i):c(i)}return p}}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],73:[function(A,K,z){var _=A("buffer"),b=_.Buffer;function y(o,r){for(var n in o)r[n]=o[n]}function d(o,r,n){return b(o,r,n)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?K.exports=_:(y(_,z),z.Buffer=d),d.prototype=Object.create(b.prototype),y(b,d),d.from=function(o,r,n){if("number"==typeof o)throw new TypeError("Argument must not be a number");return b(o,r,n)},d.alloc=function(o,r,n){if("number"!=typeof o)throw new TypeError("Argument must be a number");var t=b(o);return void 0!==r?"string"==typeof n?t.fill(r,n):t.fill(r):t.fill(0),t},d.allocUnsafe=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return b(o)},d.allocUnsafeSlow=function(o){if("number"!=typeof o)throw new TypeError("Argument must be a number");return _.SlowBuffer(o)}},{buffer:17}],74:[function(A,K,z){K.exports=function(y){var d=y._readableState;return d?d.objectMode||"number"==typeof y._duplexState?y.read():y.read(function(y){return y.buffer.length?y.buffer.head?y.buffer.head.data.length:y.buffer[0].length:y.length}(d)):null}},{}],75:[function(A,K,z){"use strict";var _=A("safe-buffer").Buffer,b=_.isEncoding||function(T){switch((T=""+T)&&T.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(T){var M;switch(this.encoding=function(T){var M=function(T){if(!T)return"utf8";for(var M;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(M)return;T=(""+T).toLowerCase(),M=!0}}(T);if("string"!=typeof M&&(_.isEncoding===b||!b(T)))throw new Error("Unknown encoding: "+T);return M||T}(T),this.encoding){case"utf16le":this.text=p,this.end=v,M=4;break;case"utf8":this.fillLast=e,M=4;break;case"base64":this.text=f,this.end=i,M=3;break;default:return this.write=w,void(this.end=E)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(M)}function r(T){return T<=127?0:T>>5==6?2:T>>4==14?3:T>>3==30?4:T>>6==2?-1:-2}function e(T){var M=this.lastTotal-this.lastNeed,O=function(T,M,O){if(128!=(192&M[0]))return T.lastNeed=0,"\ufffd";if(T.lastNeed>1&&M.length>1){if(128!=(192&M[1]))return T.lastNeed=1,"\ufffd";if(T.lastNeed>2&&M.length>2&&128!=(192&M[2]))return T.lastNeed=2,"\ufffd"}}(this,T);return void 0!==O?O:this.lastNeed<=T.length?(T.copy(this.lastChar,M,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(T.copy(this.lastChar,M,0,T.length),void(this.lastNeed-=T.length))}function p(T,M){if((T.length-M)%2==0){var O=T.toString("utf16le",M);if(O){var R=O.charCodeAt(O.length-1);if(R>=55296&&R<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1],O.slice(0,-1)}return O}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=T[T.length-1],T.toString("utf16le",M,T.length-1)}function v(T){var M=T&&T.length?this.write(T):"";return this.lastNeed?M+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):M}function f(T,M){var O=(T.length-M)%3;return 0===O?T.toString("base64",M):(this.lastNeed=3-O,this.lastTotal=3,1===O?this.lastChar[0]=T[T.length-1]:(this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1]),T.toString("base64",M,T.length-O))}function i(T){var M=T&&T.length?this.write(T):"";return this.lastNeed?M+this.lastChar.toString("base64",0,3-this.lastNeed):M}function w(T){return T.toString(this.encoding)}function E(T){return T&&T.length?this.write(T):""}z.StringDecoder=o,o.prototype.write=function(T){if(0===T.length)return"";var M,O;if(this.lastNeed){if(void 0===(M=this.fillLast(T)))return"";O=this.lastNeed,this.lastNeed=0}else O=0;return O<T.length?M?M+this.text(T,O):this.text(T,O):M||""},o.prototype.end=function(T){var M=T&&T.length?this.write(T):"";return this.lastNeed?M+"\ufffd":M},o.prototype.text=function(T,M){var O=function(T,M,O){var R=M.length-1;if(R<O)return 0;var U=r(M[R]);return U>=0?(U>0&&(T.lastNeed=U-1),U):--R<O||-2===U?0:(U=r(M[R]))>=0?(U>0&&(T.lastNeed=U-2),U):--R<O||-2===U?0:(U=r(M[R]))>=0?(U>0&&(2===U?U=0:T.lastNeed=U-3),U):0}(this,T,M);if(!this.lastNeed)return T.toString("utf8",M);this.lastTotal=O;var R=T.length-(O-this.lastNeed);return T.copy(this.lastChar,0,R),T.toString("utf8",M,R)},o.prototype.fillLast=function(T){if(this.lastNeed<=T.length)return T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,T.length),this.lastNeed-=T.length}},{"safe-buffer":73}],76:[function(A,K,z){"use strict";var _=A("punycode"),b=A("./util");function y(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}z.parse=M,z.resolve=function(l,m){return M(l,!1,!0).resolve(m)},z.resolveObject=function(l,m){return l?M(l,!1,!0).resolveObject(m):m},z.format=function(l){return b.isString(l)&&(l=M(l)),l instanceof y?l.format():y.prototype.format.call(l)},z.Url=y;var d=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,t=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),e=["'"].concat(t),c=["%","/","?",";","#"].concat(e),s=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,i={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=A("querystring");function M(l,m,g){if(l&&b.isObject(l)&&l instanceof y)return l;var B=new y;return B.parse(l,m,g),B}y.prototype.parse=function(l,m,g){if(!b.isString(l))throw new TypeError("Parameter 'url' must be a string, not "+typeof l);var B=l.indexOf("?"),H=-1!==B&&B<l.indexOf("#")?"?":"#",q=l.split(H);q[0]=q[0].replace(/\\/g,"/");var S=l=q.join(H);if(S=S.trim(),!g&&1===l.split("#").length){var k=r.exec(S);if(k)return this.path=S,this.href=S,this.pathname=k[1],k[2]?(this.search=k[2],this.query=m?T.parse(this.search.substr(1)):this.search.substr(1)):m&&(this.search="",this.query={}),this}var j=d.exec(S);if(j){var Z=(j=j[0]).toLowerCase();this.protocol=Z,S=S.substr(j.length)}if(g||j||S.match(/^\/\/[^@\/]+@[^@\/]+/)){var ie="//"===S.substr(0,2);ie&&(!j||!w[j])&&(S=S.substr(2),this.slashes=!0)}if(!w[j]&&(ie||j&&!E[j])){for(var re=-1,Q=0;Q<s.length;Q++)-1!==(W=S.indexOf(s[Q]))&&(-1===re||W<re)&&(re=W);var te,J;for(-1!==(J=-1===re?S.lastIndexOf("@"):S.lastIndexOf("@",re))&&(te=S.slice(0,J),S=S.slice(J+1),this.auth=decodeURIComponent(te)),re=-1,Q=0;Q<c.length;Q++){var W;-1!==(W=S.indexOf(c[Q]))&&(-1===re||W<re)&&(re=W)}-1===re&&(re=S.length),this.host=S.slice(0,re),S=S.slice(re),this.parseHost(),this.hostname=this.hostname||"";var se="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!se)for(var ne=this.hostname.split(/\./),V=(Q=0,ne.length);Q<V;Q++){var L=ne[Q];if(L&&!L.match(v)){for(var Y="",oe=0,P=L.length;oe<P;oe++)L.charCodeAt(oe)>127?Y+="x":Y+=L[oe];if(!Y.match(v)){var I=ne.slice(0,Q),F=ne.slice(Q+1),$=L.match(f);$&&(I.push($[1]),F.unshift($[2])),F.length&&(S="/"+F.join(".")+S),this.hostname=I.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),se||(this.hostname=_.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,se&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==S[0]&&(S="/"+S))}if(!i[Z])for(Q=0,V=e.length;Q<V;Q++){var h=e[Q];if(-1!==S.indexOf(h)){var a=encodeURIComponent(h);a===h&&(a=escape(h)),S=S.split(h).join(a)}}var u=S.indexOf("#");-1!==u&&(this.hash=S.substr(u),S=S.slice(0,u));var x=S.indexOf("?");return-1!==x?(this.search=S.substr(x),this.query=S.substr(x+1),m&&(this.query=T.parse(this.query)),S=S.slice(0,x)):m&&(this.search="",this.query={}),S&&(this.pathname=S),E[Z]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},y.prototype.format=function(){var l=this.auth||"";l&&(l=(l=encodeURIComponent(l)).replace(/%3A/i,":"),l+="@");var m=this.protocol||"",g=this.pathname||"",B=this.hash||"",H=!1,q="";this.host?H=l+this.host:this.hostname&&(H=l+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(H+=":"+this.port)),this.query&&b.isObject(this.query)&&Object.keys(this.query).length&&(q=T.stringify(this.query));var N=this.search||q&&"?"+q||"";return m&&":"!==m.substr(-1)&&(m+=":"),this.slashes||(!m||E[m])&&!1!==H?(H="//"+(H||""),g&&"/"!==g.charAt(0)&&(g="/"+g)):H||(H=""),B&&"#"!==B.charAt(0)&&(B="#"+B),N&&"?"!==N.charAt(0)&&(N="?"+N),m+H+(g=g.replace(/[?#]/g,function(S){return encodeURIComponent(S)}))+(N=N.replace("#","%23"))+B},y.prototype.resolve=function(l){return this.resolveObject(M(l,!1,!0)).format()},y.prototype.resolveObject=function(l){if(b.isString(l)){var m=new y;m.parse(l,!1,!0),l=m}for(var g=new y,B=Object.keys(this),H=0;H<B.length;H++){var q=B[H];g[q]=this[q]}if(g.hash=l.hash,""===l.href)return g.href=g.format(),g;if(l.slashes&&!l.protocol){for(var N=Object.keys(l),S=0;S<N.length;S++){var k=N[S];"protocol"!==k&&(g[k]=l[k])}return E[g.protocol]&&g.hostname&&!g.pathname&&(g.path=g.pathname="/"),g.href=g.format(),g}if(l.protocol&&l.protocol!==g.protocol){if(!E[l.protocol]){for(var j=Object.keys(l),Z=0;Z<j.length;Z++){var ie=j[Z];g[ie]=l[ie]}return g.href=g.format(),g}if(g.protocol=l.protocol,l.host||w[l.protocol])g.pathname=l.pathname;else{for(var V=(l.pathname||"").split("/");V.length&&!(l.host=V.shift()););l.host||(l.host=""),l.hostname||(l.hostname=""),""!==V[0]&&V.unshift(""),V.length<2&&V.unshift(""),g.pathname=V.join("/")}return g.search=l.search,g.query=l.query,g.host=l.host||"",g.auth=l.auth,g.hostname=l.hostname||l.host,g.port=l.port,(g.pathname||g.search)&&(g.path=(g.pathname||"")+(g.search||"")),g.slashes=g.slashes||l.slashes,g.href=g.format(),g}var W=g.pathname&&"/"===g.pathname.charAt(0),te=l.host||l.pathname&&"/"===l.pathname.charAt(0),J=te||W||g.host&&l.pathname,se=J,ne=g.pathname&&g.pathname.split("/")||[],L=(V=l.pathname&&l.pathname.split("/")||[],g.protocol&&!E[g.protocol]);if(L&&(g.hostname="",g.port=null,g.host&&(""===ne[0]?ne[0]=g.host:ne.unshift(g.host)),g.host="",l.protocol&&(l.hostname=null,l.port=null,l.host&&(""===V[0]?V[0]=l.host:V.unshift(l.host)),l.host=null),J=J&&(""===V[0]||""===ne[0])),te)g.host=l.host||""===l.host?l.host:g.host,g.hostname=l.hostname||""===l.hostname?l.hostname:g.hostname,g.search=l.search,g.query=l.query,ne=V;else if(V.length)ne||(ne=[]),ne.pop(),ne=ne.concat(V),g.search=l.search,g.query=l.query;else if(!b.isNullOrUndefined(l.search))return L&&(g.hostname=g.host=ne.shift(),(Y=!!(g.host&&g.host.indexOf("@")>0)&&g.host.split("@"))&&(g.auth=Y.shift(),g.host=g.hostname=Y.shift())),g.search=l.search,g.query=l.query,(!b.isNull(g.pathname)||!b.isNull(g.search))&&(g.path=(g.pathname?g.pathname:"")+(g.search?g.search:"")),g.href=g.format(),g;if(!ne.length)return g.pathname=null,g.path=g.search?"/"+g.search:null,g.href=g.format(),g;for(var oe=ne.slice(-1)[0],P=(g.host||l.host||ne.length>1)&&("."===oe||".."===oe)||""===oe,I=0,F=ne.length;F>=0;F--)"."===(oe=ne[F])?ne.splice(F,1):".."===oe?(ne.splice(F,1),I++):I&&(ne.splice(F,1),I--);if(!J&&!se)for(;I--;I)ne.unshift("..");J&&""!==ne[0]&&(!ne[0]||"/"!==ne[0].charAt(0))&&ne.unshift(""),P&&"/"!==ne.join("/").substr(-1)&&ne.push("");var Y,$=""===ne[0]||ne[0]&&"/"===ne[0].charAt(0);return L&&(g.hostname=g.host=$?"":ne.length?ne.shift():"",(Y=!!(g.host&&g.host.indexOf("@")>0)&&g.host.split("@"))&&(g.auth=Y.shift(),g.host=g.hostname=Y.shift())),(J=J||g.host&&ne.length)&&!$&&ne.unshift(""),ne.length?g.pathname=ne.join("/"):(g.pathname=null,g.path=null),(!b.isNull(g.pathname)||!b.isNull(g.search))&&(g.path=(g.pathname?g.pathname:"")+(g.search?g.search:"")),g.auth=l.auth||g.auth,g.slashes=g.slashes||l.slashes,g.href=g.format(),g},y.prototype.parseHost=function(){var l=this.host,m=o.exec(l);m&&(":"!==(m=m[0])&&(this.port=m.substr(1)),l=l.substr(0,l.length-m.length)),l&&(this.hostname=l)}},{"./util":77,punycode:51,querystring:54}],77:[function(A,K,z){"use strict";K.exports={isString:function(_){return"string"==typeof _},isObject:function(_){return"object"==typeof _&&null!==_},isNull:function(_){return null===_},isNullOrUndefined:function(_){return null==_}}},{}],78:[function(A,K,z){(function(_){(function(){function y(d){try{if(!_.localStorage)return!1}catch(r){return!1}var o=_.localStorage[d];return null!=o&&"true"===String(o).toLowerCase()}K.exports=function(d,o){if(y("noDeprecation"))return d;var r=!1;return function(){if(!r){if(y("throwDeprecation"))throw new Error(o);y("traceDeprecation")?console.trace(o):console.warn(o),r=!0}return d.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(A,K,z){K.exports=function _(b,y){if(b&&y)return _(b)(y);if("function"!=typeof b)throw new TypeError("need wrapper function");return Object.keys(b).forEach(function(o){d[o]=b[o]}),d;function d(){for(var o=new Array(arguments.length),r=0;r<o.length;r++)o[r]=arguments[r];var n=b.apply(this,o),t=o[o.length-1];return"function"==typeof n&&n!==t&&Object.keys(t).forEach(function(e){n[e]=t[e]}),n}}},{}],80:[function(A,K,z){"use strict";K.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(A,K,z){K.exports=function(){for(var y={},d=0;d<arguments.length;d++){var o=arguments[d];for(var r in o)_.call(o,r)&&(y[r]=o[r])}return y};var _=Object.prototype.hasOwnProperty},{}],82:[function(A,K,z){"use strict";K.exports=function(_){_.prototype[Symbol.iterator]=function*(){for(let b=this.head;b;b=b.next)yield b.value}}},{}],83:[function(A,K,z){"use strict";function _(r){var n=this;if(n instanceof _||(n=new _),n.tail=null,n.head=null,n.length=0,r&&"function"==typeof r.forEach)r.forEach(function(c){n.push(c)});else if(arguments.length>0)for(var t=0,e=arguments.length;t<e;t++)n.push(arguments[t]);return n}function b(r,n,t){var e=n===r.head?new o(t,null,n,r):new o(t,n,n.next,r);return null===e.next&&(r.tail=e),null===e.prev&&(r.head=e),r.length++,e}function y(r,n){r.tail=new o(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function d(r,n){r.head=new o(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function o(r,n,t,e){if(!(this instanceof o))return new o(r,n,t,e);this.list=e,this.value=r,n?(n.next=this,this.prev=n):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}K.exports=_,_.Node=o,_.create=_,_.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var n=r.next,t=r.prev;return n&&(n.prev=t),t&&(t.next=n),r===this.head&&(this.head=n),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,n},_.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var n=this.head;r.list=this,r.next=n,n&&(n.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}},_.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var n=this.tail;r.list=this,r.prev=n,n&&(n.next=r),this.tail=r,this.head||(this.head=r),this.length++}},_.prototype.push=function(){for(var r=0,n=arguments.length;r<n;r++)y(this,arguments[r]);return this.length},_.prototype.unshift=function(){for(var r=0,n=arguments.length;r<n;r++)d(this,arguments[r]);return this.length},_.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}},_.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}},_.prototype.forEach=function(r,n){n=n||this;for(var t=this.head,e=0;null!==t;e++)r.call(n,t.value,e,this),t=t.next},_.prototype.forEachReverse=function(r,n){n=n||this;for(var t=this.tail,e=this.length-1;null!==t;e--)r.call(n,t.value,e,this),t=t.prev},_.prototype.get=function(r){for(var n=0,t=this.head;null!==t&&n<r;n++)t=t.next;if(n===r&&null!==t)return t.value},_.prototype.getReverse=function(r){for(var n=0,t=this.tail;null!==t&&n<r;n++)t=t.prev;if(n===r&&null!==t)return t.value},_.prototype.map=function(r,n){n=n||this;for(var t=new _,e=this.head;null!==e;)t.push(r.call(n,e.value,this)),e=e.next;return t},_.prototype.mapReverse=function(r,n){n=n||this;for(var t=new _,e=this.tail;null!==e;)t.push(r.call(n,e.value,this)),e=e.prev;return t},_.prototype.reduce=function(r,n){var t,e=this.head;if(arguments.length>1)t=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");e=this.head.next,t=this.head.value}for(var c=0;null!==e;c++)t=r(t,e.value,c),e=e.next;return t},_.prototype.reduceReverse=function(r,n){var t,e=this.tail;if(arguments.length>1)t=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");e=this.tail.prev,t=this.tail.value}for(var c=this.length-1;null!==e;c--)t=r(t,e.value,c),e=e.prev;return t},_.prototype.toArray=function(){for(var r=new Array(this.length),n=0,t=this.head;null!==t;n++)r[n]=t.value,t=t.next;return r},_.prototype.toArrayReverse=function(){for(var r=new Array(this.length),n=0,t=this.tail;null!==t;n++)r[n]=t.value,t=t.prev;return r},_.prototype.slice=function(r,n){(n=n||this.length)<0&&(n+=this.length),(r=r||0)<0&&(r+=this.length);var t=new _;if(n<r||n<0)return t;r<0&&(r=0),n>this.length&&(n=this.length);for(var e=0,c=this.head;null!==c&&e<r;e++)c=c.next;for(;null!==c&&e<n;e++,c=c.next)t.push(c.value);return t},_.prototype.sliceReverse=function(r,n){(n=n||this.length)<0&&(n+=this.length),(r=r||0)<0&&(r+=this.length);var t=new _;if(n<r||n<0)return t;r<0&&(r=0),n>this.length&&(n=this.length);for(var e=this.length,c=this.tail;null!==c&&e>n;e--)c=c.prev;for(;null!==c&&e>r;e--,c=c.prev)t.push(c.value);return t},_.prototype.splice=function(r,n,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var e=0,c=this.head;null!==c&&e<r;e++)c=c.next;var s=[];for(e=0;c&&e<n;e++)s.push(c.value),c=this.removeNode(c);for(null===c&&(c=this.tail),c!==this.head&&c!==this.tail&&(c=c.prev),e=0;e<t.length;e++)c=b(this,c,t[e]);return s},_.prototype.reverse=function(){for(var r=this.head,n=this.tail,t=r;null!==t;t=t.prev){var e=t.prev;t.prev=t.next,t.next=e}return this.head=n,this.tail=r,this};try{A("./iterator.js")(_)}catch(r){}},{"./iterator.js":82}]},{},[12])(12)}}]);
//# sourceMappingURL=301.97975589bf3f85eb.js.map