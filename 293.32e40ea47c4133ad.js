"use strict";(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[293],{5293:(n_,c,i)=>{i.r(c),i.d(c,{AppRepositoriesModule:()=>i_});var O=i(8267),M=i(9902),U=i(525),l=i(8806),N=i(3083),d=i(1292),E=i(8999),h=i(1119),B=i(8252),C=i(9026),T=i(592),p=i(8377),L=i(8027),b=i(2378),Z=i(3829),y=i(5021),_=i(2222),D=i(6298);let a=(()=>{class t{constructor(e,o){this._state=e,this._dialog=o,this._loading=new h.X(!1),this.loading=this._loading.asObservable(),this.item=this._state.item,this.driver_list=this._state.all_item.pipe((0,C.w)(n=>n instanceof E.aPq&&n.repo_type!==E.VYb.Interface?(this._loading.next(!0),(0,E.qTj)(n.id,{limit:2e3})):(0,B.of)(null)),(0,T.K)(n=>[]),(0,p.U)(n=>(this._loading.next(!1),n))),this.commit=this._state.all_item.pipe((0,L.h)(n=>n instanceof E.aPq),(0,C.w)(n=>(0,E.rmk)(n.id,{count:1})),(0,T.K)(n=>[]),(0,p.U)(n=>{var r;return(null===(r=n[0])||void 0===r?void 0:r.commit)||"HEAD"}))}get active_item(){return this._state.active_item}pullLatestCommit(){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield(0,E.cYE)(this.active_item.id).toPromise().catch(o=>{(0,Z.cB)(`Error pulling latest commit. Error: ${JSON.stringify(o.response||o.message||"Pull timed out")}`)});!e||this._state.replaceItem(new E.aPq(Object.assign(Object.assign({},this.active_item),{commit_hash:e.commit_hash})))})}newDriver(e){return(0,l.mG)(this,void 0,void 0,function*(){this._dialog.open(y.K,{height:"auto",width:"auto",maxHeight:"calc(100vh - 2em)",maxWidth:"calc(100vw - 2em)",data:{item:new E.CbG({name:"",module_name:"",repository_id:this.active_item.id,file_name:e}),name:"Driver",save:o=>(0,E.X2O)(o)}})})}}return t.\u0275fac=function(e){return new(e||t)(_.LFG(b.L),_.LFG(D.uw))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var $=i(2016),X=i(2874);let K=(()=>{class t extends d.K{constructor(e){super(),this._service=e,this.name="repositories",this.tab_list=[]}get extensions(){return(0,N.fq)(this._service.active_item,this.name)}updateTabList(){this.tab_list=(this.driver_count<0||!this.driver_count?[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}}]:[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"drivers",name:"Drivers",count:this.driver_count,icon:{class:"backoffice-documents"}}]).concat(this.extensions)}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){this.subscription("item",this._service.driver_list.subscribe(e=>{this.driver_count=e?e.length:-1,this.updateTabList()})),this.updateTabList()})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(a))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-repositories"]],features:[_.qOj],decls:3,vars:1,consts:[[1,"flex-1","flex-col","sm:flex-row","flex","h-full","w-full","relative"],["heading","Repositories","name","repositories",1,"absolute","top-0","left-0","h-12","w-full","sm:h-full","sm:static"],["name","repo","route","repositories",1,"flex-1","relative","mt-12","sm:mt-0","w-full","sm:w-1/2",3,"tabs"]],template:function(e,o){1&e&&(_.TgZ(0,"div",0),_._UZ(1,"sidebar",1),_._UZ(2,"item-display",2),_.qZA()),2&e&&(_.xp6(2),_.Q6J("tabs",o.tab_list))},directives:[$.k,X.s],styles:["sidebar[_ngcontent-%COMP%]{transition:height .3s}@media screen and (min-width: 640px){sidebar[_ngcontent-%COMP%]{width:20em!important}}\n/*# sourceMappingURL=repositories.component.ts-angular-inline--35.css.map*/"]}),t})();var A=i(8662),P=i(7752),m=i(9372),x=i(3558),Y=i(6835);function G(t,s){1&t&&(_.ynx(0),_.SDv(1,24),_.BQk())}function q(t,s){if(1&t&&(_.TgZ(0,"span",25),_._uU(1),_.qZA()),2&t){const e=_.oxw();_.xp6(1),_.hij(" (",e.commit,") ")}}function z(t,s){1&t&&_._UZ(0,"mat-spinner",26)}let w=(()=>{class t extends d.K{constructor(e){super(),this._service=e,this.commit=""}get item(){return this._service.active_item}get local_url(){return this.item.type===E.VYb.Interface?`${location.origin}/${this.item.folder_name}/`:`${location.hash}`}get repo_uri(){var e;return null===(e=this.item)||void 0===e?void 0:e.uri.replace(/\/[a-zA-Z0-9\-\.:]*@/,"/...@")}ngOnInit(){this.commit="",this.subscription("commit",this._service.commit.subscribe(e=>this.commit=e))}pullLatestCommit(){return(0,l.mG)(this,void 0,void 0,function*(){this.pulling=!0,yield this._service.pullLatestCommit(),this.pulling=!1})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(a))},t.\u0275cmp=_.Xpm({type:t,selectors:[["repository-about"]],features:[_.qOj],decls:57,vars:25,consts:function(){let s,e,o,n,r,R,f,g,u,I,F,v;return s=$localize`:@@repoPullActionDetails␟705317b9b8c222fb8e2835b4ae429a4b968b16f6␟5996546099806594516: Pull the latest commit for${"\ufffd#4\ufffd\ufffd/#4\ufffd"}:LINE_BREAK: this repository `,e=$localize`:@@repoTypeLabel␟e78c0d60ac39787f62c9159646fe0b3c1ed55a1d␟2736556170366900089:Type:`,o=$localize`:␟f07f17add1b4d8fd14dedf1038249bf1fcc7595c␟2995574017154029352:{VAR_SELECT, select, interface {Interface Repository } driver {Driver Repository } , other {=Unknown=}}`,o=_.Zx4(o,{VAR_SELECT:"\ufffd0\ufffd"}),n=$localize`:@@driverListEmpty␟4c00bff7f0dcbae591d1cdd9e6040169e11900e0␟675757566509609077: ${o}:ICU: `,r=$localize`:@@repoFolderNameLabel␟28e6abdb97b12116fa31c70e842d7b4b37e08fda␟8999240573830223335:Folder name:`,R=$localize`:@@repoUriLabel␟6457460dafb273ccfbc2d68f7ec171f467c6e1c1␟1789506856666851299:Repository URI:`,f=$localize`:@@repoBranchLabel␟6ff214f90707e3964f2a08e22f6a079ec2649a5f␟733188758140846537:Branch:`,g=$localize`:@@repoCommitHashLabel␟682ca154aba791fe87aa293b29c921247e12da9c␟7502103762200984555:Commit hash:`,u=$localize`:@@descriptionLabel␟4a22c6843133f0b0d7dc0d28f864f2f90c1de7ad␟6996799422725544865:Description:`,I=$localize`:@@repoCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,F=$localize`:@@repoUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,v=$localize`:@@repoPullAction␟9bcb0809ace39056b42648266b3bd89f1fca0fcb␟2795587821431625096: Pull `,[[1,"mb-4","text-center"],[1,"w-52"],s,["mat-button","",1,"w-40",3,"disabled","click"],[4,"ngIf","ngIfElse"],[1,"space-y-2"],[1,"flex","items-center","space-x-2"],e,[1,"value"],n,r,[1,"value","select-all"],["target","_blank",3,"href"],R,[1,"value","underline","select-all"],f,[1,"value","select-all","bg-gray-200","px-2","pb-1","pt-2","text-xs","rounded","mono","dark:text-black"],g,[1,"value","select-text","bg-gray-200","px-2","pb-1","pt-2","text-xs","rounded","mono","dark:text-black"],["class","select-text mono",4,"ngIf"],u,I,F,["spinner",""],v,[1,"select-text","mono"],["diameter","32"]]},template:function(e,o){if(1&e&&(_.TgZ(0,"section",0),_.TgZ(1,"mat-card",1),_.TgZ(2,"mat-card-content"),_.tHW(3,2),_._UZ(4,"br"),_.N_p(),_.qZA(),_.TgZ(5,"mat-card-actions"),_.TgZ(6,"button",3),_.NdJ("click",function(){return o.pullLatestCommit()}),_.YNc(7,G,2,0,"ng-container",4),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(8,"section",5),_.TgZ(9,"div",6),_.TgZ(10,"label"),_.SDv(11,7),_.qZA(),_.TgZ(12,"div",8),_.SDv(13,9),_.qZA(),_.qZA(),_.TgZ(14,"div",6),_.TgZ(15,"label"),_.SDv(16,10),_.qZA(),_.TgZ(17,"div",11),_.TgZ(18,"a",12),_._uU(19),_.qZA(),_.qZA(),_.qZA(),_.TgZ(20,"div",6),_.TgZ(21,"label"),_.SDv(22,13),_.qZA(),_.TgZ(23,"div",14),_.TgZ(24,"a",12),_.ALo(25,"safe"),_._uU(26),_.qZA(),_.qZA(),_.qZA(),_.TgZ(27,"div",6),_.TgZ(28,"label"),_.SDv(29,15),_.qZA(),_.TgZ(30,"div",16),_._uU(31),_.qZA(),_.qZA(),_.TgZ(32,"div",6),_.TgZ(33,"label"),_.SDv(34,17),_.qZA(),_.TgZ(35,"div",18),_._uU(36),_.YNc(37,q,2,1,"span",19),_.qZA(),_.qZA(),_.TgZ(38,"div",6),_.TgZ(39,"label"),_.SDv(40,20),_.qZA(),_.TgZ(41,"div",11),_._uU(42),_.qZA(),_.qZA(),_.TgZ(43,"div",6),_.TgZ(44,"label"),_.SDv(45,21),_.qZA(),_.TgZ(46,"div",8),_._uU(47),_.ALo(48,"dateFrom"),_.qZA(),_.qZA(),_.TgZ(49,"div",6),_.TgZ(50,"label"),_.SDv(51,22),_.qZA(),_.TgZ(52,"div",8),_._uU(53),_.ALo(54,"dateFrom"),_.qZA(),_.qZA(),_.qZA(),_.YNc(55,z,1,0,"ng-template",null,23,_.W1O)),2&e){const n=_.MAs(56);_.xp6(6),_.Q6J("disabled",o.pulling),_.xp6(1),_.Q6J("ngIf",!o.pulling)("ngIfElse",n),_.xp6(6),_.pQV(o.item.type),_.QtT(13),_.xp6(4),_.ekj("underline","interface"===o.item.type)("pointer-events-none","interface"!==o.item.type),_.xp6(1),_.Q6J("href",o.local_url,_.LSH),_.xp6(1),_.Oqu(o.item.folder_name||"No folder set"),_.xp6(5),_.Q6J("href",_.xi3(25,18,o.item.uri,"url"),_.LSH),_.xp6(2),_.Oqu(o.repo_uri||"No URI set"),_.xp6(5),_.hij(" ",o.item.branch||"master"," "),_.xp6(5),_.hij(" ",o.item.commit_hash||"No Commit hash set"," "),_.xp6(1),_.Q6J("ngIf",o.commit&&o.commit!==o.item.commit_hash),_.xp6(5),_.hij(" ",o.item.description||"No description"," "),_.xp6(5),_.Oqu(_.lcZ(48,21,1e3*o.item.created_at)),_.xp6(6),_.Oqu(_.lcZ(54,23,1e3*o.item.updated_at))}},directives:[A.a8,A.dn,A.hq,P.lW,O.O5,m.$g],pipes:[x.y,Y.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}.mono[_ngcontent-%COMP%]{font-family:var(--mono-font)}\n/*# sourceMappingURL=repository-about.component.ts-angular-inline--36.css.map*/"]}),t})();var J=i(9499),j=i(6204);function H(t,s){if(1&t){const e=_.EpF();_.TgZ(0,"div",13),_._UZ(1,"div",14),_.ALo(2,"driverFormat"),_.TgZ(3,"div",15),_.TgZ(4,"button",16),_.NdJ("click",function(){const r=_.CHM(e).$implicit;return _.oxw(3).newDriver(r)}),_._UZ(5,"app-icon",17),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=s.$implicit;_.xp6(1),_.Q6J("innerHTML",_.lcZ(2,1,e),_.oJD)}}function Q(t,s){if(1&t&&(_.TgZ(0,"div",6),_.TgZ(1,"div",7),_.TgZ(2,"td",8),_.SDv(3,9),_.qZA(),_._UZ(4,"td",10),_.qZA(),_.TgZ(5,"div",11),_.YNc(6,H,6,3,"div",12),_.ALo(7,"async"),_.qZA(),_.qZA()),2&t){const e=_.oxw(2);_.xp6(6),_.Q6J("ngForOf",_.lcZ(7,1,e.driver_list))}}function V(t,s){if(1&t&&(_.ynx(0),_.YNc(1,Q,8,3,"div",5),_.ALo(2,"async"),_.BQk()),2&t){const e=_.oxw(),o=_.MAs(4);let n;_.xp6(1),_.Q6J("ngIf",null==(n=_.lcZ(2,2,e.driver_list))?null:n.length)("ngIfElse",o)}}function W(t,s){1&t&&(_.TgZ(0,"div",18),_.TgZ(1,"p"),_.SDv(2,19),_.qZA(),_.qZA())}function k(t,s){1&t&&(_.TgZ(0,"div",18),_._UZ(1,"mat-spinner",20),_.TgZ(2,"p"),_.SDv(3,21),_.qZA(),_.qZA())}const t_=[{path:":id",component:K,children:[{path:"about",component:w},{path:"drivers",component:(()=>{class t{constructor(e){this._service=e,this.driver_list=this._service.driver_list,this.newDriver=o=>this._service.newDriver(o)}get item(){return this._service.active_item}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(a))},t.\u0275cmp=_.Xpm({type:t,selectors:[["repository-drivers"]],decls:7,vars:2,consts:function(){let s,e,o,n;return s=$localize`:@@repoDriverHeader␟0fb2961dd5d0938e459c98921d1effe1d21e759b␟4782277420149557084:Available Drivers`,e=$localize`:@@driverListname␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,o=$localize`:@@driverListEmpty␟0b0bbe90203a8b9ff0681db976d02fbcd960cb85␟6121742772920538074:No drivers for repository`,n=$localize`:@@driverListLoading␟929bfd86e4829c0b7401762d92f52536a57ca6c0␟4949757592530193773:Loading driver list...`,[[1,"font-medium","text-lg","mb-2"],s,[4,"ngIf","ngIfElse"],["empty_state",""],["load_state",""],["role","table","class","overflow-x-auto",4,"ngIf","ngIfElse"],["role","table",1,"overflow-x-auto"],["table-head",""],[1,"flex-1","p-2"],e,[1,"w-12","p-2","h-10"],["body","",1,"overflow-y-auto"],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2",3,"innerHTML"],[1,"w-12","flex","justify-center"],["mat-icon-button","",3,"click"],["className","backoffice-plus"],[1,"flex","flex-col","p-8","items-center","justify-center"],o,["diameter","48",1,"mb-4"],n]},template:function(e,o){if(1&e&&(_.TgZ(0,"h3",0),_.SDv(1,1),_.qZA(),_.YNc(2,V,3,4,"ng-container",2),_.YNc(3,W,3,0,"ng-template",null,3,_.W1O),_.YNc(5,k,4,0,"ng-template",null,4,_.W1O)),2&e){const n=_.MAs(6);_.xp6(2),_.Q6J("ngIf",!o.loading)("ngIfElse",n)}},directives:[O.O5,O.sg,P.lW,J.o,m.$g],pipes:[O.Ov,j.X],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}\n/*# sourceMappingURL=repository-drivers.component.ts-angular-inline--37.css.map*/"]}),t})()},{path:"extend/:id",component:i(5605).z},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var o_=i(1226);let i_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[O.ez,M.u5,U.Bz.forChild(t_),o_.X]]}),t})()}}]);
//# sourceMappingURL=293.32e40ea47c4133ad.js.map