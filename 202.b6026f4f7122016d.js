(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[202],{6202:(_e,me,ce)=>{"use strict";ce.r(me),ce.d(me,{MqttDashboardModule:()=>q});var pe=ce(6575),de=ce(987),Ee=ce(895),A=ce(1268),W=ce(6355),V=ce(9794),m=ce(5858),b=ce(1670),g=ce(5530),d=ce(5702),s=ce(462),t=ce(7627),r=ce(3759),e=ce(1733),n=ce(7422),o=ce(163);let p=(()=>{class f{constructor(){this._connected=new s.X(!1),this._topics={},this.connected=this._connected.asObservable(),this.filters=new de.cw({org:new de.NI(""),bld:new de.NI(""),lvl:new de.NI(""),area:new de.NI(""),sys:new de.NI(""),drv:new de.NI(""),mod:new de.NI(""),idx:new de.NI(""),state:new de.NI("connected")}),this.topic=this.filters.valueChanges.pipe((0,n.U)(()=>{const{org:y,bld:I,lvl:j,area:N,sys:E,drv:S,mod:O,idx:z,state:te}=this.filters.value;return`placeos/${y||"+"}/state/${I||"+"}/${j||"+"}/${N||"+"}/${E||"+"}/${S||"+"}/${O||"+"}/${z||"+"}/${te||"+"}`})),(0,g.ttN)().pipe((0,t.P)(y=>y)).subscribe(()=>this._init()),this.filters.enable()}_init(){var y=this;return(0,b.Z)(function*(){const I=location.protocol.includes("https");y._client=e.connect(`ws${I?"s":""}://${location.host}/api/mqtt/`,{username:(0,g.rao)(),password:(0,g.rao)()}),y._client.on("connect",()=>y._connected.next(!0)),y._client.on("message",(j,N)=>{const E=y.findMatchingTopic(j);if(E){let S=N.toString();try{S=JSON.parse(N.toString())}catch{}const O=y._topics[E].getValue().filter(([z])=>z.join("/")!==j);y._topics[E].next([...O,[j.split("/"),S]])}})})()}query(y){if(!this._client)throw new Error("MQTT connection not setup.");if(!this._connected)throw new Error("MQTT connection is pending.");return this._topics[y]||(this._topics[y]=new s.X([])),this._client.subscribe(y,{},I=>null),this._topics[y].asObservable()}findMatchingTopic(y){const I=Object.keys(this._topics),j=y.split("/");for(const N of I){const E=N.split("/");let S=0;for(;S<j.length&&("+"===E[S]||E[S]===j[S]);S++);if(S===j.length)return N}return""}static#e=this.\u0275fac=function(I){return new(I||f)};static#t=this.\u0275prov=o.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})();var v=ce(5997),h=ce(4424);let i=(()=>{class f extends h.c{ngOnInit(){this.updateTime(),this.interval("time",()=>this.updateTime(),1e3)}updateTime(){const y=new Date;this.hour_angle=(y.getHours()%12+y.getMinutes()/60)/12*360,this.minute_angle=(y.getMinutes()+y.getSeconds()/60)/60*360,this.second_angle=y.getSeconds()/60*360}static#e=this.\u0275fac=(()=>{let y;return function(j){return(y||(y=o.n5z(f)))(j||f)}})();static#t=this.\u0275cmp=o.Xpm({type:f,selectors:[["clock"]],features:[o.qOj],decls:5,vars:6,consts:[[1,"rounded-full","h-12","w-12","border-2","border-base-100","relative"],[1,"hand","absolute","bottom-1/2","left-1/2","bg-base-100","h-3","w-1","rounded"],[1,"hand","absolute","bottom-1/2","left-1/2","bg-base-100","h-4","minute"],[1,"hand","absolute","bottom-1/2","left-1/2","bg-base-100","h-5","w-px"],[1,"absolute","top-1/2","left-1/2","h-2","w-2","transform","-translate-x-1/2","-translate-y-1/2","bg-base-100","rounded-full"]],template:function(I,j){1&I&&(o.TgZ(0,"div",0),o._UZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o.qZA()),2&I&&(o.xp6(1),o.Udp("transform","translateX(-50%) rotate("+j.hour_angle+"deg)"),o.xp6(1),o.Udp("transform","translateX(-50%) rotate("+j.minute_angle+"deg)"),o.xp6(1),o.Udp("transform","translateX(-50%) rotate("+j.second_angle+"deg)"))},styles:[".hand[_ngcontent-%COMP%]{transform-origin:50% 100%}.minute[_ngcontent-%COMP%]{width:2px;border-radius:1px}\n\n/*# sourceMappingURL=clock.component.ts-angular-inline--34.css.map*/"]})}return f})();var w=ce(857);function T(f,_){if(1&f&&(o.TgZ(0,"div",12)(1,"div",13),o._uU(2),o.qZA(),o.TgZ(3,"div",14),o._uU(4),o.qZA(),o.TgZ(5,"div",13),o._uU(6),o.qZA(),o.TgZ(7,"div",13),o._uU(8),o.qZA(),o.TgZ(9,"div",13),o._uU(10),o.ALo(11,"dateFrom"),o.qZA(),o.TgZ(12,"button",15)(13,"app-icon",10),o._uU(14,"done"),o.qZA()()()),2&f){const y=_.$implicit;o.ekj("bg-error",!y.value)("bg-teal-800",y.value),o.xp6(2),o.Oqu(y.mod),o.xp6(2),o.Oqu(y.driver_id),o.xp6(2),o.Oqu(y.ip),o.xp6(2),o.hij(" ",y.value?"Connected":"Disconnected"," "),o.xp6(2),o.hij(" ",o.lcZ(11,9,1e3*y.timestamp)," ")}}function x(f,_){if(1&f&&(o.TgZ(0,"div",8)(1,"div",9)(2,"h2",10),o._uU(3),o.qZA()(),o.YNc(4,T,15,11,"div",11),o.qZA()),2&f){const y=_.$implicit;o.xp6(3),o.AsE(" ",y.display_name||y.name," (",y.id,") "),o.xp6(1),o.Q6J("ngForOf",y.events)}}const P={},M=[{component:(()=>{class f{get time(){return(0,d.Z)(Date.now())}constructor(y){this._state=y,this.systems=new s.X([]),this._state.connected.pipe((0,t.P)(I=>I)).subscribe(()=>this._state.query("placeos/+/state/+/+/+/+/+/+/+/connected").subscribe(I=>this._processQuery(I)))}_processQuery(y){var I=this;return(0,b.Z)(function*(){const j=y.map(([S,O])=>({...O,id:`event-${(0,r.Iy)(999999999999)}`,sys_id:S[6],driver_id:S[7],mod:`${S[8]}_${S[9]}`})),N=(0,r.Tw)(j.map(S=>S.sys_id)),E=[];for(const S of N){const O=P[S]||(yield(0,g.hMA)(S).toPromise());E.push({id:S,...O,events:j.filter(z=>z.sys_id===S)}),P[S]=O}I.systems.next(E)})()}static#e=this.\u0275fac=function(I){return new(I||f)(o.Y36(p))};static#t=this.\u0275cmp=o.Xpm({type:f,selectors:[["mqtt-dashboard"]],decls:16,vars:11,consts:[[1,"h-full","w-full","bg-base-100","[#424242]","flex","flex-col"],[1,"w-full","px-4","py-2","bg-secondary","flex","items-center","justify-between","text-base-100"],[1,"text-2xl"],[1,"flex","items-center","space-x-2"],[1,"text-right","flex","flex-col","items-center","justify-center"],[1,""],[1,"w-full","h-1/2","flex-1","overflow-auto","p-4","space-y-4"],["class","divide-y divide-base-100/50 border border-base-100/50",4,"ngFor","ngForOf"],[1,"divide-y","divide-base-100/50","border","border-base-100/50"],[1,"bg-[#212121]","text-base-100","p-2"],[1,"text-xl"],["class","px-2 flex items-center text-base-100",3,"bg-error","bg-teal-800",4,"ngFor","ngForOf"],[1,"px-2","flex","items-center","text-base-100"],[1,"w-1/6"],[1,"flex-1"],["btn","","icon",""]],template:function(I,j){1&I&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),o._uU(3,"PlaceOS Alerts"),o.qZA(),o.TgZ(4,"div",3),o._UZ(5,"clock"),o.TgZ(6,"div",4)(7,"div",5),o._uU(8),o.ALo(9,"date"),o.qZA(),o.TgZ(10,"div"),o._uU(11),o.ALo(12,"date"),o.qZA()()()(),o.TgZ(13,"div",6),o.YNc(14,x,5,3,"div",7),o.ALo(15,"async"),o.qZA()()),2&I&&(o.xp6(8),o.Oqu(o.xi3(9,3,j.time,"shortTime")),o.xp6(3),o.Oqu(o.xi3(12,6,j.time,"EEE, MMM d")),o.xp6(3),o.Q6J("ngForOf",o.lcZ(15,9,j.systems)))},dependencies:[pe.sg,v.o,i,pe.Ov,pe.uU,w.R],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{z-index:9999}\n\n/*# sourceMappingURL=dashboard.component.ts-angular-inline--35.css.map*/"]})}return f})(),path:""},{path:"**",redirectTo:""}];let q=(()=>{class f{static#e=this.\u0275fac=function(I){return new(I||f)};static#t=this.\u0275mod=o.oAB({type:f});static#r=this.\u0275inj=o.cJS({imports:[pe.ez,V.Bz.forChild(M),Ee.ot,A.lN,W.LD,de.u5,m.X]})}return f})()},1733:(_e,me,ce)=>{_e.exports=function A(W,V,m){function b(s,t){if(!V[s]){if(!W[s]){if(g)return g(s,!0);var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}var n=V[s]={exports:{}};W[s][0].call(n.exports,function(o){return b(W[s][1][o]||o)},n,n.exports,A,W,V,m)}return V[s].exports}for(var g=void 0,d=0;d<m.length;d++)b(m[d]);return b}({1:[function(A,W,V){(function(m,b){(function(){"use strict";const g=A("events").EventEmitter,d=A("./store"),s=A("./topic-alias-recv"),t=A("./topic-alias-send"),r=A("mqtt-packet"),e=A("./default-message-id-provider"),n=A("readable-stream").Writable,o=A("inherits"),a=A("reinterval"),p=A("rfdc/default"),v=A("./validations"),h=A("xtend"),i=A("debug")("mqttjs:client"),w=m?m.nextTick:function(E){setTimeout(E,0)},T=b.setImmediate||function(E){w(E)},x={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},P={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function q(E,S){let O;S.properties&&(O=S.properties.topicAlias);let z=S.topic.toString();if(0===z.length){if(typeof O>"u")return new Error("Unregistered Topic Alias");if(z=E.topicAliasSend.getTopicByAlias(O),typeof z>"u")return new Error("Unregistered Topic Alias");S.topic=z}O&&delete S.properties.topicAlias}function f(E,S,O){i("sendPacket :: packet: %O",S),i("sendPacket :: emitting `packetsend`"),E.emit("packetsend",S),i("sendPacket :: writing to stream");const z=r.writeToStream(S,E.stream,E.options);i("sendPacket :: writeToStream result %s",z),!z&&O&&O!==j?(i("sendPacket :: handle events on `drain` once through callback."),E.stream.once("drain",O)):O&&(i("sendPacket :: invoking cb"),O())}function I(E,S,O,z){i("storeAndSend :: store packet with cmd %s to outgoingStore",S.cmd);let ie,te=S;if("publish"===te.cmd&&(te=p(S),ie=q(E,te),ie))return O&&O(ie);E.outgoingStore.put(te,function(H){if(H)return O&&O(H);z(),f(E,S,O)})}function j(E){i("nop ::",E)}function N(E,S){let O;const z=this;if(!(this instanceof N))return new N(E,S);for(O in this.options=S||{},x)this.options[O]=typeof this.options[O]>"u"?x[O]:S[O];i("MqttClient :: options.protocol",S.protocol),i("MqttClient :: options.protocolVersion",S.protocolVersion),i("MqttClient :: options.username",S.username),i("MqttClient :: options.keepalive",S.keepalive),i("MqttClient :: options.reconnectPeriod",S.reconnectPeriod),i("MqttClient :: options.rejectUnauthorized",S.rejectUnauthorized),i("MqttClient :: options.topicAliasMaximum",S.topicAliasMaximum),this.options.clientId="string"==typeof S.clientId?S.clientId:function L(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}(),i("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===S.protocolVersion&&S.customHandleAcks?S.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=E,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new e:this.options.messageIdProvider,this.outgoingStore=S.outgoingStore||new d,this.incomingStore=S.incomingStore||new d,this.queueQoSZero=void 0===S.queueQoSZero||S.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,S.topicAliasMaximum>0&&(S.topicAliasMaximum>65535?i("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new s(S.topicAliasMaximum)),this.on("connect",function(){const te=this.queue;i("connect :: sending queued packets"),function ie(){const J=te.shift();i("deliver :: entry %o",J);let H=null;if(!J)return void z._resubscribe();H=J.packet,i("deliver :: call _sendPacket for %o",H);let $=!0;H.messageId&&0!==H.messageId&&(z.messageIdProvider.register(H.messageId)||($=!1)),$?z._sendPacket(H,function(Y){J.cb&&J.cb(Y),ie()}):(i("messageId: %d has already used. The message is skipped and removed.",H.messageId),ie())}()}),this.on("close",function(){i("close :: connected set to `false`"),this.connected=!1,i("close :: clearing connackTimer"),clearTimeout(this.connackTimer),i("close :: clearing ping timer"),null!==z.pingTimer&&(z.pingTimer.clear(),z.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),i("close :: calling _setupReconnect"),this._setupReconnect()}),g.call(this),i("MqttClient :: setting up stream"),this._setupStream()}o(N,g),N.prototype._setupStream=function(){const E=this,S=new n,O=r.parser(this.options);let z=null;const te=[];function ie(){if(te.length)w(J);else{const Y=z;z=null,Y()}}function J(){i("work :: getting next packet in queue");const Y=te.shift();if(Y)i("work :: packet pulled from queue"),E._handlePacket(Y,ie);else{i("work :: no packets in queue");const oe=z;z=null,i("work :: done flag is %s",!!oe),oe&&oe()}}i("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),i("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),O.on("packet",function(Y){i("parser :: on packet push to packets array."),te.push(Y)}),S._write=function(Y,oe,se){z=se,i("writable stream :: parsing buffer"),O.parse(Y),J()},i("_setupStream :: pipe stream to writable stream"),this.stream.pipe(S),this.stream.on("error",function H(Y){i("streamErrorHandler :: error",Y.message),Y.code?(i("streamErrorHandler :: emitting error"),E.emit("error",Y)):j(Y)}),this.stream.on("close",function(){i("(%s)stream :: on close",E.options.clientId),function y(E){E&&(i("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(E).forEach(function(S){E[S].volatile&&"function"==typeof E[S].cb&&(E[S].cb(new Error("Connection closed")),delete E[S])}))}(E.outgoing),i("stream: emit close to MqttClient"),E.emit("close")}),i("_setupStream: sending packet `connect`");const $=Object.create(this.options);if($.cmd="connect",this.topicAliasRecv&&($.properties||($.properties={}),this.topicAliasRecv&&($.properties.topicAliasMaximum=this.topicAliasRecv.max)),f(this,$),O.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return E.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&f(this,h({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){i("!!connectTimeout hit!! Calling _cleanUp with force `true`"),E._cleanUp(!0)},this.options.connectTimeout)},N.prototype._handlePacket=function(E,S){const O=this.options;if(5===O.protocolVersion&&O.properties&&O.properties.maximumPacketSize&&O.properties.maximumPacketSize<E.length)return this.emit("error",new Error("exceeding packets size "+E.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(i("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",E),E.cmd){case"publish":this._handlePublish(E,S);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(E),S();break;case"pubrel":this._handlePubrel(E,S);break;case"connack":this._handleConnack(E),S();break;case"auth":this._handleAuth(E),S();break;case"pingresp":this._handlePingresp(E),S();break;case"disconnect":this._handleDisconnect(E),S()}},N.prototype._checkDisconnecting=function(E){return this.disconnecting&&(E&&E!==j?E(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},N.prototype.publish=function(E,S,O,z){i("publish :: message `%s` to topic `%s`",S,E);const te=this.options;if("function"==typeof O&&(z=O,O=null),O=h({qos:0,retain:!1,dup:!1},O),this._checkDisconnecting(z))return this;const J=this,H=function(){let $=0;if((1===O.qos||2===O.qos)&&($=J._nextId(),null===$))return i("No messageId left"),!1;const Y={cmd:"publish",topic:E,payload:S,qos:O.qos,retain:O.retain,messageId:$,dup:O.dup};switch(5===te.protocolVersion&&(Y.properties=O.properties),i("publish :: qos",O.qos),O.qos){case 1:case 2:J.outgoing[Y.messageId]={volatile:!1,cb:z||j},i("MqttClient:publish: packet cmd: %s",Y.cmd),J._sendPacket(Y,void 0,O.cbStorePut);break;default:i("MqttClient:publish: packet cmd: %s",Y.cmd),J._sendPacket(Y,z,O.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!H())&&this._storeProcessingQueue.push({invoke:H,cbStorePut:O.cbStorePut,callback:z}),this},N.prototype.subscribe=function(){const E=this,S=new Array(arguments.length);for(let se=0;se<arguments.length;se++)S[se]=arguments[se];const O=[];let z=S.shift();const te=z.resubscribe;let ie=S.pop()||j,J=S.pop();const H=this.options.protocolVersion;delete z.resubscribe,"string"==typeof z&&(z=[z]),"function"!=typeof ie&&(J=ie,ie=j);const $=v.validateTopics(z);if(null!==$)return T(ie,new Error("Invalid topic "+$)),this;if(this._checkDisconnecting(ie))return i("subscribe: discconecting true"),this;const Y={qos:0};if(5===H&&(Y.nl=!1,Y.rap=!1,Y.rh=0),J=h(Y,J),Array.isArray(z)?z.forEach(function(se){if(i("subscribe: array topic %s",se),!Object.prototype.hasOwnProperty.call(E._resubscribeTopics,se)||E._resubscribeTopics[se].qos<J.qos||te){const re={topic:se,qos:J.qos};5===H&&(re.nl=J.nl,re.rap=J.rap,re.rh=J.rh,re.properties=J.properties),i("subscribe: pushing topic `%s` and qos `%s` to subs list",re.topic,re.qos),O.push(re)}}):Object.keys(z).forEach(function(se){if(i("subscribe: object topic %s",se),!Object.prototype.hasOwnProperty.call(E._resubscribeTopics,se)||E._resubscribeTopics[se].qos<z[se].qos||te){const re={topic:se,qos:z[se].qos};5===H&&(re.nl=z[se].nl,re.rap=z[se].rap,re.rh=z[se].rh,re.properties=J.properties),i("subscribe: pushing `%s` to subs list",re),O.push(re)}}),!O.length)return ie(null,[]),this;const oe=function(){const se=E._nextId();if(null===se)return i("No messageId left"),!1;const re={cmd:"subscribe",subscriptions:O,qos:1,retain:!1,dup:!1,messageId:se};if(J.properties&&(re.properties=J.properties),E.options.resubscribe){i("subscribe :: resubscribe true");const K=[];O.forEach(function(B){if(E.options.reconnectPeriod>0){const Z={qos:B.qos};5===H&&(Z.nl=B.nl||!1,Z.rap=B.rap||!1,Z.rh=B.rh||0,Z.properties=B.properties),E._resubscribeTopics[B.topic]=Z,K.push(B.topic)}}),E.messageIdToTopic[re.messageId]=K}return E.outgoing[re.messageId]={volatile:!0,cb:function(K,B){if(!K){const Z=B.granted;for(let ne=0;ne<Z.length;ne+=1)O[ne].qos=Z[ne]}ie(K,O)}},i("subscribe :: call _sendPacket"),E._sendPacket(re),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!oe())&&this._storeProcessingQueue.push({invoke:oe,callback:ie}),this},N.prototype.unsubscribe=function(){const E=this,S=new Array(arguments.length);for(let H=0;H<arguments.length;H++)S[H]=arguments[H];let O=S.shift(),z=S.pop()||j,te=S.pop();"string"==typeof O&&(O=[O]),"function"!=typeof z&&(te=z,z=j);const ie=v.validateTopics(O);if(null!==ie)return T(z,new Error("Invalid topic "+ie)),this;if(E._checkDisconnecting(z))return this;const J=function(){const H=E._nextId();if(null===H)return i("No messageId left"),!1;const $={cmd:"unsubscribe",qos:1,messageId:H};return"string"==typeof O?$.unsubscriptions=[O]:Array.isArray(O)&&($.unsubscriptions=O),E.options.resubscribe&&$.unsubscriptions.forEach(function(Y){delete E._resubscribeTopics[Y]}),"object"==typeof te&&te.properties&&($.properties=te.properties),E.outgoing[$.messageId]={volatile:!0,cb:z},i("unsubscribe: call _sendPacket"),E._sendPacket($),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!J())&&this._storeProcessingQueue.push({invoke:J,callback:z}),this},N.prototype.end=function(E,S,O){const z=this;function te(){i("end :: closeStores: closing incoming and outgoing stores"),z.disconnected=!0,z.incomingStore.close(function(J){z.outgoingStore.close(function(H){if(i("end :: closeStores: emitting end"),z.emit("end"),O){const $=J||H;i("end :: closeStores: invoking callback with args"),O($)}})}),z._deferredReconnect&&z._deferredReconnect()}function ie(){i("end :: (%s) :: finish :: calling _cleanUp with force %s",z.options.clientId,E),z._cleanUp(E,()=>{i("end :: finish :: calling process.nextTick on closeStores"),w(te.bind(z))},S)}return i("end :: (%s)",this.options.clientId),(null==E||"boolean"!=typeof E)&&(O=S||j,S=E,E=!1,"object"!=typeof S&&(O=S,S=null,"function"!=typeof O&&(O=j))),"object"!=typeof S&&(O=S,S=null),i("end :: cb? %s",!!O),O=O||j,this.disconnecting?(O(),this):(this._clearReconnect(),this.disconnecting=!0,!E&&Object.keys(this.outgoing).length>0?(i("end :: (%s) :: calling finish in 10ms once outgoing is empty",z.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,ie,10))):(i("end :: (%s) :: immediately calling finish",z.options.clientId),ie()),this)},N.prototype.removeOutgoingMessage=function(E){const S=this.outgoing[E]?this.outgoing[E].cb:null;return delete this.outgoing[E],this.outgoingStore.del({messageId:E},function(){S(new Error("Message removed"))}),this},N.prototype.reconnect=function(E){i("client reconnect");const S=this,O=function(){E?(S.options.incomingStore=E.incomingStore,S.options.outgoingStore=E.outgoingStore):(S.options.incomingStore=null,S.options.outgoingStore=null),S.incomingStore=S.options.incomingStore||new d,S.outgoingStore=S.options.outgoingStore||new d,S.disconnecting=!1,S.disconnected=!1,S._deferredReconnect=null,S._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=O:O(),this},N.prototype._reconnect=function(){i("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),i("client already connected. disconnecting first.")):(i("_reconnect: calling _setupStream"),this._setupStream())},N.prototype._setupReconnect=function(){const E=this;!E.disconnecting&&!E.reconnectTimer&&E.options.reconnectPeriod>0?(this.reconnecting||(i("_setupReconnect :: emit `offline` state"),this.emit("offline"),i("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),i("_setupReconnect :: setting reconnectTimer for %d ms",E.options.reconnectPeriod),E.reconnectTimer=setInterval(function(){i("reconnectTimer :: reconnect triggered!"),E._reconnect()},E.options.reconnectPeriod)):i("_setupReconnect :: doing nothing...")},N.prototype._clearReconnect=function(){i("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},N.prototype._cleanUp=function(E,S){const O=arguments[2];if(S&&(i("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",S)),i("_cleanUp :: forced? %s",E),E)0===this.options.reconnectPeriod&&this.options.clean&&function _(E){E&&(i("flush: queue exists? %b",!!E),Object.keys(E).forEach(function(S){"function"==typeof E[S].cb&&(E[S].cb(new Error("Connection closed")),delete E[S])}))}(this.outgoing),i("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const z=h({cmd:"disconnect"},O);i("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(z,T.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(i("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(i("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),S&&!this.connected&&(i("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",S),S())},N.prototype._sendPacket=function(E,S,O){i("_sendPacket :: (%s) ::  start",this.options.clientId),O=O||j,S=S||j;const z=function M(E,S){if(5===E.options.protocolVersion&&"publish"===S.cmd){let O;S.properties&&(O=S.properties.topicAlias);const z=S.topic.toString();if(E.topicAliasSend)if(O){if(0!==z.length&&(i("applyTopicAlias :: register topic: %s - alias: %d",z,O),!E.topicAliasSend.put(z,O)))return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",z,O),new Error("Sending Topic Alias out of range")}else 0!==z.length&&(E.options.autoAssignTopicAlias?(O=E.topicAliasSend.getAliasByTopic(z),O?(S.topic="",S.properties={...S.properties,topicAlias:O},i("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",z,O)):(O=E.topicAliasSend.getLruAlias(),E.topicAliasSend.put(z,O),S.properties={...S.properties,topicAlias:O},i("applyTopicAlias :: auto assign topic: %s - alias: %d",z,O))):E.options.autoUseTopicAlias&&(O=E.topicAliasSend.getAliasByTopic(z),O&&(S.topic="",S.properties={...S.properties,topicAlias:O},i("applyTopicAlias :: auto use topic: %s - alias: %d",z,O))));else if(O)return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",z,O),new Error("Sending Topic Alias out of range")}}(this,E);if(z)S(z);else{if(!this.connected)return"auth"===E.cmd?(this._shiftPingInterval(),void f(this,E,S)):(i("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(E,S,O));switch(this._shiftPingInterval(),E.cmd){case"publish":break;case"pubrel":return void I(this,E,S,O);default:return void f(this,E,S)}switch(E.qos){case 2:case 1:I(this,E,S,O);break;default:f(this,E,S)}i("_sendPacket :: (%s) ::  end",this.options.clientId)}},N.prototype._storePacket=function(E,S,O){i("_storePacket :: packet: %o",E),i("_storePacket :: cb? %s",!!S),O=O||j;let z=E;if("publish"===z.cmd){z=p(E);const te=q(this,z);if(te)return S&&S(te)}0===(z.qos||0)&&this.queueQoSZero||"publish"!==z.cmd?this.queue.push({packet:z,cb:S}):z.qos>0?(S=this.outgoing[z.messageId]?this.outgoing[z.messageId].cb:null,this.outgoingStore.put(z,function(te){if(te)return S&&S(te);O()})):S&&S(new Error("No connection to broker"))},N.prototype._setupPingTimer=function(){i("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const E=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=a(function(){E._checkPing()},1e3*this.options.keepalive))},N.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},N.prototype._checkPing=function(){i("_checkPing :: checking ping..."),this.pingResp?(i("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(i("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},N.prototype._handlePingresp=function(){this.pingResp=!0},N.prototype._handleConnack=function(E){i("_handleConnack");const S=this.options,z=5===S.protocolVersion?E.reasonCode:E.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,E.properties){if(E.properties.topicAliasMaximum){if(E.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));E.properties.topicAliasMaximum>0&&(this.topicAliasSend=new t(E.properties.topicAliasMaximum))}E.properties.serverKeepAlive&&S.keepalive&&(S.keepalive=E.properties.serverKeepAlive,this._shiftPingInterval()),E.properties.maximumPacketSize&&(S.properties||(S.properties={}),S.properties.maximumPacketSize=E.properties.maximumPacketSize)}if(0===z)this.reconnecting=!1,this._onConnect(E);else if(z>0){const te=new Error("Connection refused: "+P[z]);te.code=z,this.emit("error",te)}},N.prototype._handleAuth=function(E){const O=this.options.protocolVersion,z=5===O?E.reasonCode:E.returnCode;if(5!==O){const ie=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+O);return ie.code=z,void this.emit("error",ie)}const te=this;this.handleAuth(E,function(ie,J){if(ie)te.emit("error",ie);else if(24===z)te.reconnecting=!1,te._sendPacket(J);else{const H=new Error("Connection refused: "+P[z]);ie.code=z,te.emit("error",H)}})},N.prototype.handleAuth=function(E,S){S()},N.prototype._handlePublish=function(E,S){i("_handlePublish: packet %o",E),S=typeof S<"u"?S:j;let O=E.topic.toString();const z=E.payload,te=E.qos,ie=E.messageId,J=this,H=this.options,$=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let Y;if(E.properties&&(Y=E.properties.topicAlias),typeof Y<"u")if(0===O.length){if(!(Y>0&&Y<=65535))return i("_handlePublish :: topic alias out of range. alias: %d",Y),void this.emit("error",new Error("Received Topic Alias is out of range"));{const oe=this.topicAliasRecv.getTopicByAlias(Y);if(!oe)return i("_handlePublish :: unregistered topic alias. alias: %d",Y),void this.emit("error",new Error("Received unregistered Topic Alias"));O=oe,i("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",O,Y)}}else{if(!this.topicAliasRecv.put(O,Y))return i("_handlePublish :: topic alias out of range. alias: %d",Y),void this.emit("error",new Error("Received Topic Alias is out of range"));i("_handlePublish :: registered topic: %s - alias: %d",O,Y)}}switch(i("_handlePublish: qos %d",te),te){case 2:H.customHandleAcks(O,z,E,function(Y,oe){return Y instanceof Error||(oe=Y,Y=null),Y?J.emit("error",Y):-1===$.indexOf(oe)?J.emit("error",new Error("Wrong reason code for pubrec")):void(oe?J._sendPacket({cmd:"pubrec",messageId:ie,reasonCode:oe},S):J.incomingStore.put(E,function(){J._sendPacket({cmd:"pubrec",messageId:ie},S)}))});break;case 1:H.customHandleAcks(O,z,E,function(Y,oe){return Y instanceof Error||(oe=Y,Y=null),Y?J.emit("error",Y):-1===$.indexOf(oe)?J.emit("error",new Error("Wrong reason code for puback")):(oe||J.emit("message",O,z,E),void J.handleMessage(E,function(se){if(se)return S&&S(se);J._sendPacket({cmd:"puback",messageId:ie,reasonCode:oe},S)}))});break;case 0:this.emit("message",O,z,E),this.handleMessage(E,S);break;default:i("_handlePublish: unknown QoS. Doing nothing.")}},N.prototype.handleMessage=function(E,S){S()},N.prototype._handleAck=function(E){const S=E.messageId,O=E.cmd;let z=null;const te=this.outgoing[S]?this.outgoing[S].cb:null,ie=this;let J;if(te){switch(i("_handleAck :: packet type",O),O){case"pubcomp":case"puback":{const H=E.reasonCode;H&&H>0&&16!==H&&(J=new Error("Publish error: "+P[H]),J.code=H,te(J,E)),delete this.outgoing[S],this.outgoingStore.del(E,te),this.messageIdProvider.deallocate(S),this._invokeStoreProcessingQueue();break}case"pubrec":{z={cmd:"pubrel",qos:2,messageId:S};const H=E.reasonCode;H&&H>0&&16!==H?(J=new Error("Publish error: "+P[H]),J.code=H,te(J,E)):this._sendPacket(z);break}case"suback":delete this.outgoing[S],this.messageIdProvider.deallocate(S);for(let H=0;H<E.granted.length;H++)if(128&E.granted[H]){const $=this.messageIdToTopic[S];$&&$.forEach(function(Y){delete ie._resubscribeTopics[Y]})}this._invokeStoreProcessingQueue(),te(null,E);break;case"unsuback":delete this.outgoing[S],this.messageIdProvider.deallocate(S),this._invokeStoreProcessingQueue(),te(null);break;default:ie.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else i("_handleAck :: Server sent an ack in error. Ignoring.")},N.prototype._handlePubrel=function(E,S){i("handling pubrel packet"),S=typeof S<"u"?S:j;const z=this,te={cmd:"pubcomp",messageId:E.messageId};z.incomingStore.get(E,function(ie,J){ie?z._sendPacket(te,S):(z.emit("message",J.topic,J.payload,J),z.handleMessage(J,function(H){if(H)return S(H);z.incomingStore.del(J,j),z._sendPacket(te,S)}))})},N.prototype._handleDisconnect=function(E){this.emit("disconnect",E)},N.prototype._nextId=function(){return this.messageIdProvider.allocate()},N.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},N.prototype._resubscribe=function(){i("_resubscribe");const E=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&E.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){i("_resubscribe: protocolVersion 5");for(let S=0;S<E.length;S++){const O={};O[E[S]]=this._resubscribeTopics[E[S]],O.resubscribe=!0,this.subscribe(O,{properties:O[E[S]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},N.prototype._onConnect=function(E){if(this.disconnected)return void this.emit("connect",E);const S=this;this.connackPacket=E,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function O(){let z=S.outgoingStore.createStream();function te(){S._storeProcessing=!1,S._packetIdsDuringStoreProcessing={}}function ie(){z.destroy(),z=null,S._flushStoreProcessingQueue(),te()}S.once("close",ie),z.on("error",function(H){te(),S._flushStoreProcessingQueue(),S.removeListener("close",ie),S.emit("error",H)}),z.on("end",function(){let H=!0;for(const $ in S._packetIdsDuringStoreProcessing)if(!S._packetIdsDuringStoreProcessing[$]){H=!1;break}H?(te(),S.removeListener("close",ie),S._invokeAllStoreProcessingQueue(),S.emit("connect",E)):O()}),function J(){if(!z)return;S._storeProcessing=!0;const H=z.read(1);let $;H?S._packetIdsDuringStoreProcessing[H.messageId]?J():S.disconnecting||S.reconnectTimer?z.destroy&&z.destroy():($=S.outgoing[H.messageId]?S.outgoing[H.messageId].cb:null,S.outgoing[H.messageId]={volatile:!1,cb:function(Y,oe){$&&$(Y,oe),J()}},S._packetIdsDuringStoreProcessing[H.messageId]=!0,S.messageIdProvider.register(H.messageId)?S._sendPacket(H):i("messageId: %d has already used.",H.messageId)):z.once("readable",J)}()}()},N.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const E=this._storeProcessingQueue[0];if(E&&E.invoke())return this._storeProcessingQueue.shift(),!0}return!1},N.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},N.prototype._flushStoreProcessingQueue=function(){for(const E of this._storeProcessingQueue)E.cbStorePut&&E.cbStorePut(new Error("Connection closed")),E.callback&&E.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},W.exports=N}).call(this)}).call(this,A("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(A,W,V){"use strict";const{Buffer:m}=A("buffer"),b=A("readable-stream").Transform,g=A("duplexify");let d,s,t,r=!1;W.exports=function p(v,h){if(h.hostname=h.hostname||h.host,!h.hostname)throw new Error("Could not determine host. Specify host manually.");const i="MQIsdp"===h.protocolId&&3===h.protocolVersion?"mqttv3.1":"mqtt";!function n(v){v.hostname||(v.hostname="localhost"),v.path||(v.path="/"),v.wsOptions||(v.wsOptions={})}(h);const w=function o(v,h){const i="alis"===v.protocol?"wss":"ws";let w=i+"://"+v.hostname+v.path;return v.port&&80!==v.port&&443!==v.port&&(w=i+"://"+v.hostname+":"+v.port+v.path),"function"==typeof v.transformWsUrl&&(w=v.transformWsUrl(w,v,h)),w}(h,v);return d=h.my,d.connectSocket({url:w,protocols:i}),s=function e(){const v=new b;return v._write=function(h,i,w){d.sendSocketMessage({data:h.buffer,success:function(){w()},fail:function(){w(new Error)}})},v._flush=function(i){d.closeSocket({success:function(){i()}})},v}(),t=g.obj(),function a(){r||(r=!0,d.onSocketOpen(function(){t.setReadable(s),t.setWritable(s),t.emit("connect")}),d.onSocketMessage(function(v){if("string"==typeof v.data){const h=m.from(v.data,"base64");s.push(h)}else{const h=new FileReader;h.addEventListener("load",function(){let i=h.result;i=i instanceof ArrayBuffer?m.from(i):m.from(i,"utf8"),s.push(i)}),h.readAsArrayBuffer(v.data)}}),d.onSocketClose(function(){t.end(),t.destroy()}),d.onSocketError(function(v){t.destroy(v)}))}(),t}},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(A,W,V){"use strict";const m=A("net"),b=A("debug")("mqttjs:tcp");W.exports=function g(d,s){s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";const t=s.port,r=s.hostname;return b("port %d and host %s",t,r),m.createConnection(t,r)}},{debug:18,net:16}],4:[function(A,W,V){"use strict";const m=A("tls"),b=A("net"),g=A("debug")("mqttjs:tls");W.exports=function d(s,t){t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===b.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,g("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);const r=m.connect(t);function e(n){t.rejectUnauthorized&&s.emit("error",n),r.end()}return r.on("secureConnect",function(){t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",e)}),r.on("error",e),r}},{debug:18,net:16,tls:16}],5:[function(A,W,V){(function(m){(function(){"use strict";const{Buffer:b}=A("buffer"),g=A("ws"),d=A("debug")("mqttjs:ws"),s=A("duplexify"),t=A("readable-stream").Transform,r=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],e=typeof m<"u"&&"browser"===m.title||"function"==typeof ce;function n(w,T){let x=w.protocol+"://"+w.hostname+":"+w.port+w.path;return"function"==typeof w.transformWsUrl&&(x=w.transformWsUrl(x,w,T)),x}function o(w){const T=w;return w.hostname||(T.hostname="localhost"),w.port||(T.port="wss"===w.protocol?443:80),w.path||(T.path="/"),w.wsOptions||(T.wsOptions={}),!e&&"wss"===w.protocol&&r.forEach(function(x){Object.prototype.hasOwnProperty.call(w,x)&&!Object.prototype.hasOwnProperty.call(w.wsOptions,x)&&(T.wsOptions[x]=w[x])}),T}W.exports=e?function i(w,T){let x;d("browserStreamBuilder");const L=function a(w){const T=o(w);if(T.hostname||(T.hostname=T.host),!T.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const x=new URL(document.URL);T.hostname=x.hostname,T.port||(T.port=x.port)}return void 0===T.objectMode&&(T.objectMode=!(!0===T.binary||void 0===T.binary)),T}(T).browserBufferSize||524288,M=T.browserBufferTimeout||1e3,q=!T.objectMode,f=function v(w,T){const x="MQIsdp"===T.protocolId&&3===T.protocolVersion?"mqttv3.1":"mqtt",P=n(T,w),L=new WebSocket(P,[x]);return L.binaryType="arraybuffer",L}(w,T),_=function I(ie,J,H){const $=new t({objectModeMode:ie.objectMode});return $._write=J,$._flush=H,$}(T,function z(ie,J,H){f.bufferedAmount>L&&setTimeout(z,M,ie,J,H),q&&"string"==typeof ie&&(ie=b.from(ie,"utf8"));try{f.send(ie)}catch($){return H($)}H()},function te(ie){f.close(),ie()});T.objectMode||(_._writev=O),_.on("close",()=>{f.close()});const y=typeof f.addEventListener<"u";function j(){x.setReadable(_),x.setWritable(_),x.emit("connect")}function N(){x.end(),x.destroy()}function E(ie){x.destroy(ie)}function S(ie){let J=ie.data;J=J instanceof ArrayBuffer?b.from(J):b.from(J,"utf8"),_.push(J)}function O(ie,J){const H=new Array(ie.length);for(let $=0;$<ie.length;$++)H[$]="string"==typeof ie[$].chunk?b.from(ie[$],"utf8"):ie[$].chunk;this._write(b.concat(H),"binary",J)}return f.readyState===f.OPEN?x=_:(x=x=s(void 0,void 0,T),T.objectMode||(x._writev=O),y?f.addEventListener("open",j):f.onopen=j),x.socket=f,y?(f.addEventListener("close",N),f.addEventListener("error",E),f.addEventListener("message",S)):(f.onclose=N,f.onerror=E,f.onmessage=S),x}:function h(w,T){d("streamBuilder");const x=o(T),P=n(x,w),L=function p(w,T,x){d("createWebSocket"),d("protocol: "+x.protocolId+" "+x.protocolVersion);const P="MQIsdp"===x.protocolId&&3===x.protocolVersion?"mqttv3.1":"mqtt";return d("creating new Websocket for url: "+T+" and protocol: "+P),new g(T,[P],x.wsOptions)}(0,P,x),M=g.createWebSocketStream(L,x.wsOptions);return M.url=P,L.on("close",()=>{M.destroy()}),M}}).call(this)}).call(this,A("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(A,W,V){"use strict";const{Buffer:m}=A("buffer"),b=A("readable-stream").Transform,g=A("duplexify");let d,s,t;W.exports=function a(p,v){if(v.hostname=v.hostname||v.host,!v.hostname)throw new Error("Could not determine host. Specify host manually.");const h="MQIsdp"===v.protocolId&&3===v.protocolVersion?"mqttv3.1":"mqtt";!function e(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}(v);const i=function n(p,v){const h="wxs"===p.protocol?"wss":"ws";let i=h+"://"+p.hostname+p.path;return p.port&&80!==p.port&&443!==p.port&&(i=h+"://"+p.hostname+":"+p.port+p.path),"function"==typeof p.transformWsUrl&&(i=p.transformWsUrl(i,p,v)),i}(v,p);d=wx.connectSocket({url:i,protocols:[h]}),s=function r(){const p=new b;return p._write=function(v,h,i){d.send({data:v.buffer,success:function(){i()},fail:function(w){i(new Error(w))}})},p._flush=function(h){d.close({success:function(){h()}})},p}(),t=g.obj(),t._destroy=function(T,x){d.close({success:function(){x&&x(T)}})};const w=t.destroy;return t.destroy=function(){t.destroy=w;const T=this;setTimeout(function(){d.close({fail:function(){T._destroy(new Error)}})},0)}.bind(t),function o(){d.onOpen(function(){t.setReadable(s),t.setWritable(s),t.emit("connect")}),d.onMessage(function(p){let v=p.data;v=v instanceof ArrayBuffer?m.from(v):m.from(v,"utf8"),s.push(v)}),d.onClose(function(){t.end(),t.destroy()}),d.onError(function(p){t.destroy(new Error(p.errMsg))})}(),t}},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(A,W,V){"use strict";function m(){if(!(this instanceof m))return new m;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}m.prototype.allocate=function(){const b=this.nextId++;return 65536===this.nextId&&(this.nextId=1),b},m.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},m.prototype.register=function(b){return!0},m.prototype.deallocate=function(b){},m.prototype.clear=function(){},W.exports=m},{}],8:[function(A,W,V){"use strict";const m=A("xtend"),b=A("readable-stream").Readable,g={objectMode:!0},d={clean:!0};function s(t){if(!(this instanceof s))return new s(t);this.options=t||{},this.options=m(d,t),this._inflights=new Map}s.prototype.put=function(t,r){return this._inflights.set(t.messageId,t),r&&r(),this},s.prototype.createStream=function(){const t=new b(g),r=[];let e=!1,n=0;return this._inflights.forEach(function(o,a){r.push(o)}),t._read=function(){this.push(!e&&n<r.length?r[n++]:null)},t.destroy=function(){if(e)return;const o=this;e=!0,setTimeout(function(){o.emit("close")},0)},t},s.prototype.del=function(t,r){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),r(null,t)):r&&r(new Error("missing packet")),this},s.prototype.get=function(t,r){return(t=this._inflights.get(t.messageId))?r(null,t):r&&r(new Error("missing packet")),this},s.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},W.exports=s},{"readable-stream":69,xtend:81}],9:[function(A,W,V){"use strict";function m(b){if(!(this instanceof m))return new m(b);this.aliasToTopic={},this.max=b}m.prototype.put=function(b,g){return!(0===g||g>this.max||(this.aliasToTopic[g]=b,this.length=Object.keys(this.aliasToTopic).length,0))},m.prototype.getTopicByAlias=function(b){return this.aliasToTopic[b]},m.prototype.clear=function(){this.aliasToTopic={}},W.exports=m},{}],10:[function(A,W,V){"use strict";const m=A("lru-cache"),b=A("number-allocator").NumberAllocator;function g(d){if(!(this instanceof g))return new g(d);d>0&&(this.aliasToTopic=new m({max:d}),this.topicToAlias={},this.numberAllocator=new b(1,d),this.max=d,this.length=0)}g.prototype.put=function(d,s){if(0===s||s>this.max)return!1;const t=this.aliasToTopic.get(s);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(s,d),this.topicToAlias[d]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.length,!0},g.prototype.getTopicByAlias=function(d){return this.aliasToTopic.get(d)},g.prototype.getAliasByTopic=function(d){const s=this.topicToAlias[d];return typeof s<"u"&&this.aliasToTopic.get(s),s},g.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},g.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},W.exports=g},{"lru-cache":37,"number-allocator":46}],11:[function(A,W,V){"use strict";function m(g){const d=g.split("/");for(let s=0;s<d.length;s++)if("+"!==d[s]){if("#"===d[s])return s===d.length-1;if(-1!==d[s].indexOf("+")||-1!==d[s].indexOf("#"))return!1}return!0}W.exports={validateTopics:function b(g){if(0===g.length)return"empty_topic_list";for(let d=0;d<g.length;d++)if(!m(g[d]))return g[d];return null}}},{}],12:[function(A,W,V){(function(m){(function(){"use strict";const b=A("../client"),g=A("../store"),d=A("url"),s=A("xtend"),t=A("debug")("mqttjs"),r={};function n(o,a){if(t("connecting to an MQTT broker..."),"object"==typeof o&&!a&&(a=o,o=null),a=a||{},o){const h=d.parse(o,!0);if(null!=h.port&&(h.port=Number(h.port)),null===(a=s(h,a)).protocol)throw new Error("Missing protocol");a.protocol=a.protocol.replace(/:$/,"")}if(function e(o){let a;o.auth&&(a=o.auth.match(/^(.+):(.+)$/),a?(o.username=a[1],o.password=a[2]):o.username=o.auth)}(a),a.query&&"string"==typeof a.query.clientId&&(a.clientId=a.query.clientId),a.cert&&a.key){if(!a.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(a.protocol))switch(a.protocol){case"mqtt":a.protocol="mqtts";break;case"ws":a.protocol="wss";break;case"wx":a.protocol="wxs";break;case"ali":a.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+a.protocol+'"!')}}if(!r[a.protocol]){const h=-1!==["mqtts","wss"].indexOf(a.protocol);a.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(i,w){return(!h||w%2!=0)&&"function"==typeof r[i]})[0]}if(!1===a.clean&&!a.clientId)throw new Error("Missing clientId for unclean clients");a.protocol&&(a.defaultProtocol=a.protocol);const v=new b(function p(h){return a.servers&&((!h._reconnectCount||h._reconnectCount===a.servers.length)&&(h._reconnectCount=0),a.host=a.servers[h._reconnectCount].host,a.port=a.servers[h._reconnectCount].port,a.protocol=a.servers[h._reconnectCount].protocol?a.servers[h._reconnectCount].protocol:a.defaultProtocol,a.hostname=a.host,h._reconnectCount++),t("calling streambuilder for",a.protocol),r[a.protocol](h,a)},a);return v.on("error",function(){}),v}typeof m<"u"&&"browser"!==m.title||"function"!=typeof ce?(r.mqtt=A("./tcp"),r.tcp=A("./tcp"),r.ssl=A("./tls"),r.tls=A("./tls"),r.mqtts=A("./tls")):(r.wx=A("./wx"),r.wxs=A("./wx"),r.ali=A("./ali"),r.alis=A("./ali")),r.ws=A("./ws"),r.wss=A("./ws"),W.exports=n,W.exports.connect=n,W.exports.MqttClient=b,W.exports.Store=g}).call(this)}).call(this,A("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(A,W,V){"use strict";V.byteLength=function e(h){var i=r(h),T=i[1];return 3*(i[0]+T)/4-T},V.toByteArray=function o(h){var i,q,w=r(h),T=w[0],x=w[1],P=new g(function n(h,i,w){return 3*(i+w)/4-w}(0,T,x)),L=0,M=x>0?T-4:T;for(q=0;q<M;q+=4)i=b[h.charCodeAt(q)]<<18|b[h.charCodeAt(q+1)]<<12|b[h.charCodeAt(q+2)]<<6|b[h.charCodeAt(q+3)],P[L++]=i>>16&255,P[L++]=i>>8&255,P[L++]=255&i;return 2===x&&(i=b[h.charCodeAt(q)]<<2|b[h.charCodeAt(q+1)]>>4,P[L++]=255&i),1===x&&(i=b[h.charCodeAt(q)]<<10|b[h.charCodeAt(q+1)]<<4|b[h.charCodeAt(q+2)]>>2,P[L++]=i>>8&255,P[L++]=255&i),P},V.fromByteArray=function v(h){for(var i,w=h.length,T=w%3,x=[],P=16383,L=0,M=w-T;L<M;L+=P)x.push(p(h,L,L+P>M?M:L+P));return 1===T?x.push(m[(i=h[w-1])>>2]+m[i<<4&63]+"=="):2===T&&x.push(m[(i=(h[w-2]<<8)+h[w-1])>>10]+m[i>>4&63]+m[i<<2&63]+"="),x.join("")};for(var m=[],b=[],g=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)m[s]=d[s],b[d.charCodeAt(s)]=s;function r(h){var i=h.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=h.indexOf("=");return-1===w&&(w=i),[w,w===i?0:4-w%4]}function a(h){return m[h>>18&63]+m[h>>12&63]+m[h>>6&63]+m[63&h]}function p(h,i,w){for(var x=[],P=i;P<w;P+=3)x.push(a((h[P]<<16&16711680)+(h[P+1]<<8&65280)+(255&h[P+2])));return x.join("")}b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63},{}],14:[function(A,W,V){"use strict";const{Buffer:m}=A("buffer"),b=Symbol.for("BufferList");function g(d){if(!(this instanceof g))return new g(d);g._init.call(this,d)}g._init=function(s){Object.defineProperty(this,b,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},g.prototype._new=function(s){return new g(s)},g.prototype._offset=function(s){if(0===s)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const e=t+this._bufs[r].length;if(s<e||r===this._bufs.length-1)return[r,s-t];t=e}},g.prototype._reverseOffset=function(d){const s=d[0];let t=d[1];for(let r=0;r<s;r++)t+=this._bufs[r].length;return t},g.prototype.get=function(s){if(s>this.length||s<0)return;const t=this._offset(s);return this._bufs[t[0]][t[1]]},g.prototype.slice=function(s,t){return"number"==typeof s&&s<0&&(s+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,s,t)},g.prototype.copy=function(s,t,r,e){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof e||e>this.length)&&(e=this.length),r>=this.length||e<=0)return s||m.alloc(0);const n=!!s,o=this._offset(r),a=e-r;let p=a,v=n&&t||0,h=o[1];if(0===r&&e===this.length){if(!n)return 1===this._bufs.length?this._bufs[0]:m.concat(this._bufs,this.length);for(let i=0;i<this._bufs.length;i++)this._bufs[i].copy(s,v),v+=this._bufs[i].length;return s}if(p<=this._bufs[o[0]].length-h)return n?this._bufs[o[0]].copy(s,t,h,h+p):this._bufs[o[0]].slice(h,h+p);n||(s=m.allocUnsafe(a));for(let i=o[0];i<this._bufs.length;i++){const w=this._bufs[i].length-h;if(!(p>w)){this._bufs[i].copy(s,v,h,h+p),v+=w;break}this._bufs[i].copy(s,v,h),v+=w,p-=w,h&&(h=0)}return s.length>v?s.slice(0,v):s},g.prototype.shallowSlice=function(s,t){if((s=s||0)<0&&(s+=this.length),(t="number"!=typeof t?this.length:t)<0&&(t+=this.length),s===t)return this._new();const r=this._offset(s),e=this._offset(t),n=this._bufs.slice(r[0],e[0]+1);return 0===e[1]?n.pop():n[n.length-1]=n[n.length-1].slice(0,e[1]),0!==r[1]&&(n[0]=n[0].slice(r[1])),this._new(n)},g.prototype.toString=function(s,t,r){return this.slice(t,r).toString(s)},g.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;){if(!(s>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},g.prototype.duplicate=function(){const s=this._new();for(let t=0;t<this._bufs.length;t++)s.append(this._bufs[t]);return s},g.prototype.append=function(s){if(null==s)return this;if(s.buffer)this._appendBuffer(m.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let t=0;t<s.length;t++)this.append(s[t]);else if(this._isBufferList(s))for(let t=0;t<s._bufs.length;t++)this.append(s._bufs[t]);else"number"==typeof s&&(s=s.toString()),this._appendBuffer(m.from(s));return this},g.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},g.prototype.indexOf=function(d,s,t){if(void 0===t&&"string"==typeof s&&(t=s,s=void 0),"function"==typeof d||Array.isArray(d))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof d?d=m.from([d]):"string"==typeof d?d=m.from(d,t):this._isBufferList(d)?d=d.slice():Array.isArray(d.buffer)?d=m.from(d.buffer,d.byteOffset,d.byteLength):m.isBuffer(d)||(d=m.from(d)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),0===d.length)return s>this.length?this.length:s;const r=this._offset(s);let e=r[0],n=r[1];for(;e<this._bufs.length;e++){const o=this._bufs[e];for(;n<o.length;)if(o.length-n>=d.length){const p=o.indexOf(d,n);if(-1!==p)return this._reverseOffset([e,p]);n=o.length-d.length+1}else{const p=this._reverseOffset([e,n]);if(this._match(p,d))return p;n++}n=0}return-1},g.prototype._match=function(d,s){if(this.length-d<s.length)return!1;for(let t=0;t<s.length;t++)if(this.get(d+t)!==s[t])return!1;return!0},function(){const d={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const s in d)!function(t){g.prototype[t]=null===d[t]?function(r,e){return this.slice(r,r+e)[t](0,e)}:function(r=0){return this.slice(r,r+d[t])[t](0)}}(s)}(),g.prototype._isBufferList=function(s){return s instanceof g||g.isBufferList(s)},g.isBufferList=function(s){return null!=s&&s[b]},W.exports=g},{buffer:17}],15:[function(A,W,V){"use strict";const m=A("readable-stream").Duplex,b=A("inherits"),g=A("./BufferList");function d(s){if(!(this instanceof d))return new d(s);if("function"==typeof s){this._callback=s;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),s=null}g._init.call(this,s),m.call(this)}b(d,m),Object.assign(d.prototype,g.prototype),d.prototype._new=function(t){return new d(t)},d.prototype._write=function(t,r,e){this._appendBuffer(t),"function"==typeof e&&e()},d.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},d.prototype.end=function(t){m.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},d.prototype._destroy=function(t,r){this._bufs.length=0,this.length=0,r(t)},d.prototype._isBufferList=function(t){return t instanceof d||t instanceof g||d.isBufferList(t)},d.isBufferList=g.isBufferList,W.exports=d,W.exports.BufferListStream=d,W.exports.BufferList=g},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(A,W,V){},{}],17:[function(A,W,V){(function(m){(function(){"use strict";var b=A("base64-js"),g=A("ieee754");V.Buffer=r,V.SlowBuffer=function T(c){return+c!=c&&(c=0),r.alloc(+c)},V.INSPECT_MAX_BYTES=50;var d=2147483647;function t(c){if(c>d)throw new RangeError('The value "'+c+'" is invalid for option "size"');var l=new Uint8Array(c);return l.__proto__=r.prototype,l}function r(c,l,u){if("number"==typeof c){if("string"==typeof l)throw new TypeError('The "string" argument must be of type string. Received type number');return a(c)}return e(c,l,u)}function e(c,l,u){if("string"==typeof c)return function p(c,l){if(("string"!=typeof l||""===l)&&(l="utf8"),!r.isEncoding(l))throw new TypeError("Unknown encoding: "+l);var u=0|x(c,l),k=t(u),D=k.write(c,l);return D!==u&&(k=k.slice(0,D)),k}(c,l);if(ArrayBuffer.isView(c))return v(c);if(null==c)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(X(c,ArrayBuffer)||c&&X(c.buffer,ArrayBuffer))return function h(c,l,u){if(l<0||c.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<l+(u||0))throw new RangeError('"length" is outside of buffer bounds');var k;return(k=void 0===l&&void 0===u?new Uint8Array(c):void 0===u?new Uint8Array(c,l):new Uint8Array(c,l,u)).__proto__=r.prototype,k}(c,l,u);if("number"==typeof c)throw new TypeError('The "value" argument must not be of type number. Received type number');var k=c.valueOf&&c.valueOf();if(null!=k&&k!==c)return r.from(k,l,u);var D=function i(c){if(r.isBuffer(c)){var l=0|w(c.length),u=t(l);return 0===u.length||c.copy(u,0,0,l),u}return void 0!==c.length?"number"!=typeof c.length||C(c.length)?t(0):v(c):"Buffer"===c.type&&Array.isArray(c.data)?v(c.data):void 0}(c);if(D)return D;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof c[Symbol.toPrimitive])return r.from(c[Symbol.toPrimitive]("string"),l,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}function n(c){if("number"!=typeof c)throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function a(c){return n(c),t(c<0?0:0|w(c))}function v(c){for(var l=c.length<0?0:0|w(c.length),u=t(l),k=0;k<l;k+=1)u[k]=255&c[k];return u}function w(c){if(c>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|c}function x(c,l){if(r.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||X(c,ArrayBuffer))return c.byteLength;if("string"!=typeof c)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);var u=c.length,k=arguments.length>2&&!0===arguments[2];if(!k&&0===u)return 0;for(var D=!1;;)switch(l){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return ne(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*u;case"hex":return u>>>1;case"base64":return U(c).length;default:if(D)return k?-1:ne(c).length;l=(""+l).toLowerCase(),D=!0}}function P(c,l,u){var k=!1;if((void 0===l||l<0)&&(l=0),l>this.length||((void 0===u||u>this.length)&&(u=this.length),u<=0)||(u>>>=0)<=(l>>>=0))return"";for(c||(c="utf8");;)switch(c){case"hex":return J(this,l,u);case"utf8":case"utf-8":return S(this,l,u);case"ascii":return te(this,l,u);case"latin1":case"binary":return ie(this,l,u);case"base64":return E(this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,l,u);default:if(k)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),k=!0}}function L(c,l,u){var k=c[l];c[l]=c[u],c[u]=k}function M(c,l,u,k,D){if(0===c.length)return-1;if("string"==typeof u?(k=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),C(u=+u)&&(u=D?0:c.length-1),u<0&&(u=c.length+u),u>=c.length){if(D)return-1;u=c.length-1}else if(u<0){if(!D)return-1;u=0}if("string"==typeof l&&(l=r.from(l,k)),r.isBuffer(l))return 0===l.length?-1:q(c,l,u,k,D);if("number"==typeof l)return l&=255,"function"==typeof Uint8Array.prototype.indexOf?D?Uint8Array.prototype.indexOf.call(c,l,u):Uint8Array.prototype.lastIndexOf.call(c,l,u):q(c,[l],u,k,D);throw new TypeError("val must be string, number or Buffer")}function q(c,l,u,k,D){var fe,G=1,ee=c.length,ae=l.length;if(void 0!==k&&("ucs2"===(k=String(k).toLowerCase())||"ucs-2"===k||"utf16le"===k||"utf-16le"===k)){if(c.length<2||l.length<2)return-1;G=2,ee/=2,ae/=2,u/=2}function le(ve,ge){return 1===G?ve[ge]:ve.readUInt16BE(ge*G)}if(D){var he=-1;for(fe=u;fe<ee;fe++)if(le(c,fe)===le(l,-1===he?0:fe-he)){if(-1===he&&(he=fe),fe-he+1===ae)return he*G}else-1!==he&&(fe-=fe-he),he=-1}else for(u+ae>ee&&(u=ee-ae),fe=u;fe>=0;fe--){for(var ue=!0,ye=0;ye<ae;ye++)if(le(c,fe+ye)!==le(l,ye)){ue=!1;break}if(ue)return fe}return-1}function f(c,l,u,k){u=Number(u)||0;var D=c.length-u;k?(k=Number(k))>D&&(k=D):k=D;var G=l.length;k>G/2&&(k=G/2);for(var ee=0;ee<k;++ee){var ae=parseInt(l.substr(2*ee,2),16);if(C(ae))return ee;c[u+ee]=ae}return ee}function _(c,l,u,k){return Q(ne(l,c.length-u),c,u,k)}function y(c,l,u,k){return Q(function F(c){for(var l=[],u=0;u<c.length;++u)l.push(255&c.charCodeAt(u));return l}(l),c,u,k)}function I(c,l,u,k){return y(c,l,u,k)}function j(c,l,u,k){return Q(U(l),c,u,k)}function N(c,l,u,k){return Q(function R(c,l){for(var u,k,G=[],ee=0;ee<c.length&&!((l-=2)<0);++ee)k=(u=c.charCodeAt(ee))>>8,G.push(u%256),G.push(k);return G}(l,c.length-u),c,u,k)}function E(c,l,u){return b.fromByteArray(0===l&&u===c.length?c:c.slice(l,u))}function S(c,l,u){u=Math.min(c.length,u);for(var k=[],D=l;D<u;){var le,fe,he,ue,G=c[D],ee=null,ae=G>239?4:G>223?3:G>191?2:1;if(D+ae<=u)switch(ae){case 1:G<128&&(ee=G);break;case 2:128==(192&(le=c[D+1]))&&(ue=(31&G)<<6|63&le)>127&&(ee=ue);break;case 3:fe=c[D+2],128==(192&(le=c[D+1]))&&128==(192&fe)&&(ue=(15&G)<<12|(63&le)<<6|63&fe)>2047&&(ue<55296||ue>57343)&&(ee=ue);break;case 4:fe=c[D+2],he=c[D+3],128==(192&(le=c[D+1]))&&128==(192&fe)&&128==(192&he)&&(ue=(15&G)<<18|(63&le)<<12|(63&fe)<<6|63&he)>65535&&ue<1114112&&(ee=ue)}null===ee?(ee=65533,ae=1):ee>65535&&(k.push((ee-=65536)>>>10&1023|55296),ee=56320|1023&ee),k.push(ee),D+=ae}return function z(c){var l=c.length;if(l<=O)return String.fromCharCode.apply(String,c);for(var u="",k=0;k<l;)u+=String.fromCharCode.apply(String,c.slice(k,k+=O));return u}(k)}V.kMaxLength=d,!(r.TYPED_ARRAY_SUPPORT=function s(){try{var c=new Uint8Array(1);return c.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===c.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(c,l,u){return e(c,l,u)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(c,l,u){return function o(c,l,u){return n(c),c<=0?t(c):void 0!==l?"string"==typeof u?t(c).fill(l,u):t(c).fill(l):t(c)}(c,l,u)},r.allocUnsafe=function(c){return a(c)},r.allocUnsafeSlow=function(c){return a(c)},r.isBuffer=function(l){return null!=l&&!0===l._isBuffer&&l!==r.prototype},r.compare=function(l,u){if(X(l,Uint8Array)&&(l=r.from(l,l.offset,l.byteLength)),X(u,Uint8Array)&&(u=r.from(u,u.offset,u.byteLength)),!r.isBuffer(l)||!r.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===u)return 0;for(var k=l.length,D=u.length,G=0,ee=Math.min(k,D);G<ee;++G)if(l[G]!==u[G]){k=l[G],D=u[G];break}return k<D?-1:D<k?1:0},r.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(l,u){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(0===l.length)return r.alloc(0);var k;if(void 0===u)for(u=0,k=0;k<l.length;++k)u+=l[k].length;var D=r.allocUnsafe(u),G=0;for(k=0;k<l.length;++k){var ee=l[k];if(X(ee,Uint8Array)&&(ee=r.from(ee)),!r.isBuffer(ee))throw new TypeError('"list" argument must be an Array of Buffers');ee.copy(D,G),G+=ee.length}return D},r.byteLength=x,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var l=this.length;if(l%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<l;u+=2)L(this,u,u+1);return this},r.prototype.swap32=function(){var l=this.length;if(l%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<l;u+=4)L(this,u,u+3),L(this,u+1,u+2);return this},r.prototype.swap64=function(){var l=this.length;if(l%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<l;u+=8)L(this,u,u+7),L(this,u+1,u+6),L(this,u+2,u+5),L(this,u+3,u+4);return this},r.prototype.toString=function(){var l=this.length;return 0===l?"":0===arguments.length?S(this,0,l):P.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(l){if(!r.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l||0===r.compare(this,l)},r.prototype.inspect=function(){var l="",u=V.INSPECT_MAX_BYTES;return l=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(l+=" ... "),"<Buffer "+l+">"},r.prototype.compare=function(l,u,k,D,G){if(X(l,Uint8Array)&&(l=r.from(l,l.offset,l.byteLength)),!r.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(void 0===u&&(u=0),void 0===k&&(k=l?l.length:0),void 0===D&&(D=0),void 0===G&&(G=this.length),u<0||k>l.length||D<0||G>this.length)throw new RangeError("out of range index");if(D>=G&&u>=k)return 0;if(D>=G)return-1;if(u>=k)return 1;if(this===l)return 0;for(var ee=(G>>>=0)-(D>>>=0),ae=(k>>>=0)-(u>>>=0),le=Math.min(ee,ae),fe=this.slice(D,G),he=l.slice(u,k),ue=0;ue<le;++ue)if(fe[ue]!==he[ue]){ee=fe[ue],ae=he[ue];break}return ee<ae?-1:ae<ee?1:0},r.prototype.includes=function(l,u,k){return-1!==this.indexOf(l,u,k)},r.prototype.indexOf=function(l,u,k){return M(this,l,u,k,!0)},r.prototype.lastIndexOf=function(l,u,k){return M(this,l,u,k,!1)},r.prototype.write=function(l,u,k,D){if(void 0===u)D="utf8",k=this.length,u=0;else if(void 0===k&&"string"==typeof u)D=u,k=this.length,u=0;else{if(!isFinite(u))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");u>>>=0,isFinite(k)?(k>>>=0,void 0===D&&(D="utf8")):(D=k,k=void 0)}var G=this.length-u;if((void 0===k||k>G)&&(k=G),l.length>0&&(k<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");for(var ee=!1;;)switch(D){case"hex":return f(this,l,u,k);case"utf8":case"utf-8":return _(this,l,u,k);case"ascii":return y(this,l,u,k);case"latin1":case"binary":return I(this,l,u,k);case"base64":return j(this,l,u,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,l,u,k);default:if(ee)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),ee=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function te(c,l,u){var k="";u=Math.min(c.length,u);for(var D=l;D<u;++D)k+=String.fromCharCode(127&c[D]);return k}function ie(c,l,u){var k="";u=Math.min(c.length,u);for(var D=l;D<u;++D)k+=String.fromCharCode(c[D]);return k}function J(c,l,u){var k=c.length;(!l||l<0)&&(l=0),(!u||u<0||u>k)&&(u=k);for(var D="",G=l;G<u;++G)D+=Z(c[G]);return D}function H(c,l,u){for(var k=c.slice(l,u),D="",G=0;G<k.length;G+=2)D+=String.fromCharCode(k[G]+256*k[G+1]);return D}function $(c,l,u){if(c%1!=0||c<0)throw new RangeError("offset is not uint");if(c+l>u)throw new RangeError("Trying to access beyond buffer length")}function Y(c,l,u,k,D,G){if(!r.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>D||l<G)throw new RangeError('"value" argument is out of bounds');if(u+k>c.length)throw new RangeError("Index out of range")}function oe(c,l,u,k,D,G){if(u+k>c.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function se(c,l,u,k,D){return l=+l,u>>>=0,D||oe(c,0,u,4),g.write(c,l,u,k,23,4),u+4}function re(c,l,u,k,D){return l=+l,u>>>=0,D||oe(c,0,u,8),g.write(c,l,u,k,52,8),u+8}r.prototype.slice=function(l,u){var k=this.length;(l=~~l)<0?(l+=k)<0&&(l=0):l>k&&(l=k),(u=void 0===u?k:~~u)<0?(u+=k)<0&&(u=0):u>k&&(u=k),u<l&&(u=l);var D=this.subarray(l,u);return D.__proto__=r.prototype,D},r.prototype.readUIntLE=function(l,u,k){l>>>=0,u>>>=0,k||$(l,u,this.length);for(var D=this[l],G=1,ee=0;++ee<u&&(G*=256);)D+=this[l+ee]*G;return D},r.prototype.readUIntBE=function(l,u,k){l>>>=0,u>>>=0,k||$(l,u,this.length);for(var D=this[l+--u],G=1;u>0&&(G*=256);)D+=this[l+--u]*G;return D},r.prototype.readUInt8=function(l,u){return l>>>=0,u||$(l,1,this.length),this[l]},r.prototype.readUInt16LE=function(l,u){return l>>>=0,u||$(l,2,this.length),this[l]|this[l+1]<<8},r.prototype.readUInt16BE=function(l,u){return l>>>=0,u||$(l,2,this.length),this[l]<<8|this[l+1]},r.prototype.readUInt32LE=function(l,u){return l>>>=0,u||$(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+16777216*this[l+3]},r.prototype.readUInt32BE=function(l,u){return l>>>=0,u||$(l,4,this.length),16777216*this[l]+(this[l+1]<<16|this[l+2]<<8|this[l+3])},r.prototype.readIntLE=function(l,u,k){l>>>=0,u>>>=0,k||$(l,u,this.length);for(var D=this[l],G=1,ee=0;++ee<u&&(G*=256);)D+=this[l+ee]*G;return D>=(G*=128)&&(D-=Math.pow(2,8*u)),D},r.prototype.readIntBE=function(l,u,k){l>>>=0,u>>>=0,k||$(l,u,this.length);for(var D=u,G=1,ee=this[l+--D];D>0&&(G*=256);)ee+=this[l+--D]*G;return ee>=(G*=128)&&(ee-=Math.pow(2,8*u)),ee},r.prototype.readInt8=function(l,u){return l>>>=0,u||$(l,1,this.length),128&this[l]?-1*(255-this[l]+1):this[l]},r.prototype.readInt16LE=function(l,u){l>>>=0,u||$(l,2,this.length);var k=this[l]|this[l+1]<<8;return 32768&k?4294901760|k:k},r.prototype.readInt16BE=function(l,u){l>>>=0,u||$(l,2,this.length);var k=this[l+1]|this[l]<<8;return 32768&k?4294901760|k:k},r.prototype.readInt32LE=function(l,u){return l>>>=0,u||$(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},r.prototype.readInt32BE=function(l,u){return l>>>=0,u||$(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},r.prototype.readFloatLE=function(l,u){return l>>>=0,u||$(l,4,this.length),g.read(this,l,!0,23,4)},r.prototype.readFloatBE=function(l,u){return l>>>=0,u||$(l,4,this.length),g.read(this,l,!1,23,4)},r.prototype.readDoubleLE=function(l,u){return l>>>=0,u||$(l,8,this.length),g.read(this,l,!0,52,8)},r.prototype.readDoubleBE=function(l,u){return l>>>=0,u||$(l,8,this.length),g.read(this,l,!1,52,8)},r.prototype.writeUIntLE=function(l,u,k,D){l=+l,u>>>=0,k>>>=0,D||Y(this,l,u,k,Math.pow(2,8*k)-1,0);var ee=1,ae=0;for(this[u]=255&l;++ae<k&&(ee*=256);)this[u+ae]=l/ee&255;return u+k},r.prototype.writeUIntBE=function(l,u,k,D){l=+l,u>>>=0,k>>>=0,D||Y(this,l,u,k,Math.pow(2,8*k)-1,0);var ee=k-1,ae=1;for(this[u+ee]=255&l;--ee>=0&&(ae*=256);)this[u+ee]=l/ae&255;return u+k},r.prototype.writeUInt8=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,1,255,0),this[u]=255&l,u+1},r.prototype.writeUInt16LE=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,2,65535,0),this[u]=255&l,this[u+1]=l>>>8,u+2},r.prototype.writeUInt16BE=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,2,65535,0),this[u]=l>>>8,this[u+1]=255&l,u+2},r.prototype.writeUInt32LE=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,4,4294967295,0),this[u+3]=l>>>24,this[u+2]=l>>>16,this[u+1]=l>>>8,this[u]=255&l,u+4},r.prototype.writeUInt32BE=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,4,4294967295,0),this[u]=l>>>24,this[u+1]=l>>>16,this[u+2]=l>>>8,this[u+3]=255&l,u+4},r.prototype.writeIntLE=function(l,u,k,D){if(l=+l,u>>>=0,!D){var G=Math.pow(2,8*k-1);Y(this,l,u,k,G-1,-G)}var ee=0,ae=1,le=0;for(this[u]=255&l;++ee<k&&(ae*=256);)l<0&&0===le&&0!==this[u+ee-1]&&(le=1),this[u+ee]=(l/ae>>0)-le&255;return u+k},r.prototype.writeIntBE=function(l,u,k,D){if(l=+l,u>>>=0,!D){var G=Math.pow(2,8*k-1);Y(this,l,u,k,G-1,-G)}var ee=k-1,ae=1,le=0;for(this[u+ee]=255&l;--ee>=0&&(ae*=256);)l<0&&0===le&&0!==this[u+ee+1]&&(le=1),this[u+ee]=(l/ae>>0)-le&255;return u+k},r.prototype.writeInt8=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,1,127,-128),l<0&&(l=255+l+1),this[u]=255&l,u+1},r.prototype.writeInt16LE=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,2,32767,-32768),this[u]=255&l,this[u+1]=l>>>8,u+2},r.prototype.writeInt16BE=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,2,32767,-32768),this[u]=l>>>8,this[u+1]=255&l,u+2},r.prototype.writeInt32LE=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,4,2147483647,-2147483648),this[u]=255&l,this[u+1]=l>>>8,this[u+2]=l>>>16,this[u+3]=l>>>24,u+4},r.prototype.writeInt32BE=function(l,u,k){return l=+l,u>>>=0,k||Y(this,l,u,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[u]=l>>>24,this[u+1]=l>>>16,this[u+2]=l>>>8,this[u+3]=255&l,u+4},r.prototype.writeFloatLE=function(l,u,k){return se(this,l,u,!0,k)},r.prototype.writeFloatBE=function(l,u,k){return se(this,l,u,!1,k)},r.prototype.writeDoubleLE=function(l,u,k){return re(this,l,u,!0,k)},r.prototype.writeDoubleBE=function(l,u,k){return re(this,l,u,!1,k)},r.prototype.copy=function(l,u,k,D){if(!r.isBuffer(l))throw new TypeError("argument should be a Buffer");if(k||(k=0),!D&&0!==D&&(D=this.length),u>=l.length&&(u=l.length),u||(u=0),D>0&&D<k&&(D=k),D===k||0===l.length||0===this.length)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),l.length-u<D-k&&(D=l.length-u+k);var G=D-k;if(this===l&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(u,k,D);else if(this===l&&k<u&&u<D)for(var ee=G-1;ee>=0;--ee)l[ee+u]=this[ee+k];else Uint8Array.prototype.set.call(l,this.subarray(k,D),u);return G},r.prototype.fill=function(l,u,k,D){if("string"==typeof l){if("string"==typeof u?(D=u,u=0,k=this.length):"string"==typeof k&&(D=k,k=this.length),void 0!==D&&"string"!=typeof D)throw new TypeError("encoding must be a string");if("string"==typeof D&&!r.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(1===l.length){var G=l.charCodeAt(0);("utf8"===D&&G<128||"latin1"===D)&&(l=G)}}else"number"==typeof l&&(l&=255);if(u<0||this.length<u||this.length<k)throw new RangeError("Out of range index");if(k<=u)return this;var ee;if(u>>>=0,k=void 0===k?this.length:k>>>0,l||(l=0),"number"==typeof l)for(ee=u;ee<k;++ee)this[ee]=l;else{var ae=r.isBuffer(l)?l:r.from(l,D),le=ae.length;if(0===le)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(ee=0;ee<k-u;++ee)this[ee+u]=ae[ee%le]}return this};var K=/[^+/0-9A-Za-z-_]/g;function Z(c){return c<16?"0"+c.toString(16):c.toString(16)}function ne(c,l){l=l||1/0;for(var u,k=c.length,D=null,G=[],ee=0;ee<k;++ee){if((u=c.charCodeAt(ee))>55295&&u<57344){if(!D){if(u>56319){(l-=3)>-1&&G.push(239,191,189);continue}if(ee+1===k){(l-=3)>-1&&G.push(239,191,189);continue}D=u;continue}if(u<56320){(l-=3)>-1&&G.push(239,191,189),D=u;continue}u=65536+(D-55296<<10|u-56320)}else D&&(l-=3)>-1&&G.push(239,191,189);if(D=null,u<128){if((l-=1)<0)break;G.push(u)}else if(u<2048){if((l-=2)<0)break;G.push(u>>6|192,63&u|128)}else if(u<65536){if((l-=3)<0)break;G.push(u>>12|224,u>>6&63|128,63&u|128)}else{if(!(u<1114112))throw new Error("Invalid code point");if((l-=4)<0)break;G.push(u>>18|240,u>>12&63|128,u>>6&63|128,63&u|128)}}return G}function U(c){return b.toByteArray(function B(c){if((c=(c=c.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;c.length%4!=0;)c+="=";return c}(c))}function Q(c,l,u,k){for(var D=0;D<k&&!(D+u>=l.length||D>=c.length);++D)l[D+u]=c[D];return D}function X(c,l){return c instanceof l||null!=c&&null!=c.constructor&&null!=c.constructor.name&&c.constructor.name===l.name}function C(c){return c!=c}}).call(this)}).call(this,A("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(A,W,V){(function(m){(function(){V.formatArgs=function g(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+W.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,p=>{"%%"!==p&&(o++,"%c"===p&&(a=o))}),e.splice(a,0,n)},V.save=function d(e){try{e?V.storage.setItem("debug",e):V.storage.removeItem("debug")}catch{}},V.load=function s(){let e;try{e=V.storage.getItem("debug")}catch{}return!e&&typeof m<"u"&&"env"in m&&(e=m.env.DEBUG),e},V.useColors=function b(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},V.storage=function t(){try{return localStorage}catch{}}(),V.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),V.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],V.log=console.debug||console.log||(()=>{}),W.exports=A("./common")(V);const{formatters:r}=W.exports;r.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}}).call(this)}).call(this,A("_process"))},{"./common":19,_process:50}],19:[function(A,W,V){W.exports=function m(b){function d(p){let v,i,w,h=null;function T(...x){if(!T.enabled)return;const P=T,L=Number(new Date);P.diff=L-(v||L),P.prev=v,P.curr=L,v=L,x[0]=d.coerce(x[0]),"string"!=typeof x[0]&&x.unshift("%O");let q=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(_,y)=>{if("%%"===_)return"%";q++;const I=d.formatters[y];return"function"==typeof I&&(_=I.call(P,x[q]),x.splice(q,1),q--),_}),d.formatArgs.call(P,x),(P.log||d.log).apply(P,x)}return T.namespace=p,T.useColors=d.useColors(),T.color=d.selectColor(p),T.extend=s,T.destroy=d.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==h?h:(i!==d.namespaces&&(i=d.namespaces,w=d.enabled(p)),w),set:x=>{h=x}}),"function"==typeof d.init&&d.init(T),T}function s(p,v){const h=d(this.namespace+(typeof v>"u"?":":v)+p);return h.log=this.log,h}function n(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}return d.debug=d,d.default=d,d.coerce=function o(p){return p instanceof Error?p.stack||p.message:p},d.disable=function r(){const p=[...d.names.map(n),...d.skips.map(n).map(v=>"-"+v)].join(",");return d.enable(""),p},d.enable=function t(p){let v;d.save(p),d.namespaces=p,d.names=[],d.skips=[];const h=("string"==typeof p?p:"").split(/[\s,]+/),i=h.length;for(v=0;v<i;v++)h[v]&&("-"===(p=h[v].replace(/\*/g,".*?"))[0]?d.skips.push(new RegExp("^"+p.substr(1)+"$")):d.names.push(new RegExp("^"+p+"$")))},d.enabled=function e(p){if("*"===p[p.length-1])return!0;let v,h;for(v=0,h=d.skips.length;v<h;v++)if(d.skips[v].test(p))return!1;for(v=0,h=d.names.length;v<h;v++)if(d.names[v].test(p))return!0;return!1},d.humanize=A("ms"),d.destroy=function a(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(b).forEach(p=>{d[p]=b[p]}),d.names=[],d.skips=[],d.formatters={},d.selectColor=function g(p){let v=0;for(let h=0;h<p.length;h++)v=(v<<5)-v+p.charCodeAt(h),v|=0;return d.colors[Math.abs(v)%d.colors.length]},d.enable(d.load()),d}},{ms:45}],20:[function(A,W,V){(function(m,b){(function(){var g=A("readable-stream"),d=A("end-of-stream"),s=A("inherits"),t=A("stream-shift"),r=b.from&&b.from!==Uint8Array.from?b.from([0]):new b([0]),e=function(i,w){i._corked?i.once("uncork",w):w()},o=function(i,w){return function(T){T?function(i,w){i._autoDestroy&&i.destroy(w)}(i,"premature close"===T.message?null:T):w&&!i._ended&&i.end()}},p=function(){},h=function(i,w,T){if(!(this instanceof h))return new h(i,w,T);g.Duplex.call(this,T),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!T||!1!==T.autoDestroy,this._forwardDestroy=!T||!1!==T.destroy,this._forwardEnd=!T||!1!==T.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,i&&this.setWritable(i),w&&this.setReadable(w)};s(h,g.Duplex),h.obj=function(i,w,T){return T||(T={}),T.objectMode=!0,T.highWaterMark=16,new h(i,w,T)},h.prototype.cork=function(){1==++this._corked&&this.emit("cork")},h.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},h.prototype.setWritable=function(i){if(this._unwrite&&this._unwrite(),this.destroyed)i&&i.destroy&&i.destroy();else if(null!==i&&!1!==i){var w=this,T=d(i,{writable:!0,readable:!1},o(this,this._forwardEnd)),x=function(){var L=w._ondrain;w._ondrain=null,L&&L()};this._unwrite&&m.nextTick(x),this._writable=i,this._writable.on("drain",x),this._unwrite=function(){w._writable.removeListener("drain",x),T()},this.uncork()}else this.end()},h.prototype.setReadable=function(i){if(this._unread&&this._unread(),this.destroyed)i&&i.destroy&&i.destroy();else{if(null===i||!1===i)return this.push(null),void this.resume();var w=this,T=d(i,{writable:!1,readable:!0},o(this)),x=function(){w._forward()},P=function(){w.push(null)};this._drained=!0,this._readable=i,this._readable2=i._readableState?i:function(i){return new g.Readable({objectMode:!0,highWaterMark:16}).wrap(i)}(i),this._readable2.on("readable",x),this._readable2.on("end",P),this._unread=function(){w._readable2.removeListener("readable",x),w._readable2.removeListener("end",P),T()},this._forward()}},h.prototype._read=function(){this._drained=!0,this._forward()},h.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var i;this._drained&&null!==(i=t(this._readable2));)this.destroyed||(this._drained=this.push(i));this._forwarding=!1}},h.prototype.destroy=function(i,w){if(w||(w=p),this.destroyed)return w(null);this.destroyed=!0;var T=this;m.nextTick(function(){T._destroy(i),w(null)})},h.prototype._destroy=function(i){if(i){var w=this._ondrain;this._ondrain=null,w?w(i):this.emit("error",i)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},h.prototype._write=function(i,w,T){if(!this.destroyed){if(this._corked)return e(this,this._write.bind(this,i,w,T));if(i===r)return this._finish(T);if(!this._writable)return T();!1===this._writable.write(i)?this._ondrain=T:this.destroyed||T()}},h.prototype._finish=function(i){var w=this;this.emit("preend"),e(this,function(){!function(i,w){!i||i._writableState&&i._writableState.finished?w():i._writableState?i.end(w):(i.end(),w())}(w._forwardEnd&&w._writable,function(){!1===w._writableState.prefinished&&(w._writableState.prefinished=!0),w.emit("prefinish"),e(w,i)})})},h.prototype.end=function(i,w,T){return"function"==typeof i?this.end(null,null,i):"function"==typeof w?this.end(i,null,w):(this._ended=!0,i&&this.write(i),!this._writableState.ending&&!this._writableState.destroyed&&this.write(r),g.Writable.prototype.end.call(this,T))},W.exports=h}).call(this)}).call(this,A("_process"),A("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(A,W,V){(function(m){(function(){var b=A("once"),g=function(){},t=function(r,e,n){if("function"==typeof e)return t(r,null,e);e||(e={}),n=b(n||g);var o=r._writableState,a=r._readableState,p=e.readable||!1!==e.readable&&r.readable,v=e.writable||!1!==e.writable&&r.writable,h=!1,i=function(){r.writable||w()},w=function(){v=!1,p||n.call(r)},T=function(){p=!1,v||n.call(r)},x=function(f){n.call(r,f?new Error("exited with error code: "+f):null)},P=function(f){n.call(r,f)},L=function(){m.nextTick(M)},M=function(){if(!h){if(p&&(!a||!a.ended||a.destroyed))return n.call(r,new Error("premature close"));if(v&&(!o||!o.ended||o.destroyed))return n.call(r,new Error("premature close"))}},q=function(){r.req.on("finish",w)};return function(r){return r.setHeader&&"function"==typeof r.abort}(r)?(r.on("complete",w),r.on("abort",L),r.req?q():r.on("request",q)):v&&!o&&(r.on("end",i),r.on("close",i)),function(r){return r.stdio&&Array.isArray(r.stdio)&&3===r.stdio.length}(r)&&r.on("exit",x),r.on("end",T),r.on("finish",w),!1!==e.error&&r.on("error",P),r.on("close",L),function(){h=!0,r.removeListener("complete",w),r.removeListener("abort",L),r.removeListener("request",q),r.req&&r.req.removeListener("finish",w),r.removeListener("end",i),r.removeListener("close",i),r.removeListener("finish",w),r.removeListener("exit",x),r.removeListener("end",T),r.removeListener("error",P),r.removeListener("close",L)}};W.exports=t}).call(this)}).call(this,A("_process"))},{_process:50,once:48}],22:[function(A,W,V){var m=Object.create||function q(y){var I=function(){};return I.prototype=y,new I},b=Object.keys||function f(y){var I=[];for(var j in y)Object.prototype.hasOwnProperty.call(y,j)&&I.push(j);return j},g=Function.prototype.bind||function _(y){var I=this;return function(){return I.apply(y,arguments)}};function d(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=m(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}W.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0;var t,s=10;try{var r={};Object.defineProperty&&Object.defineProperty(r,"x",{value:0}),t=0===r.x}catch{t=!1}function e(y){return void 0===y._maxListeners?d.defaultMaxListeners:y._maxListeners}function h(y,I,j,N){var E,S,O;if("function"!=typeof j)throw new TypeError('"listener" argument must be a function');if((S=y._events)?(S.newListener&&(y.emit("newListener",I,j.listener?j.listener:j),S=y._events),O=S[I]):(S=y._events=m(null),y._eventsCount=0),O){if("function"==typeof O?O=S[I]=N?[j,O]:[O,j]:N?O.unshift(j):O.push(j),!O.warned&&(E=e(y))&&E>0&&O.length>E){O.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+O.length+' "'+String(I)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');z.name="MaxListenersExceededWarning",z.emitter=y,z.type=I,z.count=O.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",z.name,z.message)}}else O=S[I]=j,++y._eventsCount;return y}function i(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var y=new Array(arguments.length),I=0;I<y.length;++I)y[I]=arguments[I];this.listener.apply(this.target,y)}}function w(y,I,j){var N={fired:!1,wrapFn:void 0,target:y,type:I,listener:j},E=g.call(i,N);return E.listener=j,N.wrapFn=E,E}function T(y,I,j){var N=y._events;if(!N)return[];var E=N[I];return E?"function"==typeof E?j?[E.listener||E]:[E]:j?function M(y){for(var I=new Array(y.length),j=0;j<I.length;++j)I[j]=y[j].listener||y[j];return I}(E):L(E,E.length):[]}function x(y){var I=this._events;if(I){var j=I[y];if("function"==typeof j)return 1;if(j)return j.length}return 0}function L(y,I){for(var j=new Array(I),N=0;N<I;++N)j[N]=y[N];return j}t?Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(y){if("number"!=typeof y||y<0||y!=y)throw new TypeError('"defaultMaxListeners" must be a positive number');s=y}}):d.defaultMaxListeners=s,d.prototype.setMaxListeners=function(I){if("number"!=typeof I||I<0||isNaN(I))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=I,this},d.prototype.getMaxListeners=function(){return e(this)},d.prototype.emit=function(I){var j,N,E,S,O,z,te="error"===I;if(z=this._events)te=te&&null==z.error;else if(!te)return!1;if(te){if(arguments.length>1&&(j=arguments[1]),j instanceof Error)throw j;var ie=new Error('Unhandled "error" event. ('+j+")");throw ie.context=j,ie}if(!(N=z[I]))return!1;var J="function"==typeof N;switch(E=arguments.length){case 1:!function n(y,I,j){if(I)y.call(j);else for(var N=y.length,E=L(y,N),S=0;S<N;++S)E[S].call(j)}(N,J,this);break;case 2:!function o(y,I,j,N){if(I)y.call(j,N);else for(var E=y.length,S=L(y,E),O=0;O<E;++O)S[O].call(j,N)}(N,J,this,arguments[1]);break;case 3:!function a(y,I,j,N,E){if(I)y.call(j,N,E);else for(var S=y.length,O=L(y,S),z=0;z<S;++z)O[z].call(j,N,E)}(N,J,this,arguments[1],arguments[2]);break;case 4:!function p(y,I,j,N,E,S){if(I)y.call(j,N,E,S);else for(var O=y.length,z=L(y,O),te=0;te<O;++te)z[te].call(j,N,E,S)}(N,J,this,arguments[1],arguments[2],arguments[3]);break;default:for(S=new Array(E-1),O=1;O<E;O++)S[O-1]=arguments[O];!function v(y,I,j,N){if(I)y.apply(j,N);else for(var E=y.length,S=L(y,E),O=0;O<E;++O)S[O].apply(j,N)}(N,J,this,S)}return!0},d.prototype.on=d.prototype.addListener=function(I,j){return h(this,I,j,!1)},d.prototype.prependListener=function(I,j){return h(this,I,j,!0)},d.prototype.once=function(I,j){if("function"!=typeof j)throw new TypeError('"listener" argument must be a function');return this.on(I,w(this,I,j)),this},d.prototype.prependOnceListener=function(I,j){if("function"!=typeof j)throw new TypeError('"listener" argument must be a function');return this.prependListener(I,w(this,I,j)),this},d.prototype.removeListener=function(I,j){var N,E,S,O,z;if("function"!=typeof j)throw new TypeError('"listener" argument must be a function');if(!(E=this._events))return this;if(!(N=E[I]))return this;if(N===j||N.listener===j)0==--this._eventsCount?this._events=m(null):(delete E[I],E.removeListener&&this.emit("removeListener",I,N.listener||j));else if("function"!=typeof N){for(S=-1,O=N.length-1;O>=0;O--)if(N[O]===j||N[O].listener===j){z=N[O].listener,S=O;break}if(S<0)return this;0===S?N.shift():function P(y,I){for(var j=I,N=j+1,E=y.length;N<E;j+=1,N+=1)y[j]=y[N];y.pop()}(N,S),1===N.length&&(E[I]=N[0]),E.removeListener&&this.emit("removeListener",I,z||j)}return this},d.prototype.removeAllListeners=function(I){var j,N,E;if(!(N=this._events))return this;if(!N.removeListener)return 0===arguments.length?(this._events=m(null),this._eventsCount=0):N[I]&&(0==--this._eventsCount?this._events=m(null):delete N[I]),this;if(0===arguments.length){var O,S=b(N);for(E=0;E<S.length;++E)"removeListener"!==(O=S[E])&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=m(null),this._eventsCount=0,this}if("function"==typeof(j=N[I]))this.removeListener(I,j);else if(j)for(E=j.length-1;E>=0;E--)this.removeListener(I,j[E]);return this},d.prototype.listeners=function(I){return T(this,I,!0)},d.prototype.rawListeners=function(I){return T(this,I,!1)},d.listenerCount=function(y,I){return"function"==typeof y.listenerCount?y.listenerCount(I):x.call(y,I)},d.prototype.listenerCount=x,d.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],23:[function(A,W,V){V.read=function(m,b,g,d,s){var t,r,e=8*s-d-1,n=(1<<e)-1,o=n>>1,a=-7,p=g?s-1:0,v=g?-1:1,h=m[b+p];for(p+=v,t=h&(1<<-a)-1,h>>=-a,a+=e;a>0;t=256*t+m[b+p],p+=v,a-=8);for(r=t&(1<<-a)-1,t>>=-a,a+=d;a>0;r=256*r+m[b+p],p+=v,a-=8);if(0===t)t=1-o;else{if(t===n)return r?NaN:1/0*(h?-1:1);r+=Math.pow(2,d),t-=o}return(h?-1:1)*r*Math.pow(2,t-d)},V.write=function(m,b,g,d,s,t){var r,e,n,o=8*t-s-1,a=(1<<o)-1,p=a>>1,v=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,h=d?0:t-1,i=d?1:-1,w=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(e=isNaN(b)?1:0,r=a):(r=Math.floor(Math.log(b)/Math.LN2),b*(n=Math.pow(2,-r))<1&&(r--,n*=2),(b+=r+p>=1?v/n:v*Math.pow(2,1-p))*n>=2&&(r++,n/=2),r+p>=a?(e=0,r=a):r+p>=1?(e=(b*n-1)*Math.pow(2,s),r+=p):(e=b*Math.pow(2,p-1)*Math.pow(2,s),r=0));s>=8;m[g+h]=255&e,h+=i,e/=256,s-=8);for(r=r<<s|e,o+=s;o>0;m[g+h]=255&r,h+=i,r/=256,o-=8);m[g+h-i]|=128*w}},{}],24:[function(A,W,V){W.exports="function"==typeof Object.create?function(b,g){g&&(b.super_=g,b.prototype=Object.create(g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,g){if(g){b.super_=g;var d=function(){};d.prototype=g.prototype,b.prototype=new d,b.prototype.constructor=b}}},{}],25:[function(A,W,V){"use strict";Object.defineProperty(V,"__esModule",{value:!0});var m=function(){function b(g,d){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=g,this.value=d}return b.prototype.rotateLeft=function(){var g=this.parent,d=this.brother,s=this.leftChild,t=this.rightChild;if(!t)throw new Error("unknown error");var r=t.leftChild,e=t.rightChild;return g&&(g.leftChild===this?g.leftChild=t:g.rightChild===this&&(g.rightChild=t)),t.parent=g,t.brother=d,t.leftChild=this,t.rightChild=e,d&&(d.brother=t),this.parent=t,this.brother=e,this.leftChild=s,this.rightChild=r,e&&(e.parent=t,e.brother=this),s&&(s.parent=this,s.brother=r),r&&(r.parent=this,r.brother=s),t},b.prototype.rotateRight=function(){var g=this.parent,d=this.brother,s=this.leftChild;if(!s)throw new Error("unknown error");var t=this.rightChild,r=s.leftChild,e=s.rightChild;return g&&(g.leftChild===this?g.leftChild=s:g.rightChild===this&&(g.rightChild=s)),s.parent=g,s.brother=d,s.leftChild=r,s.rightChild=this,d&&(d.brother=s),r&&(r.parent=s,r.brother=this),this.parent=s,this.brother=r,this.leftChild=e,this.rightChild=t,e&&(e.parent=this,e.brother=t),t&&(t.parent=this,t.brother=e),s},b.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},b.TreeNodeColorType={red:!0,black:!1},b}();Object.freeze(m),V.default=m},{}],26:[function(A,W,V){"use strict";var m=this&&this.__generator||function(g,d){var t,r,e,n,s={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(p){return function(v){return function a(p){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(e=2&p[0]?r.return:p[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,p[1])).done)return e;switch(r=0,e&&(p=[2&p[0],e.value]),p[0]){case 0:case 1:e=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,r=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(!(e=(e=s.trys).length>0&&e[e.length-1])&&(6===p[0]||2===p[0])){s=0;continue}if(3===p[0]&&(!e||p[1]>e[0]&&p[1]<e[3])){s.label=p[1];break}if(6===p[0]&&s.label<e[1]){s.label=e[1],e=p;break}if(e&&s.label<e[2]){s.label=e[2],s.ops.push(p);break}e[2]&&s.ops.pop(),s.trys.pop();continue}p=d.call(g,s)}catch(v){p=[6,v],r=0}finally{t=e=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,v])}}};function b(g){var d=this;void 0===g&&(g=[]);var s=[],t=0,r=0,e=0,n=0,o=0,a=0;this.size=function(){return a},this.empty=function(){return 0===a},this.clear=function(){t=e=r=n=o=a=0,v.call(this,b.bucketSize),a=0},this.front=function(){return s[t][r]},this.back=function(){return s[e][n]},this.forEach=function(h){if(!this.empty()){var i=0;if(t===e){for(var w=r;w<=n;++w)h(s[t][w],i++);return}for(w=r;w<b.bucketSize;++w)h(s[t][w],i++);for(w=t+1;w<e;++w)for(var T=0;T<b.bucketSize;++T)h(s[w][T],i++);for(w=0;w<=n;++w)h(s[e][w],i++)}};var p=function(h){var i=t*b.bucketSize+r,w=i+h;if(w<i||w>e*b.bucketSize+n)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(w/b.bucketSize),curNodePointerIndex:w%b.bucketSize}};this.getElementByPos=function(h){var i=p(h);return s[i.curNodeBucketIndex][i.curNodePointerIndex]},this.eraseElementByPos=function(h){var i=this;if(h<0||h>a)throw new Error("pos should more than 0 and less than queue's size");if(0===h)this.popFront();else if(h===this.size())this.popBack();else{for(var w=[],T=h+1;T<a;++T)w.push(this.getElementByPos(T));this.cut(h),this.popBack(),w.forEach(function(x){return i.pushBack(x)})}},this.eraseElementByValue=function(h){if(!this.empty()){var i=[];this.forEach(function(x){x!==h&&i.push(x)});for(var w=i.length,T=0;T<w;++T)this.setElementByPos(T,i[T]);this.cut(w-1)}};var v=function(h){for(var i=[],T=Math.max(Math.ceil(h*b.sigma/b.bucketSize),2),x=0;x<T;++x)i.push(new Array(b.bucketSize));var P=Math.ceil(h/b.bucketSize),L=Math.floor(T/2)-Math.floor(P/2),M=L,q=0;if(this.size())for(x=0;x<P;++x){for(var f=0;f<b.bucketSize;++f)if(i[L+x][f]=this.front(),this.popFront(),this.empty()){M=L+x,q=f;break}if(this.empty())break}s=i,t=L,r=0,e=M,n=q,o=T,a=h};this.pushBack=function(h){this.empty()||(e===o-1&&n===b.bucketSize-1&&v.call(this,this.size()),n<b.bucketSize-1?++n:e<o-1&&(++e,n=0)),++a,s[e][n]=h},this.popBack=function(){this.empty()||(1!==this.size()&&(n>0?--n:t<e&&(--e,n=b.bucketSize-1)),a>0&&--a)},this.setElementByPos=function(h,i){var w=p(h);s[w.curNodeBucketIndex][w.curNodePointerIndex]=i},this.insert=function(h,i,w){var T=this;if(void 0===w&&(w=1),0===h)for(;w--;)this.pushFront(i);else if(h===this.size())for(;w--;)this.pushBack(i);else{for(var x=[],P=h;P<a;++P)x.push(this.getElementByPos(P));for(this.cut(h-1),P=0;P<w;++P)this.pushBack(i);x.forEach(function(L){return T.pushBack(L)})}},this.find=function(h){if(t===e){for(var i=r;i<=n;++i)if(s[t][i]===h)return!0;return!1}for(i=r;i<b.bucketSize;++i)if(s[t][i]===h)return!0;for(i=t+1;i<e;++i)for(var w=0;w<b.bucketSize;++w)if(s[i][w]===h)return!0;for(i=0;i<=n;++i)if(s[e][i]===h)return!0;return!1},this.reverse=function(){for(var h=0,i=a-1;h<i;){var w=this.getElementByPos(h);this.setElementByPos(h,this.getElementByPos(i)),this.setElementByPos(i,w),++h,--i}},this.unique=function(){if(!this.empty()){var h=[],i=this.front();this.forEach(function(T,x){(0===x||T!==i)&&(h.push(T),i=T)});for(var w=0;w<a;++w)this.setElementByPos(w,h[w]);this.cut(h.length-1)}},this.sort=function(h){var i=[];this.forEach(function(T){i.push(T)}),i.sort(h);for(var w=0;w<a;++w)this.setElementByPos(w,i[w])},this.pushFront=function(h){this.empty()||(0===t&&0===r&&v.call(this,this.size()),r>0?--r:t>0&&(--t,r=b.bucketSize-1)),++a,s[t][r]=h},this.popFront=function(){this.empty()||(1!==this.size()&&(r<b.bucketSize-1?++r:t<e&&(++t,r=0)),a>0&&--a)},this.shrinkToFit=function(){var h=this,i=[];this.forEach(function(P){i.push(P)}),s=[];for(var T=Math.ceil(i.length/b.bucketSize),x=0;x<T;++x)s.push(new Array(b.bucketSize));this.clear(),i.forEach(function(P){return h.pushBack(P)})},this.cut=function(h){if(h<0)this.clear();else{var i=p(h);e=i.curNodeBucketIndex,n=i.curNodePointerIndex,a=h+1}},this[Symbol.iterator]=function(){return function(){var h,i;return m(this,function(w){switch(w.label){case 0:if(0===a)return[2];if(t!==e)return[3,5];i=r,w.label=1;case 1:return i<=n?[4,s[t][i]]:[3,4];case 2:w.sent(),w.label=3;case 3:return++i,[3,1];case 4:return[2];case 5:i=r,w.label=6;case 6:return i<b.bucketSize?[4,s[t][i]]:[3,9];case 7:w.sent(),w.label=8;case 8:return++i,[3,6];case 9:i=t+1,w.label=10;case 10:if(!(i<e))return[3,15];h=0,w.label=11;case 11:return h<b.bucketSize?[4,s[i][h]]:[3,14];case 12:w.sent(),w.label=13;case 13:return++h,[3,11];case 14:return++i,[3,10];case 15:i=0,w.label=16;case 16:return i<=n?[4,s[e][i]]:[3,19];case 17:w.sent(),w.label=18;case 18:return++i,[3,16];case 19:return[2]}})}()},function(){var h=b.bucketSize;g.size?h=g.size():g.length&&(h=g.length),o=Math.ceil(h*b.sigma/b.bucketSize),o=Math.max(o,3);for(var w=0;w<o;++w)s.push(new Array(b.bucketSize));var T=Math.ceil(h/b.bucketSize);t=Math.floor(o/2)-Math.floor(T/2),e=t,g.forEach(function(x){return d.pushBack(x)})}(),Object.freeze(this)}Object.defineProperty(V,"__esModule",{value:!0}),b.sigma=3,b.bucketSize=5e3,Object.freeze(b),V.default=b},{}],27:[function(A,W,V){"use strict";var m=this&&this.__generator||function(t,r){var n,o,a,p,e={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function v(i){return function(w){return function h(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(!(a=(a=e.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){e=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){e.label=i[1];break}if(6===i[0]&&e.label<a[1]){e.label=a[1],a=i;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(i);break}a[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(w){i=[6,w],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,w])}}},b=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(V,"__esModule",{value:!0});var g=A("../LinkList/LinkList"),d=A("../Map/Map");function s(t,r,e){var n=this;if(void 0===t&&(t=[]),void 0===r&&(r=s.initSize),e=e||function(h){var i,w,T=0,x="";if("number"==typeof h)T=((T=Math.floor(h))<<5)-T,T&=T;else{x="string"!=typeof h?JSON.stringify(h):h;try{for(var P=b(x),L=P.next();!L.done;L=P.next())T=(T<<5)-T+L.value.charCodeAt(0),T&=T}catch(f){i={error:f}}finally{try{L&&!L.done&&(w=P.return)&&w.call(P)}finally{if(i)throw i.error}}}return T^T>>>16},r&r-1)throw new Error("initBucketNum must be 2 to the power of n");var o=0,a=[],p=Math.max(s.initSize,Math.min(s.maxSize,r));this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,p=r,a=[]},this.forEach=function(h){var i=0;a.forEach(function(w){w.forEach(function(T){h(T,i++)})})};var v=function(h){if(!(h>=s.maxSize)){p=2*h;var i=[];a.forEach(function(w,T){if(!w.empty()){if(w instanceof g.default&&1===w.size()){var x=w.front(),P=x.key,L=x.value;i[e(P)&p-1]=new g.default([{key:P,value:L}])}else if(w instanceof d.default){var M=new g.default,q=new g.default;w.forEach(function(y){e(y.key)&h?q.pushBack(y):M.pushBack(y)}),M.size()>s.untreeifyThreshold?i[T]=new d.default(M):M.size()&&(i[T]=M),q.size()>s.untreeifyThreshold?i[T+h]=new d.default(q):q.size()&&(i[T+h]=q)}else{var f=new g.default,_=new g.default;w.forEach(function(y){e(y.key)&h?_.pushBack(y):f.pushBack(y)}),f.size()&&(i[T]=f),_.size()&&(i[T+h]=_)}a[T].clear()}}),a=i}};this.setElement=function(h,i){var w,T;if(null==h)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=i){var x=e(h)&p-1;if(a[x]){var P=a[x].size();if(a[x]instanceof g.default){try{for(var L=b(a[x]),M=L.next();!M.done;M=L.next()){var q=M.value;if(q.key===h)return void(q.value=i)}}catch(_){w={error:_}}finally{try{M&&!M.done&&(T=L.return)&&T.call(L)}finally{if(w)throw w.error}}a[x].pushBack({key:h,value:i}),a[x].size()>=s.treeifyThreshold&&(a[x]=new d.default(a[x]))}else a[x].setElement(h,i);var f=a[x].size();o+=f-P}else++o,a[x]=new g.default([{key:h,value:i}]);o>p*s.sigma&&v.call(this,p)}else this.eraseElementByKey(h)},this.getElementByKey=function(h){var i,w,T=e(h)&p-1;if(a[T]){if(a[T]instanceof d.default)return a[T].getElementByKey(h);try{for(var x=b(a[T]),P=x.next();!P.done;P=x.next()){var L=P.value;if(L.key===h)return L.value}}catch(M){i={error:M}}finally{try{P&&!P.done&&(w=x.return)&&w.call(x)}finally{if(i)throw i.error}}}},this.eraseElementByKey=function(h){var i,w,T=e(h)&p-1;if(a[T]){var x=a[T].size();if(a[T]instanceof d.default)a[T].eraseElementByKey(h),a[T].size()<=s.untreeifyThreshold&&(a[T]=new g.default(a[T]));else{var P=-1;try{for(var L=b(a[T]),M=L.next();!M.done;M=L.next())if(++P,M.value.key===h){a[T].eraseElementByPos(P);break}}catch(_){i={error:_}}finally{try{M&&!M.done&&(w=L.return)&&w.call(L)}finally{if(i)throw i.error}}}var f=a[T].size();o+=f-x}},this.find=function(h){var i,w,T=e(h)&p-1;if(!a[T])return!1;if(a[T]instanceof d.default)return a[T].find(h);try{for(var x=b(a[T]),P=x.next();!P.done;P=x.next())if(P.value.key===h)return!0}catch(M){i={error:M}}finally{try{P&&!P.done&&(w=x.return)&&w.call(x)}finally{if(i)throw i.error}}return!1},this[Symbol.iterator]=function(){return function(){var h,i,w,x,P,L;return m(this,function(M){switch(M.label){case 0:h=0,M.label=1;case 1:if(!(h<p))return[3,10];for(;h<p&&!a[h];)++h;if(h>=p)return[3,10];M.label=2;case 2:M.trys.push([2,7,8,9]),P=void 0,i=b(a[h]),w=i.next(),M.label=3;case 3:return w.done?[3,6]:[4,w.value];case 4:M.sent(),M.label=5;case 5:return w=i.next(),[3,3];case 6:return[3,9];case 7:return x=M.sent(),P={error:x},[3,9];case 8:try{w&&!w.done&&(L=i.return)&&L.call(i)}finally{if(P)throw P.error}return[7];case 9:return++h,[3,1];case 10:return[2]}})}()},t.forEach(function(h){return n.setElement(h.key,h.value)}),Object.freeze(this)}s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64,Object.freeze(s),V.default=s},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(A,W,V){"use strict";var m=this&&this.__generator||function(t,r){var n,o,a,p,e={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function v(i){return function(w){return function h(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(!(a=(a=e.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){e=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){e.label=i[1];break}if(6===i[0]&&e.label<a[1]){e.label=a[1],a=i;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(i);break}a[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(w){i=[6,w],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,w])}}},b=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(V,"__esModule",{value:!0});var g=A("../Set/Set"),d=A("../LinkList/LinkList");function s(t,r,e){var n=this;if(void 0===t&&(t=[]),void 0===r&&(r=s.initSize),e=e||function(h){var i=0,w="";if("number"==typeof h)i=((i=Math.floor(h))<<5)-i,i&=i;else{w="string"!=typeof h?JSON.stringify(h):h;for(var T=0;T<w.length;T++)i=(i<<5)-i+w.charCodeAt(T),i&=i}return i^i>>>16},r&r-1)throw new Error("initBucketNum must be 2 to the power of n");var o=0,a=[],p=Math.max(s.initSize,Math.min(s.maxSize,r));this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,p=r,a=[]},this.forEach=function(h){var i=0;a.forEach(function(w){w.forEach(function(T){h(T,i++)})})};var v=function(h){if(!(h>=s.maxSize)){p=2*h;var i=[];a.forEach(function(w,T){if(!w.empty()){if(w instanceof d.default&&1===w.size()){var x=w.front();if(void 0===x)throw new Error("unknown error");i[e(x)&p-1]=new d.default([x])}else if(w instanceof g.default){var P=new d.default,L=new d.default;w.forEach(function(f){e(f)&h?L.pushBack(f):P.pushBack(f)}),P.size()>s.untreeifyThreshold?i[T]=new g.default(P):P.size()&&(i[T]=P),L.size()>s.untreeifyThreshold?i[T+h]=new g.default(L):L.size()&&(i[T+h]=L)}else{var M=new d.default,q=new d.default;w.forEach(function(f){e(f)&h?q.pushBack(f):M.pushBack(f)}),M.size()&&(i[T]=M),q.size()&&(i[T+h]=q)}a[T].clear()}}),a=i}};this.insert=function(h){if(null==h)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var i=e(h)&p-1;if(a[i]){var w=a[i].size();if(a[i]instanceof d.default){if(a[i].find(h))return;a[i].pushBack(h),a[i].size()>=s.treeifyThreshold&&(a[i]=new g.default(a[i]))}else a[i].insert(h);var T=a[i].size();o+=T-w}else a[i]=new d.default([h]),++o;o>p*s.sigma&&v.call(this,p)},this.eraseElementByValue=function(h){var i=e(h)&p-1;if(a[i]){var w=a[i].size();a[i].eraseElementByValue(h),a[i]instanceof g.default&&a[i].size()<=s.untreeifyThreshold&&(a[i]=new d.default(a[i]));var T=a[i].size();o+=T-w}},this.find=function(h){var i=e(h)&p-1;return!!a[i]&&a[i].find(h)},this[Symbol.iterator]=function(){return function(){var h,i,w,x,P,L;return m(this,function(M){switch(M.label){case 0:h=0,M.label=1;case 1:if(!(h<p))return[3,10];for(;h<p&&!a[h];)++h;if(h>=p)return[3,10];M.label=2;case 2:M.trys.push([2,7,8,9]),P=void 0,i=b(a[h]),w=i.next(),M.label=3;case 3:return w.done?[3,6]:[4,w.value];case 4:M.sent(),M.label=5;case 5:return w=i.next(),[3,3];case 6:return[3,9];case 7:return x=M.sent(),P={error:x},[3,9];case 8:try{w&&!w.done&&(L=i.return)&&L.call(i)}finally{if(P)throw P.error}return[7];case 9:return++h,[3,1];case 10:return[2]}})}()},t.forEach(function(h){return n.insert(h)}),Object.freeze(this)}s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64,Object.freeze(s),V.default=s},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(A,W,V){"use strict";var m=this&&this.__generator||function(d,s){var r,e,n,o,t={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(v){return function(h){return function p(v){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,e&&(n=2&v[0]?e.return:v[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,v[1])).done)return n;switch(e=0,n&&(v=[2&v[0],n.value]),v[0]){case 0:case 1:n=v;break;case 4:return t.label++,{value:v[1],done:!1};case 5:t.label++,e=v[1],v=[0];continue;case 7:v=t.ops.pop(),t.trys.pop();continue;default:if(!(n=(n=t.trys).length>0&&n[n.length-1])&&(6===v[0]||2===v[0])){t=0;continue}if(3===v[0]&&(!n||v[1]>n[0]&&v[1]<n[3])){t.label=v[1];break}if(6===v[0]&&t.label<n[1]){t.label=n[1],n=v;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(v);break}n[2]&&t.ops.pop(),t.trys.pop();continue}v=s.call(d,t)}catch(h){v=[6,h],e=0}finally{r=n=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,h])}}};Object.defineProperty(V,"__esModule",{value:!0});var b=function d(s){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=s};function g(d){var s=this;void 0===d&&(d=[]);var t=0,r=void 0,e=void 0;this.size=function(){return t},this.empty=function(){return 0===t},this.clear=function(){r=e=void 0,t=0},this.front=function(){return r?.value},this.back=function(){return e?.value},this.forEach=function(n){for(var o=r,a=0;o;){if(void 0===o.value)throw new Error("unknown error");n(o.value,a++),o=o.next}},this.getElementByPos=function(n){if(n<0||n>=t)throw new Error("pos must more then 0 and less then the list length");for(var o=r;n--&&o;)o=o.next;if(!o||void 0===o.value)throw new Error("unknown error");return o.value},this.eraseElementByPos=function(n){if(n<0||n>=t)throw new Error("erase pos must more then 0 and less then the list length");if(0===n)this.popFront();else if(n===t-1)this.popBack();else{for(var o=r;n--;){if(!o?.next)throw new Error("unknown error");o=o.next}if(!o||!o.pre||!o.next)throw new Error("unknown error");var a=o.pre,p=o.next;p.pre=a,a.next=p,t>0&&--t}},this.eraseElementByValue=function(n){for(;r&&r.value===n;)this.popFront();for(;e&&e.value===n;)this.popBack();if(r)for(var o=r;o;){if(o.value===n){var a=o.pre,p=o.next;p&&(p.pre=a),a&&(a.next=p),t>0&&--t}o=o.next}},this.pushBack=function(n){if(null==n)throw new Error("you can't push null or undefined here");++t;var o=new b(n);e?(e.next=o,o.pre=e,e=o):r=e=o},this.popBack=function(){e&&(t>0&&--t,e&&(r===e?r=e=void 0:(e=e.pre)&&(e.next=void 0)))},this.setElementByPos=function(n,o){if(null==o)throw new Error("you can't set null or undefined here");if(n<0||n>=t)throw new Error("pos must more then 0 and less then the list length");for(var a=r;n--;){if(!a)throw new Error("unknown error");a=a.next}a&&(a.value=o)},this.insert=function(n,o,a){if(void 0===a&&(a=1),null==o)throw new Error("you can't insert null or undefined here");if(n<0||n>t)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(a<0)throw new Error("insert size must more than 0");if(0===n)for(;a--;)this.pushFront(o);else if(n===t)for(;a--;)this.pushBack(o);else{for(var p=r,v=1;v<n;++v){if(!p?.next)throw new Error("unknown error");p=p?.next}if(!p)throw new Error("unknown error");var h=p.next;for(t+=a;a--;)p.next=new b(o),p.next.pre=p,p=p.next;p.next=h,h&&(h.pre=p)}},this.find=function(n){for(var o=r;o;){if(o.value===n)return!0;o=o.next}return!1},this.reverse=function(){for(var n=r,o=e,a=0;n&&o&&2*a<t;){var p=n.value;n.value=o.value,o.value=p,n=n.next,o=o.pre,++a}},this.unique=function(){for(var n=r;n;){for(var o=n;o&&o.next&&o.value===o.next.value;)o=o.next,t>0&&--t;n.next=o.next,n.next&&(n.next.pre=n),n=n.next}},this.sort=function(n){var o=[];this.forEach(function(p){o.push(p)}),o.sort(n);var a=r;o.forEach(function(p){a&&(a.value=p,a=a.next)})},this.pushFront=function(n){if(null==n)throw new Error("you can't push null or undefined here");++t;var o=new b(n);r?(o.next=r,r.pre=o,r=o):r=e=o},this.popFront=function(){r&&(t>0&&--t,r&&(r===e?r=e=void 0:(r=r.next)&&(r.pre=void 0)))},this.merge=function(n){var o=this,a=r;n.forEach(function(p){for(;a&&void 0!==a.value&&a.value<=p;)a=a.next;if(void 0===a)o.pushBack(p),a=e;else if(a===r)o.pushFront(p),a=r;else{++t;var v=a.pre;v&&(v.next=new b(p),v.next.pre=v,v.next.next=a,a&&(a.pre=v.next))}})},this[Symbol.iterator]=function(){return function(){var n;return m(this,function(o){switch(o.label){case 0:n=r,o.label=1;case 1:if(void 0===n)return[3,3];if(!n.value)throw new Error("unknown error");return[4,n.value];case 2:return o.sent(),n=n.next,[3,1];case 3:return[2]}})}()},d.forEach(function(n){return s.pushBack(n)}),Object.freeze(this)}Object.freeze(g),V.default=g},{}],30:[function(A,W,V){"use strict";var m=this&&this.__generator||function(s,t){var e,n,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function p(h){return function(i){return function v(h){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===h[0]||2===h[0])){r=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(6===h[0]&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(s,r)}catch(i){h=[6,i],n=0}finally{e=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}},b=this&&this.__values||function(s){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&s[t],e=0;if(r)return r.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&e>=s.length&&(s=void 0),{value:s&&s[e++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(V,"__esModule",{value:!0});var g=A("../Base/TreeNode");function d(s,t){var r=this;void 0===s&&(s=[]),t=t||function(f,_){return f<_?-1:f>_?1:0};var e=0,n=new g.default;n.color=g.default.TreeNodeColorType.black,this.size=function(){return e},this.empty=function(){return 0===e},this.clear=function(){e=0,n.key=n.value=void 0,n.leftChild=n.rightChild=n.brother=void 0};var o=function(f){if(!f||void 0===f.key)throw new Error("unknown error");return f.leftChild?o(f.leftChild):f},a=function(f){if(!f||void 0===f.key)throw new Error("unknown error");return f.rightChild?a(f.rightChild):f};this.front=function(){if(!this.empty()){var f=o(n);if(void 0===f.key||void 0===f.value)throw new Error("unknown error");return{key:f.key,value:f.value}}},this.back=function(){if(!this.empty()){var f=a(n);if(void 0===f.key||void 0===f.value)throw new Error("unknown error");return{key:f.key,value:f.value}}},this.forEach=function(f){var _,y,I=0;try{for(var j=b(this),N=j.next();!N.done;N=j.next())f(N.value,I++)}catch(S){_={error:S}}finally{try{N&&!N.done&&(y=j.return)&&y.call(j)}finally{if(_)throw _.error}}},this.getElementByPos=function(f){var _,y;if(f<0||f>=this.size())throw new Error("pos must more than 0 and less than set's size");var I=0;try{for(var j=b(this),N=j.next();!N.done;N=j.next()){if(I===f)return N.value;++I}}catch(S){_={error:S}}finally{try{N&&!N.done&&(y=j.return)&&y.call(j)}finally{if(_)throw _.error}}throw new Error("unknown Error")};var p=function(f,_){if(f&&void 0!==f.key&&void 0!==f.value){var y=t(f.key,_);return 0===y?{key:f.key,value:f.value}:y<0?p(f.rightChild,_):p(f.leftChild,_)||{key:f.key,value:f.value}}};this.lowerBound=function(f){return p(n,f)};var v=function(f,_){if(f&&void 0!==f.key&&void 0!==f.value)return t(f.key,_)<=0?v(f.rightChild,_):v(f.leftChild,_)||{key:f.key,value:f.value}};this.upperBound=function(f){return v(n,f)};var h=function(f,_){if(f&&void 0!==f.key&&void 0!==f.value){var y=t(f.key,_);return 0===y?{key:f.key,value:f.value}:y>0?h(f.leftChild,_):h(f.rightChild,_)||{key:f.key,value:f.value}}};this.reverseLowerBound=function(f){return h(n,f)};var i=function(f,_){if(f&&void 0!==f.key&&void 0!==f.value)return t(f.key,_)>=0?i(f.leftChild,_):i(f.rightChild,_)||{key:f.key,value:f.value}};this.reverseUpperBound=function(f){return i(n,f)};var w=function(f){var _=f.parent;if(!_){if(f===n)return;throw new Error("unknown error")}if(f.color!==g.default.TreeNodeColorType.red){var y=f.brother;if(!y)throw new Error("unknown error");if(f===_.leftChild)if(y.color===g.default.TreeNodeColorType.red){y.color=g.default.TreeNodeColorType.black,_.color=g.default.TreeNodeColorType.red;var I=_.rotateLeft();n===_&&(n=I),w(f)}else y.color===g.default.TreeNodeColorType.black&&(y.rightChild&&y.rightChild.color===g.default.TreeNodeColorType.red?(y.color=_.color,_.color=g.default.TreeNodeColorType.black,y.rightChild&&(y.rightChild.color=g.default.TreeNodeColorType.black),I=_.rotateLeft(),n===_&&(n=I),f.color=g.default.TreeNodeColorType.black):y.rightChild&&y.rightChild.color!==g.default.TreeNodeColorType.black||!y.leftChild||y.leftChild.color!==g.default.TreeNodeColorType.red?(!y.leftChild||y.leftChild.color===g.default.TreeNodeColorType.black)&&(!y.rightChild||y.rightChild.color===g.default.TreeNodeColorType.black)&&(y.color=g.default.TreeNodeColorType.red,w(_)):(y.color=g.default.TreeNodeColorType.red,y.leftChild&&(y.leftChild.color=g.default.TreeNodeColorType.black),I=y.rotateRight(),n===y&&(n=I),w(f)));else f===_.rightChild&&(y.color===g.default.TreeNodeColorType.red?(y.color=g.default.TreeNodeColorType.black,_.color=g.default.TreeNodeColorType.red,I=_.rotateRight(),n===_&&(n=I),w(f)):y.color===g.default.TreeNodeColorType.black&&(y.leftChild&&y.leftChild.color===g.default.TreeNodeColorType.red?(y.color=_.color,_.color=g.default.TreeNodeColorType.black,y.leftChild&&(y.leftChild.color=g.default.TreeNodeColorType.black),I=_.rotateRight(),n===_&&(n=I),f.color=g.default.TreeNodeColorType.black):y.leftChild&&y.leftChild.color!==g.default.TreeNodeColorType.black||!y.rightChild||y.rightChild.color!==g.default.TreeNodeColorType.red?(!y.leftChild||y.leftChild.color===g.default.TreeNodeColorType.black)&&(!y.rightChild||y.rightChild.color===g.default.TreeNodeColorType.black)&&(y.color=g.default.TreeNodeColorType.red,w(_)):(y.color=g.default.TreeNodeColorType.red,y.rightChild&&(y.rightChild.color=g.default.TreeNodeColorType.black),I=y.rotateLeft(),n===y&&(n=I),w(f))))}else f.color=g.default.TreeNodeColorType.black},T=function(f){for(var _=f;_.leftChild||_.rightChild;){if(_.rightChild){_=o(_.rightChild);var y=f.key;f.key=_.key,_.key=y;var I=f.value;f.value=_.value,_.value=I,f=_}_.leftChild&&(_=a(_.leftChild),y=f.key,f.key=_.key,_.key=y,I=f.value,f.value=_.value,_.value=I,f=_)}w(_),_&&_.remove(),--e,n.color=g.default.TreeNodeColorType.black},x=function(f,_){return!(!f||void 0===f.key)&&(!(!x(f.leftChild,_)&&!_(f))||x(f.rightChild,_))};this.eraseElementByPos=function(f){if(f<0||f>=e)throw new Error("pos must more than 0 and less than set's size");var _=0;x(n,function(y){return f===_?(T(y),!0):(++_,!1)})},this.eraseElementByKey=function(f){if(!this.empty()){var _=M(n,f);void 0===_||void 0===_.key||0!==t(_.key,f)||T(_)}};var P=function(f,_){if(!f||void 0===f.key)throw new Error("unknown error");var y=t(_,f.key);return y<0?f.leftChild?P(f.leftChild,_):(f.leftChild=new g.default,f.leftChild.parent=f,f.leftChild.brother=f.rightChild,f.rightChild&&(f.rightChild.brother=f.leftChild),f.leftChild):y>0?f.rightChild?P(f.rightChild,_):(f.rightChild=new g.default,f.rightChild.parent=f,f.rightChild.brother=f.leftChild,f.leftChild&&(f.leftChild.brother=f.rightChild),f.rightChild):f},L=function(f){var _=f.parent;if(!_){if(f===n)return;throw new Error("unknown error")}if(_.color!==g.default.TreeNodeColorType.black&&_.color===g.default.TreeNodeColorType.red){var y=_.brother,I=_.parent;if(!I)throw new Error("unknown error");if(y&&y.color===g.default.TreeNodeColorType.red)y.color=_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red,L(I);else if(!y||y.color===g.default.TreeNodeColorType.black)if(_===I.leftChild)if(f===_.leftChild){_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red;var j=I.rotateRight();I===n&&(n=j)}else f===_.rightChild&&(j=_.rotateLeft(),I===n&&(n=j),L(_));else _===I.rightChild&&(f===_.leftChild?(j=_.rotateRight(),I===n&&(n=j),L(_)):f===_.rightChild&&(_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red,j=I.rotateLeft(),I===n&&(n=j)))}};this.setElement=function(f,_){if(null==f)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=_){if(this.empty())return++e,n.key=f,n.value=_,void(n.color=g.default.TreeNodeColorType.black);var y=P(n,f);void 0===y.key||0!==t(y.key,f)?(++e,y.key=f,y.value=_,L(y),n.color=g.default.TreeNodeColorType.black):y.value=_}else this.eraseElementByKey(f)};var M=function(f,_){if(f&&void 0!==f.key){var y=t(_,f.key);return y<0?M(f.leftChild,_):y>0?M(f.rightChild,_):f}};this.find=function(f){return!!M(n,f)},this.getElementByKey=function(f){var _=M(n,f);if(void 0===_?.key||void 0===_?.value)throw new Error("unknown error");return _.value},this.union=function(f){var _=this;f.forEach(function(y){return _.setElement(y.key,y.value)})},this.getHeight=function(){if(this.empty())return 0;var f=function(_){return _?Math.max(f(_.leftChild),f(_.rightChild))+1:1};return f(n)};var q=function(f){return m(this,function(_){switch(_.label){case 0:return f&&void 0!==f.key&&void 0!==f.value?[5,b(q(f.leftChild))]:[2];case 1:return _.sent(),[4,{key:f.key,value:f.value}];case 2:return _.sent(),[5,b(q(f.rightChild))];case 3:return _.sent(),[2]}})};this[Symbol.iterator]=function(){return q(n)},s.forEach(function(f){return r.setElement(f.key,f.value)}),Object.freeze(this)}Object.freeze(d),V.default=d},{"../Base/TreeNode":25}],31:[function(A,W,V){"use strict";function m(b,g){void 0===b&&(b=[]),g=g||function(e,n){return e>n?-1:e<n?1:0};var d=[];b.forEach(function(e){return d.push(e)});var s=d.length,t=function(e,n){if(e<0||e>=s)throw new Error("unknown error");if(n<0||n>=s)throw new Error("unknown error");var o=d[e];d[e]=d[n],d[n]=o},r=function(e){if(e<0||e>=s)throw new Error("unknown error");var n=2*e+1,o=2*e+2;n<s&&g(d[e],d[n])>0&&t(e,n),o<s&&g(d[e],d[o])>0&&t(e,o)};(function(){for(var e=Math.floor((s-1)/2);e>=0;--e)for(var n=e,o=2*n+1;o<s;){var p=o+1,v=o;if(p<s&&g(d[o],d[p])>0&&(v=p),g(d[n],d[v])<=0)break;t(n,v),o=2*(n=v)+1}})(),this.size=function(){return s},this.empty=function(){return 0===s},this.clear=function(){s=0,d.length=0},this.push=function(e){if(d.push(e),1!=++s)for(var n=s-1;n>0;){var o=Math.floor((n-1)/2);if(g(d[o],e)<=0)break;r(o),n=o}},this.pop=function(){if(!this.empty()){if(1===this.size())return void--s;var e=d[s-1];--s;for(var n=0;n<this.size();){var o=2*n+1,a=2*n+2;if(o>=this.size())break;var p=o;if(a<this.size()&&g(d[o],d[a])>0&&(p=a),g(d[p],e)>=0)break;d[n]=d[p],n=p}d[n]=e}},this.top=function(){return d[0]},Object.freeze(this)}Object.defineProperty(V,"__esModule",{value:!0}),Object.freeze(m),V.default=m},{}],32:[function(A,W,V){"use strict";Object.defineProperty(V,"__esModule",{value:!0});var m=A("../LinkList/LinkList");function b(g){void 0===g&&(g=[]);var d=new m.default(g);this.size=function(){return d.size()},this.empty=function(){return d.empty()},this.clear=function(){d.clear()},this.push=function(s){d.pushBack(s)},this.pop=function(){d.popFront()},this.front=function(){return d.front()},Object.freeze(this)}Object.freeze(b),V.default=b},{"../LinkList/LinkList":29}],33:[function(A,W,V){"use strict";var m=this&&this.__generator||function(s,t){var e,n,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function p(h){return function(i){return function v(h){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===h[0]||2===h[0])){r=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(6===h[0]&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(s,r)}catch(i){h=[6,i],n=0}finally{e=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}},b=this&&this.__values||function(s){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&s[t],e=0;if(r)return r.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&e>=s.length&&(s=void 0),{value:s&&s[e++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(V,"__esModule",{value:!0});var g=A("../Base/TreeNode");function d(s,t){var r=this;void 0===s&&(s=[]),t=t||function(f,_){return f<_?-1:f>_?1:0};var e=0,n=new g.default;n.color=g.default.TreeNodeColorType.black,this.size=function(){return e},this.empty=function(){return 0===e},this.clear=function(){e=0,n.key=void 0,n.leftChild=n.rightChild=n.brother=n.parent=void 0,n.color=g.default.TreeNodeColorType.black};var o=function(f){if(!f||void 0===f.key)throw new Error("unknown error");return f.leftChild?o(f.leftChild):f},a=function(f){if(!f||void 0===f.key)throw new Error("unknown error");return f.rightChild?a(f.rightChild):f};this.front=function(){if(!this.empty())return o(n).key},this.back=function(){if(!this.empty())return a(n).key},this.forEach=function(f){var _,y,I=0;try{for(var j=b(this),N=j.next();!N.done;N=j.next())f(N.value,I++)}catch(S){_={error:S}}finally{try{N&&!N.done&&(y=j.return)&&y.call(j)}finally{if(_)throw _.error}}},this.getElementByPos=function(f){var _,y;if(f<0||f>=this.size())throw new Error("pos must more than 0 and less than set's size");var I=0;try{for(var j=b(this),N=j.next();!N.done;N=j.next()){if(I===f)return N.value;++I}}catch(S){_={error:S}}finally{try{N&&!N.done&&(y=j.return)&&y.call(j)}finally{if(_)throw _.error}}throw new Error("unknown error")};var p=function(f){var _=f.parent;if(!_){if(f===n)return;throw new Error("unknown error")}if(f.color!==g.default.TreeNodeColorType.red){var y=f.brother;if(!y)throw new Error("unknown error");if(f===_.leftChild)if(y.color===g.default.TreeNodeColorType.red){y.color=g.default.TreeNodeColorType.black,_.color=g.default.TreeNodeColorType.red;var I=_.rotateLeft();n===_&&(n=I),p(f)}else y.color===g.default.TreeNodeColorType.black&&(y.rightChild&&y.rightChild.color===g.default.TreeNodeColorType.red?(y.color=_.color,_.color=g.default.TreeNodeColorType.black,y.rightChild&&(y.rightChild.color=g.default.TreeNodeColorType.black),I=_.rotateLeft(),n===_&&(n=I),f.color=g.default.TreeNodeColorType.black):y.rightChild&&y.rightChild.color!==g.default.TreeNodeColorType.black||!y.leftChild||y.leftChild.color!==g.default.TreeNodeColorType.red?(!y.leftChild||y.leftChild.color===g.default.TreeNodeColorType.black)&&(!y.rightChild||y.rightChild.color===g.default.TreeNodeColorType.black)&&(y.color=g.default.TreeNodeColorType.red,p(_)):(y.color=g.default.TreeNodeColorType.red,y.leftChild&&(y.leftChild.color=g.default.TreeNodeColorType.black),I=y.rotateRight(),n===y&&(n=I),p(f)));else f===_.rightChild&&(y.color===g.default.TreeNodeColorType.red?(y.color=g.default.TreeNodeColorType.black,_.color=g.default.TreeNodeColorType.red,I=_.rotateRight(),n===_&&(n=I),p(f)):y.color===g.default.TreeNodeColorType.black&&(y.leftChild&&y.leftChild.color===g.default.TreeNodeColorType.red?(y.color=_.color,_.color=g.default.TreeNodeColorType.black,y.leftChild&&(y.leftChild.color=g.default.TreeNodeColorType.black),I=_.rotateRight(),n===_&&(n=I),f.color=g.default.TreeNodeColorType.black):y.leftChild&&y.leftChild.color!==g.default.TreeNodeColorType.black||!y.rightChild||y.rightChild.color!==g.default.TreeNodeColorType.red?(!y.leftChild||y.leftChild.color===g.default.TreeNodeColorType.black)&&(!y.rightChild||y.rightChild.color===g.default.TreeNodeColorType.black)&&(y.color=g.default.TreeNodeColorType.red,p(_)):(y.color=g.default.TreeNodeColorType.red,y.rightChild&&(y.rightChild.color=g.default.TreeNodeColorType.black),I=y.rotateLeft(),n===y&&(n=I),p(f))))}else f.color=g.default.TreeNodeColorType.black},v=function(f){for(var _=f;_.leftChild||_.rightChild;){if(_.rightChild){_=o(_.rightChild);var y=f.key;f.key=_.key,_.key=y,f=_}_.leftChild&&(_=a(_.leftChild),y=f.key,f.key=_.key,_.key=y,f=_)}p(_),_&&_.remove(),--e,n.color=g.default.TreeNodeColorType.black},h=function(f,_){return!(!f||void 0===f.key)&&(!(!h(f.leftChild,_)&&!_(f))||h(f.rightChild,_))};this.eraseElementByPos=function(f){if(f<0||f>=e)throw new Error("pos must more than 0 and less than set's size");var _=0;h(n,function(y){return f===_?(v(y),!0):(++_,!1)})},this.eraseElementByValue=function(f){if(!this.empty()){var _=T(n,f);void 0===_||void 0===_.key||0!==t(_.key,f)||v(_)}};var i=function(f,_){if(!f||void 0===f.key)throw new Error("unknown error");var y=t(_,f.key);return y<0?f.leftChild?i(f.leftChild,_):(f.leftChild=new g.default,f.leftChild.parent=f,f.leftChild.brother=f.rightChild,f.rightChild&&(f.rightChild.brother=f.leftChild),f.leftChild):y>0?f.rightChild?i(f.rightChild,_):(f.rightChild=new g.default,f.rightChild.parent=f,f.rightChild.brother=f.leftChild,f.leftChild&&(f.leftChild.brother=f.rightChild),f.rightChild):f},w=function(f){var _=f.parent;if(!_){if(f===n)return;throw new Error("unknown error")}if(_.color!==g.default.TreeNodeColorType.black&&_.color===g.default.TreeNodeColorType.red){var y=_.brother,I=_.parent;if(!I)throw new Error("unknown error");if(y&&y.color===g.default.TreeNodeColorType.red)y.color=_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red,w(I);else if(!y||y.color===g.default.TreeNodeColorType.black)if(_===I.leftChild)if(f===_.leftChild){_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red;var j=I.rotateRight();I===n&&(n=j)}else f===_.rightChild&&(j=_.rotateLeft(),I===n&&(n=j),w(_));else _===I.rightChild&&(f===_.leftChild?(j=_.rotateRight(),I===n&&(n=j),w(_)):f===_.rightChild&&(_.color=g.default.TreeNodeColorType.black,I.color=g.default.TreeNodeColorType.red,j=I.rotateLeft(),I===n&&(n=j)))}};this.insert=function(f){if(null==f)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++e,n.key=f,void(n.color=g.default.TreeNodeColorType.black);var _=i(n,f);void 0!==_.key&&0===t(_.key,f)||(++e,_.key=f,w(_),n.color=g.default.TreeNodeColorType.black)};var T=function(f,_){if(f&&void 0!==f.key){var y=t(_,f.key);return y<0?T(f.leftChild,_):y>0?T(f.rightChild,_):f}};this.find=function(f){var _=T(n,f);return void 0!==_&&void 0!==_.key&&0===t(_.key,f)};var x=function(f,_){if(f&&void 0!==f.key){var y=t(f.key,_);if(0===y)return f.key;if(y<0)return x(f.rightChild,_);var I=x(f.leftChild,_);return void 0!==I?I:f.key}};this.lowerBound=function(f){return x(n,f)};var P=function(f,_){if(f&&void 0!==f.key){if(t(f.key,_)<=0)return P(f.rightChild,_);var I=P(f.leftChild,_);return void 0!==I?I:f.key}};this.upperBound=function(f){return P(n,f)};var L=function(f,_){if(f&&void 0!==f.key){var y=t(f.key,_);if(0===y)return f.key;if(y>0)return L(f.leftChild,_);var I=L(f.rightChild,_);return void 0!==I?I:f.key}};this.reverseLowerBound=function(f){return L(n,f)};var M=function(f,_){if(f&&void 0!==f.key){if(t(f.key,_)>=0)return M(f.leftChild,_);var I=M(f.rightChild,_);return void 0!==I?I:f.key}};this.reverseUpperBound=function(f){return M(n,f)},this.union=function(f){var _=this;f.forEach(function(y){return _.insert(y)})},this.getHeight=function(){if(this.empty())return 0;var f=function(_){return _?Math.max(f(_.leftChild),f(_.rightChild))+1:1};return f(n)};var q=function(f){return m(this,function(_){switch(_.label){case 0:return f&&void 0!==f.key?[5,b(q(f.leftChild))]:[2];case 1:return _.sent(),[4,f.key];case 2:return _.sent(),[5,b(q(f.rightChild))];case 3:return _.sent(),[2]}})};this[Symbol.iterator]=function(){return q(n)},s.forEach(function(f){return r.insert(f)}),Object.freeze(this)}Object.freeze(d),V.default=d},{"../Base/TreeNode":25}],34:[function(A,W,V){"use strict";function m(b){var g=this;void 0===b&&(b=[]);var d=0,s=[];this.size=function(){return d},this.empty=function(){return 0===d},this.clear=function(){d=0,s.length=0},this.push=function(t){s.push(t),++d},this.pop=function(){s.pop(),d>0&&--d},this.top=function(){return s[d-1]},b.forEach(function(t){return g.push(t)}),Object.freeze(this)}Object.defineProperty(V,"__esModule",{value:!0}),Object.freeze(m),V.default=m},{}],35:[function(A,W,V){"use strict";var m=this&&this.__generator||function(t,r){var n,o,a,p,e={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return p={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function v(i){return function(w){return function h(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,o=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(!(a=(a=e.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){e=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){e.label=i[1];break}if(6===i[0]&&e.label<a[1]){e.label=a[1],a=i;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(i);break}a[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(w){i=[6,w],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,w])}}},b=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var o,p,n=e.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(v){p={error:v}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(p)throw p.error}}return a},g=this&&this.__spreadArray||function(t,r,e){if(e||2===arguments.length)for(var a,n=0,o=r.length;n<o;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},d=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};function s(t){var r=this;void 0===t&&(t=[]);var e=0,n=[];this.size=function(){return e},this.empty=function(){return 0===e},this.clear=function(){e=0,n.length=0},this.front=function(){if(!this.empty())return n[0]},this.back=function(){if(!this.empty())return n[e-1]},this.forEach=function(o){n.forEach(o)},this.getElementByPos=function(o){if(o<0||o>=e)throw new Error("pos must more than 0 and less than vector's size");return n[o]},this.eraseElementByPos=function(o){if(o<0||o>=e)throw new Error("pos must more than 0 and less than vector's size");for(var a=o;a<e-1;++a)n[a]=n[a+1];this.popBack()},this.eraseElementByValue=function(o){var a=[];this.forEach(function(v){v!==o&&a.push(v)}),a.forEach(function(v,h){n[h]=v});for(var p=a.length;e>p;)this.popBack()},this.pushBack=function(o){n.push(o),++e},this.popBack=function(){n.pop(),e>0&&--e},this.setElementByPos=function(o,a){if(o<0||o>=e)throw new Error("pos must more than 0 and less than vector's size");n[o]=a},this.insert=function(o,a,p){if(void 0===p&&(p=1),o<0||o>e)throw new Error("pos must more than 0 and less than or equal to vector's size");n.splice.apply(n,g([o,0],b(new Array(p).fill(a)),!1)),e+=p},this.find=function(o){return n.includes(o)},this.reverse=function(){n.reverse()},this.unique=function(){var o,a=[];this.forEach(function(v,h){(0===h||v!==o)&&(a.push(v),o=v)}),a.forEach(function(v,h){n[h]=v});for(var p=a.length;e>p;)this.popBack()},this.sort=function(o){n.sort(o)},this[Symbol.iterator]=function(){return function(){return m(this,function(o){switch(o.label){case 0:return[5,d(n)];case 1:return[2,o.sent()]}})}()},t.forEach(function(o){return r.pushBack(o)}),Object.freeze(this)}Object.defineProperty(V,"__esModule",{value:!0}),Object.freeze(s),V.default=s},{}],36:[function(A,W,V){"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.HashMap=V.HashSet=V.Map=V.Set=V.PriorityQueue=V.Deque=V.LinkList=V.Queue=V.Stack=V.Vector=void 0;var m=A("./Vector/Vector");V.Vector=m.default;var b=A("./Stack/Stack");V.Stack=b.default;var g=A("./Queue/Queue");V.Queue=g.default;var d=A("./LinkList/LinkList");V.LinkList=d.default;var s=A("./Deque/Deque");V.Deque=s.default;var t=A("./PriorityQueue/PriorityQueue");V.PriorityQueue=t.default;var r=A("./Set/Set");V.Set=r.default;var e=A("./Map/Map");V.Map=e.default;var n=A("./HashSet/HashSet");V.HashSet=n.default;var o=A("./HashMap/HashMap");V.HashMap=o.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(A,W,V){"use strict";const m=A("yallist"),b=Symbol("max"),g=Symbol("length"),d=Symbol("lengthCalculator"),s=Symbol("allowStale"),t=Symbol("maxAge"),r=Symbol("dispose"),e=Symbol("noDisposeOnSet"),n=Symbol("lruList"),o=Symbol("cache"),a=Symbol("updateAgeOnGet"),p=()=>1;const h=(L,M,q)=>{const f=L[o].get(M);if(f){const _=f.value;if(i(L,_)){if(T(L,f),!L[s])return}else q&&(L[a]&&(f.value.now=Date.now()),L[n].unshiftNode(f));return _.value}},i=(L,M)=>{if(!M||!M.maxAge&&!L[t])return!1;const q=Date.now()-M.now;return M.maxAge?q>M.maxAge:L[t]&&q>L[t]},w=L=>{if(L[g]>L[b])for(let M=L[n].tail;L[g]>L[b]&&null!==M;){const q=M.prev;T(L,M),M=q}},T=(L,M)=>{if(M){const q=M.value;L[r]&&L[r](q.key,q.value),L[g]-=q.length,L[o].delete(q.key),L[n].removeNode(M)}};class x{constructor(M,q,f,_,y){this.key=M,this.value=q,this.length=f,this.now=_,this.maxAge=y||0}}const P=(L,M,q,f)=>{let _=q.value;i(L,_)&&(T(L,q),L[s]||(_=void 0)),_&&M.call(f,_.value,_.key,L)};W.exports=class v{constructor(M){if("number"==typeof M&&(M={max:M}),M||(M={}),M.max&&("number"!=typeof M.max||M.max<0))throw new TypeError("max must be a non-negative number");this[b]=M.max||1/0;const f=M.length||p;if(this[d]="function"!=typeof f?p:f,this[s]=M.stale||!1,M.maxAge&&"number"!=typeof M.maxAge)throw new TypeError("maxAge must be a number");this[t]=M.maxAge||0,this[r]=M.dispose,this[e]=M.noDisposeOnSet||!1,this[a]=M.updateAgeOnGet||!1,this.reset()}set max(M){if("number"!=typeof M||M<0)throw new TypeError("max must be a non-negative number");this[b]=M||1/0,w(this)}get max(){return this[b]}set allowStale(M){this[s]=!!M}get allowStale(){return this[s]}set maxAge(M){if("number"!=typeof M)throw new TypeError("maxAge must be a non-negative number");this[t]=M,w(this)}get maxAge(){return this[t]}set lengthCalculator(M){"function"!=typeof M&&(M=p),M!==this[d]&&(this[d]=M,this[g]=0,this[n].forEach(q=>{q.length=this[d](q.value,q.key),this[g]+=q.length})),w(this)}get lengthCalculator(){return this[d]}get length(){return this[g]}get itemCount(){return this[n].length}rforEach(M,q){q=q||this;for(let f=this[n].tail;null!==f;){const _=f.prev;P(this,M,f,q),f=_}}forEach(M,q){q=q||this;for(let f=this[n].head;null!==f;){const _=f.next;P(this,M,f,q),f=_}}keys(){return this[n].toArray().map(M=>M.key)}values(){return this[n].toArray().map(M=>M.value)}reset(){this[r]&&this[n]&&this[n].length&&this[n].forEach(M=>this[r](M.key,M.value)),this[o]=new Map,this[n]=new m,this[g]=0}dump(){return this[n].map(M=>!i(this,M)&&{k:M.key,v:M.value,e:M.now+(M.maxAge||0)}).toArray().filter(M=>M)}dumpLru(){return this[n]}set(M,q,f){if((f=f||this[t])&&"number"!=typeof f)throw new TypeError("maxAge must be a number");const _=f?Date.now():0,y=this[d](q,M);if(this[o].has(M)){if(y>this[b])return T(this,this[o].get(M)),!1;const N=this[o].get(M).value;return this[r]&&(this[e]||this[r](M,N.value)),N.now=_,N.maxAge=f,N.value=q,this[g]+=y-N.length,N.length=y,this.get(M),w(this),!0}const I=new x(M,q,y,_,f);return I.length>this[b]?(this[r]&&this[r](M,q),!1):(this[g]+=I.length,this[n].unshift(I),this[o].set(M,this[n].head),w(this),!0)}has(M){if(!this[o].has(M))return!1;const q=this[o].get(M).value;return!i(this,q)}get(M){return h(this,M,!0)}peek(M){return h(this,M,!1)}pop(){const M=this[n].tail;return M?(T(this,M),M.value):null}del(M){T(this,this[o].get(M))}load(M){this.reset();const q=Date.now();for(let f=M.length-1;f>=0;f--){const _=M[f],y=_.e||0;if(0===y)this.set(_.k,_.v);else{const I=y-q;I>0&&this.set(_.k,_.v,I)}}}prune(){this[o].forEach((M,q)=>h(this,q,!1))}}},{yallist:83}],38:[function(A,W,V){(function(m){(function(){const b=W.exports;b.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},b.codes={};for(const d in b.types)b.codes[b.types[d]]=d;b.CMD_SHIFT=4,b.CMD_MASK=240,b.DUP_MASK=8,b.QOS_MASK=3,b.QOS_SHIFT=1,b.RETAIN_MASK=1,b.VARBYTEINT_MASK=127,b.VARBYTEINT_FIN_MASK=128,b.VARBYTEINT_MAX=268435455,b.SESSIONPRESENT_MASK=1,b.SESSIONPRESENT_HEADER=m.from([b.SESSIONPRESENT_MASK]),b.CONNACK_HEADER=m.from([b.codes.connack<<b.CMD_SHIFT]),b.USERNAME_MASK=128,b.PASSWORD_MASK=64,b.WILL_RETAIN_MASK=32,b.WILL_QOS_MASK=24,b.WILL_QOS_SHIFT=3,b.WILL_FLAG_MASK=4,b.CLEAN_SESSION_MASK=2,b.CONNECT_HEADER=m.from([b.codes.connect<<b.CMD_SHIFT]),b.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},b.propertiesCodes={};for(const d in b.properties)b.propertiesCodes[b.properties[d]]=d;function g(d){return[0,1,2].map(s=>[0,1].map(t=>[0,1].map(r=>{const e=m.alloc(1);return e.writeUInt8(b.codes[d]<<b.CMD_SHIFT|(t?b.DUP_MASK:0)|s<<b.QOS_SHIFT|r,0,!0),e})))}b.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},b.PUBLISH_HEADER=g("publish"),b.SUBSCRIBE_HEADER=g("subscribe"),b.SUBSCRIBE_OPTIONS_QOS_MASK=3,b.SUBSCRIBE_OPTIONS_NL_MASK=1,b.SUBSCRIBE_OPTIONS_NL_SHIFT=2,b.SUBSCRIBE_OPTIONS_RAP_MASK=1,b.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,b.SUBSCRIBE_OPTIONS_RH_MASK=3,b.SUBSCRIBE_OPTIONS_RH_SHIFT=4,b.SUBSCRIBE_OPTIONS_RH=[0,16,32],b.SUBSCRIBE_OPTIONS_NL=4,b.SUBSCRIBE_OPTIONS_RAP=8,b.SUBSCRIBE_OPTIONS_QOS=[0,1,2],b.UNSUBSCRIBE_HEADER=g("unsubscribe"),b.ACKS={unsuback:g("unsuback"),puback:g("puback"),pubcomp:g("pubcomp"),pubrel:g("pubrel"),pubrec:g("pubrec")},b.SUBACK_HEADER=m.from([b.codes.suback<<b.CMD_SHIFT]),b.VERSION3=m.from([3]),b.VERSION4=m.from([4]),b.VERSION5=m.from([5]),b.VERSION131=m.from([131]),b.VERSION132=m.from([132]),b.QOS=[0,1,2].map(d=>m.from([d])),b.EMPTY={pingreq:m.from([b.codes.pingreq<<4,0]),pingresp:m.from([b.codes.pingresp<<4,0]),disconnect:m.from([b.codes.disconnect<<4,0])}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],39:[function(A,W,V){(function(m){(function(){const b=A("./writeToStream"),g=A("events");class s extends g{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0;const e=new Array(this._array.length),n=this._array;let a,o=0;for(a=0;a<n.length&&void 0!==n[a];a++)e[a]="string"!=typeof n[a]?n[a].length:m.byteLength(n[a]),r+=e[a];const p=m.allocUnsafe(r);for(a=0;a<n.length&&void 0!==n[a];a++)"string"!=typeof n[a]?(n[a].copy(p,o),o+=e[a]):(p.write(n[a],o),o+=e[a]);return p}}W.exports=function d(t,r){const e=new s;return b(t,e,r),e.concat()}}).call(this)}).call(this,A("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(A,W,V){V.parser=A("./parser").parser,V.generate=A("./generate"),V.writeToStream=A("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(A,W,V){(function(m){(function(){const g={},d=m.isBuffer(m.from([1,2]).subarray(0,1));function s(n){const o=m.allocUnsafe(2);return o.writeUInt8(n>>8,0),o.writeUInt8(255&n,1),o}W.exports={cache:g,generateCache:function t(){for(let n=0;n<65536;n++)g[n]=s(n)},generateNumber:s,genBufVariableByteInt:function r(n){let a=0,p=0;const v=m.allocUnsafe(4);do{a=n%128|0,(n=n/128|0)>0&&(a|=128),v.writeUInt8(a,p++)}while(n>0&&p<4);return n>0&&(p=0),d?v.subarray(0,p):v.slice(0,p)},generate4ByteBuffer:function e(n){const o=m.allocUnsafe(4);return o.writeUInt32BE(n,0),o}}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],42:[function(A,W,V){W.exports=class m{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],43:[function(A,W,V){const m=A("bl"),b=A("events"),g=A("./packet"),d=A("./constants"),s=A("debug")("mqtt-packet:parser");class t extends b{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof t?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new t).parser(e)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new g,this.error=null,this._list=m(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),s("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0);return this.packet.cmd=d.types[e>>d.CMD_SHIFT],this.packet.retain=0!=(e&d.RETAIN_MASK),this.packet.qos=e>>d.QOS_SHIFT&d.QOS_MASK,this.packet.dup=0!=(e&d.DUP_MASK),s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),s("_parseLength %d",e.value),!!e}_parsePayload(){s("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return s("_parsePayload complete result: %s",e),e}_parseConnect(){let e,n,o,a;s("_parseConnect");const p={},v=this.packet,h=this._parseString();if(null===h)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==h&&"MQIsdp"!==h)return this._emitError(new Error("Invalid protocolId"));if(v.protocolId=h,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(v.protocolVersion=this._list.readUInt8(this._pos),v.protocolVersion>=128&&(v.bridgeMode=!0,v.protocolVersion=v.protocolVersion-128),3!==v.protocolVersion&&4!==v.protocolVersion&&5!==v.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(p.username=this._list.readUInt8(this._pos)&d.USERNAME_MASK,p.password=this._list.readUInt8(this._pos)&d.PASSWORD_MASK,p.will=this._list.readUInt8(this._pos)&d.WILL_FLAG_MASK,p.will&&(v.will={},v.will.retain=0!=(this._list.readUInt8(this._pos)&d.WILL_RETAIN_MASK),v.will.qos=(this._list.readUInt8(this._pos)&d.WILL_QOS_MASK)>>d.WILL_QOS_SHIFT),v.clean=0!=(this._list.readUInt8(this._pos)&d.CLEAN_SESSION_MASK),this._pos++,v.keepalive=this._parseNum(),-1===v.keepalive)return this._emitError(new Error("Packet too short"));if(5===v.protocolVersion){const w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(v.properties=w)}const i=this._parseString();if(null===i)return this._emitError(new Error("Packet too short"));if(v.clientId=i,s("_parseConnect: packet.clientId: %s",v.clientId),p.will){if(5===v.protocolVersion){const w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(v.will.properties=w)}if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse will topic"));if(v.will.topic=e,s("_parseConnect: packet.will.topic: %s",v.will.topic),n=this._parseBuffer(),null===n)return this._emitError(new Error("Cannot parse will payload"));v.will.payload=n,s("_parseConnect: packet.will.paylaod: %s",v.will.payload)}if(p.username){if(a=this._parseString(),null===a)return this._emitError(new Error("Cannot parse username"));v.username=a,s("_parseConnect: packet.username: %s",v.username)}if(p.password){if(o=this._parseBuffer(),null===o)return this._emitError(new Error("Cannot parse password"));v.password=o}return this.settings=v,s("_parseConnect: complete"),v}_parseConnack(){s("_parseConnack");const e=this.packet;if(this._list.length<1)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&d.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)e.reasonCode=this._list.length>=2?this._list.readUInt8(this._pos++):0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}e.payload=this._list.slice(this._pos,e.length),s("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){s("_parseSubscribe");const e=this.packet;let n,o,a,p,v,h,i;if(1!==e.qos)return this._emitError(new Error("Wrong subscribe header"));if(e.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(e.properties=w)}for(;this._pos<e.length;){if(n=this._parseString(),null===n)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));o=this._parseByte(),a=o&d.SUBSCRIBE_OPTIONS_QOS_MASK,h=0!=(o>>d.SUBSCRIBE_OPTIONS_NL_SHIFT&d.SUBSCRIBE_OPTIONS_NL_MASK),v=0!=(o>>d.SUBSCRIBE_OPTIONS_RAP_SHIFT&d.SUBSCRIBE_OPTIONS_RAP_MASK),p=o>>d.SUBSCRIBE_OPTIONS_RH_SHIFT&d.SUBSCRIBE_OPTIONS_RH_MASK,i={topic:n,qos:a},5===this.settings.protocolVersion?(i.nl=h,i.rap=v,i.rh=p):this.settings.bridgeMode&&(i.rh=0,i.rap=!0,i.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",i),e.subscriptions.push(i)}}}_parseSuback(){s("_parseSuback");const e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){s("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}for(;this._pos<e.length;){const n=this._parseString();if(null===n)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",n),e.unsubscriptions.push(n)}}}_parseUnsuback(){s("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const n=this._parseProperties();for(Object.getOwnPropertyNames(n).length&&(e.properties=n),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(e.length>2?(e.reasonCode=this._parseByte(),s("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,e.length>3)){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}return!0}_parseDisconnect(){const e=this.packet;if(s("_parseDisconnect"),5===this.settings.protocolVersion){e.reasonCode=this._list.length>0?this._parseByte():0;const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");const e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();const n=this._parseProperties();return Object.getOwnPropertyNames(n).length&&(e.properties=n),s("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const n=this._parseNum(),o=n+this._pos;if(-1===n||o>this._list.length||o>this.packet.length)return null;const a=this._list.toString("utf8",this._pos,o);return this._pos+=n,s("_parseString: result: %s",a),a}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),n=e+this._pos;if(-1===e||n>this._list.length||n>this.packet.length)return null;const o=this._list.slice(this._pos,n);return this._pos+=e,s("_parseBuffer: result: %o",o),o}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){s("_parseVarByteNum");let h,o=0,a=1,p=0,v=!1;const i=this._pos?this._pos:0;for(;o<4&&i+o<this._list.length;){if(h=this._list.readUInt8(i+o++),p+=a*(h&d.VARBYTEINT_MASK),a*=128,!(h&d.VARBYTEINT_FIN_MASK)){v=!0;break}if(this._list.length<=o)break}return!v&&4===o&&this._list.length>=o&&this._emitError(new Error("Invalid variable byte integer")),i&&(this._pos+=o),v=!!v&&(e?{bytes:o,value:p}:p),s("_parseVarByteNum: result: %o",v),v}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",e),e}_parseByType(e){switch(s("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");const e=this._parseVarByteNum(),o=this._pos+e,a={};for(;this._pos<o;){const p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;const v=d.propertiesCodes[p];if(!v)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==v)a[v]?(Array.isArray(a[v])||(a[v]=[a[v]]),a[v].push(this._parseByType(d.propertiesTypes[v]))):a[v]=this._parseByType(d.propertiesTypes[v]);else{a[v]||(a[v]=Object.create(null));const h=this._parseByType(d.propertiesTypes[v]);a[v][h.name]?(Array.isArray(a[v][h.name])||(a[v][h.name]=[a[v][h.name]]),a[v][h.name].push(h.value)):a[v][h.name]=h.value}}return a}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new g,this._pos=0,!0}_emitError(e){s("_emitError"),this.error=e,this.emit("error",e)}}W.exports=t},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(A,W,V){(function(m){(function(){const b=A("./constants"),g=m.allocUnsafe(0),d=m.from([0]),s=A("./numbers"),t=A("process-nextick-args").nextTick,r=A("debug")("mqtt-packet:writeToStream"),e=s.cache,n=s.generateNumber,o=s.generateCache,a=s.genBufVariableByteInt,p=s.generate4ByteBuffer;let v=z,h=!0;function i(K,B,Z){switch(r("generate called"),B.cork&&(B.cork(),t(w,B)),h&&(h=!1,o()),r("generate: packet.cmd: %s",K.cmd),K.cmd){case"connect":return function T(K,B,Z){const ne=K||{},F=ne.protocolId||"MQTT";let R=ne.protocolVersion||4;const U=ne.will;let Q=ne.clean;const X=ne.keepalive||0,C=ne.clientId||"",c=ne.username,l=ne.password,u=ne.properties;void 0===Q&&(Q=!0);let k=0;if(!F||"string"!=typeof F&&!m.isBuffer(F))return B.emit("error",new Error("Invalid protocolId")),!1;if(k+=F.length+2,3!==R&&4!==R&&5!==R)return B.emit("error",new Error("Invalid protocol version")),!1;if(k+=1,("string"==typeof C||m.isBuffer(C))&&(C||R>=4)&&(C||Q))k+=m.byteLength(C)+2;else{if(R<4)return B.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*Q==0)return B.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof X||X<0||X>65535||X%1!=0)return B.emit("error",new Error("Invalid keepalive")),!1;if(k+=2,k+=1,5===R){var D=H(B,u);if(!D)return!1;k+=D.length}if(U){if("object"!=typeof U)return B.emit("error",new Error("Invalid will")),!1;if(!U.topic||"string"!=typeof U.topic)return B.emit("error",new Error("Invalid will topic")),!1;if(k+=m.byteLength(U.topic)+2,k+=2,U.payload){if(!(U.payload.length>=0))return B.emit("error",new Error("Invalid will payload")),!1;k+="string"==typeof U.payload?m.byteLength(U.payload):U.payload.length}var G={};if(5===R){if(!(G=H(B,U.properties)))return!1;k+=G.length}}let ee=!1;if(null!=c){if(!re(c))return B.emit("error",new Error("Invalid username")),!1;ee=!0,k+=m.byteLength(c)+2}if(null!=l){if(!ee)return B.emit("error",new Error("Username is required to use password")),!1;if(!re(l))return B.emit("error",new Error("Invalid password")),!1;k+=se(l)+2}B.write(b.CONNECT_HEADER),E(B,k),J(B,F),ne.bridgeMode&&(R+=128),B.write(131===R?b.VERSION131:132===R?b.VERSION132:4===R?b.VERSION4:5===R?b.VERSION5:b.VERSION3);let ae=0;return ae|=null!=c?b.USERNAME_MASK:0,ae|=null!=l?b.PASSWORD_MASK:0,ae|=U&&U.retain?b.WILL_RETAIN_MASK:0,ae|=U&&U.qos?U.qos<<b.WILL_QOS_SHIFT:0,ae|=U?b.WILL_FLAG_MASK:0,ae|=Q?b.CLEAN_SESSION_MASK:0,B.write(m.from([ae])),v(B,X),5===R&&D.write(),J(B,C),U&&(5===R&&G.write(),S(B,U.topic),J(B,U.payload)),null!=c&&J(B,c),null!=l&&J(B,l),!0}(K,B);case"connack":return function x(K,B,Z){const ne=Z?Z.protocolVersion:4,F=K||{},R=5===ne?F.reasonCode:F.returnCode,U=F.properties;let Q=2;if("number"!=typeof R)return B.emit("error",new Error("Invalid return code")),!1;let X=null;if(5===ne){if(X=H(B,U),!X)return!1;Q+=X.length}return B.write(b.CONNACK_HEADER),E(B,Q),B.write(F.sessionPresent?b.SESSIONPRESENT_HEADER:d),B.write(m.from([R])),X?.write(),!0}(K,B,Z);case"publish":return function P(K,B,Z){r("publish: packet: %o",K);const ne=Z?Z.protocolVersion:4,F=K||{},R=F.qos||0,U=F.retain?b.RETAIN_MASK:0,Q=F.topic,X=F.payload||g,C=F.messageId,c=F.properties;let l=0;if("string"==typeof Q)l+=m.byteLength(Q)+2;else{if(!m.isBuffer(Q))return B.emit("error",new Error("Invalid topic")),!1;l+=Q.length+2}if(m.isBuffer(X)?l+=X.length:l+=m.byteLength(X),R&&"number"!=typeof C)return B.emit("error",new Error("Invalid messageId")),!1;R&&(l+=2);let u=null;if(5===ne){if(u=H(B,c),!u)return!1;l+=u.length}return B.write(b.PUBLISH_HEADER[R][F.dup?1:0][U?1:0]),E(B,l),v(B,se(Q)),B.write(Q),R>0&&v(B,C),u?.write(),r("publish: payload: %o",X),B.write(X)}(K,B,Z);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function L(K,B,Z){const ne=Z?Z.protocolVersion:4,F=K||{},R=F.cmd||"puback",U=F.messageId,Q=F.dup&&"pubrel"===R?b.DUP_MASK:0;let X=0;const C=F.reasonCode,c=F.properties;let l=5===ne?3:2;if("pubrel"===R&&(X=1),"number"!=typeof U)return B.emit("error",new Error("Invalid messageId")),!1;let u=null;if(5===ne&&"object"==typeof c){if(u=$(B,c,Z,l),!u)return!1;l+=u.length}return B.write(b.ACKS[R][X][Q][0]),E(B,l),v(B,U),5===ne&&B.write(m.from([C])),null!==u&&u.write(),!0}(K,B,Z);case"subscribe":return function M(K,B,Z){r("subscribe: packet: ");const ne=Z?Z.protocolVersion:4,F=K||{},R=F.dup?b.DUP_MASK:0,U=F.messageId,Q=F.subscriptions,X=F.properties;let C=0;if("number"!=typeof U)return B.emit("error",new Error("Invalid messageId")),!1;C+=2;let c=null;if(5===ne){if(c=H(B,X),!c)return!1;C+=c.length}if("object"!=typeof Q||!Q.length)return B.emit("error",new Error("Invalid subscriptions")),!1;for(let u=0;u<Q.length;u+=1){const k=Q[u].topic,D=Q[u].qos;if("string"!=typeof k)return B.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof D)return B.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===ne){if("boolean"!=typeof(Q[u].nl||!1))return B.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(Q[u].rap||!1))return B.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ae=Q[u].rh||0;if("number"!=typeof ae||ae>2)return B.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}C+=m.byteLength(k)+2+1}r("subscribe: writing to stream: %o",b.SUBSCRIBE_HEADER),B.write(b.SUBSCRIBE_HEADER[1][R?1:0][0]),E(B,C),v(B,U),null!==c&&c.write();let l=!0;for(const u of Q){const D=u.qos,G=+u.nl,ee=+u.rap,ae=u.rh;let le;S(B,u.topic),le=b.SUBSCRIBE_OPTIONS_QOS[D],5===ne&&(le|=G?b.SUBSCRIBE_OPTIONS_NL:0,le|=ee?b.SUBSCRIBE_OPTIONS_RAP:0,le|=ae?b.SUBSCRIBE_OPTIONS_RH[ae]:0),l=B.write(m.from([le]))}return l}(K,B,Z);case"suback":return function q(K,B,Z){const ne=Z?Z.protocolVersion:4,F=K||{},R=F.messageId,U=F.granted,Q=F.properties;let X=0;if("number"!=typeof R)return B.emit("error",new Error("Invalid messageId")),!1;if(X+=2,"object"!=typeof U||!U.length)return B.emit("error",new Error("Invalid qos vector")),!1;for(let c=0;c<U.length;c+=1){if("number"!=typeof U[c])return B.emit("error",new Error("Invalid qos vector")),!1;X+=1}let C=null;if(5===ne){if(C=$(B,Q,Z,X),!C)return!1;X+=C.length}return B.write(b.SUBACK_HEADER),E(B,X),v(B,R),null!==C&&C.write(),B.write(m.from(U))}(K,B,Z);case"unsubscribe":return function f(K,B,Z){const ne=Z?Z.protocolVersion:4,F=K||{},R=F.messageId,U=F.dup?b.DUP_MASK:0,Q=F.unsubscriptions,X=F.properties;let C=0;if("number"!=typeof R)return B.emit("error",new Error("Invalid messageId")),!1;if(C+=2,"object"!=typeof Q||!Q.length)return B.emit("error",new Error("Invalid unsubscriptions")),!1;for(let u=0;u<Q.length;u+=1){if("string"!=typeof Q[u])return B.emit("error",new Error("Invalid unsubscriptions")),!1;C+=m.byteLength(Q[u])+2}let c=null;if(5===ne){if(c=H(B,X),!c)return!1;C+=c.length}B.write(b.UNSUBSCRIBE_HEADER[1][U?1:0][0]),E(B,C),v(B,R),null!==c&&c.write();let l=!0;for(let u=0;u<Q.length;u++)l=S(B,Q[u]);return l}(K,B,Z);case"unsuback":return function _(K,B,Z){const ne=Z?Z.protocolVersion:4,F=K||{},R=F.messageId,U=F.dup?b.DUP_MASK:0,Q=F.granted,X=F.properties,C=F.cmd,c=0;let l=2;if("number"!=typeof R)return B.emit("error",new Error("Invalid messageId")),!1;if(5===ne){if("object"!=typeof Q||!Q.length)return B.emit("error",new Error("Invalid qos vector")),!1;for(let k=0;k<Q.length;k+=1){if("number"!=typeof Q[k])return B.emit("error",new Error("Invalid qos vector")),!1;l+=1}}let u=null;if(5===ne){if(u=$(B,X,Z,l),!u)return!1;l+=u.length}return B.write(b.ACKS[C][c][U][0]),E(B,l),v(B,R),null!==u&&u.write(),5===ne&&B.write(m.from(Q)),!0}(K,B,Z);case"pingreq":case"pingresp":return function y(K,B,Z){return B.write(b.EMPTY[K.cmd])}(K,B);case"disconnect":return function I(K,B,Z){const ne=Z?Z.protocolVersion:4,F=K||{},R=F.reasonCode;let Q=5===ne?1:0,X=null;if(5===ne){if(X=$(B,F.properties,Z,Q),!X)return!1;Q+=X.length}return B.write(m.from([b.codes.disconnect<<4])),E(B,Q),5===ne&&B.write(m.from([R])),null!==X&&X.write(),!0}(K,B,Z);case"auth":return function j(K,B,Z){const ne=Z?Z.protocolVersion:4,F=K||{},R=F.reasonCode,U=F.properties;let Q=5===ne?1:0;5!==ne&&B.emit("error",new Error("Invalid mqtt version for auth packet"));const X=$(B,U,Z,Q);return!!X&&(Q+=X.length,B.write(m.from([b.codes.auth<<4])),E(B,Q),B.write(m.from([R])),null!==X&&X.write(),!0)}(K,B,Z);default:return B.emit("error",new Error("Unknown command")),!1}}function w(K){K.uncork()}Object.defineProperty(i,"cacheNumbers",{get:()=>v===z,set(K){K?((!e||0===Object.keys(e).length)&&(h=!0),v=z):(h=!1,v=te)}});const N={};function E(K,B){if(B>b.VARBYTEINT_MAX)return K.emit("error",new Error(`Invalid variable byte integer: ${B}`)),!1;let Z=N[B];return Z||(Z=a(B),B<16384&&(N[B]=Z)),r("writeVarByteInt: writing to stream: %o",Z),K.write(Z)}function S(K,B){const Z=m.byteLength(B);return v(K,Z),r("writeString: %s",B),K.write(B,"utf8")}function O(K,B,Z){S(K,B),S(K,Z)}function z(K,B){return r("writeNumberCached: number: %d",B),r("writeNumberCached: %o",e[B]),K.write(e[B])}function te(K,B){const Z=n(B);return r("writeNumberGenerated: %o",Z),K.write(Z)}function J(K,B){"string"==typeof B?S(K,B):B?(v(K,B.length),K.write(B)):v(K,0)}function H(K,B){if("object"!=typeof B||null!=B.length)return{length:1,write(){oe(K,{},0)}};let Z=0;function ne(R,U){let X=0;switch(b.propertiesTypes[R]){case"byte":if("boolean"!=typeof U)return K.emit("error",new Error(`Invalid ${R}: ${U}`)),!1;X+=2;break;case"int8":if("number"!=typeof U||U<0||U>255)return K.emit("error",new Error(`Invalid ${R}: ${U}`)),!1;X+=2;break;case"binary":if(U&&null===U)return K.emit("error",new Error(`Invalid ${R}: ${U}`)),!1;X+=1+m.byteLength(U)+2;break;case"int16":if("number"!=typeof U||U<0||U>65535)return K.emit("error",new Error(`Invalid ${R}: ${U}`)),!1;X+=3;break;case"int32":if("number"!=typeof U||U<0||U>4294967295)return K.emit("error",new Error(`Invalid ${R}: ${U}`)),!1;X+=5;break;case"var":if("number"!=typeof U||U<0||U>268435455)return K.emit("error",new Error(`Invalid ${R}: ${U}`)),!1;X+=1+m.byteLength(a(U));break;case"string":if("string"!=typeof U)return K.emit("error",new Error(`Invalid ${R}: ${U}`)),!1;X+=3+m.byteLength(U.toString());break;case"pair":if("object"!=typeof U)return K.emit("error",new Error(`Invalid ${R}: ${U}`)),!1;X+=Object.getOwnPropertyNames(U).reduce((C,c)=>{const l=U[c];return Array.isArray(l)?C+=l.reduce((u,k)=>u+(3+m.byteLength(c.toString())+2+m.byteLength(k.toString())),0):C+=3+m.byteLength(c.toString())+2+m.byteLength(U[c].toString()),C},0);break;default:return K.emit("error",new Error(`Invalid property ${R}: ${U}`)),!1}return X}if(B)for(const R in B){let U=0,Q=0;const X=B[R];if(Array.isArray(X))for(let C=0;C<X.length;C++){if(Q=ne(R,X[C]),!Q)return!1;U+=Q}else{if(Q=ne(R,X),!Q)return!1;U=Q}if(!U)return!1;Z+=U}return{length:m.byteLength(a(Z))+Z,write(){oe(K,B,Z)}}}function $(K,B,Z,ne){const F=["reasonString","userProperties"],R=Z&&Z.properties&&Z.properties.maximumPacketSize?Z.properties.maximumPacketSize:0;let U=H(K,B);if(R)for(;ne+U.length>R;){const Q=F.shift();if(!Q||!B[Q])return!1;delete B[Q],U=H(K,B)}return U}function Y(K,B,Z){switch(b.propertiesTypes[B]){case"byte":K.write(m.from([b.properties[B]])),K.write(m.from([+Z]));break;case"int8":K.write(m.from([b.properties[B]])),K.write(m.from([Z]));break;case"binary":K.write(m.from([b.properties[B]])),J(K,Z);break;case"int16":K.write(m.from([b.properties[B]])),v(K,Z);break;case"int32":K.write(m.from([b.properties[B]])),function ie(K,B){const Z=p(B);return r("write4ByteNumber: %o",Z),K.write(Z)}(K,Z);break;case"var":K.write(m.from([b.properties[B]])),E(K,Z);break;case"string":K.write(m.from([b.properties[B]])),S(K,Z);break;case"pair":Object.getOwnPropertyNames(Z).forEach(F=>{const R=Z[F];Array.isArray(R)?R.forEach(U=>{K.write(m.from([b.properties[B]])),O(K,F.toString(),U.toString())}):(K.write(m.from([b.properties[B]])),O(K,F.toString(),R.toString()))});break;default:return K.emit("error",new Error(`Invalid property ${B} value: ${Z}`)),!1}}function oe(K,B,Z){E(K,Z);for(const ne in B)if(Object.prototype.hasOwnProperty.call(B,ne)&&null!==B[ne]){const F=B[ne];if(Array.isArray(F))for(let R=0;R<F.length;R++)Y(K,ne,F[R]);else Y(K,ne,F)}}function se(K){return K?K instanceof m?K.length:m.byteLength(K):0}function re(K){return"string"==typeof K||K instanceof m}W.exports=i}).call(this)}).call(this,A("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(A,W,V){var m=1e3,b=60*m,g=60*b,d=24*g;function o(a,p,v,h){var i=p>=1.5*v;return Math.round(a/v)+" "+h+(i?"s":"")}W.exports=function(a,p){p=p||{};var v=typeof a;if("string"===v&&a.length>0)return function r(a){if(!((a=String(a)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(p){var v=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*v;case"weeks":case"week":case"w":return 6048e5*v;case"days":case"day":case"d":return v*d;case"hours":case"hour":case"hrs":case"hr":case"h":return v*g;case"minutes":case"minute":case"mins":case"min":case"m":return v*b;case"seconds":case"second":case"secs":case"sec":case"s":return v*m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}}(a);if("number"===v&&isFinite(a))return p.long?function n(a){var p=Math.abs(a);return p>=d?o(a,p,d,"day"):p>=g?o(a,p,g,"hour"):p>=b?o(a,p,b,"minute"):p>=m?o(a,p,m,"second"):a+" ms"}(a):function e(a){var p=Math.abs(a);return p>=d?Math.round(a/d)+"d":p>=g?Math.round(a/g)+"h":p>=b?Math.round(a/b)+"m":p>=m?Math.round(a/m)+"s":a+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},{}],46:[function(A,W,V){const m=A("./lib/number-allocator.js");W.exports.NumberAllocator=m},{"./lib/number-allocator.js":47}],47:[function(A,W,V){"use strict";const m=A("js-sdsl").Set,b=A("debug")("number-allocator:trace"),g=A("debug")("number-allocator:error");function d(t,r){this.low=t,this.high=r}function s(t,r){if(!(this instanceof s))return new s(t,r);this.min=t,this.max=r,this.ss=new m([],(e,n)=>e.compare(n)),b("Create"),this.clear()}d.prototype.equals=function(t){return this.low===t.low&&this.high===t.high},d.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0},s.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},s.prototype.alloc=function(){if(0===this.ss.size())return b("alloc():empty"),null;const t=this.ss.front(),r=t.low;return r+1<=t.high?++t.low:this.ss.eraseElementByPos(0),b("alloc():"+r),r},s.prototype.use=function(t){const r=new d(t,t),e=this.ss.lowerBound(r);if(e){if(e.equals(r))return this.ss.eraseElementByValue(e),b("use():"+t),!0;if(e.low>t)return!1;if(e.low===t)return++e.low,b("use():"+t),!0;if(e.high===t)return--e.high,b("use():"+t),!0;const n=e.low;return e.low=t+1,this.ss.insert(new d(n,t-1)),b("use():"+t),!0}return b("use():failed"),!1},s.prototype.free=function(t){if(t<this.min||t>this.max)return void g("free():"+t+" is out of range");const r=new d(t,t),e=this.ss.lowerBound(r);if(e){if(e.low<=t&&t<=e.high)return void g("free():"+t+" has already been vacant");if(e===this.ss.front())t+1===e.low?--e.low:this.ss.insert(r);else{const n=this.ss.reverseLowerBound(r);n.high+1===t?t+1===e.low?(this.ss.eraseElementByValue(n),e.low=n.low):n.high=t:t+1===e.low?e.low=t:this.ss.insert(r)}}else{if(e===this.ss.front())return void this.ss.insert(r);const n=this.ss.reverseLowerBound(r);n.high+1===t?n.high=t:this.ss.insert(r)}b("free():"+t)},s.prototype.clear=function(){b("clear()"),this.ss.clear(),this.ss.insert(new d(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(const t of this.ss)console.log(t)},W.exports=s},{debug:18,"js-sdsl":36}],48:[function(A,W,V){var m=A("wrappy");function b(d){var s=function(){return s.called?s.value:(s.called=!0,s.value=d.apply(this,arguments))};return s.called=!1,s}function g(d){var s=function(){if(s.called)throw new Error(s.onceError);return s.called=!0,s.value=d.apply(this,arguments)};return s.onceError=(d.name||"Function wrapped with `once`")+" shouldn't be called more than once",s.called=!1,s}W.exports=m(b),W.exports.strict=m(g),b.proto=b(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return b(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return g(this)},configurable:!0})})},{wrappy:79}],49:[function(A,W,V){(function(m){(function(){"use strict";W.exports=typeof m>"u"||!m.version||0===m.version.indexOf("v0.")||0===m.version.indexOf("v1.")&&0!==m.version.indexOf("v1.8.")?{nextTick:function b(g,d,s,t){if("function"!=typeof g)throw new TypeError('"callback" argument must be a function');var e,n,r=arguments.length;switch(r){case 0:case 1:return m.nextTick(g);case 2:return m.nextTick(function(){g.call(null,d)});case 3:return m.nextTick(function(){g.call(null,d,s)});case 4:return m.nextTick(function(){g.call(null,d,s,t)});default:for(e=new Array(r-1),n=0;n<e.length;)e[n++]=arguments[n];return m.nextTick(function(){g.apply(null,e)})}}}:m}).call(this)}).call(this,A("_process"))},{_process:50}],50:[function(A,W,V){var b,g,m=W.exports={};function d(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function t(w){if(b===setTimeout)return setTimeout(w,0);if((b===d||!b)&&setTimeout)return b=setTimeout,setTimeout(w,0);try{return b(w,0)}catch{try{return b.call(null,w,0)}catch{return b.call(this,w,0)}}}!function(){try{b="function"==typeof setTimeout?setTimeout:d}catch{b=d}try{g="function"==typeof clearTimeout?clearTimeout:s}catch{g=s}}();var o,e=[],n=!1,a=-1;function p(){!n||!o||(n=!1,o.length?e=o.concat(e):a=-1,e.length&&v())}function v(){if(!n){var w=t(p);n=!0;for(var T=e.length;T;){for(o=e,e=[];++a<T;)o&&o[a].run();a=-1,T=e.length}o=null,n=!1,function r(w){if(g===clearTimeout)return clearTimeout(w);if((g===s||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(w);try{return g(w)}catch{try{return g.call(null,w)}catch{return g.call(this,w)}}}(w)}}function h(w,T){this.fun=w,this.array=T}function i(){}m.nextTick=function(w){var T=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)T[x-1]=arguments[x];e.push(new h(w,T)),1===e.length&&!n&&t(v)},h.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=i,m.addListener=i,m.once=i,m.off=i,m.removeListener=i,m.removeAllListeners=i,m.emit=i,m.prependListener=i,m.prependOnceListener=i,m.listeners=function(w){return[]},m.binding=function(w){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(w){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},{}],51:[function(A,W,V){(function(m){(function(){!function(b){var g="object"==typeof V&&V&&!V.nodeType&&V,d="object"==typeof W&&W&&!W.nodeType&&W,s="object"==typeof m&&m;(s.global===s||s.window===s||s.self===s)&&(b=s);var t,f,r=2147483647,e=36,n=1,o=26,a=38,p=700,v=72,h=128,i="-",w=/^xn--/,T=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=e-n,M=Math.floor,q=String.fromCharCode;function _(H){throw new RangeError(P[H])}function y(H,$){for(var Y=H.length,oe=[];Y--;)oe[Y]=$(H[Y]);return oe}function I(H,$){var Y=H.split("@"),oe="";return Y.length>1&&(oe=Y[0]+"@",H=Y[1]),oe+y((H=H.replace(x,".")).split("."),$).join(".")}function j(H){for(var se,re,$=[],Y=0,oe=H.length;Y<oe;)(se=H.charCodeAt(Y++))>=55296&&se<=56319&&Y<oe?56320==(64512&(re=H.charCodeAt(Y++)))?$.push(((1023&se)<<10)+(1023&re)+65536):($.push(se),Y--):$.push(se);return $}function N(H){return y(H,function($){var Y="";return $>65535&&(Y+=q(($-=65536)>>>10&1023|55296),$=56320|1023&$),Y+q($)}).join("")}function E(H){return H-48<10?H-22:H-65<26?H-65:H-97<26?H-97:e}function S(H,$){return H+22+75*(H<26)-((0!=$)<<5)}function O(H,$,Y){var oe=0;for(H=Y?M(H/p):H>>1,H+=M(H/$);H>L*o>>1;oe+=e)H=M(H/L);return M(oe+(L+1)*H/(H+a))}function z(H){var oe,B,Z,ne,F,R,U,Q,X,C,$=[],Y=H.length,se=0,re=h,K=v;for((B=H.lastIndexOf(i))<0&&(B=0),Z=0;Z<B;++Z)H.charCodeAt(Z)>=128&&_("not-basic"),$.push(H.charCodeAt(Z));for(ne=B>0?B+1:0;ne<Y;){for(F=se,R=1,U=e;ne>=Y&&_("invalid-input"),((Q=E(H.charCodeAt(ne++)))>=e||Q>M((r-se)/R))&&_("overflow"),se+=Q*R,!(Q<(X=U<=K?n:U>=K+o?o:U-K));U+=e)R>M(r/(C=e-X))&&_("overflow"),R*=C;K=O(se-F,oe=$.length+1,0==F),M(se/oe)>r-re&&_("overflow"),re+=M(se/oe),se%=oe,$.splice(se++,0,re)}return N($)}function te(H){var $,Y,oe,se,re,K,B,Z,ne,F,R,Q,X,C,c,U=[];for(Q=(H=j(H)).length,$=h,Y=0,re=v,K=0;K<Q;++K)(R=H[K])<128&&U.push(q(R));for(oe=se=U.length,se&&U.push(i);oe<Q;){for(B=r,K=0;K<Q;++K)(R=H[K])>=$&&R<B&&(B=R);for(B-$>M((r-Y)/(X=oe+1))&&_("overflow"),Y+=(B-$)*X,$=B,K=0;K<Q;++K)if((R=H[K])<$&&++Y>r&&_("overflow"),R==$){for(Z=Y,ne=e;!(Z<(F=ne<=re?n:ne>=re+o?o:ne-re));ne+=e)U.push(q(S(F+(c=Z-F)%(C=e-F),0))),Z=M(c/C);U.push(q(S(Z,0))),re=O(Y,X,oe==se),Y=0,++oe}++Y,++$}return U.join("")}if(t={version:"1.4.1",ucs2:{decode:j,encode:N},decode:z,encode:te,toASCII:function J(H){return I(H,function($){return T.test($)?"xn--"+te($):$})},toUnicode:function ie(H){return I(H,function($){return w.test($)?z($.slice(4).toLowerCase()):$})}},g&&d)if(W.exports==g)d.exports=t;else for(f in t)t.hasOwnProperty(f)&&(g[f]=t[f]);else b.punycode=t}(this)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],52:[function(A,W,V){"use strict";function m(g,d){return Object.prototype.hasOwnProperty.call(g,d)}W.exports=function(g,d,s,t){s=s||"=";var r={};if("string"!=typeof g||0===g.length)return r;var e=/\+/g;g=g.split(d=d||"&");var n=1e3;t&&"number"==typeof t.maxKeys&&(n=t.maxKeys);var o=g.length;n>0&&o>n&&(o=n);for(var a=0;a<o;++a){var h,i,w,T,p=g[a].replace(e,"%20"),v=p.indexOf(s);v>=0?(h=p.substr(0,v),i=p.substr(v+1)):(h=p,i=""),w=decodeURIComponent(h),T=decodeURIComponent(i),m(r,w)?b(r[w])?r[w].push(T):r[w]=[r[w],T]:r[w]=T}return r};var b=Array.isArray||function(g){return"[object Array]"===Object.prototype.toString.call(g)}},{}],53:[function(A,W,V){"use strict";var m=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}};W.exports=function(s,t,r,e){return t=t||"&",r=r||"=",null===s&&(s=void 0),"object"==typeof s?g(d(s),function(n){var o=encodeURIComponent(m(n))+r;return b(s[n])?g(s[n],function(a){return o+encodeURIComponent(m(a))}).join(t):o+encodeURIComponent(m(s[n]))}).join(t):e?encodeURIComponent(m(e))+r+encodeURIComponent(m(s)):""};var b=Array.isArray||function(s){return"[object Array]"===Object.prototype.toString.call(s)};function g(s,t){if(s.map)return s.map(t);for(var r=[],e=0;e<s.length;e++)r.push(t(s[e],e));return r}var d=Object.keys||function(s){var t=[];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.push(r);return t}},{}],54:[function(A,W,V){"use strict";V.decode=V.parse=A("./decode"),V.encode=V.stringify=A("./encode")},{"./decode":52,"./encode":53}],55:[function(A,W,V){"use strict";var b={};function g(e,n,o){o||(o=Error);var p=function(v){function h(i,w,T){return v.call(this,function a(v,h,i){return"string"==typeof n?n:n(v,h,i)}(i,w,T))||this}return function m(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}(h,v),h}(o);p.prototype.name=o.name,p.prototype.code=e,b[e]=p}function d(e,n){if(Array.isArray(e)){var o=e.length;return e=e.map(function(a){return String(a)}),o>2?"one of ".concat(n," ").concat(e.slice(0,o-1).join(", "),", or ")+e[o-1]:2===o?"one of ".concat(n," ").concat(e[0]," or ").concat(e[1]):"of ".concat(n," ").concat(e[0])}return"of ".concat(n," ").concat(String(e))}g("ERR_INVALID_OPT_VALUE",function(e,n){return'The value "'+n+'" is invalid for option "'+e+'"'},TypeError),g("ERR_INVALID_ARG_TYPE",function(e,n,o){var a,p;if("string"==typeof n&&function s(e,n,o){return e.substr(!o||o<0?0:+o,n.length)===n}(n,"not ")?(a="must not be",n=n.replace(/^not /,"")):a="must be",function t(e,n,o){return(void 0===o||o>e.length)&&(o=e.length),e.substring(o-n.length,o)===n}(e," argument"))p="The ".concat(e," ").concat(a," ").concat(d(n,"type"));else{var v=function r(e,n,o){return"number"!=typeof o&&(o=0),!(o+n.length>e.length)&&-1!==e.indexOf(n,o)}(e,".")?"property":"argument";p='The "'.concat(e,'" ').concat(v," ").concat(a," ").concat(d(n,"type"))}return p+". Received type ".concat(typeof o)},TypeError),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),g("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),g("ERR_STREAM_PREMATURE_CLOSE","Premature close"),g("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),g("ERR_STREAM_WRITE_AFTER_END","write after end"),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),W.exports.codes=b},{}],56:[function(A,W,V){(function(m){(function(){"use strict";var b=Object.keys||function(a){var p=[];for(var v in a)p.push(v);return p};W.exports=e;var g=A("./_stream_readable"),d=A("./_stream_writable");A("inherits")(e,g);for(var s=b(d.prototype),t=0;t<s.length;t++){var r=s[t];e.prototype[r]||(e.prototype[r]=d.prototype[r])}function e(a){if(!(this instanceof e))return new e(a);g.call(this,a),d.call(this,a),this.allowHalfOpen=!0,a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",n)))}function n(){this._writableState.ended||m.nextTick(o,this)}function o(a){a.end()}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=p,this._writableState.destroyed=p)}})}).call(this)}).call(this,A("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(A,W,V){"use strict";W.exports=b;var m=A("./_stream_transform");function b(g){if(!(this instanceof b))return new b(g);m.call(this,g)}A("inherits")(b,m),b.prototype._transform=function(g,d,s){s(null,g)}},{"./_stream_transform":59,inherits:24}],58:[function(A,W,V){(function(m,b){(function(){"use strict";var g;W.exports=E,E.ReadableState=N,A("events");var s=function(c,l){return c.listeners(l).length},t=A("./internal/streams/stream"),r=A("buffer").Buffer,e=b.Uint8Array||function(){};var p,a=A("util");p=a&&a.debuglog?a.debuglog("stream"):function(){};var q,f,_,v=A("./internal/streams/buffer_list"),h=A("./internal/streams/destroy"),w=A("./internal/streams/state").getHighWaterMark,T=A("../errors").codes,x=T.ERR_INVALID_ARG_TYPE,P=T.ERR_STREAM_PUSH_AFTER_EOF,L=T.ERR_METHOD_NOT_IMPLEMENTED,M=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;A("inherits")(E,t);var y=h.errorOrDestroy,I=["error","close","destroy","pause","resume"];function N(C,c,l){g=g||A("./_stream_duplex"),"boolean"!=typeof l&&(l=c instanceof g),this.objectMode=!!(C=C||{}).objectMode,l&&(this.objectMode=this.objectMode||!!C.readableObjectMode),this.highWaterMark=w(this,C,"readableHighWaterMark",l),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==C.emitClose,this.autoDestroy=!!C.autoDestroy,this.destroyed=!1,this.defaultEncoding=C.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,C.encoding&&(q||(q=A("string_decoder/").StringDecoder),this.decoder=new q(C.encoding),this.encoding=C.encoding)}function E(C){if(g=g||A("./_stream_duplex"),!(this instanceof E))return new E(C);this._readableState=new N(C,this,this instanceof g),this.readable=!0,C&&("function"==typeof C.read&&(this._read=C.read),"function"==typeof C.destroy&&(this._destroy=C.destroy)),t.call(this)}function S(C,c,l,u,k){p("readableAddChunk",c);var G,D=C._readableState;if(null===c)D.reading=!1,function H(C,c){if(p("onEofChunk"),!c.ended){if(c.decoder){var l=c.decoder.end();l&&l.length&&(c.buffer.push(l),c.length+=c.objectMode?1:l.length)}c.ended=!0,c.sync?$(C):(c.needReadable=!1,c.emittedReadable||(c.emittedReadable=!0,Y(C)))}}(C,D);else if(k||(G=function z(C,c){var l;return!function o(C){return r.isBuffer(C)||C instanceof e}(c)&&"string"!=typeof c&&void 0!==c&&!C.objectMode&&(l=new x("chunk",["string","Buffer","Uint8Array"],c)),l}(D,c)),G)y(C,G);else if(D.objectMode||c&&c.length>0)if("string"!=typeof c&&!D.objectMode&&Object.getPrototypeOf(c)!==r.prototype&&(c=function n(C){return r.from(C)}(c)),u)D.endEmitted?y(C,new M):O(C,D,c,!0);else if(D.ended)y(C,new P);else{if(D.destroyed)return!1;D.reading=!1,D.decoder&&!l?(c=D.decoder.write(c),D.objectMode||0!==c.length?O(C,D,c,!1):oe(C,D)):O(C,D,c,!1)}else u||(D.reading=!1,oe(C,D));return!D.ended&&(D.length<D.highWaterMark||0===D.length)}function O(C,c,l,u){c.flowing&&0===c.length&&!c.sync?(c.awaitDrain=0,C.emit("data",l)):(c.length+=c.objectMode?1:l.length,u?c.buffer.unshift(l):c.buffer.push(l),c.needReadable&&$(C)),oe(C,c)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(c){this._readableState&&(this._readableState.destroyed=c)}}),E.prototype.destroy=h.destroy,E.prototype._undestroy=h.undestroy,E.prototype._destroy=function(C,c){c(C)},E.prototype.push=function(C,c){var u,l=this._readableState;return l.objectMode?u=!0:"string"==typeof C&&((c=c||l.defaultEncoding)!==l.encoding&&(C=r.from(C,c),c=""),u=!0),S(this,C,c,!1,u)},E.prototype.unshift=function(C){return S(this,C,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(C){q||(q=A("string_decoder/").StringDecoder);var c=new q(C);this._readableState.decoder=c,this._readableState.encoding=this._readableState.decoder.encoding;for(var l=this._readableState.buffer.head,u="";null!==l;)u+=c.write(l.data),l=l.next;return this._readableState.buffer.clear(),""!==u&&this._readableState.buffer.push(u),this._readableState.length=u.length,this};var te=1073741824;function J(C,c){return C<=0||0===c.length&&c.ended?0:c.objectMode?1:C!=C?c.flowing&&c.length?c.buffer.head.data.length:c.length:(C>c.highWaterMark&&(c.highWaterMark=function ie(C){return C>=te?C=te:(C--,C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,C|=C>>>16,C++),C}(C)),C<=c.length?C:c.ended?c.length:(c.needReadable=!0,0))}function $(C){var c=C._readableState;p("emitReadable",c.needReadable,c.emittedReadable),c.needReadable=!1,c.emittedReadable||(p("emitReadable",c.flowing),c.emittedReadable=!0,m.nextTick(Y,C))}function Y(C){var c=C._readableState;p("emitReadable_",c.destroyed,c.length,c.ended),!c.destroyed&&(c.length||c.ended)&&(C.emit("readable"),c.emittedReadable=!1),c.needReadable=!c.flowing&&!c.ended&&c.length<=c.highWaterMark,F(C)}function oe(C,c){c.readingMore||(c.readingMore=!0,m.nextTick(se,C,c))}function se(C,c){for(;!c.reading&&!c.ended&&(c.length<c.highWaterMark||c.flowing&&0===c.length);){var l=c.length;if(p("maybeReadMore read 0"),C.read(0),l===c.length)break}c.readingMore=!1}function K(C){var c=C._readableState;c.readableListening=C.listenerCount("readable")>0,c.resumeScheduled&&!c.paused?c.flowing=!0:C.listenerCount("data")>0&&C.resume()}function B(C){p("readable nexttick read 0"),C.read(0)}function ne(C,c){p("resume",c.reading),c.reading||C.read(0),c.resumeScheduled=!1,C.emit("resume"),F(C),c.flowing&&!c.reading&&C.read(0)}function F(C){var c=C._readableState;for(p("flow",c.flowing);c.flowing&&null!==C.read(););}function R(C,c){return 0===c.length?null:(c.objectMode?l=c.buffer.shift():!C||C>=c.length?(l=c.decoder?c.buffer.join(""):1===c.buffer.length?c.buffer.first():c.buffer.concat(c.length),c.buffer.clear()):l=c.buffer.consume(C,c.decoder),l);var l}function U(C){var c=C._readableState;p("endReadable",c.endEmitted),c.endEmitted||(c.ended=!0,m.nextTick(Q,c,C))}function Q(C,c){if(p("endReadableNT",C.endEmitted,C.length),!C.endEmitted&&0===C.length&&(C.endEmitted=!0,c.readable=!1,c.emit("end"),C.autoDestroy)){var l=c._writableState;(!l||l.autoDestroy&&l.finished)&&c.destroy()}}function X(C,c){for(var l=0,u=C.length;l<u;l++)if(C[l]===c)return l;return-1}E.prototype.read=function(C){p("read",C),C=parseInt(C,10);var c=this._readableState,l=C;if(0!==C&&(c.emittedReadable=!1),0===C&&c.needReadable&&((0!==c.highWaterMark?c.length>=c.highWaterMark:c.length>0)||c.ended))return p("read: emitReadable",c.length,c.ended),0===c.length&&c.ended?U(this):$(this),null;if(0===(C=J(C,c))&&c.ended)return 0===c.length&&U(this),null;var k,u=c.needReadable;return p("need readable",u),(0===c.length||c.length-C<c.highWaterMark)&&p("length less than watermark",u=!0),c.ended||c.reading?p("reading or ended",u=!1):u&&(p("do read"),c.reading=!0,c.sync=!0,0===c.length&&(c.needReadable=!0),this._read(c.highWaterMark),c.sync=!1,c.reading||(C=J(l,c))),null===(k=C>0?R(C,c):null)?(c.needReadable=c.length<=c.highWaterMark,C=0):(c.length-=C,c.awaitDrain=0),0===c.length&&(c.ended||(c.needReadable=!0),l!==C&&c.ended&&U(this)),null!==k&&this.emit("data",k),k},E.prototype._read=function(C){y(this,new L("_read()"))},E.prototype.pipe=function(C,c){var l=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=C;break;case 1:u.pipes=[u.pipes,C];break;default:u.pipes.push(C)}u.pipesCount+=1,p("pipe count=%d opts=%j",u.pipesCount,c);var D=c&&!1===c.end||C===m.stdout||C===m.stderr?ge:ee;function G(be,we){p("onunpipe"),be===l&&we&&!1===we.hasUnpiped&&(we.hasUnpiped=!0,function fe(){p("cleanup"),C.removeListener("close",ye),C.removeListener("finish",ve),C.removeListener("drain",ae),C.removeListener("error",ue),C.removeListener("unpipe",G),l.removeListener("end",ee),l.removeListener("end",ge),l.removeListener("data",he),le=!0,u.awaitDrain&&(!C._writableState||C._writableState.needDrain)&&ae()}())}function ee(){p("onend"),C.end()}u.endEmitted?m.nextTick(D):l.once("end",D),C.on("unpipe",G);var ae=function re(C){return function(){var l=C._readableState;p("pipeOnDrain",l.awaitDrain),l.awaitDrain&&l.awaitDrain--,0===l.awaitDrain&&s(C,"data")&&(l.flowing=!0,F(C))}}(l);C.on("drain",ae);var le=!1;function he(be){p("ondata");var we=C.write(be);p("dest.write",we),!1===we&&((1===u.pipesCount&&u.pipes===C||u.pipesCount>1&&-1!==X(u.pipes,C))&&!le&&(p("false write response, pause",u.awaitDrain),u.awaitDrain++),l.pause())}function ue(be){p("onerror",be),ge(),C.removeListener("error",ue),0===s(C,"error")&&y(C,be)}function ye(){C.removeListener("finish",ve),ge()}function ve(){p("onfinish"),C.removeListener("close",ye),ge()}function ge(){p("unpipe"),l.unpipe(C)}return l.on("data",he),function j(C,c,l){if("function"==typeof C.prependListener)return C.prependListener(c,l);C._events&&C._events[c]?Array.isArray(C._events[c])?C._events[c].unshift(l):C._events[c]=[l,C._events[c]]:C.on(c,l)}(C,"error",ue),C.once("close",ye),C.once("finish",ve),C.emit("pipe",l),u.flowing||(p("pipe resume"),l.resume()),C},E.prototype.unpipe=function(C){var c=this._readableState,l={hasUnpiped:!1};if(0===c.pipesCount)return this;if(1===c.pipesCount)return C&&C!==c.pipes||(C||(C=c.pipes),c.pipes=null,c.pipesCount=0,c.flowing=!1,C&&C.emit("unpipe",this,l)),this;if(!C){var u=c.pipes,k=c.pipesCount;c.pipes=null,c.pipesCount=0,c.flowing=!1;for(var D=0;D<k;D++)u[D].emit("unpipe",this,{hasUnpiped:!1});return this}var G=X(c.pipes,C);return-1===G||(c.pipes.splice(G,1),c.pipesCount-=1,1===c.pipesCount&&(c.pipes=c.pipes[0]),C.emit("unpipe",this,l)),this},E.prototype.addListener=E.prototype.on=function(C,c){var l=t.prototype.on.call(this,C,c),u=this._readableState;return"data"===C?(u.readableListening=this.listenerCount("readable")>0,!1!==u.flowing&&this.resume()):"readable"===C&&!u.endEmitted&&!u.readableListening&&(u.readableListening=u.needReadable=!0,u.flowing=!1,u.emittedReadable=!1,p("on readable",u.length,u.reading),u.length?$(this):u.reading||m.nextTick(B,this)),l},E.prototype.removeListener=function(C,c){var l=t.prototype.removeListener.call(this,C,c);return"readable"===C&&m.nextTick(K,this),l},E.prototype.removeAllListeners=function(C){var c=t.prototype.removeAllListeners.apply(this,arguments);return("readable"===C||void 0===C)&&m.nextTick(K,this),c},E.prototype.resume=function(){var C=this._readableState;return C.flowing||(p("resume"),C.flowing=!C.readableListening,function Z(C,c){c.resumeScheduled||(c.resumeScheduled=!0,m.nextTick(ne,C,c))}(this,C)),C.paused=!1,this},E.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(C){var c=this,l=this._readableState,u=!1;for(var k in C.on("end",function(){if(p("wrapped end"),l.decoder&&!l.ended){var G=l.decoder.end();G&&G.length&&c.push(G)}c.push(null)}),C.on("data",function(G){p("wrapped data"),l.decoder&&(G=l.decoder.write(G)),l.objectMode&&null==G||!(l.objectMode||G&&G.length)||c.push(G)||(u=!0,C.pause())}),C)void 0===this[k]&&"function"==typeof C[k]&&(this[k]=function(ee){return function(){return C[ee].apply(C,arguments)}}(k));for(var D=0;D<I.length;D++)C.on(I[D],this.emit.bind(this,I[D]));return this._read=function(G){p("wrapped _read",G),u&&(u=!1,C.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=A("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(c){this._readableState&&(this._readableState.flowing=c)}}),E._fromList=R,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(C,c){return void 0===_&&(_=A("./internal/streams/from")),_(E,C,c)})}).call(this)}).call(this,A("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(A,W,V){"use strict";W.exports=e;var m=A("../errors").codes,b=m.ERR_METHOD_NOT_IMPLEMENTED,g=m.ERR_MULTIPLE_CALLBACK,d=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=m.ERR_TRANSFORM_WITH_LENGTH_0,t=A("./_stream_duplex");function r(a,p){var v=this._transformState;v.transforming=!1;var h=v.writecb;if(null===h)return this.emit("error",new g);v.writechunk=null,v.writecb=null,null!=p&&this.push(p),h(a);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);t.call(this,a),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",n)}function n(){var a=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush(function(p,v){o(a,p,v)})}function o(a,p,v){if(p)return a.emit("error",p);if(null!=v&&a.push(v),a._writableState.length)throw new s;if(a._transformState.transforming)throw new d;return a.push(null)}A("inherits")(e,t),e.prototype.push=function(a,p){return this._transformState.needTransform=!1,t.prototype.push.call(this,a,p)},e.prototype._transform=function(a,p,v){v(new b("_transform()"))},e.prototype._write=function(a,p,v){var h=this._transformState;if(h.writecb=v,h.writechunk=a,h.writeencoding=p,!h.transforming){var i=this._readableState;(h.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},e.prototype._read=function(a){var p=this._transformState;null===p.writechunk||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},e.prototype._destroy=function(a,p){t.prototype._destroy.call(this,a,function(v){p(v)})}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(A,W,V){(function(m,b){(function(){"use strict";function d(F){var R=this;this.next=null,this.entry=null,this.finish=function(){!function ne(F,R,U){var Q=F.entry;for(F.entry=null;Q;){var X=Q.callback;R.pendingcb--,X(U),Q=Q.next}R.corkedRequestsFree.next=F}(R,F)}}var s;W.exports=N,N.WritableState=I;var t={deprecate:A("util-deprecate")},r=A("./internal/streams/stream"),e=A("buffer").Buffer,n=b.Uint8Array||function(){};var j,p=A("./internal/streams/destroy"),h=A("./internal/streams/state").getHighWaterMark,i=A("../errors").codes,w=i.ERR_INVALID_ARG_TYPE,T=i.ERR_METHOD_NOT_IMPLEMENTED,x=i.ERR_MULTIPLE_CALLBACK,P=i.ERR_STREAM_CANNOT_PIPE,L=i.ERR_STREAM_DESTROYED,M=i.ERR_STREAM_NULL_VALUES,q=i.ERR_STREAM_WRITE_AFTER_END,f=i.ERR_UNKNOWN_ENCODING,_=p.errorOrDestroy;function y(){}function I(F,R,U){s=s||A("./_stream_duplex"),"boolean"!=typeof U&&(U=R instanceof s),this.objectMode=!!(F=F||{}).objectMode,U&&(this.objectMode=this.objectMode||!!F.writableObjectMode),this.highWaterMark=h(this,F,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===F.decodeStrings),this.defaultEncoding=F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){!function H(F,R){var U=F._writableState,Q=U.sync,X=U.writecb;if("function"!=typeof X)throw new x;if(function J(F){F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0}(U),R)!function ie(F,R,U,Q,X){--R.pendingcb,U?(m.nextTick(X,Q),m.nextTick(B,F,R),F._writableState.errorEmitted=!0,_(F,Q)):(X(Q),F._writableState.errorEmitted=!0,_(F,Q),B(F,R))}(F,U,Q,R,X);else{var C=se(U)||F.destroyed;!C&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&oe(F,U),Q?m.nextTick($,F,U,C,X):$(F,U,C,X)}}(R,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==F.emitClose,this.autoDestroy=!!F.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function N(F){var R=this instanceof(s=s||A("./_stream_duplex"));if(!R&&!j.call(N,this))return new N(F);this._writableState=new I(F,this,R),this.writable=!0,F&&("function"==typeof F.write&&(this._write=F.write),"function"==typeof F.writev&&(this._writev=F.writev),"function"==typeof F.destroy&&(this._destroy=F.destroy),"function"==typeof F.final&&(this._final=F.final)),r.call(this)}function z(F,R,U,Q,X,C){if(!U){var c=function O(F,R,U){return!F.objectMode&&!1!==F.decodeStrings&&"string"==typeof R&&(R=e.from(R,U)),R}(R,Q,X);Q!==c&&(U=!0,X="buffer",Q=c)}var l=R.objectMode?1:Q.length;R.length+=l;var u=R.length<R.highWaterMark;if(u||(R.needDrain=!0),R.writing||R.corked){var k=R.lastBufferedRequest;R.lastBufferedRequest={chunk:Q,encoding:X,isBuf:U,callback:C,next:null},k?k.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else te(F,R,!1,l,Q,X,C);return u}function te(F,R,U,Q,X,C,c){R.writelen=Q,R.writecb=c,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new L("write")):U?F._writev(X,R.onwrite):F._write(X,C,R.onwrite),R.sync=!1}function $(F,R,U,Q){U||function Y(F,R){0===R.length&&R.needDrain&&(R.needDrain=!1,F.emit("drain"))}(F,R),R.pendingcb--,Q(),B(F,R)}function oe(F,R){R.bufferProcessing=!0;var U=R.bufferedRequest;if(F._writev&&U&&U.next){var X=new Array(R.bufferedRequestCount),C=R.corkedRequestsFree;C.entry=U;for(var c=0,l=!0;U;)X[c]=U,U.isBuf||(l=!1),U=U.next,c+=1;X.allBuffers=l,te(F,R,!0,R.length,X,"",C.finish),R.pendingcb++,R.lastBufferedRequest=null,C.next?(R.corkedRequestsFree=C.next,C.next=null):R.corkedRequestsFree=new d(R),R.bufferedRequestCount=0}else{for(;U;){var u=U.chunk;if(te(F,R,!1,R.objectMode?1:u.length,u,U.encoding,U.callback),U=U.next,R.bufferedRequestCount--,R.writing)break}null===U&&(R.lastBufferedRequest=null)}R.bufferedRequest=U,R.bufferProcessing=!1}function se(F){return F.ending&&0===F.length&&null===F.bufferedRequest&&!F.finished&&!F.writing}function re(F,R){F._final(function(U){R.pendingcb--,U&&_(F,U),R.prefinished=!0,F.emit("prefinish"),B(F,R)})}function B(F,R){var U=se(R);if(U&&(function K(F,R){!R.prefinished&&!R.finalCalled&&("function"!=typeof F._final||R.destroyed?(R.prefinished=!0,F.emit("prefinish")):(R.pendingcb++,R.finalCalled=!0,m.nextTick(re,F,R)))}(F,R),0===R.pendingcb&&(R.finished=!0,F.emit("finish"),R.autoDestroy))){var Q=F._readableState;(!Q||Q.autoDestroy&&Q.endEmitted)&&F.destroy()}return U}A("inherits")(N,r),I.prototype.getBuffer=function(){for(var R=this.bufferedRequest,U=[];R;)U.push(R),R=R.next;return U},function(){try{Object.defineProperty(I.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(R){return!!j.call(this,R)||this===N&&R&&R._writableState instanceof I}})):j=function(R){return R instanceof this},N.prototype.pipe=function(){_(this,new P)},N.prototype.write=function(F,R,U){var Q=this._writableState,X=!1,C=!Q.objectMode&&function a(F){return e.isBuffer(F)||F instanceof n}(F);return C&&!e.isBuffer(F)&&(F=function o(F){return e.from(F)}(F)),"function"==typeof R&&(U=R,R=null),C?R="buffer":R||(R=Q.defaultEncoding),"function"!=typeof U&&(U=y),Q.ending?function E(F,R){var U=new q;_(F,U),m.nextTick(R,U)}(this,U):(C||function S(F,R,U,Q){var X;return null===U?X=new M:"string"!=typeof U&&!R.objectMode&&(X=new w("chunk",["string","Buffer"],U)),!X||(_(F,X),m.nextTick(Q,X),!1)}(this,Q,F,U))&&(Q.pendingcb++,X=z(this,Q,C,F,R,U)),X},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,!F.writing&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&oe(this,F))},N.prototype.setDefaultEncoding=function(R){if("string"==typeof R&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new f(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),N.prototype._write=function(F,R,U){U(new T("_write()"))},N.prototype._writev=null,N.prototype.end=function(F,R,U){var Q=this._writableState;return"function"==typeof F?(U=F,F=null,R=null):"function"==typeof R&&(U=R,R=null),null!=F&&this.write(F,R),Q.corked&&(Q.corked=1,this.uncork()),Q.ending||function Z(F,R,U){R.ending=!0,B(F,R),U&&(R.finished?m.nextTick(U):F.once("finish",U)),R.ended=!0,F.writable=!1}(this,Q,U),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),N.prototype.destroy=p.destroy,N.prototype._undestroy=p.undestroy,N.prototype._destroy=function(F,R){R(F)}}).call(this)}).call(this,A("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(A,W,V){(function(m){(function(){"use strict";var b;function g(P,L,M){return L in P?Object.defineProperty(P,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):P[L]=M,P}var d=A("./end-of-stream"),s=Symbol("lastResolve"),t=Symbol("lastReject"),r=Symbol("error"),e=Symbol("ended"),n=Symbol("lastPromise"),o=Symbol("handlePromise"),a=Symbol("stream");function p(P,L){return{value:P,done:L}}function v(P){var L=P[s];if(null!==L){var M=P[a].read();null!==M&&(P[n]=null,P[s]=null,P[t]=null,L(p(M,!1)))}}function h(P){m.nextTick(v,P)}var w=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((g(b={get stream(){return this[a]},next:function(){var L=this,M=this[r];if(null!==M)return Promise.reject(M);if(this[e])return Promise.resolve(p(void 0,!0));if(this[a].destroyed)return new Promise(function(y,I){m.nextTick(function(){L[r]?I(L[r]):y(p(void 0,!0))})});var f,q=this[n];if(q)f=new Promise(function i(P,L){return function(M,q){P.then(function(){L[e]?M(p(void 0,!0)):L[o](M,q)},q)}}(q,this));else{var _=this[a].read();if(null!==_)return Promise.resolve(p(_,!1));f=new Promise(this[o])}return this[n]=f,f}},Symbol.asyncIterator,function(){return this}),g(b,"return",function(){var L=this;return new Promise(function(M,q){L[a].destroy(null,function(f){f?q(f):M(p(void 0,!0))})})}),b),w);W.exports=function(L){var M,q=Object.create(T,(g(M={},a,{value:L,writable:!0}),g(M,s,{value:null,writable:!0}),g(M,t,{value:null,writable:!0}),g(M,r,{value:null,writable:!0}),g(M,e,{value:L._readableState.endEmitted,writable:!0}),g(M,o,{value:function(_,y){var I=q[a].read();I?(q[n]=null,q[s]=null,q[t]=null,_(p(I,!1))):(q[s]=_,q[t]=y)},writable:!0}),M));return q[n]=null,d(L,function(f){if(f&&"ERR_STREAM_PREMATURE_CLOSE"!==f.code){var _=q[t];return null!==_&&(q[n]=null,q[s]=null,q[t]=null,_(f)),void(q[r]=f)}var y=q[s];null!==y&&(q[n]=null,q[s]=null,q[t]=null,y(p(void 0,!0))),q[e]=!0}),L.on("readable",h.bind(null,q)),q}}).call(this)}).call(this,A("_process"))},{"./end-of-stream":64,_process:50}],62:[function(A,W,V){"use strict";function m(v,h){var i=Object.keys(v);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(v);h&&(w=w.filter(function(T){return Object.getOwnPropertyDescriptor(v,T).enumerable})),i.push.apply(i,w)}return i}function g(v,h,i){return h in v?Object.defineProperty(v,h,{value:i,enumerable:!0,configurable:!0,writable:!0}):v[h]=i,v}function s(v,h){for(var i=0;i<h.length;i++){var w=h[i];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}var e=A("buffer").Buffer,o=A("util").inspect,a=o&&o.custom||"inspect";function p(v,h,i){e.prototype.copy.call(v,h,i)}W.exports=function(){function v(){(function d(v,h){if(!(v instanceof h))throw new TypeError("Cannot call a class as a function")})(this,v),this.head=null,this.tail=null,this.length=0}return function t(v,h,i){return h&&s(v.prototype,h),i&&s(v,i),v}(v,[{key:"push",value:function(i){var w={data:i,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(i){var w={data:i,next:this.head};0===this.length&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(0!==this.length){var i=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(0===this.length)return"";for(var w=this.head,T=""+w.data;w=w.next;)T+=i+w.data;return T}},{key:"concat",value:function(i){if(0===this.length)return e.alloc(0);for(var w=e.allocUnsafe(i>>>0),T=this.head,x=0;T;)p(T.data,w,x),x+=T.data.length,T=T.next;return w}},{key:"consume",value:function(i,w){var T;return i<this.head.data.length?(T=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):T=i===this.head.data.length?this.shift():w?this._getString(i):this._getBuffer(i),T}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var w=this.head,T=1,x=w.data;for(i-=x.length;w=w.next;){var P=w.data,L=i>P.length?P.length:i;if(x+=L===P.length?P:P.slice(0,i),0==(i-=L)){L===P.length?(++T,this.head=w.next?w.next:this.tail=null):(this.head=w,w.data=P.slice(L));break}++T}return this.length-=T,x}},{key:"_getBuffer",value:function(i){var w=e.allocUnsafe(i),T=this.head,x=1;for(T.data.copy(w),i-=T.data.length;T=T.next;){var P=T.data,L=i>P.length?P.length:i;if(P.copy(w,w.length-i,0,L),0==(i-=L)){L===P.length?(++x,this.head=T.next?T.next:this.tail=null):(this.head=T,T.data=P.slice(L));break}++x}return this.length-=x,w}},{key:a,value:function(i,w){return o(this,function b(v){for(var h=1;h<arguments.length;h++){var i=null!=arguments[h]?arguments[h]:{};h%2?m(Object(i),!0).forEach(function(w){g(v,w,i[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach(function(w){Object.defineProperty(v,w,Object.getOwnPropertyDescriptor(i,w))})}return v}({},w,{depth:0,customInspect:!1}))}}]),v}()},{buffer:17,util:16}],63:[function(A,W,V){(function(m){(function(){"use strict";function g(e,n){t(e,n),d(e)}function d(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function t(e,n){e.emit("error",n)}W.exports={destroy:function b(e,n){var o=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(n?n(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,m.nextTick(t,this,e)):m.nextTick(t,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(v){!n&&v?o._writableState?o._writableState.errorEmitted?m.nextTick(d,o):(o._writableState.errorEmitted=!0,m.nextTick(g,o,v)):m.nextTick(g,o,v):n?(m.nextTick(d,o),n(v)):m.nextTick(d,o)}),this)},undestroy:function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function r(e,n){var o=e._readableState,a=e._writableState;o&&o.autoDestroy||a&&a.autoDestroy?e.destroy(n):e.emit("error",n)}}}).call(this)}).call(this,A("_process"))},{_process:50}],64:[function(A,W,V){"use strict";var m=A("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function g(){}W.exports=function s(t,r,e){if("function"==typeof r)return s(t,null,r);r||(r={}),e=function b(t){var r=!1;return function(){if(!r){r=!0;for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.apply(this,n)}}}(e||g);var n=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,a=function(){t.writable||v()},p=t._writableState&&t._writableState.finished,v=function(){o=!1,p=!0,n||e.call(t)},h=t._readableState&&t._readableState.endEmitted,i=function(){n=!1,h=!0,o||e.call(t)},w=function(L){e.call(t,L)},T=function(){var L;return n&&!h?((!t._readableState||!t._readableState.ended)&&(L=new m),e.call(t,L)):o&&!p?((!t._writableState||!t._writableState.ended)&&(L=new m),e.call(t,L)):void 0},x=function(){t.req.on("finish",v)};return function d(t){return t.setHeader&&"function"==typeof t.abort}(t)?(t.on("complete",v),t.on("abort",T),t.req?x():t.on("request",x)):o&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",i),t.on("finish",v),!1!==r.error&&t.on("error",w),t.on("close",T),function(){t.removeListener("complete",v),t.removeListener("abort",T),t.removeListener("request",x),t.req&&t.req.removeListener("finish",v),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",v),t.removeListener("end",i),t.removeListener("error",w),t.removeListener("close",T)}}},{"../../../errors":55}],65:[function(A,W,V){W.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(A,W,V){"use strict";var m;var g=A("../../../errors").codes,d=g.ERR_MISSING_ARGS,s=g.ERR_STREAM_DESTROYED;function t(v){if(v)throw v}function n(v){v()}function o(v,h){return v.pipe(h)}W.exports=function p(){for(var v=arguments.length,h=new Array(v),i=0;i<v;i++)h[i]=arguments[i];var w=function a(v){return v.length&&"function"==typeof v[v.length-1]?v.pop():t}(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new d("streams");var T,x=h.map(function(P,L){var M=L<h.length-1;return function e(v,h,i,w){w=function b(v){var h=!1;return function(){h||(h=!0,v.apply(void 0,arguments))}}(w);var T=!1;v.on("close",function(){T=!0}),void 0===m&&(m=A("./end-of-stream")),m(v,{readable:h,writable:i},function(P){if(P)return w(P);T=!0,w()});var x=!1;return function(P){if(!T&&!x){if(x=!0,function r(v){return v.setHeader&&"function"==typeof v.abort}(v))return v.abort();if("function"==typeof v.destroy)return v.destroy();w(P||new s("pipe"))}}}(P,M,L>0,function(f){T||(T=f),f&&x.forEach(n),!M&&(x.forEach(n),w(T))})});return h.reduce(o)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(A,W,V){"use strict";var m=A("../../../errors").codes.ERR_INVALID_OPT_VALUE;W.exports={getHighWaterMark:function g(d,s,t,r){var e=function b(d,s,t){return null!=d.highWaterMark?d.highWaterMark:s?d[t]:null}(s,r,t);if(null!=e){if(!isFinite(e)||Math.floor(e)!==e||e<0)throw new m(r?t:"highWaterMark",e);return Math.floor(e)}return d.objectMode?16:16384}}},{"../../../errors":55}],68:[function(A,W,V){W.exports=A("events").EventEmitter},{events:22}],69:[function(A,W,V){(V=W.exports=A("./lib/_stream_readable.js")).Stream=V,V.Readable=V,V.Writable=A("./lib/_stream_writable.js"),V.Duplex=A("./lib/_stream_duplex.js"),V.Transform=A("./lib/_stream_transform.js"),V.PassThrough=A("./lib/_stream_passthrough.js"),V.finished=A("./lib/internal/streams/end-of-stream.js"),V.pipeline=A("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(A,W,V){"use strict";function m(g,d,s){var t=this;this._callback=g,this._args=s,this._interval=setInterval(g,d,this._args),this.reschedule=function(r){r||(r=t._interval),t._interval&&clearInterval(t._interval),t._interval=setInterval(t._callback,r,t._args)},this.clear=function(){t._interval&&(clearInterval(t._interval),t._interval=void 0)},this.destroy=function(){t._interval&&clearInterval(t._interval),t._callback=void 0,t._interval=void 0,t._args=void 0}}W.exports=function b(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var g;if(arguments.length>0){g=new Array(arguments.length-2);for(var d=0;d<g.length;d++)g[d]=arguments[d+2]}return new m(arguments[0],arguments[1],g)}},{}],71:[function(A,W,V){"use strict";W.exports=A("./index.js")()},{"./index.js":72}],72:[function(A,W,V){(function(m){(function(){"use strict";function b(s){return s instanceof m?m.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}W.exports=function g(s){return(s=s||{}).circles?function d(s){var t=[],r=[];return s.proto?o:n;function e(a,p){for(var v=Object.keys(a),h=new Array(v.length),i=0;i<v.length;i++){var w=v[i],T=a[w];if("object"!=typeof T||null===T)h[w]=T;else if(T instanceof Date)h[w]=new Date(T);else if(ArrayBuffer.isView(T))h[w]=b(T);else{var x=t.indexOf(T);h[w]=-1!==x?r[x]:p(T)}}return h}function n(a){if("object"!=typeof a||null===a)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return e(a,n);if(a instanceof Map)return new Map(e(Array.from(a),n));if(a instanceof Set)return new Set(e(Array.from(a),n));var p={};for(var v in t.push(a),r.push(p),a)if(!1!==Object.hasOwnProperty.call(a,v)){var h=a[v];if("object"!=typeof h||null===h)p[v]=h;else if(h instanceof Date)p[v]=new Date(h);else if(h instanceof Map)p[v]=new Map(e(Array.from(h),n));else if(h instanceof Set)p[v]=new Set(e(Array.from(h),n));else if(ArrayBuffer.isView(h))p[v]=b(h);else{var i=t.indexOf(h);p[v]=-1!==i?r[i]:n(h)}}return t.pop(),r.pop(),p}function o(a){if("object"!=typeof a||null===a)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return e(a,o);if(a instanceof Map)return new Map(e(Array.from(a),o));if(a instanceof Set)return new Set(e(Array.from(a),o));var p={};for(var v in t.push(a),r.push(p),a){var h=a[v];if("object"!=typeof h||null===h)p[v]=h;else if(h instanceof Date)p[v]=new Date(h);else if(h instanceof Map)p[v]=new Map(e(Array.from(h),o));else if(h instanceof Set)p[v]=new Set(e(Array.from(h),o));else if(ArrayBuffer.isView(h))p[v]=b(h);else{var i=t.indexOf(h);p[v]=-1!==i?r[i]:o(h)}}return t.pop(),r.pop(),p}}(s):s.proto?function e(n){if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,e);if(n instanceof Map)return new Map(t(Array.from(n),e));if(n instanceof Set)return new Set(t(Array.from(n),e));var o={};for(var a in n){var p=n[a];o[a]="object"!=typeof p||null===p?p:p instanceof Date?new Date(p):p instanceof Map?new Map(t(Array.from(p),e)):p instanceof Set?new Set(t(Array.from(p),e)):ArrayBuffer.isView(p)?b(p):e(p)}return o}:function r(n){if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,r);if(n instanceof Map)return new Map(t(Array.from(n),r));if(n instanceof Set)return new Set(t(Array.from(n),r));var o={};for(var a in n)if(!1!==Object.hasOwnProperty.call(n,a)){var p=n[a];o[a]="object"!=typeof p||null===p?p:p instanceof Date?new Date(p):p instanceof Map?new Map(t(Array.from(p),r)):p instanceof Set?new Set(t(Array.from(p),r)):ArrayBuffer.isView(p)?b(p):r(p)}return o};function t(n,o){for(var a=Object.keys(n),p=new Array(a.length),v=0;v<a.length;v++){var h=a[v],i=n[h];p[h]="object"!=typeof i||null===i?i:i instanceof Date?new Date(i):ArrayBuffer.isView(i)?b(i):o(i)}return p}}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],73:[function(A,W,V){var m=A("buffer"),b=m.Buffer;function g(s,t){for(var r in s)t[r]=s[r]}function d(s,t,r){return b(s,t,r)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?W.exports=m:(g(m,V),V.Buffer=d),d.prototype=Object.create(b.prototype),g(b,d),d.from=function(s,t,r){if("number"==typeof s)throw new TypeError("Argument must not be a number");return b(s,t,r)},d.alloc=function(s,t,r){if("number"!=typeof s)throw new TypeError("Argument must be a number");var e=b(s);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},d.allocUnsafe=function(s){if("number"!=typeof s)throw new TypeError("Argument must be a number");return b(s)},d.allocUnsafeSlow=function(s){if("number"!=typeof s)throw new TypeError("Argument must be a number");return m.SlowBuffer(s)}},{buffer:17}],74:[function(A,W,V){W.exports=function m(g){var d=g._readableState;return d?d.objectMode||"number"==typeof g._duplexState?g.read():g.read(function b(g){return g.buffer.length?g.buffer.head?g.buffer.head.data.length:g.buffer[0].length:g.length}(d)):null}},{}],75:[function(A,W,V){"use strict";var m=A("safe-buffer").Buffer,b=m.isEncoding||function(x){switch((x=""+x)&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(x){var P;switch(this.encoding=function d(x){var P=function g(x){if(!x)return"utf8";for(var P;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(P)return;x=(""+x).toLowerCase(),P=!0}}(x);if("string"!=typeof P&&(m.isEncoding===b||!b(x)))throw new Error("Unknown encoding: "+x);return P||x}(x),this.encoding){case"utf16le":this.text=p,this.end=v,P=4;break;case"utf8":this.fillLast=n,P=4;break;case"base64":this.text=h,this.end=i,P=3;break;default:return this.write=w,void(this.end=T)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(P)}function t(x){return x<=127?0:x>>5==6?2:x>>4==14?3:x>>3==30?4:x>>6==2?-1:-2}function n(x){var P=this.lastTotal-this.lastNeed,L=function e(x,P,L){if(128!=(192&P[0]))return x.lastNeed=0,"\ufffd";if(x.lastNeed>1&&P.length>1){if(128!=(192&P[1]))return x.lastNeed=1,"\ufffd";if(x.lastNeed>2&&P.length>2&&128!=(192&P[2]))return x.lastNeed=2,"\ufffd"}}(this,x);return void 0!==L?L:this.lastNeed<=x.length?(x.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(x.copy(this.lastChar,P,0,x.length),void(this.lastNeed-=x.length))}function p(x,P){if((x.length-P)%2==0){var L=x.toString("utf16le",P);if(L){var M=L.charCodeAt(L.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],L.slice(0,-1)}return L}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",P,x.length-1)}function v(x){var P=x&&x.length?this.write(x):"";return this.lastNeed?P+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):P}function h(x,P){var L=(x.length-P)%3;return 0===L?x.toString("base64",P):(this.lastNeed=3-L,this.lastTotal=3,1===L?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",P,x.length-L))}function i(x){var P=x&&x.length?this.write(x):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function w(x){return x.toString(this.encoding)}function T(x){return x&&x.length?this.write(x):""}V.StringDecoder=s,s.prototype.write=function(x){if(0===x.length)return"";var P,L;if(this.lastNeed){if(void 0===(P=this.fillLast(x)))return"";L=this.lastNeed,this.lastNeed=0}else L=0;return L<x.length?P?P+this.text(x,L):this.text(x,L):P||""},s.prototype.end=function a(x){var P=x&&x.length?this.write(x):"";return this.lastNeed?P+"\ufffd":P},s.prototype.text=function o(x,P){var L=function r(x,P,L){var M=P.length-1;if(M<L)return 0;var q=t(P[M]);return q>=0?(q>0&&(x.lastNeed=q-1),q):--M<L||-2===q?0:(q=t(P[M]))>=0?(q>0&&(x.lastNeed=q-2),q):--M<L||-2===q?0:(q=t(P[M]))>=0?(q>0&&(2===q?q=0:x.lastNeed=q-3),q):0}(this,x,P);if(!this.lastNeed)return x.toString("utf8",P);this.lastTotal=L;var M=x.length-(L-this.lastNeed);return x.copy(this.lastChar,0,M),x.toString("utf8",P,M)},s.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length}},{"safe-buffer":73}],76:[function(A,W,V){"use strict";var m=A("punycode"),b=A("./util");function g(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}V.parse=P,V.resolve=function M(f,_){return P(f,!1,!0).resolve(_)},V.resolveObject=function q(f,_){return f?P(f,!1,!0).resolveObject(_):_},V.format=function L(f){return b.isString(f)&&(f=P(f)),f instanceof g?f.format():g.prototype.format.call(f)},V.Url=g;var d=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,t=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,e=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),n=["'"].concat(e),o=["%","/","?",";","#"].concat(n),a=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,i={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=A("querystring");function P(f,_,y){if(f&&b.isObject(f)&&f instanceof g)return f;var I=new g;return I.parse(f,_,y),I}g.prototype.parse=function(f,_,y){if(!b.isString(f))throw new TypeError("Parameter 'url' must be a string, not "+typeof f);var I=f.indexOf("?"),j=-1!==I&&I<f.indexOf("#")?"?":"#",N=f.split(j);N[0]=N[0].replace(/\\/g,"/");var S=f=N.join(j);if(S=S.trim(),!y&&1===f.split("#").length){var O=t.exec(S);if(O)return this.path=S,this.href=S,this.pathname=O[1],O[2]?(this.search=O[2],this.query=_?x.parse(this.search.substr(1)):this.search.substr(1)):_&&(this.search="",this.query={}),this}var z=d.exec(S);if(z){var te=(z=z[0]).toLowerCase();this.protocol=te,S=S.substr(z.length)}if(y||z||S.match(/^\/\/[^@\/]+@[^@\/]+/)){var ie="//"===S.substr(0,2);ie&&(!z||!w[z])&&(S=S.substr(2),this.slashes=!0)}if(!w[z]&&(ie||z&&!T[z])){for(var J=-1,H=0;H<a.length;H++)-1!==($=S.indexOf(a[H]))&&(-1===J||$<J)&&(J=$);var Y,oe;for(-1!==(oe=-1===J?S.lastIndexOf("@"):S.lastIndexOf("@",J))&&(Y=S.slice(0,oe),S=S.slice(oe+1),this.auth=decodeURIComponent(Y)),J=-1,H=0;H<o.length;H++){var $;-1!==($=S.indexOf(o[H]))&&(-1===J||$<J)&&(J=$)}-1===J&&(J=S.length),this.host=S.slice(0,J),S=S.slice(J),this.parseHost(),this.hostname=this.hostname||"";var se="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!se)for(var re=this.hostname.split(/\./),K=(H=0,re.length);H<K;H++){var B=re[H];if(B&&!B.match(v)){for(var Z="",ne=0,F=B.length;ne<F;ne++)B.charCodeAt(ne)>127?Z+="x":Z+=B[ne];if(!Z.match(v)){var R=re.slice(0,H),U=re.slice(H+1),Q=B.match(h);Q&&(R.push(Q[1]),U.unshift(Q[2])),U.length&&(S="/"+U.join(".")+S),this.hostname=R.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),se||(this.hostname=m.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,se&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==S[0]&&(S="/"+S))}if(!i[te])for(H=0,K=n.length;H<K;H++){var c=n[H];if(-1!==S.indexOf(c)){var l=encodeURIComponent(c);l===c&&(l=escape(c)),S=S.split(c).join(l)}}var u=S.indexOf("#");-1!==u&&(this.hash=S.substr(u),S=S.slice(0,u));var k=S.indexOf("?");return-1!==k?(this.search=S.substr(k),this.query=S.substr(k+1),_&&(this.query=x.parse(this.query)),S=S.slice(0,k)):_&&(this.search="",this.query={}),S&&(this.pathname=S),T[te]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},g.prototype.format=function(){var f=this.auth||"";f&&(f=(f=encodeURIComponent(f)).replace(/%3A/i,":"),f+="@");var _=this.protocol||"",y=this.pathname||"",I=this.hash||"",j=!1,N="";this.host?j=f+this.host:this.hostname&&(j=f+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(j+=":"+this.port)),this.query&&b.isObject(this.query)&&Object.keys(this.query).length&&(N=x.stringify(this.query));var E=this.search||N&&"?"+N||"";return _&&":"!==_.substr(-1)&&(_+=":"),this.slashes||(!_||T[_])&&!1!==j?(j="//"+(j||""),y&&"/"!==y.charAt(0)&&(y="/"+y)):j||(j=""),I&&"#"!==I.charAt(0)&&(I="#"+I),E&&"?"!==E.charAt(0)&&(E="?"+E),_+j+(y=y.replace(/[?#]/g,function(S){return encodeURIComponent(S)}))+(E=E.replace("#","%23"))+I},g.prototype.resolve=function(f){return this.resolveObject(P(f,!1,!0)).format()},g.prototype.resolveObject=function(f){if(b.isString(f)){var _=new g;_.parse(f,!1,!0),f=_}for(var y=new g,I=Object.keys(this),j=0;j<I.length;j++){var N=I[j];y[N]=this[N]}if(y.hash=f.hash,""===f.href)return y.href=y.format(),y;if(f.slashes&&!f.protocol){for(var E=Object.keys(f),S=0;S<E.length;S++){var O=E[S];"protocol"!==O&&(y[O]=f[O])}return T[y.protocol]&&y.hostname&&!y.pathname&&(y.path=y.pathname="/"),y.href=y.format(),y}if(f.protocol&&f.protocol!==y.protocol){if(!T[f.protocol]){for(var z=Object.keys(f),te=0;te<z.length;te++){var ie=z[te];y[ie]=f[ie]}return y.href=y.format(),y}if(y.protocol=f.protocol,f.host||w[f.protocol])y.pathname=f.pathname;else{for(var K=(f.pathname||"").split("/");K.length&&!(f.host=K.shift()););f.host||(f.host=""),f.hostname||(f.hostname=""),""!==K[0]&&K.unshift(""),K.length<2&&K.unshift(""),y.pathname=K.join("/")}return y.search=f.search,y.query=f.query,y.host=f.host||"",y.auth=f.auth,y.hostname=f.hostname||f.host,y.port=f.port,(y.pathname||y.search)&&(y.path=(y.pathname||"")+(y.search||"")),y.slashes=y.slashes||f.slashes,y.href=y.format(),y}var $=y.pathname&&"/"===y.pathname.charAt(0),Y=f.host||f.pathname&&"/"===f.pathname.charAt(0),oe=Y||$||y.host&&f.pathname,se=oe,re=y.pathname&&y.pathname.split("/")||[],B=(K=f.pathname&&f.pathname.split("/")||[],y.protocol&&!T[y.protocol]);if(B&&(y.hostname="",y.port=null,y.host&&(""===re[0]?re[0]=y.host:re.unshift(y.host)),y.host="",f.protocol&&(f.hostname=null,f.port=null,f.host&&(""===K[0]?K[0]=f.host:K.unshift(f.host)),f.host=null),oe=oe&&(""===K[0]||""===re[0])),Y)y.host=f.host||""===f.host?f.host:y.host,y.hostname=f.hostname||""===f.hostname?f.hostname:y.hostname,y.search=f.search,y.query=f.query,re=K;else if(K.length)re||(re=[]),re.pop(),re=re.concat(K),y.search=f.search,y.query=f.query;else if(!b.isNullOrUndefined(f.search))return B&&(y.hostname=y.host=re.shift(),(Z=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=Z.shift(),y.host=y.hostname=Z.shift())),y.search=f.search,y.query=f.query,(!b.isNull(y.pathname)||!b.isNull(y.search))&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.href=y.format(),y;if(!re.length)return y.pathname=null,y.path=y.search?"/"+y.search:null,y.href=y.format(),y;for(var ne=re.slice(-1)[0],F=(y.host||f.host||re.length>1)&&("."===ne||".."===ne)||""===ne,R=0,U=re.length;U>=0;U--)"."===(ne=re[U])?re.splice(U,1):".."===ne?(re.splice(U,1),R++):R&&(re.splice(U,1),R--);if(!oe&&!se)for(;R--;R)re.unshift("..");oe&&""!==re[0]&&(!re[0]||"/"!==re[0].charAt(0))&&re.unshift(""),F&&"/"!==re.join("/").substr(-1)&&re.push("");var Z,Q=""===re[0]||re[0]&&"/"===re[0].charAt(0);return B&&(y.hostname=y.host=Q?"":re.length?re.shift():"",(Z=!!(y.host&&y.host.indexOf("@")>0)&&y.host.split("@"))&&(y.auth=Z.shift(),y.host=y.hostname=Z.shift())),(oe=oe||y.host&&re.length)&&!Q&&re.unshift(""),re.length?y.pathname=re.join("/"):(y.pathname=null,y.path=null),(!b.isNull(y.pathname)||!b.isNull(y.search))&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.auth=f.auth||y.auth,y.slashes=y.slashes||f.slashes,y.href=y.format(),y},g.prototype.parseHost=function(){var f=this.host,_=s.exec(f);_&&(":"!==(_=_[0])&&(this.port=_.substr(1)),f=f.substr(0,f.length-_.length)),f&&(this.hostname=f)}},{"./util":77,punycode:51,querystring:54}],77:[function(A,W,V){"use strict";W.exports={isString:function(m){return"string"==typeof m},isObject:function(m){return"object"==typeof m&&null!==m},isNull:function(m){return null===m},isNullOrUndefined:function(m){return null==m}}},{}],78:[function(A,W,V){(function(m){(function(){function g(d){try{if(!m.localStorage)return!1}catch{return!1}var s=m.localStorage[d];return null!=s&&"true"===String(s).toLowerCase()}W.exports=function b(d,s){if(g("noDeprecation"))return d;var t=!1;return function r(){if(!t){if(g("throwDeprecation"))throw new Error(s);g("traceDeprecation")?console.trace(s):console.warn(s),t=!0}return d.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],79:[function(A,W,V){W.exports=function m(b,g){if(b&&g)return m(b)(g);if("function"!=typeof b)throw new TypeError("need wrapper function");return Object.keys(b).forEach(function(s){d[s]=b[s]}),d;function d(){for(var s=new Array(arguments.length),t=0;t<s.length;t++)s[t]=arguments[t];var r=b.apply(this,s),e=s[s.length-1];return"function"==typeof r&&r!==e&&Object.keys(e).forEach(function(n){r[n]=e[n]}),r}}},{}],80:[function(A,W,V){"use strict";W.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(A,W,V){W.exports=function b(){for(var g={},d=0;d<arguments.length;d++){var s=arguments[d];for(var t in s)m.call(s,t)&&(g[t]=s[t])}return g};var m=Object.prototype.hasOwnProperty},{}],82:[function(A,W,V){"use strict";W.exports=function(m){m.prototype[Symbol.iterator]=function*(){for(let b=this.head;b;b=b.next)yield b.value}}},{}],83:[function(A,W,V){"use strict";function m(t){var r=this;if(r instanceof m||(r=new m),r.tail=null,r.head=null,r.length=0,t&&"function"==typeof t.forEach)t.forEach(function(o){r.push(o)});else if(arguments.length>0)for(var e=0,n=arguments.length;e<n;e++)r.push(arguments[e]);return r}function b(t,r,e){var n=r===t.head?new s(e,null,r,t):new s(e,r,r.next,t);return null===n.next&&(t.tail=n),null===n.prev&&(t.head=n),t.length++,n}function g(t,r){t.tail=new s(r,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function d(t,r){t.head=new s(r,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function s(t,r,e,n){if(!(this instanceof s))return new s(t,r,e,n);this.list=n,this.value=t,r?(r.next=this,this.prev=r):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}W.exports=m,m.Node=s,m.create=m,m.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var r=t.next,e=t.prev;return r&&(r.prev=e),e&&(e.next=r),t===this.head&&(this.head=r),t===this.tail&&(this.tail=e),t.list.length--,t.next=null,t.prev=null,t.list=null,r},m.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var r=this.head;t.list=this,t.next=r,r&&(r.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},m.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var r=this.tail;t.list=this,t.prev=r,r&&(r.next=t),this.tail=t,this.head||(this.head=t),this.length++}},m.prototype.push=function(){for(var t=0,r=arguments.length;t<r;t++)g(this,arguments[t]);return this.length},m.prototype.unshift=function(){for(var t=0,r=arguments.length;t<r;t++)d(this,arguments[t]);return this.length},m.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},m.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},m.prototype.forEach=function(t,r){r=r||this;for(var e=this.head,n=0;null!==e;n++)t.call(r,e.value,n,this),e=e.next},m.prototype.forEachReverse=function(t,r){r=r||this;for(var e=this.tail,n=this.length-1;null!==e;n--)t.call(r,e.value,n,this),e=e.prev},m.prototype.get=function(t){for(var r=0,e=this.head;null!==e&&r<t;r++)e=e.next;if(r===t&&null!==e)return e.value},m.prototype.getReverse=function(t){for(var r=0,e=this.tail;null!==e&&r<t;r++)e=e.prev;if(r===t&&null!==e)return e.value},m.prototype.map=function(t,r){r=r||this;for(var e=new m,n=this.head;null!==n;)e.push(t.call(r,n.value,this)),n=n.next;return e},m.prototype.mapReverse=function(t,r){r=r||this;for(var e=new m,n=this.tail;null!==n;)e.push(t.call(r,n.value,this)),n=n.prev;return e},m.prototype.reduce=function(t,r){var e,n=this.head;if(arguments.length>1)e=r;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,e=this.head.value}for(var o=0;null!==n;o++)e=t(e,n.value,o),n=n.next;return e},m.prototype.reduceReverse=function(t,r){var e,n=this.tail;if(arguments.length>1)e=r;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,e=this.tail.value}for(var o=this.length-1;null!==n;o--)e=t(e,n.value,o),n=n.prev;return e},m.prototype.toArray=function(){for(var t=new Array(this.length),r=0,e=this.head;null!==e;r++)t[r]=e.value,e=e.next;return t},m.prototype.toArrayReverse=function(){for(var t=new Array(this.length),r=0,e=this.tail;null!==e;r++)t[r]=e.value,e=e.prev;return t},m.prototype.slice=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var e=new m;if(r<t||r<0)return e;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=0,o=this.head;null!==o&&n<t;n++)o=o.next;for(;null!==o&&n<r;n++,o=o.next)e.push(o.value);return e},m.prototype.sliceReverse=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var e=new m;if(r<t||r<0)return e;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=this.length,o=this.tail;null!==o&&n>r;n--)o=o.prev;for(;null!==o&&n>t;n--,o=o.prev)e.push(o.value);return e},m.prototype.splice=function(t,r,...e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,o=this.head;null!==o&&n<t;n++)o=o.next;var a=[];for(n=0;o&&n<r;n++)a.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),n=0;n<e.length;n++)o=b(this,o,e[n]);return a},m.prototype.reverse=function(){for(var t=this.head,r=this.tail,e=t;null!==e;e=e.prev){var n=e.prev;e.prev=e.next,e.next=n}return this.head=r,this.tail=t,this};try{A("./iterator.js")(m)}catch{}},{"./iterator.js":82}]},{},[12])(12)}}]);
//# sourceMappingURL=202.b6026f4f7122016d.js.map