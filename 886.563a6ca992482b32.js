"use strict";(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[886],{8886:(W_,h,l)=>{l.r(h),l.d(h,{AppZonesModule:()=>V_});var E=l(6362),d=l(1876),A=l(9504),D=l(1843),G=l(8537),u=l(4929),a=l(3698),m=l(4505),T=l(7716),J=l(4139),Y=l(823),p=l(9095),O=l(6942),N=l(7418),M=l(9128),q=l(5670),I=l(2395),L=l(6123),b=l(2016),Q=l(3277),_=l(6723),w=l(5758);let f=(()=>{class t{constructor(e,n){this._service=e,this._dialog=n,this._loading=new m.X(!1),this._change=new m.X(!1),this.loading=this._loading.asObservable(),this.item=this._service.item,this.counts=(0,T.aj)([this._service.all_item,this._change]).pipe((0,Y.b)(300),(0,p.w)(i=>(0,u.mG)(this,void 0,void 0,function*(){const[s]=i;if(!(s instanceof a.TT8))return{};this._loading.next(!0);const c=yield Promise.all([(0,a.vIL)({zone_id:s.id,limit:1}).pipe((0,O.U)(r=>r.total)).toPromise().catch(r=>0),(0,a.Vgq)(s.id).pipe((0,O.U)(r=>r.total)).toPromise().catch(r=>0),(0,a.Eio)(s.id).pipe((0,O.U)(r=>r.length)).toPromise().catch(r=>0),(0,a.I0G)({parent:s.id,limit:1}).pipe((0,O.U)(r=>r.total)).toPromise().catch(r=>0)]),[g,P,Z,F]=c;return this._loading.next(!1),{systems:g,triggers:P,metadata:Z,children:F}}))),this.systems=this.item.pipe((0,p.w)(i=>i instanceof a.TT8?(0,a.vIL)({zone_id:i.id}):[]),(0,O.U)(i=>i.data),(0,N.K)(i=>[]),(0,M.d)()),this.triggers=this.item.pipe((0,p.w)(i=>i instanceof a.TT8?(0,a.Vgq)(i.id):[]),(0,O.U)(i=>i.data),(0,N.K)(i=>[]),(0,M.d)()),this.metadata=this.item.pipe((0,p.w)(i=>i instanceof a.TT8?(0,a.Eio)(i.id):(0,J.of)([])),(0,N.K)(i=>[]),(0,M.d)(1)),this.children=this.item.pipe((0,p.w)(i=>i instanceof a.TT8?(0,a.I0G)({parent:i.id}):[]),(0,O.U)(i=>i.data),(0,N.K)(i=>[]),(0,M.d)()),setTimeout(()=>this._change.next(!this._change.getValue()),1e3)}get active_item(){return this._service.active_item}selectTrigger(){return(0,u.mG)(this,void 0,void 0,function*(){const e=this._dialog.open(Q.f,{data:{service_name:"Triggers",query_fn:s=>(0,a.$Um)({q:s}).pipe((0,O.U)(c=>c.data))}}),n=yield Promise.race([e.componentInstance.event.pipe((0,q.P)(s=>"action"===s.reason)).toPromise(),e.afterClosed().toPromise()]);if(!n||!n.reason)return e.close();const i=yield this.addTrigger(e.componentInstance.item);e.close(),i&&this._service.replaceItem(i)})}addTrigger(e){return(0,u.mG)(this,void 0,void 0,function*(){return(0,a.BfP)(this.active_item.id,Object.assign(Object.assign({},this.active_item),{triggers:(0,I.Tw)([...this.active_item.triggers,e.id])})).toPromise()})}removeTrigger(e){return(0,u.mG)(this,void 0,void 0,function*(){const n=yield(0,I._5)({title:"Remove trigger",content:`<p>Are you sure you want remove trigger "${e.name}"?</p><p>Configuration will be updated <strong>immediately</strong>.</p>`,icon:{type:"icon",class:"backoffice-trash"}},this._dialog);if(!n||!n.reason)return;const i=yield(0,a.BfP)(this.active_item.id,Object.assign(Object.assign({},this.active_item),{triggers:this.active_item.triggers.filter(s=>s!==e.id)})).toPromise().catch(s=>{throw n.close(),(0,b.cB)(`Error removing trigger ${e.id} from zone. Error: ${s.statusText||s.message||s}`),s});n.close(),(0,b.t5)("Successfully removed trigger from zone."),i&&this._service.replaceItem(i)})}}return t.\u0275fac=function(e){return new(e||t)(_.LFG(L.L),_.LFG(w.uw))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var j=l(9101),H=l(1609);let V=(()=>{class t extends D.K{constructor(e,n,i){super(),this._service=e,this._route=n,this._router=i,this.name="zones",this.tab_list=[]}get extensions(){return(0,G.fq)(this._service.active_item,this.name)}updateTabList(e){this.tab_list=[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"systems",name:"Systems",count:e.systems,icon:{class:"backoffice-documents"}},{id:"triggers",name:"Triggers",count:e.triggers,icon:{class:"backoffice-stopwatch"}},{id:"metadata",name:"Metadata",count:e.metadata,icon:{class:"backoffice-gist"}},{id:"children",name:"Children",count:e.children,icon:{class:"backoffice-flow-tree"}},{id:"history",name:"Settings History",icon:{class:"backoffice-clock"}}].concat(this.extensions)}ngOnInit(){this.subscription("item",this._service.counts.subscribe(e=>this.updateTabList(e))),this.updateTabList({})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f),_.Y36(A.gz),_.Y36(A.F0))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-zones"]],features:[_.qOj],decls:3,vars:1,consts:[[1,"flex-1","flex-col","sm:flex-row","flex","h-full","w-full","relative"],["heading","Zones","name","zones",1,"absolute","top-0","left-0","h-12","w-full","sm:h-full","sm:static"],["name","zone","route","zones",1,"flex-1","relative","mt-12","sm:mt-0","w-full","sm:w-1/2",3,"tabs"]],template:function(e,n){1&e&&(_.TgZ(0,"div",0),_._UZ(1,"sidebar",1)(2,"item-display",2),_.qZA()),2&e&&(_.xp6(2),_.Q6J("tabs",n.tab_list))},directives:[j.k,H.s],styles:["sidebar[_ngcontent-%COMP%]{transition:height .3s}@media screen and (min-width: 640px){sidebar[_ngcontent-%COMP%]{width:20em!important}}\n/*# sourceMappingURL=zones.component.ts-angular-inline--56.css.map*/"]}),t})();var W=l(4611),C=l(4770),k=l(1434),__=l(1130),e_=l(1184),B=l(1196),t_=l(3436),y=l(4742),R=l(239);function n_(t,o){1&t&&(_.TgZ(0,"header",7),_.SDv(1,12),_.qZA())}function o_(t,o){if(1&t&&(_.TgZ(0,"mat-option",18),_._uU(1),_.qZA()),2&t){const e=o.$implicit;_.Q6J("value",e),_.xp6(1),_.hij(" ",e.name," ")}}function i_(t,o){if(1&t&&_._UZ(0,"execute-method-field",19),2&t){const e=_.oxw(2);_.Q6J("system",e.active_system)}}function s_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"section",13)(1,"mat-form-field",14)(2,"mat-select",15),_.NdJ("ngModelChange",function(i){return _.CHM(e),_.oxw().active_system=i}),_.YNc(3,o_,2,2,"mat-option",16),_.ALo(4,"async"),_.qZA()(),_.YNc(5,i_,1,1,"execute-method-field",17),_.qZA()}if(2&t){const e=_.oxw();_.xp6(2),_.Q6J("ngModel",e.active_system),_.xp6(1),_.Q6J("ngForOf",_.lcZ(4,3,e.systems)),_.xp6(2),_.Q6J("ngIf",e.active_system&&e.active_system.id)}}const l_=function(t){return["/zones",t,"about"]};function a_(t,o){if(1&t&&(_.TgZ(0,"div",20)(1,"label"),_.SDv(2,21),_.qZA(),_.TgZ(3,"div",22)(4,"a",23),_._uU(5),_.qZA()()()),2&t){const e=_.oxw();_.xp6(4),_.Q6J("routerLink",_.VKq(2,l_,null==e.item?null:e.item.parent_id)),_.xp6(1),_.Oqu(null==e.item?null:e.item.parent_id)}}function c_(t,o){if(1&t&&(_.TgZ(0,"div",20)(1,"label"),_.SDv(2,24),_.qZA(),_.TgZ(3,"div",25),_._uU(4),_.ALo(5,"dateFrom"),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.hij(" ",_.lcZ(5,1,1e3*(null==e.item?null:e.item.created_at))," ")}}function E_(t,o){if(1&t&&(_.TgZ(0,"div",20)(1,"label"),_.SDv(2,26),_.qZA(),_.TgZ(3,"div",25),_._uU(4),_.ALo(5,"dateFrom"),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.hij(" ",_.lcZ(5,1,1e3*(null==e.item?null:e.item.updated_at))," ")}}function r_(t,o){if(1&t&&(_.TgZ(0,"div",20)(1,"label"),_.SDv(2,27),_.qZA(),_.TgZ(3,"div",25),_._uU(4),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(null==e.item?null:e.item.location)}}function S_(t,o){if(1&t&&(_.TgZ(0,"div",20)(1,"label"),_.SDv(2,28),_.qZA(),_.TgZ(3,"div",25),_._uU(4),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(null==e.item?null:e.item.code)}}function d_(t,o){if(1&t&&(_.TgZ(0,"div",20)(1,"label"),_.SDv(2,29),_.qZA(),_.TgZ(3,"div",25),_._uU(4),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(null==e.item?null:e.item.type)}}function O_(t,o){if(1&t&&(_.TgZ(0,"div",20)(1,"label"),_.SDv(2,30),_.qZA(),_.TgZ(3,"div",25),_._uU(4),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(null==e.item?null:e.item.count)}}function g_(t,o){if(1&t&&(_.TgZ(0,"div",20)(1,"label"),_.SDv(2,31),_.qZA(),_.TgZ(3,"div",25),_._uU(4),_.qZA()()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(null==e.item?null:e.item.capacity)}}function A_(t,o){if(1&t&&(_.TgZ(0,"div",20)(1,"label"),_.SDv(2,32),_.qZA(),_.TgZ(3,"a",33),_._uU(4),_.qZA()()),2&t){const e=_.oxw();_.xp6(3),_.Q6J("href",null==e.item?null:e.item.map_id,_.LSH),_.xp6(1),_.Oqu(null==e.item?null:e.item.map_id)}}function C_(t,o){1&t&&(_.TgZ(0,"header",7),_.SDv(1,34),_.qZA())}function m_(t,o){if(1&t&&_._UZ(0,"section",35),2&t){const e=_.oxw();_.Q6J("innerHTML",e.parsed_description,_.oJD)}}function p_(t,o){if(1&t&&(_.TgZ(0,"mat-chip"),_._uU(1),_.qZA()),2&t){const e=o.$implicit;_.xp6(1),_.Oqu(e)}}function f_(t,o){if(1&t&&(_.TgZ(0,"div",25)(1,"mat-chip-list",40),_.YNc(2,p_,2,1,"mat-chip",41),_.qZA()()),2&t){const e=_.oxw(2);_.xp6(2),_.Q6J("ngForOf",e.tag_list)}}function u_(t,o){if(1&t&&(_.TgZ(0,"section",36)(1,"label",37),_.SDv(2,38),_.qZA(),_.YNc(3,f_,3,1,"div",39),_.qZA()),2&t){const e=_.oxw(),n=_.MAs(24);_.xp6(3),_.Q6J("ngIf",e.tag_list&&e.tag_list.length)("ngIfElse",n)}}function T_(t,o){if(1&t&&(_.TgZ(0,"section"),_._UZ(1,"a-settings-form",42),_.qZA()),2&t){const e=_.oxw();_.xp6(1),_.Q6J("merge",!0)("id",null==e.item?null:e.item.id)("settings",null==e.item?null:e.item.settings)}}function N_(t,o){1&t&&(_.TgZ(0,"div",43),_._UZ(1,"mat-spinner",44),_.TgZ(2,"p"),_.SDv(3,45),_.qZA()())}function M_(t,o){1&t&&(_.TgZ(0,"p",46),_.SDv(1,47),_.qZA())}let P_=(()=>{class t{constructor(e){this._service=e,this.systems=this._service.systems}get item(){return this._service.active_item}get parsed_description(){var e;return this.item?(0,W.TU)(null===(e=this.item)||void 0===e?void 0:e.description):""}get tag_list(){var e;return this.item?null===(e=this.item)||void 0===e?void 0:e.tags:[]}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f))},t.\u0275cmp=_.Xpm({type:t,selectors:[["zone-about"]],decls:25,vars:20,consts:function(){let o,e,n,i,s,c,g,P,Z,F,r,$,K,X,z;return o=$localize`:@@settingsLabel␟5ba97a3f90a79c4d7720b941ae416c8c84337e38␟180274732945114229: Settings `,e=$localize`:@@execHeader␟6e9fe55331b587290e95336846799c928c323b8f␟5406219849635212445: Execute Command `,n=$localize`:@@zoneParentLabel␟8dce5a1b53185785ceb8eaece03a45f95a1058ae␟1730450554195977822:Parent ID:`,i=$localize`:@@zoneCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,s=$localize`:@@zoneUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,c=$localize`:@@zoneLocationLabel␟4bebbae34f84157c0b5b852529f0bc2c39a5a38a␟4510013877734913501:Location:`,g=$localize`:@@zoneCodeLabel␟08a3263c58aafca24f31b3f312d90934a14069e5␟4793952596010266372:Code:`,P=$localize`:@@zoneTypeLabel␟b2ec946dbfa29aa3430b9999250edf9a2a6e3552␟2473796624751549543:Type: `,Z=$localize`:@@zoneCountLabel␟e684046d73bcee88e82f7ff01e2852789a05fc32␟6836949342567686088:Count:`,F=$localize`:@@zoneCapacityLabel␟a1170e85d1897210d5fe03d1f363587de15d02cd␟8062822823331512246:Capacity:`,r=$localize`:@@zoneMapLabel␟b59ac98267a9fea534d729d6021e4ad108b9166e␟5947091241433737383:Map:`,$=$localize`:@@descriptionLabel␟91d130f4d03590d2ab82ec6ccd644aaff7dbf49c␟7630730180260398735: Description `,K=$localize`:@@zoneTagsLabel␟d1c4e9d07d3789fb1c66dec61f2d52c6b81b10f6␟7952806382632077864:Tags:`,X=$localize`:@@zoneLoadingLabel␟adb8ef1c4f047ddce91397fb4d8f83acc47f4649␟1768664919049731907:Loading zone settings...`,z=$localize`:@@zoneTagsEmpty␟48171f6d8b15daa87a49496d685bd03bb4f84253␟1765229228159298837: <No Tags> `,[["class","font-medium text-lg",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"space-y-2"],["class","flex items-center space-x-2",4,"ngIf"],["class","description",3,"innerHTML",4,"ngIf"],["class","flex space-x-2 mt-1",4,"ngIf"],[1,"my-4"],[1,"font-medium","text-lg"],o,[4,"ngIf","ngIfElse"],["load_state",""],["empty_tag_state",""],e,[1,"mb-4"],["appearance","outline",1,"h-12"],["placeholder","Select system",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"system",4,"ngIf"],[3,"value"],[3,"system"],[1,"flex","items-center","space-x-2"],n,[1,"value","underline"],[3,"routerLink"],i,[1,"value"],s,c,g,P,Z,F,r,[1,"underline",3,"href"],$,[1,"description",3,"innerHTML"],[1,"flex","space-x-2","mt-1"],["for","tags",1,"my-1"],K,["class","value",4,"ngIf","ngIfElse"],["name","tags"],[4,"ngFor","ngForOf"],[3,"merge","id","settings"],[1,"flex","flex-col","items-center","p-8"],["diameter","48",1,"mb-4"],X,[1,"text-center","py-1"],z]},template:function(e,n){if(1&e&&(_.YNc(0,n_,2,0,"header",0),_.ALo(1,"async"),_.YNc(2,s_,6,5,"section",1),_.ALo(3,"async"),_.TgZ(4,"section",2),_.YNc(5,a_,6,4,"div",3),_.YNc(6,c_,6,3,"div",3),_.YNc(7,E_,6,3,"div",3),_.YNc(8,r_,5,1,"div",3),_.YNc(9,S_,5,1,"div",3),_.YNc(10,d_,5,1,"div",3),_.YNc(11,O_,5,1,"div",3),_.YNc(12,g_,5,1,"div",3),_.YNc(13,A_,5,2,"div",3),_.qZA(),_.YNc(14,C_,2,0,"header",0),_.YNc(15,m_,1,1,"section",4),_.YNc(16,u_,4,2,"section",5),_._UZ(17,"hr",6),_.TgZ(18,"header",7),_.SDv(19,8),_.qZA(),_.YNc(20,T_,2,3,"section",9),_.YNc(21,N_,4,0,"ng-template",null,10,_.W1O),_.YNc(23,M_,2,0,"ng-template",null,11,_.W1O)),2&e){const i=_.MAs(22);let s,c;_.Q6J("ngIf",null==(s=_.lcZ(1,16,n.systems))?null:s.length),_.xp6(2),_.Q6J("ngIf",null==(c=_.lcZ(3,18,n.systems))?null:c.length),_.xp6(3),_.Q6J("ngIf",null==n.item?null:n.item.parent_id),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.created_at),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.updated_at),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.location),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.code),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.type),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.count),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.capacity),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.map_id),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.description),_.xp6(1),_.Q6J("ngIf",null==n.item?null:n.item.description),_.xp6(1),_.Q6J("ngIf",n.item&&n.tag_list),_.xp6(4),_.Q6J("ngIf",null==n.item?null:n.item.settings)("ngIfElse",i)}},directives:[E.O5,C.KE,k.gD,d.JJ,d.On,E.sg,__.ey,e_.Q,A.yS,B.qn,B.HS,t_.v,y.Ou],pipes:[E.Ov,R.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}\n/*# sourceMappingURL=zone-about.component.ts-angular-inline--57.css.map*/"]}),t})();var v=l(1259),U=l(4683),x=l(89);const Z_=function(t){return["/systems",t]};function F_(t,o){if(1&t&&(_.TgZ(0,"div",16)(1,"div",17)(2,"a",18),_._uU(3),_.qZA()(),_.TgZ(4,"div",10),_._uU(5),_.qZA(),_.TgZ(6,"div",12),_._uU(7),_.ALo(8,"dateFrom"),_.qZA()()),2&t){const e=o.$implicit;_.xp6(2),_.Q6J("routerLink",_.VKq(7,Z_,e.id))("matTooltip",e.id),_.xp6(1),_.hij(" ",e.name," "),_.xp6(2),_.Oqu(e.modules.length),_.xp6(2),_.Oqu(_.lcZ(8,5,1e3*(null==e?null:e.created_at)))}}function R_(t,o){if(1&t&&(_.TgZ(0,"div",6)(1,"div",7)(2,"div",8),_.SDv(3,9),_.qZA(),_.TgZ(4,"div",10),_.SDv(5,11),_.qZA(),_.TgZ(6,"div",12),_.SDv(7,13),_.qZA()(),_.TgZ(8,"div",14),_.YNc(9,F_,9,9,"div",15),_.ALo(10,"async"),_.qZA()()),2&t){const e=_.oxw();_.xp6(9),_.Q6J("ngForOf",_.lcZ(10,1,e.systems))}}function v_(t,o){1&t&&(_.TgZ(0,"div",19)(1,"p"),_.SDv(2,20),_.qZA()())}let U_=(()=>{class t{constructor(e){this._state=e,this.filter$=new m.X(""),this.systems=(0,T.aj)([this.filter$,this._state.systems]).pipe((0,O.U)(n=>{const[i,s]=n,c=i.toLowerCase();return i?s.filter(g=>g.name.toLowerCase().includes(c)):s}))}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f))},t.\u0275cmp=_.Xpm({type:t,selectors:[["zone-systems"]],decls:8,vars:5,consts:function(){let o,e,n,i;return o=$localize`:@@systemTableName␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,e=$localize`:@@systemTablePanelCount␟6c24d3e08bc16576fbd5580dc255a31c4b08c366␟8919524640139321287:No. Modules`,n=$localize`:@@systemTableCreated␟1b051734b0ee9021991c91b3ed4e81c244322462␟4207916966377787111:Created`,i=$localize`:@@systemTableEmpty␟443361e57db2ac76049b227574b4a6b8a67ae879␟6249884397292386469:No systems found`,[[1,"flex"],["appearance","outline",1,"flex-1"],["matPrefix","","className","backoffice-magnifying-glass",1,"text-lg"],["matInput","","name","search-filter","placeholder","Filter Systems",3,"ngModel","ngModelChange"],["role","table",4,"ngIf","ngIfElse"],["empty_state",""],["role","table"],["table-head",""],[1,"flex-1","p-2"],o,[1,"w-28","p-2"],e,[1,"w-32","p-2"],n,["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2","underline"],["matTooltipPosition","right",3,"routerLink","matTooltip"],[1,"flex","flex-col","items-center","p-8"],i]},template:function(e,n){if(1&e&&(_.TgZ(0,"div",0)(1,"mat-form-field",1),_._UZ(2,"app-icon",2),_.TgZ(3,"input",3),_.NdJ("ngModelChange",function(s){return n.filter$.next(s)}),_.qZA()()(),_.YNc(4,R_,11,3,"div",4),_.ALo(5,"async"),_.YNc(6,v_,3,0,"ng-template",null,5,_.W1O)),2&e){const i=_.MAs(7);let s;_.xp6(3),_.Q6J("ngModel",""),_.xp6(1),_.Q6J("ngIf",null==(s=_.lcZ(5,3,n.systems))?null:s.length)("ngIfElse",i)}},directives:[C.KE,v.o,C.qo,U.Nt,d.Fj,d.JJ,d.On,E.O5,E.sg,A.yS,x.gM],pipes:[E.Ov,R.R],styles:["[_nghost-%COMP%]{padding:1rem;width:100%;height:100%}\n/*# sourceMappingURL=zone-systems.component.ts-angular-inline--58.css.map*/"]}),t})();var h_=l(7317);const I_=function(t){return["/triggers",t]};function L_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",18)(1,"div",11)(2,"a",19),_._uU(3),_.qZA()(),_.TgZ(4,"div",20),_._uU(5),_.ALo(6,"dateFrom"),_.qZA(),_.TgZ(7,"div",21)(8,"button",22),_.NdJ("click",function(){const s=_.CHM(e).$implicit;return _.oxw(3).deleteTrigger(s)}),_._UZ(9,"app-icon",23),_.qZA()()()}if(2&t){const e=o.$implicit;_.xp6(2),_.Q6J("routerLink",_.VKq(5,I_,e.id)),_.xp6(1),_.Oqu(e.name),_.xp6(2),_.hij(" ",_.lcZ(6,3,1e3*+e.created_at)," ")}}function b_(t,o){if(1&t&&(_.TgZ(0,"div",9)(1,"div",10)(2,"div",11),_.SDv(3,12),_.qZA(),_.TgZ(4,"div",13),_.SDv(5,14),_.qZA(),_._UZ(6,"div",15),_.qZA(),_.TgZ(7,"div",16),_.YNc(8,L_,10,7,"div",17),_.ALo(9,"async"),_.qZA()()),2&t){const e=_.oxw(2);_.xp6(8),_.Q6J("ngForOf",_.lcZ(9,1,e.triggers))}}function B_(t,o){if(1&t&&(_.ynx(0),_.YNc(1,b_,10,3,"div",8),_.ALo(2,"async"),_.BQk()),2&t){const e=_.oxw(),n=_.MAs(12);let i;_.xp6(1),_.Q6J("ngIf",null==(i=_.lcZ(2,2,e.triggers))?null:i.length)("ngIfElse",n)}}function y_(t,o){1&t&&(_.TgZ(0,"div",24),_._UZ(1,"mat-spinner",25),_.TgZ(2,"p"),_._uU(3,"Loading triggers..."),_.qZA()()),2&t&&(_.xp6(1),_.Q6J("diameter",48))}function x_(t,o){1&t&&(_.TgZ(0,"div",24)(1,"p"),_._uU(2,"No triggers for zone"),_.qZA()())}let $_=(()=>{class t{constructor(e){this._state=e,this.filter$=new m.X(""),this.triggers=(0,T.aj)([this.filter$,this._state.triggers]).pipe((0,O.U)(n=>{const[i,s]=n,c=i.toLowerCase();return i?s.filter(g=>g.name.toLowerCase().includes(c)):s})),this.loading=this._state.loading,this.selectTrigger=()=>this._state.selectTrigger(),this.deleteTrigger=n=>this._state.removeTrigger(n)}get item(){return this._state.active_item}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f))},t.\u0275cmp=_.Xpm({type:t,selectors:[["zone-triggers"]],decls:13,vars:5,consts:function(){let o,e;return o=$localize`:@@nameLabel␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,e=$localize`:@@descriptionLabel␟80e3b490720757978c99a7b5af3885faf202b955␟231679111972850796:Added`,[[1,"flex","items-center","mb-4","space-x-2"],["mat-button","",2,"min-width","8rem",3,"click"],["appearance","outline",1,"h-12","flex-1"],["matPrefix","","className","backoffice-magnifying-glass text-xl mr-2"],["matInput","","placeholder","Filter triggers...",1,"rounded-none",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["role","table","class","overflow-x-auto",4,"ngIf","ngIfElse"],["role","table",1,"overflow-x-auto"],["table-head",""],["flex","",1,"flex-1","p-2"],o,[1,"w-28","p-2"],e,[1,"w-32","p-2"],["table-body","",1,"overflow-y-auto"],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"truncate",3,"routerLink"],["desc","",1,"w-28","p-2"],[1,"w-32","p-2","items-center","justify-center"],["mat-icon-button","",3,"click"],["className","backoffice-trash"],[1,"flex","flex-col","items-center","p-8","mx-auto"],[1,"mb-4",3,"diameter"]]},template:function(e,n){if(1&e&&(_.TgZ(0,"section",0)(1,"button",1),_.NdJ("click",function(){return n.selectTrigger()}),_._uU(2," Add Trigger "),_.qZA(),_.TgZ(3,"mat-form-field",2),_._UZ(4,"app-icon",3),_.TgZ(5,"input",4),_.NdJ("ngModelChange",function(s){return n.filter$.next(s)}),_.qZA()()(),_.TgZ(6,"section"),_.YNc(7,B_,3,4,"ng-container",5),_.ALo(8,"async"),_.qZA(),_.YNc(9,y_,4,1,"ng-template",null,6,_.W1O),_.YNc(11,x_,3,0,"ng-template",null,7,_.W1O)),2&e){const i=_.MAs(10);_.xp6(5),_.Q6J("ngModel",""),_.xp6(2),_.Q6J("ngIf",!_.lcZ(8,3,n.loading))("ngIfElse",i)}},directives:[h_.lW,C.KE,v.o,C.qo,U.Nt,d.Fj,d.JJ,d.On,E.O5,E.sg,A.yS,y.Ou],pipes:[E.Ov,R.R],styles:["[_nghost-%COMP%]{padding:1rem;width:100%;height:100%}\n/*# sourceMappingURL=zone-triggers.component.ts-angular-inline--59.css.map*/"]}),t})();const K_=function(t){return["/zone",t]};function X_(t,o){if(1&t&&(_.TgZ(0,"div",14)(1,"div",15)(2,"a",16),_._uU(3),_.TgZ(4,"span",17),_._uU(5),_.qZA(),_._uU(6,") "),_.qZA()(),_.TgZ(7,"div",10),_._uU(8),_.qZA()()),2&t){const e=o.$implicit;_.xp6(2),_.Q6J("routerLink",_.VKq(5,K_,e.id))("matTooltip",e.id),_.xp6(1),_.hij(" ",e.name," ("),_.xp6(2),_.Oqu(e.id),_.xp6(3),_.Oqu(e.description)}}function z_(t,o){if(1&t&&(_.TgZ(0,"div",6)(1,"div",7)(2,"div",8),_.SDv(3,9),_.qZA(),_.TgZ(4,"div",10),_.SDv(5,11),_.qZA()(),_.TgZ(6,"div",12),_.YNc(7,X_,9,7,"div",13),_.ALo(8,"async"),_.qZA()()),2&t){const e=_.oxw();_.xp6(7),_.Q6J("ngForOf",_.lcZ(8,1,e.children))}}function D_(t,o){1&t&&(_.TgZ(0,"div",18),_.SDv(1,19),_.qZA())}let G_=(()=>{class t{constructor(e){this._state=e,this.filter$=new m.X(""),this.children=(0,T.aj)([this.filter$,this._state.children]).pipe((0,O.U)(n=>{const[i,s]=n,c=i.toLowerCase();return i?s.filter(g=>g.name.toLowerCase().includes(c)):s})),this.loading=this._state.loading}get item(){return this._state.active_item}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f))},t.\u0275cmp=_.Xpm({type:t,selectors:[["zone-children"]],decls:8,vars:5,consts:function(){let o,e,n,i;return o=$localize`:@@zoneChildrenTableFilter␟48b4cc111b7400e0a4602f4805cab66025dbb55d␟8361856721210143570:Filter Zones`,e=$localize`:@@zoneChildrenTableName␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,n=$localize`:@@descriptionLabel␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,i=$localize`:@@zoneChildrenTableEmpty␟1b895a59396d575379143c2deec22ed0c1d65834␟1207585495728440175: No child zones found `,[[1,"flex","items-center"],["appearance","outline",1,"flex-1"],["matPrefix","","className","backoffice-magnifying-glass",1,"text-lg"],["matInput","","name","search-filter","placeholder",o,3,"ngModel","ngModelChange"],["role","table",4,"ngIf","ngIfElse"],["empty_state",""],["role","table"],["table-head",""],[1,"flex-1","p-2"],e,[1,"w-3/5","p-2"],n,["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2","underline"],["routerLinkActive","router-link-active",3,"routerLink","matTooltip"],[1,"id"],[1,"flex","flex-col","items-center","p-8"],i]},template:function(e,n){if(1&e&&(_.TgZ(0,"div",0)(1,"mat-form-field",1),_._UZ(2,"app-icon",2),_.TgZ(3,"input",3),_.NdJ("ngModelChange",function(s){return n.filter$.next(s)}),_.qZA()()(),_.YNc(4,z_,9,3,"div",4),_.ALo(5,"async"),_.YNc(6,D_,2,0,"ng-template",null,5,_.W1O)),2&e){const i=_.MAs(7);let s;_.xp6(3),_.Q6J("ngModel",""),_.xp6(1),_.Q6J("ngIf",(null==(s=_.lcZ(5,3,n.children))?null:s.length)>0)("ngIfElse",i)}},directives:[C.KE,v.o,C.qo,U.Nt,d.Fj,d.JJ,d.On,E.O5,E.sg,A.yS,A.Od,x.gM],pipes:[E.Ov],styles:["[_nghost-%COMP%]{padding:1rem;width:100%;height:100%}\n/*# sourceMappingURL=zone-children.component.ts-angular-inline--60.css.map*/"]}),t})();var J_=l(7639);function Y_(t,o){if(1&t&&(_.TgZ(0,"div",1),_._UZ(1,"metadata-display",2),_.qZA()),2&t){const e=_.oxw();_.xp6(1),_.Q6J("item",e.item)}}let q_=(()=>{class t{constructor(e){this._service=e}get item(){return this._service.active_item}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(L.L))},t.\u0275cmp=_.Xpm({type:t,selectors:[["zone-metadata"]],decls:1,vars:1,consts:[["class","p-4",4,"ngIf"],[1,"p-4"],[3,"item"]],template:function(e,n){1&e&&_.YNc(0,Y_,2,1,"div",0),2&e&&_.Q6J("ngIf",n.item)},directives:[E.O5,J_.J],styles:[""]}),t})();var Q_=l(9960),w_=l(5558);const j_=[{path:":id",component:V,children:[{path:"about",component:P_},{path:"systems",component:U_},{path:"triggers",component:$_},{path:"children",component:G_},{path:"metadata",component:q_},{path:"extend/:id",component:Q_.z},{path:"history",component:w_.D},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var H_=l(9522);let V_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[E.ez,d.u5,d.UX,A.Bz.forChild(j_),H_.X]]}),t})()}}]);
//# sourceMappingURL=886.563a6ca992482b32.js.map