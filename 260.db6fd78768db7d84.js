"use strict";(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[260],{6260:(Oe,T,i)=>{i.r(T),i.d(T,{AppModulesModule:()=>Ce});var c=i(8267),u=i(9902),f=i(525),M=i(8806),d=i(8999),E=i(2378),I=i(1292),D=i(3083),e=i(2222),x=i(2016),$=i(2874);let F=(()=>{class t extends I.K{constructor(o){super(),this._service=o,this.name="modules",this.show_options=this._service.show_options,this.tab_list=[]}get extensions(){return(0,D.fq)(this._service.active_item,this.name)}updateTabList(){this.tab_list=[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"systems",name:"Systems",count:this.system_count,icon:{class:"backoffice-documents"}},{id:"history",name:"Settings History",icon:{class:"backoffice-clock"}}].concat(this.extensions)}ngOnInit(){this.subscription("item",this._service.item.subscribe(o=>{this.loadValues(o),this.updateTabList()})),this.updateTabList()}loadValues(o){return(0,M.mG)(this,void 0,void 0,function*(){if(!o)return;const n={offset:0,limit:1,module_id:o.id};this.system_count=(yield(0,d.vIL)(n).toPromise()).total})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(E.L))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-modules"]],features:[e.qOj],decls:3,vars:1,consts:[[1,"flex-1","flex-col","sm:flex-row","flex","h-full","w-full","relative"],["heading","Modules","name","modules",1,"absolute","top-0","left-0","h-12","w-full","sm:h-full","sm:static"],["name","module","route","modules",1,"flex-1","relative","mt-12","sm:mt-0","w-full","sm:w-1/2",3,"tabs"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"sidebar",1),e._UZ(2,"item-display",2),e.qZA()),2&o&&(e.xp6(2),e.Q6J("tabs",n.tab_list))},directives:[x.k,$.s],styles:["sidebar[_ngcontent-%COMP%]{transition:height .3s}@media screen and (min-width: 640px){sidebar[_ngcontent-%COMP%]{width:20em!important}}\n/*# sourceMappingURL=modules.component.ts-angular-inline--2.css.map*/"]}),t})();var C=i(1119),R=i(8252),B=i(8027),K=i(9820),m=i(9026),S=i(8537),O=i(8377),X=i(592),G=i(5029),p=i(3829),q=i(1758),J=i(6298);let P=(()=>{class t{constructor(o,n){this._state=o,this._dialog=n,this._loading=new C.X(!1),this.loading=this._loading.asObservable(),this.item=this._state.item.pipe((0,B.h)(l=>l instanceof d.SQz)),this.associated_settings=this._state.all_item.pipe((0,K.b)(300),(0,m.w)(l=>l&&l instanceof d.SQz?(0,d.eRm)(l.id):[])),this.driver=this.item.pipe((0,m.w)(l=>(0,d.L4d)(l.driver_id)),(0,S.d)(1)),this.system=this.item.pipe((0,m.w)(l=>l.system_id?(0,d.hMA)(l.system_id):(0,R.of)(null)),(0,S.d)(1)),this.system_list=this.item.pipe((0,m.w)(l=>(this._loading.next(!0),console.log("Loading Systems..."),(0,d.vIL)({module_id:l.id}))),(0,O.U)(l=>l.data),(0,X.K)(()=>[]),(0,G.b)(l=>this._loading.next(!1)),(0,S.d)(1))}get active_item(){return this._state.active_item}toggleModuleState(){return(0,M.mG)(this,void 0,void 0,function*(){const n=yield(this.active_item.running?d.iAP:d.Dqv)(this.active_item.id).toPromise().catch(l=>l);n?"string"==typeof n&&n.length<64?(0,p.cB)(n):(0,p.cB)(`Failed to ${this.active_item.running?"stop":"start"} device '${this.active_item.id}'.\nView Error?`,"View",()=>this.viewDetails(n)):((0,p.t5)("Module successfully "+(this.active_item.running?"stopped":"started")),this.active_item.running=!this.active_item.running)})}viewDetails(o){this._dialog.open(q.a,{data:{content:o}})}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(E.L),e.LFG(J.uw))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Y=i(7752),v=i(9372),Q=i(2433),L=i(6835);function z(t,s){if(1&t&&(e.TgZ(0,"div",2),e.TgZ(1,"label"),e.SDv(2,14),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.qZA(),e.qZA()),2&t){const o=e.oxw();e.xp6(4),e.Oqu(o.item.notes)}}function w(t,s){if(1&t&&(e.TgZ(0,"div",2),e.TgZ(1,"label"),e.SDv(2,15),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.qZA(),e.qZA()),2&t){const o=e.oxw();e.xp6(4),e.Oqu(o.item.ip)}}function V(t,s){if(1&t&&(e.TgZ(0,"div",2),e.TgZ(1,"label"),e.SDv(2,16),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.qZA(),e.qZA()),2&t){const o=e.oxw();e.xp6(4),e.Oqu(o.item.port)}}function j(t,s){if(1&t&&(e.TgZ(0,"div",2),e.TgZ(1,"label"),e.SDv(2,17),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.ALo(5,"dateFrom"),e.qZA(),e.qZA()),2&t){const o=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,1,1e3*o.item.created_at))}}function W(t,s){if(1&t&&(e.TgZ(0,"div",2),e.TgZ(1,"label"),e.SDv(2,18),e.qZA(),e.TgZ(3,"div",4),e._uU(4),e.ALo(5,"dateFrom"),e.qZA(),e.qZA()),2&t){const o=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,1,1e3*o.item.updated_at))}}const H=function(t){return["/drivers",t]};function k(t,s){if(1&t&&(e.TgZ(0,"div",2),e.TgZ(1,"label"),e.SDv(2,19),e.qZA(),e.TgZ(3,"a",20),e._uU(4),e.ALo(5,"async"),e.qZA(),e.qZA()),2&t){const o=e.oxw();e.xp6(3),e.Q6J("routerLink",e.VKq(4,H,o.item.driver_id)),e.xp6(1),e.hij(" ",e.lcZ(5,2,o.driver).name||"<Unnamed>"," ")}}const ee=function(t){return["/systems",t,"modules"]};function te(t,s){if(1&t&&(e.TgZ(0,"div",2),e.TgZ(1,"label"),e.SDv(2,21),e.qZA(),e.TgZ(3,"a",20),e.ALo(4,"async"),e._uU(5),e.ALo(6,"async"),e.qZA(),e.qZA()),2&t){const o=e.oxw();e.xp6(3),e.Q6J("routerLink",e.VKq(6,ee,e.lcZ(4,2,o.system).id)),e.xp6(2),e.hij(" ",e.lcZ(6,4,o.system).name," ")}}function oe(t,s){if(1&t&&(e.TgZ(0,"div",22),e.SDv(1,23),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.pQV(o.item.running),e.QtT(1)}}function ne(t,s){1&t&&e._UZ(0,"mat-spinner",24)}const ie=function(){return[]};function se(t,s){if(1&t&&(e.TgZ(0,"section"),e._UZ(1,"a-settings-form",25),e.ALo(2,"async"),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("id",o.item.id)("merge",!0)("settings",o.item.settings)("merge_settings",e.lcZ(2,4,o.other_settings)||e.DdM(6,ie))}}function le(t,s){1&t&&(e.TgZ(0,"div",26),e._UZ(1,"mat-spinner",27),e.TgZ(2,"p"),e.SDv(3,28),e.qZA(),e.qZA())}let _e=(()=>{class t{constructor(o){this._service=o,this.driver=this._service.driver,this.system=this._service.system,this.other_settings=this._service.associated_settings}get item(){return this._service.active_item}toggleModuleState(){return(0,M.mG)(this,void 0,void 0,function*(){this.stopping=!0,yield this._service,this.stopping=!1})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["module-about"]],decls:32,vars:20,consts:function(){let s,o,n,l,a,g,r,U,h,N,A,b,y;return s=$localize`:@moduleTLSLabel␟fc14542d8661d50a55ec617e759b8275266b4084␟6787048658913260060:TLS:`,o=$localize`:@moduleUDPLabel␟45a627302b2be9d4d92e8361c28128b8747a3a76␟9217682045572066115:UDP:`,n=$localize`:@@settingsLabel␟121cc5391cd2a5115bc2b3160379ee5b36cd7716␟4930506384627295710:Settings`,l=$localize`:@moduleNotesLabel␟3b193ba24bd715ed412f5419df3acb59090141d3␟8421971980013015956:Notes:`,a=$localize`:@moduleIPLabel␟8271bb466916303dc1516952bf50e7e6626f7b2c␟253752108238785328:IP:`,g=$localize`:@modulePortLabel␟a2ceedad860954f374fc1ac8bae057292b1cec2e␟6167294183925653141:Port:`,r=$localize`:@@moduleCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,U=$localize`:@moduleUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,h=$localize`:@moduleUpdatedAtLabel␟797f76e214854e3930b89347440a035b92fb3adb␟1174891546565206449:Driver:`,N=$localize`:@moduleUpdatedAtLabel␟9680e97832208eb205d7d7e643c30265d8b4e9f5␟4615578067123890535:Logic for system:`,A=$localize`:␟2e434410a64453fd12259ac38cfcb4f7b4b26137␟2537520834646109979:{VAR_SELECT, select, true {Stop Module } false {Start Module }}`,A=e.Zx4(A,{VAR_SELECT:"\ufffd0\ufffd"}),b=$localize`:@@moduleStateToggle␟d09fa3d7f10a3f4ba1dbb8ede1ea6f993f0adc3b␟6594646568873405470: ${A}:ICU: `,y=$localize`:@@moduleDetailsLoading␟cb7cffb188a2b0bce758e40f67c29387dd6ccfcf␟3678638452756535871:Loading module settings...`,[[1,"space-y-2"],["class","flex items-center space-x-2",4,"ngIf"],[1,"flex","items-center","space-x-2"],s,[1,"value"],o,[1,"my-4"],["mat-button","",3,"disabled","click"],["class","text",4,"ngIf"],["diameter","32",4,"ngIf"],[1,"font-medium","text-lg"],n,[4,"ngIf","ngIfElse"],["load_state",""],l,a,g,r,U,h,[1,"underline",3,"routerLink"],N,[1,"text"],b,["diameter","32"],[3,"id","merge","settings","merge_settings"],[1,"p-8","flex","flex-col","items-center","justify-center","m-auto"],["diameter","48",1,"mb-4"],y]},template:function(o,n){if(1&o&&(e.TgZ(0,"section",0),e.YNc(1,z,5,1,"div",1),e.YNc(2,w,5,1,"div",1),e.YNc(3,V,5,1,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"label"),e.SDv(6,3),e.qZA(),e.TgZ(7,"div",4),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",2),e.TgZ(10,"label"),e.SDv(11,5),e.qZA(),e.TgZ(12,"div",4),e._uU(13),e.qZA(),e.qZA(),e.YNc(14,j,6,3,"div",1),e.YNc(15,W,6,3,"div",1),e.YNc(16,k,6,6,"div",1),e.ALo(17,"async"),e.YNc(18,te,7,8,"div",1),e.ALo(19,"async"),e.qZA(),e._UZ(20,"hr",6),e.TgZ(21,"section"),e.TgZ(22,"button",7),e.NdJ("click",function(){return n.toggleModuleState()}),e.YNc(23,oe,2,1,"div",8),e.YNc(24,ne,1,0,"mat-spinner",9),e.qZA(),e.qZA(),e._UZ(25,"hr",6),e.TgZ(26,"header",10),e.SDv(27,11),e.qZA(),e.YNc(28,se,3,7,"section",12),e.ALo(29,"async"),e.YNc(30,le,4,0,"ng-template",null,13,e.W1O)),2&o){const l=e.MAs(31);e.xp6(1),e.Q6J("ngIf",n.item.notes),e.xp6(1),e.Q6J("ngIf",n.item.ip),e.xp6(1),e.Q6J("ngIf",n.item.port),e.xp6(5),e.Oqu(n.item.tls),e.xp6(5),e.Oqu(n.item.udp),e.xp6(1),e.Q6J("ngIf",n.item.created_at),e.xp6(1),e.Q6J("ngIf",n.item.updated_at),e.xp6(1),e.Q6J("ngIf",e.lcZ(17,14,n.driver)),e.xp6(2),e.Q6J("ngIf",e.lcZ(19,16,n.system)),e.xp6(4),e.Q6J("disabled",n.stopping),e.xp6(1),e.Q6J("ngIf",!n.stopping),e.xp6(1),e.Q6J("ngIf",n.stopping),e.xp6(4),e.Q6J("ngIf",n.item.settings&&e.lcZ(29,18,n.other_settings))("ngIfElse",l)}},directives:[c.O5,Y.lW,f.yS,v.$g,Q.v],pipes:[c.Ov,L.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}\n/*# sourceMappingURL=module-about.component.ts-angular-inline--3.css.map*/"]}),t})();var de=i(899),Z=i(6752),ae=i(9499),ce=i(8482);const ue=function(t){return["/systems",t]};function me(t,s){if(1&t&&(e.TgZ(0,"div",18),e.TgZ(1,"div",19),e.TgZ(2,"a",20),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",12),e._uU(5),e.qZA(),e.TgZ(6,"div",14),e._uU(7),e.ALo(8,"dateFrom"),e.qZA(),e.qZA()),2&t){const o=s.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(6,ue,o.id)),e.xp6(1),e.Oqu(o.name),e.xp6(2),e.hij(" ",o.installed_ui_devices||"0"," "),e.xp6(2),e.hij(" ",e.lcZ(8,4,1e3*o.created_at)," ")}}function ge(t,s){if(1&t&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.SDv(3,11),e.qZA(),e.TgZ(4,"div",12),e.SDv(5,13),e.qZA(),e.TgZ(6,"div",14),e.SDv(7,15),e.qZA(),e.qZA(),e.TgZ(8,"div",16),e.YNc(9,me,9,8,"div",17),e.ALo(10,"async"),e.qZA(),e.qZA()),2&t){const o=e.oxw(2);e.xp6(9),e.Q6J("ngForOf",e.lcZ(10,1,o.system_list))}}function re(t,s){if(1&t&&(e.TgZ(0,"section"),e.YNc(1,ge,11,3,"div",7),e.ALo(2,"async"),e.qZA()),2&t){const o=e.oxw(),n=e.MAs(9);let l;e.xp6(1),e.Q6J("ngIf",null==(l=e.lcZ(2,2,o.system_list))?null:l.length)("ngIfElse",n)}}function Ae(t,s){1&t&&(e.TgZ(0,"div",21),e._UZ(1,"mat-spinner",22),e.TgZ(2,"p"),e._uU(3,"Loading systems..."),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("diameter",48))}function fe(t,s){1&t&&(e.TgZ(0,"div",21),e.TgZ(1,"p"),e._uU(2,"No systems with module"),e.qZA(),e.qZA())}let Me=(()=>{class t{constructor(o){this._service=o,this.filter$=new C.X(""),this.loading=this._service.loading,this.system_list=(0,de.aj)([this.filter$,this._service.system_list]).pipe((0,O.U)(n=>{const[l,a]=n,g=l.toLowerCase();return l?a.filter(r=>r.name.toLowerCase().includes(g)):a}))}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["module-systems"]],decls:10,vars:5,consts:function(){let s,o,n;return s=$localize`:@@nameLabel␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,o=$localize`:@@systemLabel␟6c24d3e08bc16576fbd5580dc255a31c4b08c366␟8919524640139321287:No. Modules`,n=$localize`:@@createdLabel␟1b051734b0ee9021991c91b3ed4e81c244322462␟4207916966377787111:Created`,[[1,"flex","items-center","mb-4"],["appearance","outline",1,"h-12","flex-1"],["matPrefix","","className","backoffice-magnifying-glass text-xl mr-2"],["matInput","","placeholder","Filter systems...",1,"rounded-none",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["role","table","class","overflow-x-auto",4,"ngIf","ngIfElse"],["role","table",1,"overflow-x-auto"],["table-head",""],["flex","",1,"flex-1","p-2"],s,[1,"w-48","p-2"],o,[1,"w-36","p-2"],n,["table-body","",1,"overflow-y-auto"],["table-row","",4,"ngFor","ngForOf"],["table-row",""],["flex","",1,"flex-1","p-2","underline"],[3,"routerLink"],[1,"flex","flex-col","items-center","p-8","mx-auto"],[1,"mb-4",3,"diameter"]]},template:function(o,n){if(1&o&&(e.TgZ(0,"section",0),e.TgZ(1,"mat-form-field",1),e._UZ(2,"app-icon",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(a){return n.filter$.next(a)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(4,re,3,4,"section",4),e.ALo(5,"async"),e.YNc(6,Ae,4,1,"ng-template",null,5,e.W1O),e.YNc(8,fe,3,0,"ng-template",null,6,e.W1O)),2&o){const l=e.MAs(7);e.xp6(3),e.Q6J("ngModel",""),e.xp6(1),e.Q6J("ngIf",!e.lcZ(5,3,n.loading))("ngIfElse",l)}},directives:[Z.KE,ae.o,Z.qo,ce.Nt,u.Fj,u.JJ,u.On,c.O5,c.sg,f.yS,v.$g],pipes:[c.Ov,L.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}\n/*# sourceMappingURL=module-systems.component.ts-angular-inline--4.css.map*/"]}),t})();var Se=i(5605),pe=i(8051);const Te=[{path:":id",component:F,children:[{path:"about",component:_e},{path:"systems",component:Me},{path:"extend/:id",component:Se.z},{path:"history",component:pe.D},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var Ee=i(1226);let Ce=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,u.u5,f.Bz.forChild(Te),Ee.X]]}),t})()}}]);
//# sourceMappingURL=260.db6fd78768db7d84.js.map