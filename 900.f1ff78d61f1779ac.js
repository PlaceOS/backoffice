"use strict";(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[900],{3900:(_e,f,s)=>{s.r(f),s.d(f,{AppRepositoriesModule:()=>le});var d=s(6575),M=s(987),O=s(9794),p=s(1670),l=s(5530),E=s(4424),N=s(462),y=s(9681),T=s(6520),R=s(8175),S=s(7422),L=s(5046),u=s(3540),F=s(9928),$=s(9134),e=s(3129),Z=s(6861);let m=(()=>{class o{get active_item(){return this._state.active_item}constructor(i,n){this._state=i,this._dialog=n,this._loading=new N.X(!1),this.loading=this._loading.asObservable(),this.item=this._state.item,this.driver_list=this._state.active_item$.pipe((0,T.w)(t=>t instanceof l.aPq&&t.repo_type!==l.VYb.Interface?(this._loading.next(!0),(0,l.qTj)(t.id,{limit:2e3})):(0,y.of)(null)),(0,R.K)(t=>[]),(0,S.U)(t=>(this._loading.next(!1),t))),this.commit=this._state.active_item$.pipe((0,L.h)(t=>t instanceof l.aPq),(0,T.w)(t=>(0,l.rmk)(t.id,{count:1})),(0,R.K)(t=>[]),(0,S.U)(t=>t[0]?.commit||"HEAD"))}pullLatestCommit(){var i=this;return(0,p.Z)(function*(){if(!(yield(0,l.cYE)(i.active_item.id).toPromise().catch(r=>{(0,F.cB)(`Error pulling latest commit. Error: ${JSON.stringify(r.response||r.message||"Pull timed out")}`)})))return;const t=yield(0,l.AOp)(i.active_item.id).toPromise();i._state.replaceItem(t)})()}newDriver(i){var n=this;return(0,p.Z)(function*(){n._dialog.open($.K,{height:"auto",width:"auto",maxHeight:"calc(100vh - 2em)",maxWidth:"calc(100vw - 2em)",data:{item:new l.CbG({name:"",module_name:"",repository_id:n.active_item.id,file_name:i}),name:"Driver",save:t=>(0,l.X2O)(t)}})})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.LFG(u.L),e.LFG(Z.uw))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var P=s(3910),x=s(857),B=s(3672);function U(o,c){if(1&o&&(e.TgZ(0,"span",24),e._uU(1),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.hij(" (",i.commit,") ")}}function D(o,c){1&o&&(e.ynx(0),e.SDv(1,25),e.BQk())}function Y(o,c){1&o&&e._UZ(0,"mat-spinner",26)}let G=(()=>{class o extends E.c{get item(){return this._service.active_item}get local_url(){return this.item.type===l.VYb.Interface?`${location.origin}/${this.item.folder_name}/`:`${location.hash}`}get repo_uri(){return this.item?.uri.replace(/\/[a-zA-Z0-9\-\.:]*@/,"/...@")}constructor(i){super(),this._service=i,this.commit=""}ngOnInit(){this.commit="",this.subscription("commit",this._service.commit.subscribe(i=>this.commit=i))}pullLatestCommit(){var i=this;return(0,p.Z)(function*(){i.pulling=!0,yield i._service.pullLatestCommit(),i.pulling=!1})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(m))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["repository-about"]],features:[e.qOj],decls:54,vars:25,consts:function(){let i,n,t,r,_,A,C,v,I,h,b;return i=$localize`:@@descriptionLabel␟4a22c6843133f0b0d7dc0d28f864f2f90c1de7ad␟6996799422725544865:Description:`,n=$localize`:@@repoTypeLabel␟e78c0d60ac39787f62c9159646fe0b3c1ed55a1d␟2736556170366900089:Type:`,t=$localize`:␟f07f17add1b4d8fd14dedf1038249bf1fcc7595c␟2995574017154029352:{VAR_SELECT, select, interface {Interface Repository } driver {Driver Repository } , other {=Unknown=}}`,t=e.Zx4(t,{VAR_SELECT:"\ufffd0\ufffd"}),r=$localize`:@@driverListEmpty␟ae94603c1f5d07ee3a1a2697b3b44cdf7ba68b3b␟1624572359752225100: ${t}:ICU: `,_=$localize`:@@repoFolderNameLabel␟28e6abdb97b12116fa31c70e842d7b4b37e08fda␟8999240573830223335:Folder name:`,A=$localize`:@@repoCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,C=$localize`:@@repoUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,v=$localize`:@@repoUriLabel␟6457460dafb273ccfbc2d68f7ec171f467c6e1c1␟1789506856666851299:Repository URI:`,I=$localize`:@@repoBranchLabel␟6ff214f90707e3964f2a08e22f6a079ec2649a5f␟733188758140846537:Branch:`,h=$localize`:@@repoCommitHashLabel␟682ca154aba791fe87aa293b29c921247e12da9c␟7502103762200984555:Commit hash:`,b=$localize`:@@repoPullAction␟e74b9f1086c2fdfeaf7334dbdfa8651830ab2acf␟2864409842456905465: Pull latest commit `,[[1,"mb-4","text-center","flex","space-x-2"],[1,"rounded","p-2","border","border-base-200","space-y-2","w-1/3","flex-1","flex","flex-col"],[1,"flex","items-center","space-x-2"],i,[1,"value","select-all"],n,[1,"value"],r,_,["target","_blank",3,"href"],A,C,v,[1,"value","underline","select-all"],I,[1,"text-xs"],[1,"whitespace-nowrap"],h,[1,"text-xs","truncate"],["class","select-text mono",4,"ngIf"],[1,"flex-1"],["btn","",1,"w-full",3,"disabled","click"],[4,"ngIf","ngIfElse"],["spinner",""],[1,"select-text","mono"],b,["diameter","32"]]},template:function(n,t){if(1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"label"),e.SDv(4,3),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA()(),e.TgZ(7,"div",2)(8,"label"),e.SDv(9,5),e.qZA(),e.TgZ(10,"div",6),e.SDv(11,7),e.qZA()(),e.TgZ(12,"div",2)(13,"label"),e.SDv(14,8),e.qZA(),e.TgZ(15,"div",4)(16,"a",9),e._uU(17),e.qZA()()(),e.TgZ(18,"div",2)(19,"label"),e.SDv(20,10),e.qZA(),e.TgZ(21,"div",6),e._uU(22),e.ALo(23,"dateFrom"),e.qZA()(),e.TgZ(24,"div",2)(25,"label"),e.SDv(26,11),e.qZA(),e.TgZ(27,"div",6),e._uU(28),e.ALo(29,"dateFrom"),e.qZA()()(),e.TgZ(30,"div",1)(31,"div",2)(32,"label"),e.SDv(33,12),e.qZA(),e.TgZ(34,"div",13)(35,"a",9),e.ALo(36,"safe"),e._uU(37),e.qZA()()(),e.TgZ(38,"div",2)(39,"label"),e.SDv(40,14),e.qZA(),e.TgZ(41,"code",15),e._uU(42),e.qZA()(),e.TgZ(43,"div",2)(44,"label",16),e.SDv(45,17),e.qZA(),e.TgZ(46,"code",18),e._uU(47),e.YNc(48,U,2,1,"span",19),e.qZA()(),e._UZ(49,"div",20),e.TgZ(50,"button",21),e.NdJ("click",function(){return t.pullLatestCommit()}),e.YNc(51,D,2,0,"ng-container",22),e.qZA()()(),e.YNc(52,Y,1,0,"ng-template",null,23,e.W1O)),2&n){const r=e.MAs(53);e.xp6(6),e.hij(" ",t.item.description||"No description"," "),e.xp6(5),e.pQV(t.item.type),e.QtT(11),e.xp6(4),e.ekj("underline","interface"===t.item.type)("pointer-events-none","interface"!==t.item.type),e.xp6(1),e.Q6J("href",t.local_url,e.LSH),e.xp6(1),e.Oqu(t.item.folder_name||"No folder set"),e.xp6(5),e.hij(" ",e.lcZ(23,18,1e3*t.item.created_at)," "),e.xp6(6),e.hij(" ",e.lcZ(29,20,1e3*t.item.updated_at)," "),e.xp6(7),e.Q6J("href",e.xi3(36,22,t.item.uri,"url"),e.LSH),e.xp6(2),e.Oqu(t.repo_uri||"No URI set"),e.xp6(5),e.hij(" ",t.item.branch," "),e.xp6(5),e.hij(" ",t.item.commit_hash||"No Commit hash set"," "),e.xp6(1),e.Q6J("ngIf",t.commit&&t.commit!==t.item.commit_hash),e.xp6(2),e.Q6J("disabled",t.pulling),e.xp6(1),e.Q6J("ngIf",!t.pulling)("ngIfElse",r)}},dependencies:[d.O5,P.Ou,x.R,B.y],styles:["[_nghost-%COMP%]{height:100%;width:100%}.mono[_ngcontent-%COMP%]{font-family:var(--mono-font)}label[_ngcontent-%COMP%]{width:6rem;text-align:left}\n\n/*# sourceMappingURL=repository-about.component.ts-angular-inline--50.css.map*/"]})}return o})();var g=s(5997),X=s(4620);function K(o,c){if(1&o){const i=e.EpF();e.TgZ(0,"div",13),e._UZ(1,"div",14),e.ALo(2,"driverFormat"),e.TgZ(3,"div",15)(4,"button",16),e.NdJ("click",function(){const r=e.CHM(i).$implicit,_=e.oxw(3);return e.KtG(_.newDriver(r))}),e._UZ(5,"app-icon",17),e.qZA()()()}if(2&o){const i=c.$implicit;e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,1,i),e.oJD)}}function z(o,c){if(1&o&&(e.TgZ(0,"div",6)(1,"div",7)(2,"td",8),e.SDv(3,9),e.qZA(),e._UZ(4,"td",10),e.qZA(),e.TgZ(5,"div",11),e.YNc(6,K,6,3,"div",12),e.ALo(7,"async"),e.qZA()()),2&o){const i=e.oxw(2);e.xp6(6),e.Q6J("ngForOf",e.lcZ(7,1,i.driver_list))}}function J(o,c){if(1&o&&(e.ynx(0),e.YNc(1,z,8,3,"div",5),e.ALo(2,"async"),e.BQk()),2&o){const i=e.oxw(),n=e.MAs(4);let t;e.xp6(1),e.Q6J("ngIf",null==(t=e.lcZ(2,2,i.driver_list))?null:t.length)("ngIfElse",n)}}function w(o,c){1&o&&(e.TgZ(0,"div",18)(1,"p"),e.SDv(2,19),e.qZA()())}function Q(o,c){1&o&&(e.TgZ(0,"div",18),e._UZ(1,"mat-spinner",20),e.TgZ(2,"p"),e.SDv(3,21),e.qZA()())}let j=(()=>{class o{get item(){return this._service.active_item}constructor(i){this._service=i,this.driver_list=this._service.driver_list,this.newDriver=n=>this._service.newDriver(n)}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(m))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["repository-drivers"]],decls:7,vars:2,consts:function(){let i,n,t,r;return i=$localize`:@@repoDriverHeader␟02fad7d445c1efdfff3039304fb981b61edd56b5␟279063703139377947: Available Drivers `,n=$localize`:@@driverListname␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,t=$localize`:@@driverListEmpty␟0b0bbe90203a8b9ff0681db976d02fbcd960cb85␟6121742772920538074:No drivers for repository`,r=$localize`:@@driverListLoading␟929bfd86e4829c0b7401762d92f52536a57ca6c0␟4949757592530193773:Loading driver list...`,[[1,"font-medium","text-lg","mb-2"],i,[4,"ngIf","ngIfElse"],["empty_state",""],["load_state",""],["role","table","class","overflow-x-auto",4,"ngIf","ngIfElse"],["role","table",1,"overflow-x-auto"],["table-head",""],[1,"flex-1","p-2"],n,[1,"w-12","p-2","h-10"],["body","",1,"overflow-y-auto"],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2",3,"innerHTML"],[1,"w-12","flex","justify-center"],["btn","","icon","",3,"click"],["className","backoffice-plus"],[1,"flex","flex-col","p-8","items-center","justify-center"],t,["diameter","48",1,"mb-4"],r]},template:function(n,t){if(1&n&&(e.TgZ(0,"h3",0),e.SDv(1,1),e.qZA(),e.YNc(2,J,3,4,"ng-container",2),e.YNc(3,w,3,0,"ng-template",null,3,e.W1O),e.YNc(5,Q,4,0,"ng-template",null,4,e.W1O)),2&n){const r=e.MAs(6);e.xp6(2),e.Q6J("ngIf",!t.loading)("ngIfElse",r)}},dependencies:[d.sg,d.O5,g.o,P.Ou,d.Ov,X.X],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n\n/*# sourceMappingURL=repository-drivers.component.ts-angular-inline--51.css.map*/"]})}return o})();var V=s(6497),H=s(2941),q=s(2637),W=s(8771),k=s(6529),ee=s(4331),te=s(1387),ie=s(702),oe=s(257);function ne(o,c){if(1&o){const i=e.EpF();e.ynx(0),e._UZ(1,"item-details",11)(2,"item-tablist",12),e.TgZ(3,"div",13,14),e.NdJ("scroll",function(){e.CHM(i);const t=e.MAs(4),r=e.oxw();return e.KtG(r.scroll=t.scrollTop)}),e._UZ(5,"router-outlet"),e.qZA(),e.BQk()}if(2&o){const i=e.oxw();e.xp6(1),e.Q6J("can_edit",!0)("item",i.item),e.xp6(1),e.Q6J("base",i.name)("tabs",i.tab_list)("scrolled",i.scroll>0)}}const se=[{path:":id",component:(()=>{class o extends E.c{get item(){return this._service.active_item}get extensions(){return(0,H.fq)(this._service.active_item,this.name)}updateTabList(){this.tab_list=(this.driver_count<0||!this.driver_count?[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}}]:[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"drivers",name:"Drivers",count:this.driver_count,icon:{class:"backoffice-documents"}}]).concat(this.extensions)}constructor(i,n){super(),this._service=i,this._item=n,this.name="repositories",this.open_menu=!1,this.driver_count=0,this.tab_list=[],this.newItem=()=>this._item.create()}ngOnInit(){var i=this;return(0,p.Z)(function*(){i.subscription("item",i._service.driver_list.subscribe(n=>{i.driver_count=n?n.length:-1,i.updateTabList()})),i.updateTabList()})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(m),e.Y36(u.L))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["new-repositories-view"]],features:[e.qOj],decls:11,vars:5,consts:[[1,"absolute","inset-0","flex","items-center","divide-y","sm:divide-y-0","sm:divide-x","divide-base-200","bg-base-100"],[1,"sm:h-full",3,"open","openChange"],["title","Repositories",1,"hidden","sm:block",3,"route"],[1,"flex-1","w-1/2","h-full","relative","flex","flex-col","z-0"],["title","Repositories",1,"z-20","sm:hidden",3,"route"],["btn","","icon","",1,"sm:hidden","mr-2",3,"click"],["className","backoffice-menu"],[1,"flex","flex-col","flex-1","h-1/2"],[4,"ngIf"],["matTooltip","New repository","matTooltipPosition","right","matRipple","",1,"absolute","bottom-2","left-2","sm:-left-9","w-12","h-12","flex","items-center","justify-center","bg-secondary","rounded-lg","shadow","z-30","text-secondary-content",3,"click"],[1,"text-3xl",3,"className"],["type","Repository",3,"can_edit","item"],[1,"z-10",3,"base","tabs","scrolled"],[1,"flex-1","h-1/2","w-full","overflow-auto","p-4","z-0","relative",3,"scroll"],["el",""]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"sidebar-menu",1),e.NdJ("openChange",function(_){return t.open_menu=_}),e.qZA(),e._UZ(2,"item-sidebar",2),e.TgZ(3,"div",3)(4,"item-selection",4)(5,"button",5),e.NdJ("click",function(){return t.open_menu=!0}),e._UZ(6,"app-icon",6),e.qZA()(),e.TgZ(7,"div",7),e.YNc(8,ne,6,5,"ng-container",8),e.qZA(),e.TgZ(9,"button",9),e.NdJ("click",function(){return t.newItem()}),e._UZ(10,"app-icon",10),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("open",t.open_menu),e.xp6(1),e.Q6J("route",t.name),e.xp6(2),e.Q6J("route",t.name),e.xp6(4),e.Q6J("ngIf",null==t.item?null:t.item.id),e.xp6(2),e.Q6J("className","backoffice-plus"))},dependencies:[d.O5,O.lC,g.o,q.$,W.V,k.K,ee.r,te.l,ie.gM,oe.wG]})}return o})(),children:[{path:"about",component:G},{path:"drivers",component:j},{path:"extend/:id",component:V.z},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var re=s(5858);let le=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#i=this.\u0275inj=e.cJS({imports:[d.ez,M.u5,O.Bz.forChild(se),re.X]})}return o})()}}]);
//# sourceMappingURL=900.f1ff78d61f1779ac.js.map