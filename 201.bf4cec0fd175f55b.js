"use strict";(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[201],{8201:(lt,F,_)=>{_.r(F),_.d(F,{AppZonesModule:()=>st});var r=_(6575),p=_(987),f=_(9794),Z=_(1670),c=_(5530),C=_(462),N=_(8159),X=_(9681),Y=_(5933),A=_(6520),u=_(7422),O=_(8175),S=_(680),Q=_(7627),R=_(3759),y=_(3540),z=_(9928),q=_(8510),e=_(3129),D=_(6861);let E=(()=>{class n{get active_item(){return this._service.active_item}constructor(t,i){var o=this;this._service=t,this._dialog=i,this._loading=new C.X(!1),this._change=new C.X(!1),this.loading=this._loading.asObservable(),this.item=this._service.item,this.counts=(0,N.aj)([this._service.active_item$,this._change]).pipe((0,Y.b)(300),(0,A.w)(function(){var s=(0,Z.Z)(function*(l){const[d]=l;if(!(d instanceof c.TT8))return{};o._loading.next(!0);const v=yield Promise.all([(0,c.vIL)({zone_id:d.id,limit:1}).pipe((0,u.U)(m=>m.total)).toPromise().catch(m=>0),(0,c.Vgq)(d.id).pipe((0,u.U)(m=>m.total)).toPromise().catch(m=>0),(0,c.Eio)(d.id).pipe((0,u.U)(m=>m.length)).toPromise().catch(m=>0),(0,c.I0G)({parent_id:d.id,limit:1}).pipe((0,u.U)(m=>m.total)).toPromise().catch(m=>0)]),[b,h,M,x]=v;return o._loading.next(!1),{systems:b,triggers:h,metadata:M,children:x}});return function(l){return s.apply(this,arguments)}}())),this.systems=this.item.pipe((0,A.w)(s=>s instanceof c.TT8?(0,c.vIL)({zone_id:s.id}):[]),(0,u.U)(s=>s.data),(0,O.K)(s=>[]),(0,S.d)()),this.triggers=this.item.pipe((0,A.w)(s=>s instanceof c.TT8?(0,c.Vgq)(s.id):[]),(0,u.U)(s=>s.data),(0,O.K)(s=>[]),(0,S.d)()),this.metadata=this.item.pipe((0,A.w)(s=>s instanceof c.TT8?(0,c.Eio)(s.id):(0,X.of)([])),(0,O.K)(s=>[]),(0,S.d)(1)),this.children=this.item.pipe((0,A.w)(s=>s instanceof c.TT8?(0,c.I0G)({parent_id:s.id}):[]),(0,u.U)(s=>s.data),(0,O.K)(s=>[]),(0,S.d)()),setTimeout(()=>this._change.next(!this._change.getValue()),1e3)}selectTrigger(){var t=this;return(0,Z.Z)(function*(){const i=t._dialog.open(q.f,{data:{service_name:"Triggers",query_fn:l=>(0,c.$Um)({q:l}).pipe((0,u.U)(d=>d.data))}}),o=yield Promise.race([i.componentInstance.event.pipe((0,Q.P)(l=>"action"===l.reason)).toPromise(),i.afterClosed().toPromise()]);if(!o||!o.reason)return i.close();const s=yield t.addTrigger(i.componentInstance.item);i.close(),s&&t._service.replaceItem(s)})()}addTrigger(t){var i=this;return(0,Z.Z)(function*(){return(0,c.BfP)(i.active_item.id,{...i.active_item,triggers:(0,R.Tw)([...i.active_item.triggers,t.id])}).toPromise()})()}removeTrigger(t){var i=this;return(0,Z.Z)(function*(){const o=yield(0,R._5)({title:"Remove trigger",content:`<p>Are you sure you want remove trigger "${t.name}"?</p><p>Configuration will be updated <strong>immediately</strong>.</p>`,icon:{type:"icon",class:"backoffice-trash"}},i._dialog);if(!o||!o.reason)return;const s=yield(0,c.BfP)(i.active_item.id,{...i.active_item,triggers:i.active_item.triggers.filter(l=>l!==t.id)}).toPromise().catch(l=>{throw o.close(),(0,z.cB)(`Error removing trigger ${t.id} from zone. Error: ${l.statusText||l.message||l}`),l});o.close(),(0,z.t5)("Successfully removed trigger from zone."),s&&i._service.replaceItem(s)})()}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(y.L),e.LFG(D.uw))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var H=_(740),j=_(4813),k=_(6702),T=_(1268),U=_(3910),B=_(257),V=_(6355),I=_(857);function W(n,a){1&n&&(e.TgZ(0,"header",7),e.SDv(1,17),e.qZA())}function ee(n,a){if(1&n&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function te(n,a){if(1&n&&e._UZ(0,"execute-method-field",19),2&n){const t=e.oxw(2);e.Q6J("zone",null==t.item?null:t.item.id)("system",t.active_system)}}function ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e.YNc(1,W,2,0,"header",4),e.ALo(2,"async"),e.TgZ(3,"mat-form-field",13)(4,"mat-select",14),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.active_system=o)}),e.YNc(5,ee,2,2,"mat-option",15),e.ALo(6,"async"),e.qZA()(),e.YNc(7,te,1,2,"execute-method-field",16),e.qZA()}if(2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",null==(i=e.lcZ(2,4,t.systems))?null:i.length),e.xp6(3),e.Q6J("ngModel",t.active_system),e.xp6(1),e.Q6J("ngForOf",e.lcZ(6,6,t.systems)),e.xp6(2),e.Q6J("ngIf",t.active_system&&t.active_system.id)}}const oe=function(n){return["/zones",n,"about"]};function ie(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",21),e.SDv(2,22),e.qZA(),e.TgZ(3,"div",23)(4,"a",24),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("routerLink",e.VKq(2,oe,null==t.item?null:t.item.parent_id)),e.xp6(1),e.Oqu(null==t.item?null:t.item.parent_id)}}function se(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",21),e.SDv(2,25),e.qZA(),e.TgZ(3,"div",26),e._uU(4),e.ALo(5,"dateFrom"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,1,1e3*(null==t.item?null:t.item.created_at))," ")}}function le(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",21),e.SDv(2,27),e.qZA(),e.TgZ(3,"div",26),e._uU(4),e.ALo(5,"dateFrom"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,1,1e3*(null==t.item?null:t.item.updated_at))," ")}}function _e(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",21),e.SDv(2,28),e.qZA(),e.TgZ(3,"div",26),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.location)}}function ae(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",21),e.SDv(2,29),e.qZA(),e.TgZ(3,"div",26),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.code)}}function ce(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",21),e.SDv(2,30),e.qZA(),e.TgZ(3,"div",26),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.type)}}function de(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",21),e.SDv(2,31),e.qZA(),e.TgZ(3,"div",26),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.count)}}function re(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",21),e.SDv(2,32),e.qZA(),e.TgZ(3,"div",26),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.capacity)}}function ge(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",21),e.SDv(2,33),e.qZA(),e.TgZ(3,"div",26),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(null==t.item?null:t.item.timezone)}}function me(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",34),e.SDv(2,35),e.qZA(),e.TgZ(3,"a",36),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("href",null==t.item?null:t.item.map_id,e.LSH),e.xp6(1),e.Oqu(null==t.item?null:t.item.map_id)}}function pe(n,a){if(1&n&&(e.TgZ(0,"div",42),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t," ")}}function ue(n,a){if(1&n&&(e.TgZ(0,"div",40),e.YNc(1,pe,2,1,"div",41),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.tag_list)}}function fe(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"label",37),e.SDv(2,38),e.qZA(),e.YNc(3,ue,2,1,"div",39),e.qZA()),2&n){const t=e.oxw(),i=e.MAs(24);e.xp6(3),e.Q6J("ngIf",t.tag_list&&t.tag_list.length)("ngIfElse",i)}}function Te(n,a){1&n&&(e.TgZ(0,"header",7),e.SDv(1,43),e.qZA())}function Ce(n,a){if(1&n&&e._UZ(0,"section",44),2&n){const t=e.oxw();e.Q6J("innerHTML",t.parsed_description,e.oJD)}}function Ae(n,a){if(1&n&&(e.TgZ(0,"section"),e._UZ(1,"a-settings-form",45),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("merge",!0)("id",null==t.item?null:t.item.id)("settings",null==t.item?null:t.item.settings)}}function Ee(n,a){1&n&&(e.TgZ(0,"div",46),e._UZ(1,"mat-spinner",47),e.TgZ(2,"p"),e.SDv(3,48),e.qZA()())}function Ze(n,a){1&n&&(e.TgZ(0,"p",49),e.SDv(1,50),e.qZA())}let Ne=(()=>{class n{get item(){return this._service.active_item}get parsed_description(){return this.item?(0,H.TU)(this.item?.description):""}get tag_list(){return this.item?this.item?.tags:[]}constructor(t){this._service=t,this.systems=this._service.systems}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(E))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["zone-about"]],decls:25,vars:18,consts:function(){let t,i,o,s,l,d,v,b,h,M,x,m,J,G,K,w;return t=$localize`:@@settingsLabel␟5ba97a3f90a79c4d7720b941ae416c8c84337e38␟180274732945114229: Settings `,i=$localize`:@@execHeader␟ed9310a2bf9967e4b775427a0268199f14dccc5c␟4495987627263560514: Execute Command `,o=$localize`:@@zoneParentLabel␟8dce5a1b53185785ceb8eaece03a45f95a1058ae␟1730450554195977822:Parent ID:`,s=$localize`:@@zoneCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,l=$localize`:@@zoneUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,d=$localize`:@@zoneLocationLabel␟4bebbae34f84157c0b5b852529f0bc2c39a5a38a␟4510013877734913501:Location:`,v=$localize`:@@zoneCodeLabel␟08a3263c58aafca24f31b3f312d90934a14069e5␟4793952596010266372:Code:`,b=$localize`:@@zoneTypeLabel␟b2ec946dbfa29aa3430b9999250edf9a2a6e3552␟2473796624751549543:Type: `,h=$localize`:@@zoneCountLabel␟e684046d73bcee88e82f7ff01e2852789a05fc32␟6836949342567686088:Count:`,M=$localize`:@@zoneCapacityLabel␟5e99e97762108233b63075b729dff9faf3405125␟3401401032238462929: Capacity: `,x=$localize`:@@zoneTimezoneLabel␟dbd34479df566856113383ebef3a2cb98e494642␟7608711767660448404: Timezone: `,m=$localize`:@@zoneMapLabel␟9ebaf3b8ded6040d45930d0c65821ca1fd0e3b03␟6824558743144817716: Map: `,J=$localize`:@@zoneTagsLabel␟bc46e565b7e96805c362f693ad5c05c7b09fbbc6␟2403341515369782519: Tags: `,G=$localize`:@@descriptionLabel␟91d130f4d03590d2ab82ec6ccd644aaff7dbf49c␟7630730180260398735: Description `,K=$localize`:@@zoneLoadingLabel␟adb8ef1c4f047ddce91397fb4d8f83acc47f4649␟1768664919049731907:Loading zone settings...`,w=$localize`:@@zoneTagsEmpty␟48171f6d8b15daa87a49496d685bd03bb4f84253␟1765229228159298837: <No Tags> `,[[1,"mb-4","flex","space-x-2"],["class","rounded p-2 border border-base-200  space-y-2 w-1/3 flex-1 flex flex-col",4,"ngIf"],[1,"rounded","p-4","border","border-base-200","space-y-2","w-1/3","flex-1","flex","flex-col"],["class","flex items-center space-x-2",4,"ngIf"],["class","font-medium text-lg",4,"ngIf"],["class","description",3,"innerHTML",4,"ngIf"],[1,"my-4"],[1,"font-medium","text-lg"],t,[4,"ngIf","ngIfElse"],["load_state",""],["empty_tag_state",""],[1,"rounded","p-2","border","border-base-200","space-y-2","w-1/3","flex-1","flex","flex-col"],["appearance","outline",1,"h-12"],["placeholder","Select system",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"zone","system",4,"ngIf"],i,[3,"value"],[3,"zone","system"],[1,"flex","items-center","space-x-2"],[1,"w-24"],o,[1,"value","underline","mono"],[3,"routerLink"],s,[1,"value"],l,d,v,b,h,M,x,[1,"min-w-[6rem]","w-24"],m,[1,"underline","truncate",3,"href"],["for","tags",1,"w-24","my-1"],J,["class","value flex flex-wrap flex-1",4,"ngIf","ngIfElse"],[1,"value","flex","flex-wrap","flex-1"],["class","mono text-xs px-3 py-2 m-2 bg-base-200  rounded-2xl",4,"ngFor","ngForOf"],[1,"mono","text-xs","px-3","py-2","m-2","bg-base-200","rounded-2xl"],G,[1,"description",3,"innerHTML"],[3,"merge","id","settings"],[1,"flex","flex-col","items-center","p-8"],["diameter","48",1,"mb-4"],K,[1,"text-center","py-1"],w]},template:function(i,o){if(1&i&&(e.TgZ(0,"section",0),e.YNc(1,ne,8,8,"div",1),e.ALo(2,"async"),e.TgZ(3,"div",2),e.YNc(4,ie,6,4,"div",3),e.YNc(5,se,6,3,"div",3),e.YNc(6,le,6,3,"div",3),e.YNc(7,_e,5,1,"div",3),e.YNc(8,ae,5,1,"div",3),e.YNc(9,ce,5,1,"div",3),e.YNc(10,de,5,1,"div",3),e.YNc(11,re,5,1,"div",3),e.YNc(12,ge,5,1,"div",3),e.YNc(13,me,5,2,"div",3),e.YNc(14,fe,4,2,"div",3),e.qZA()(),e.YNc(15,Te,2,0,"header",4),e.YNc(16,Ce,1,1,"section",5),e._UZ(17,"hr",6),e.TgZ(18,"header",7),e.SDv(19,8),e.qZA(),e.YNc(20,Ae,2,3,"section",9),e.YNc(21,Ee,4,0,"ng-template",null,10,e.W1O),e.YNc(23,Ze,2,0,"ng-template",null,11,e.W1O)),2&i){const s=e.MAs(22);let l;e.xp6(1),e.Q6J("ngIf",null==(l=e.lcZ(2,16,o.systems))?null:l.length),e.xp6(3),e.Q6J("ngIf",null==o.item?null:o.item.parent_id),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.created_at),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.updated_at),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.location),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.code),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.type),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.count),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.capacity),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.timezone),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.map_id),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.tags),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.description),e.xp6(1),e.Q6J("ngIf",null==o.item?null:o.item.description),e.xp6(4),e.Q6J("ngIf",null==o.item?null:o.item.settings)("ngIfElse",s)}},dependencies:[r.sg,r.O5,p.JJ,p.On,f.rH,j.v,k.Q,T.KE,U.Ou,B.ey,V.gD,r.Ov,I.R],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n\n/*# sourceMappingURL=zone-about.component.ts-angular-inline--56.css.map*/"]})}return n})();var P=_(5997),L=_(9674),$=_(702);const Oe=function(n){return["/systems",n]};function Se(n,a){if(1&n&&(e.TgZ(0,"div",16)(1,"div",17)(2,"a",18),e._uU(3),e.qZA()(),e.TgZ(4,"div",10),e._uU(5),e.qZA(),e.TgZ(6,"div",12),e._uU(7),e.ALo(8,"dateFrom"),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(7,Oe,t.id))("matTooltip",t.id),e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.Oqu(t.modules.length),e.xp6(2),e.Oqu(e.lcZ(8,5,1e3*(null==t?null:t.created_at)))}}function Pe(n,a){if(1&n&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e.SDv(3,9),e.qZA(),e.TgZ(4,"div",10),e.SDv(5,11),e.qZA(),e.TgZ(6,"div",12),e.SDv(7,13),e.qZA()(),e.TgZ(8,"div",14),e.YNc(9,Se,9,9,"div",15),e.ALo(10,"async"),e.qZA()()),2&n){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",e.lcZ(10,1,t.systems))}}function ve(n,a){1&n&&(e.TgZ(0,"div",19)(1,"p"),e.SDv(2,20),e.qZA()())}let be=(()=>{class n{constructor(t){this._state=t,this.filter$=new C.X(""),this.systems=(0,N.aj)([this.filter$,this._state.systems]).pipe((0,u.U)(i=>{const[o,s]=i,l=o.toLowerCase();return o?s.filter(d=>d.name.toLowerCase().includes(l)):s}))}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(E))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["zone-systems"]],decls:8,vars:5,consts:function(){let t,i,o,s;return t=$localize`:@@systemTableName␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,i=$localize`:@@systemTablePanelCount␟6c24d3e08bc16576fbd5580dc255a31c4b08c366␟8919524640139321287:No. Modules`,o=$localize`:@@systemTableCreated␟1b051734b0ee9021991c91b3ed4e81c244322462␟4207916966377787111:Created`,s=$localize`:@@systemTableEmpty␟443361e57db2ac76049b227574b4a6b8a67ae879␟6249884397292386469:No systems found`,[[1,"flex"],["appearance","outline",1,"flex-1"],["matPrefix","","className","backoffice-magnifying-glass",1,"text-lg"],["matInput","","name","search-filter","placeholder","Filter Systems",3,"ngModel","ngModelChange"],["role","table",4,"ngIf","ngIfElse"],["empty_state",""],["role","table"],["table-head",""],[1,"flex-1","p-2"],t,[1,"w-28","p-2"],i,[1,"w-32","p-2"],o,["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2","underline"],["matTooltipPosition","right",3,"routerLink","matTooltip"],[1,"flex","flex-col","items-center","p-8"],s]},template:function(i,o){if(1&i&&(e.TgZ(0,"div",0)(1,"mat-form-field",1),e._UZ(2,"app-icon",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(l){return o.filter$.next(l)}),e.qZA()()(),e.YNc(4,Pe,11,3,"div",4),e.ALo(5,"async"),e.YNc(6,ve,3,0,"ng-template",null,5,e.W1O)),2&i){const s=e.MAs(7);let l;e.xp6(3),e.Q6J("ngModel",""),e.xp6(1),e.Q6J("ngIf",null==(l=e.lcZ(5,3,o.systems))?null:l.length)("ngIfElse",s)}},dependencies:[r.sg,r.O5,p.Fj,p.JJ,p.On,f.rH,P.o,T.KE,T.qo,L.Nt,$.gM,r.Ov,I.R],styles:["[_nghost-%COMP%]{width:100%;height:100%}\n\n/*# sourceMappingURL=zone-systems.component.ts-angular-inline--57.css.map*/"]})}return n})();const he=function(n){return["/triggers",n]};function Me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",11)(2,"a",19),e._uU(3),e.qZA()(),e.TgZ(4,"div",20),e._uU(5),e.ALo(6,"dateFrom"),e.qZA(),e.TgZ(7,"div",21)(8,"button",22),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.deleteTrigger(s))}),e._UZ(9,"app-icon",23),e.qZA()()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(5,he,t.id)),e.xp6(1),e.Oqu(t.name),e.xp6(2),e.hij(" ",e.lcZ(6,3,1e3*+t.created_at)," ")}}function xe(n,a){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10)(2,"div",11),e.SDv(3,12),e.qZA(),e.TgZ(4,"div",13),e.SDv(5,14),e.qZA(),e._UZ(6,"div",15),e.qZA(),e.TgZ(7,"div",16),e.YNc(8,Me,10,7,"div",17),e.ALo(9,"async"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("ngForOf",e.lcZ(9,1,t.triggers))}}function ye(n,a){if(1&n&&(e.ynx(0),e.YNc(1,xe,10,3,"div",8),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(12);let o;e.xp6(1),e.Q6J("ngIf",null==(o=e.lcZ(2,2,t.triggers))?null:o.length)("ngIfElse",i)}}function Ie(n,a){1&n&&(e.TgZ(0,"div",24),e._UZ(1,"mat-spinner",25),e.TgZ(2,"p"),e._uU(3,"Loading triggers..."),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("diameter",48))}function Le(n,a){1&n&&(e.TgZ(0,"div",24)(1,"p"),e._uU(2,"No triggers for zone"),e.qZA()())}let $e=(()=>{class n{get item(){return this._state.active_item}constructor(t){this._state=t,this.filter$=new C.X(""),this.triggers=(0,N.aj)([this.filter$,this._state.triggers]).pipe((0,u.U)(i=>{const[o,s]=i,l=o.toLowerCase();return o?s.filter(d=>d.name.toLowerCase().includes(l)):s})),this.loading=this._state.loading,this.selectTrigger=()=>this._state.selectTrigger(),this.deleteTrigger=i=>this._state.removeTrigger(i)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(E))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["zone-triggers"]],decls:13,vars:5,consts:function(){let t,i;return t=$localize`:@@nameLabel␟851d1ba79a56f7143fc04dbfed912dd2e40af5a9␟5635653058319830659: Name `,i=$localize`:@@descriptionLabel␟f1b6540744a5b8ea6596fb6aad63773e1e57474c␟5939856475984736508: Added `,[[1,"flex","items-center","mb-4","space-x-2"],["btn","",2,"min-width","8rem",3,"click"],["appearance","outline",1,"h-12","flex-1"],["matPrefix","","className","backoffice-magnifying-glass text-xl mr-2"],["matInput","","placeholder","Filter triggers...",1,"rounded-none",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["role","table","class","overflow-x-auto",4,"ngIf","ngIfElse"],["role","table",1,"overflow-x-auto"],["table-head",""],["flex","",1,"flex-1","p-2"],t,[1,"w-28","p-2"],i,[1,"w-32","p-2"],["table-body","",1,"overflow-y-auto"],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"truncate",3,"routerLink"],["desc","",1,"w-28","p-2"],[1,"w-32","p-2","items-center","justify-center"],["btn","","icon","",3,"click"],["className","backoffice-trash"],[1,"flex","flex-col","items-center","p-8","mx-auto"],[1,"mb-4",3,"diameter"]]},template:function(i,o){if(1&i&&(e.TgZ(0,"section",0)(1,"button",1),e.NdJ("click",function(){return o.selectTrigger()}),e._uU(2," Add Trigger "),e.qZA(),e.TgZ(3,"mat-form-field",2),e._UZ(4,"app-icon",3),e.TgZ(5,"input",4),e.NdJ("ngModelChange",function(l){return o.filter$.next(l)}),e.qZA()()(),e.TgZ(6,"section"),e.YNc(7,ye,3,4,"ng-container",5),e.ALo(8,"async"),e.qZA(),e.YNc(9,Ie,4,1,"ng-template",null,6,e.W1O),e.YNc(11,Le,3,0,"ng-template",null,7,e.W1O)),2&i){const s=e.MAs(10);e.xp6(5),e.Q6J("ngModel",""),e.xp6(2),e.Q6J("ngIf",!e.lcZ(8,3,o.loading))("ngIfElse",s)}},dependencies:[r.sg,r.O5,p.Fj,p.JJ,p.On,f.rH,P.o,T.KE,T.qo,L.Nt,U.Ou,r.Ov,I.R],styles:["[_nghost-%COMP%]{width:100%;height:100%}\n\n/*# sourceMappingURL=zone-triggers.component.ts-angular-inline--58.css.map*/"]})}return n})();const Fe=function(n){return["/zones",n]};function Re(n,a){if(1&n&&(e.TgZ(0,"div",14)(1,"div",15)(2,"a",16),e._uU(3),e.TgZ(4,"span",17),e._uU(5),e.qZA(),e._uU(6,") "),e.qZA()(),e.TgZ(7,"div",10),e._uU(8),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(5,Fe,t.id))("matTooltip",t.id),e.xp6(1),e.hij(" ",t.name," ("),e.xp6(2),e.Oqu(t.id),e.xp6(3),e.Oqu(t.description)}}function ze(n,a){if(1&n&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e.SDv(3,9),e.qZA(),e.TgZ(4,"div",10),e.SDv(5,11),e.qZA()(),e.TgZ(6,"div",12),e.YNc(7,Re,9,7,"div",13),e.ALo(8,"async"),e.qZA()()),2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",e.lcZ(8,1,t.children))}}function Ue(n,a){1&n&&(e.TgZ(0,"div",18),e.SDv(1,19),e.qZA())}let Be=(()=>{class n{get item(){return this._state.active_item}constructor(t){this._state=t,this.filter$=new C.X(""),this.children=(0,N.aj)([this.filter$,this._state.children]).pipe((0,u.U)(i=>{const[o,s]=i,l=o.toLowerCase();return o?s.filter(d=>d.name.toLowerCase().includes(l)):s})),this.loading=this._state.loading}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(E))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["zone-children"]],decls:8,vars:5,consts:function(){let t,i,o,s;return t=$localize`:@@zoneChildrenTableFilter␟48b4cc111b7400e0a4602f4805cab66025dbb55d␟8361856721210143570:Filter Zones`,i=$localize`:@@zoneChildrenTableName␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,o=$localize`:@@descriptionLabel␟eec715de352a6b114713b30b640d319fa78207a0␟4902817035128594900:Description`,s=$localize`:@@zoneChildrenTableEmpty␟1b895a59396d575379143c2deec22ed0c1d65834␟1207585495728440175: No child zones found `,[[1,"flex","items-center"],["appearance","outline",1,"flex-1"],["matPrefix","","className","backoffice-magnifying-glass",1,"text-lg"],["matInput","","name","search-filter","placeholder",t,3,"ngModel","ngModelChange"],["role","table",4,"ngIf","ngIfElse"],["empty_state",""],["role","table"],["table-head",""],[1,"flex-1","p-2"],i,[1,"w-3/5","p-2"],o,["table-body",""],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2","underline"],["routerLinkActive","router-link-active",3,"routerLink","matTooltip"],[1,"id"],[1,"flex","flex-col","items-center","p-8"],s]},template:function(i,o){if(1&i&&(e.TgZ(0,"div",0)(1,"mat-form-field",1),e._UZ(2,"app-icon",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(l){return o.filter$.next(l)}),e.qZA()()(),e.YNc(4,ze,9,3,"div",4),e.ALo(5,"async"),e.YNc(6,Ue,2,0,"ng-template",null,5,e.W1O)),2&i){const s=e.MAs(7);let l;e.xp6(3),e.Q6J("ngModel",""),e.xp6(1),e.Q6J("ngIf",(null==(l=e.lcZ(5,3,o.children))?null:l.length)>0)("ngIfElse",s)}},dependencies:[r.sg,r.O5,p.Fj,p.JJ,p.On,f.rH,f.Od,P.o,T.KE,T.qo,L.Nt,$.gM,r.Ov],styles:["[_nghost-%COMP%]{width:100%;height:100%}\n\n/*# sourceMappingURL=zone-children.component.ts-angular-inline--59.css.map*/"]})}return n})();var Je=_(1557);function Ge(n,a){if(1&n&&e._UZ(0,"metadata-display",1),2&n){const t=e.oxw();e.Q6J("item",t.item)}}let Ke=(()=>{class n{get item(){return this._service.active_item}constructor(t){this._service=t}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(y.L))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["zone-metadata"]],decls:1,vars:1,consts:[[3,"item",4,"ngIf"],[3,"item"]],template:function(i,o){1&i&&e.YNc(0,Ge,1,1,"metadata-display",0),2&i&&e.Q6J("ngIf",o.item)},dependencies:[r.O5,Je.J]})}return n})();var we=_(6497),Xe=_(8791),Ye=_(2941),Qe=_(4424),qe=_(5375),De=_(2637),He=_(5694),je=_(8771),ke=_(6529),Ve=_(4331),We=_(1387);function et(n,a){if(1&n){const t=e.EpF();e.ynx(0),e._UZ(1,"item-details",17)(2,"item-tablist",18),e.TgZ(3,"div",19,20),e.NdJ("scroll",function(){e.CHM(t);const o=e.MAs(4),s=e.oxw();return e.KtG(s.scroll=o.scrollTop)}),e._UZ(5,"router-outlet"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("can_edit",!0)("item",t.item),e.xp6(1),e.Q6J("base",t.name)("tabs",t.tab_list)("scrolled",t.scroll>0)}}function tt(n,a){1&n&&e._UZ(0,"app-debug-output",21)}function nt(n,a){1&n&&e._UZ(0,"app-debug-output",22)}const ot=[{path:":id",component:(()=>{class n extends Qe.c{get item(){return this._service.active_item}get extensions(){return(0,Ye.fq)(this._service.active_item,this.name)}get debug_position(){return this._debug.position}updateTabList(t){this.tab_list=[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"systems",name:"Systems",count:t.systems??"?",icon:{class:"backoffice-documents"}},{id:"triggers",name:"Triggers",count:t.triggers??"?",icon:{class:"backoffice-stopwatch"}},{id:"metadata",name:"Metadata",count:t.metadata??"?",icon:{class:"backoffice-gist"}},{id:"children",name:"Children",count:t.children??"?",icon:{class:"backoffice-flow-tree"}},{id:"history",name:"Settings History",icon:{class:"backoffice-clock"}}].concat(this.extensions)}constructor(t,i,o,s,l){super(),this._service=t,this._item=i,this._route=o,this._router=s,this._debug=l,this.name="zones",this.open_menu=!1,this.tab_list=[],this.newItem=()=>this._item.create(),this.bulkAdd=()=>this._item.bulkAdd()}ngOnInit(){this.subscription("item-change",this._item.active_item$.subscribe(()=>this.updateTabList({}))),this.subscription("item",this._service.counts.subscribe(t=>this.updateTabList(t)))}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(E),e.Y36(y.L),e.Y36(f.gz),e.Y36(f.F0),e.Y36(qe.i))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["new-zones-view"]],features:[e.qOj],decls:18,vars:7,consts:[[1,"absolute","inset-0","flex","items-center","divide-y","sm:divide-y-0","sm:divide-x","divide-base-200","bg-base-100"],[1,"sm:h-full",3,"open","openChange"],[1,"flex","flex-col","h-full","flex-1","overflow-hidden","w-px"],[1,"flex","flex-1","h-px"],["title","Zones",1,"hidden","sm:block",3,"route"],[1,"flex-1","w-1/2","h-full","relative","flex","flex-col","z-0"],["title","Zones",1,"z-20","sm:hidden",3,"route"],["btn","","icon","",1,"sm:hidden","mr-2",3,"click"],["className","backoffice-menu"],[1,"flex","flex-col","flex-1","h-1/2"],[4,"ngIf"],["matTooltip","New zone","matTooltipPosition","right","matRipple","",1,"absolute","bottom-2","left-2","sm:-left-9","w-12","h-12","flex","items-center","justify-center","bg-secondary","rounded-lg","shadow","z-30","text-secondary-content",3,"click"],[1,"text-3xl",3,"className"],["matTooltip","Bulk add zones","matTooltipPosition","right","matRipple","",1,"absolute","bottom-16","left-2","sm:-left-8","w-10","h-10","flex","items-center","justify-center","bg-secondary","rounded-lg","shadow","z-30","text-secondary-content",3,"click"],[1,"text-2xl"],["below","",4,"ngIf"],["side","","class","h-full max-w-[30rem]",4,"ngIf"],["type","Zone",3,"can_edit","item"],[1,"z-10",3,"base","tabs","scrolled"],[1,"flex-1","h-1/2","w-full","overflow-auto","p-4","z-0","relative",3,"scroll"],["el",""],["below",""],["side","",1,"h-full","max-w-[30rem]"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"sidebar-menu",1),e.NdJ("openChange",function(l){return o.open_menu=l}),e.qZA(),e.TgZ(2,"div",2)(3,"div",3),e._UZ(4,"item-sidebar",4),e.TgZ(5,"div",5)(6,"item-selection",6)(7,"button",7),e.NdJ("click",function(){return o.open_menu=!0}),e._UZ(8,"app-icon",8),e.qZA()(),e.TgZ(9,"div",9),e.YNc(10,et,6,5,"ng-container",10),e.qZA(),e.TgZ(11,"button",11),e.NdJ("click",function(){return o.newItem()}),e._UZ(12,"app-icon",12),e.qZA(),e.TgZ(13,"button",13),e.NdJ("click",function(){return o.bulkAdd()}),e.TgZ(14,"app-icon",14),e._uU(15,"playlist_add"),e.qZA()()()(),e.YNc(16,tt,1,0,"app-debug-output",15),e.qZA(),e.YNc(17,nt,1,0,"app-debug-output",16),e.qZA()),2&i&&(e.xp6(1),e.Q6J("open",o.open_menu),e.xp6(3),e.Q6J("route",o.name),e.xp6(2),e.Q6J("route",o.name),e.xp6(4),e.Q6J("ngIf",null==o.item?null:o.item.id),e.xp6(2),e.Q6J("className","backoffice-plus"),e.xp6(4),e.Q6J("ngIf","below"===o.debug_position),e.xp6(1),e.Q6J("ngIf","side"===o.debug_position))},dependencies:[r.O5,f.lC,P.o,De.$,He.z,je.V,ke.K,Ve.r,We.l,$.gM,B.wG]})}return n})(),children:[{path:"about",component:Ne},{path:"systems",component:be},{path:"triggers",component:$e},{path:"children",component:Be},{path:"metadata",component:Ke},{path:"extend/:id",component:we.z},{path:"history",component:Xe.D},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var it=_(5858);let st=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[r.ez,p.u5,p.UX,f.Bz.forChild(ot),it.X]})}return n})()}}]);
//# sourceMappingURL=201.bf4cec0fd175f55b.js.map