"use strict";(self.webpackChunkbackoffice=self.webpackChunkbackoffice||[]).push([[293],{5293:(se,T,n)=>{n.r(T),n.d(T,{AppRepositoriesModule:()=>ne});var c=n(8267),M=n(9902),b=n(525),d=n(8806),N=n(3083),m=n(1292),a=n(8999),F=n(1119),Z=n(8252),E=n(9026),R=n(592),P=n(8377),L=n(8027),y=n(2378),$=n(3829),B=n(5021),e=n(2222),x=n(6298);let p=(()=>{class o{constructor(t,i){this._state=t,this._dialog=i,this._loading=new F.X(!1),this.loading=this._loading.asObservable(),this.item=this._state.item,this.driver_list=this._state.all_item.pipe((0,E.w)(s=>s instanceof a.aPq&&s.repo_type!==a.VYb.Interface?(this._loading.next(!0),(0,a.qTj)(s.id,{limit:2e3})):(0,Z.of)(null)),(0,R.K)(s=>[]),(0,P.U)(s=>(this._loading.next(!1),s))),this.commit=this._state.all_item.pipe((0,L.h)(s=>s instanceof a.aPq),(0,E.w)(s=>(0,a.rmk)(s.id,{count:1})),(0,R.K)(s=>[]),(0,P.U)(s=>{var _;return(null===(_=s[0])||void 0===_?void 0:_.commit)||"HEAD"}))}get active_item(){return this._state.active_item}pullLatestCommit(){return(0,d.mG)(this,void 0,void 0,function*(){const t=yield(0,a.cYE)(this.active_item.id).toPromise().catch(i=>{(0,$.cB)(`Error pulling latest commit. Error: ${JSON.stringify(i.response||i.message||"Pull timed out")}`)});!t||this._state.replaceItem(new a.aPq(Object.assign(Object.assign({},this.active_item),{commit_hash:t.commit_hash})))})}newDriver(t){return(0,d.mG)(this,void 0,void 0,function*(){this._dialog.open(B.K,{height:"auto",width:"auto",maxHeight:"calc(100vh - 2em)",maxWidth:"calc(100vw - 2em)",data:{item:new a.CbG({name:"",module_name:"",repository_id:this.active_item.id,file_name:t}),name:"Driver",save:i=>(0,a.X2O)(i)}})})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(y.L),e.LFG(x.uw))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=n(2016),U=n(2874);let Y=(()=>{class o extends m.K{constructor(t){super(),this._service=t,this.name="repositories",this.tab_list=[]}get extensions(){return(0,N.fq)(this._service.active_item,this.name)}updateTabList(){this.tab_list=(this.driver_count<0||!this.driver_count?[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}}]:[{id:"about",name:"About",icon:{class:"backoffice-info-with-circle"}},{id:"drivers",name:"Drivers",count:this.driver_count,icon:{class:"backoffice-documents"}}]).concat(this.extensions)}ngOnInit(){return(0,d.mG)(this,void 0,void 0,function*(){this.subscription("item",this._service.driver_list.subscribe(t=>{this.driver_count=t?t.length:-1,this.updateTabList()})),this.updateTabList()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-repositories"]],features:[e.qOj],decls:3,vars:1,consts:[[1,"flex-1","flex-col","sm:flex-row","flex","h-full","w-full","relative"],["heading","Repositories","name","repositories",1,"absolute","top-0","left-0","h-12","w-full","sm:h-full","sm:static"],["name","repo","route","repositories",1,"flex-1","relative","mt-12","sm:mt-0","w-full","sm:w-1/2",3,"tabs"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"sidebar",1),e._UZ(2,"item-display",2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("tabs",i.tab_list))},directives:[D.k,U.s],styles:["sidebar[_ngcontent-%COMP%]{transition:height .3s}@media screen and (min-width: 640px){sidebar[_ngcontent-%COMP%]{width:20em!important}}\n/*# sourceMappingURL=repositories.component.ts-angular-inline--33.css.map*/"]}),o})();var O=n(8662),A=n(7752),f=n(9372),G=n(3558),X=n(6835);function K(o,r){1&o&&(e.ynx(0),e.SDv(1,24),e.BQk())}function q(o,r){if(1&o&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" (",t.commit,") ")}}function z(o,r){1&o&&e._UZ(0,"mat-spinner",26)}let w=(()=>{class o extends m.K{constructor(t){super(),this._service=t,this.commit=""}get item(){return this._service.active_item}get local_url(){return this.item.type===a.VYb.Interface?`${location.origin}/${this.item.folder_name}/`:`${location.hash}`}get repo_uri(){var t;return null===(t=this.item)||void 0===t?void 0:t.uri.replace(/\/[a-zA-Z0-9\-\.:]*@/,"/...@")}ngOnInit(){this.commit="",this.subscription("commit",this._service.commit.subscribe(t=>this.commit=t))}pullLatestCommit(){return(0,d.mG)(this,void 0,void 0,function*(){this.pulling=!0,yield this._service.pullLatestCommit(),this.pulling=!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["repository-about"]],features:[e.qOj],decls:57,vars:25,consts:function(){let r,t,i,s,_,S,g,u,C,v,I,h;return r=$localize`:@@repoPullActionDetails␟705317b9b8c222fb8e2835b4ae429a4b968b16f6␟5996546099806594516: Pull the latest commit for${"\ufffd#4\ufffd\ufffd/#4\ufffd"}:LINE_BREAK: this repository `,t=$localize`:@@repoTypeLabel␟e78c0d60ac39787f62c9159646fe0b3c1ed55a1d␟2736556170366900089:Type:`,i=$localize`:␟f07f17add1b4d8fd14dedf1038249bf1fcc7595c␟2995574017154029352:{VAR_SELECT, select, interface {Interface Repository } driver {Driver Repository } , other {=Unknown=}}`,i=e.Zx4(i,{VAR_SELECT:"\ufffd0\ufffd"}),s=$localize`:@@driverListEmpty␟4c00bff7f0dcbae591d1cdd9e6040169e11900e0␟675757566509609077: ${i}:ICU: `,_=$localize`:@@repoFolderNameLabel␟28e6abdb97b12116fa31c70e842d7b4b37e08fda␟8999240573830223335:Folder name:`,S=$localize`:@@repoUriLabel␟6457460dafb273ccfbc2d68f7ec171f467c6e1c1␟1789506856666851299:Repository URI:`,g=$localize`:@@repoBranchLabel␟6ff214f90707e3964f2a08e22f6a079ec2649a5f␟733188758140846537:Branch:`,u=$localize`:@@repoCommitHashLabel␟682ca154aba791fe87aa293b29c921247e12da9c␟7502103762200984555:Commit hash:`,C=$localize`:@@descriptionLabel␟4a22c6843133f0b0d7dc0d28f864f2f90c1de7ad␟6996799422725544865:Description:`,v=$localize`:@@repoCreatedAtLabel␟a5ed099ffc9e96f6970df843289ade8a7d20ab9f␟1616250945945379783:Created:`,I=$localize`:@@repoUpdatedAtLabel␟f94240161f912dbd8758b858877cddeab80f36cb␟1116759395536210856:Updated:`,h=$localize`:@@repoPullAction␟9bcb0809ace39056b42648266b3bd89f1fca0fcb␟2795587821431625096: Pull `,[[1,"mb-4","text-center"],[1,"w-52"],r,["mat-button","",1,"w-40",3,"disabled","click"],[4,"ngIf","ngIfElse"],[1,"space-y-2"],[1,"flex","items-center","space-x-2"],t,[1,"value"],s,_,[1,"value","select-all"],["target","_blank",3,"href"],S,[1,"value","underline","select-all"],g,[1,"value","select-all","bg-gray-200","px-2","pb-1","pt-2","text-xs","rounded","mono","dark:text-black"],u,[1,"value","select-text","bg-gray-200","px-2","pb-1","pt-2","text-xs","rounded","mono","dark:text-black"],["class","select-text mono",4,"ngIf"],C,v,I,["spinner",""],h,[1,"select-text","mono"],["diameter","32"]]},template:function(t,i){if(1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-content"),e.tHW(3,2),e._UZ(4,"br"),e.N_p(),e.qZA(),e.TgZ(5,"mat-card-actions"),e.TgZ(6,"button",3),e.NdJ("click",function(){return i.pullLatestCommit()}),e.YNc(7,K,2,0,"ng-container",4),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"section",5),e.TgZ(9,"div",6),e.TgZ(10,"label"),e.SDv(11,7),e.qZA(),e.TgZ(12,"div",8),e.SDv(13,9),e.qZA(),e.qZA(),e.TgZ(14,"div",6),e.TgZ(15,"label"),e.SDv(16,10),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"a",12),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",6),e.TgZ(21,"label"),e.SDv(22,13),e.qZA(),e.TgZ(23,"div",14),e.TgZ(24,"a",12),e.ALo(25,"safe"),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",6),e.TgZ(28,"label"),e.SDv(29,15),e.qZA(),e.TgZ(30,"div",16),e._uU(31),e.qZA(),e.qZA(),e.TgZ(32,"div",6),e.TgZ(33,"label"),e.SDv(34,17),e.qZA(),e.TgZ(35,"div",18),e._uU(36),e.YNc(37,q,2,1,"span",19),e.qZA(),e.qZA(),e.TgZ(38,"div",6),e.TgZ(39,"label"),e.SDv(40,20),e.qZA(),e.TgZ(41,"div",11),e._uU(42),e.qZA(),e.qZA(),e.TgZ(43,"div",6),e.TgZ(44,"label"),e.SDv(45,21),e.qZA(),e.TgZ(46,"div",8),e._uU(47),e.ALo(48,"dateFrom"),e.qZA(),e.qZA(),e.TgZ(49,"div",6),e.TgZ(50,"label"),e.SDv(51,22),e.qZA(),e.TgZ(52,"div",8),e._uU(53),e.ALo(54,"dateFrom"),e.qZA(),e.qZA(),e.qZA(),e.YNc(55,z,1,0,"ng-template",null,23,e.W1O)),2&t){const s=e.MAs(56);e.xp6(6),e.Q6J("disabled",i.pulling),e.xp6(1),e.Q6J("ngIf",!i.pulling)("ngIfElse",s),e.xp6(6),e.pQV(i.item.type),e.QtT(13),e.xp6(4),e.ekj("underline","interface"===i.item.type)("pointer-events-none","interface"!==i.item.type),e.xp6(1),e.Q6J("href",i.local_url,e.LSH),e.xp6(1),e.Oqu(i.item.folder_name||"No folder set"),e.xp6(5),e.Q6J("href",e.xi3(25,18,i.item.uri,"url"),e.LSH),e.xp6(2),e.Oqu(i.repo_uri||"No URI set"),e.xp6(5),e.hij(" ",i.item.branch||"master"," "),e.xp6(5),e.hij(" ",i.item.commit_hash||"No Commit hash set"," "),e.xp6(1),e.Q6J("ngIf",i.commit&&i.commit!==i.item.commit_hash),e.xp6(5),e.hij(" ",i.item.description||"No description"," "),e.xp6(5),e.Oqu(e.lcZ(48,21,1e3*i.item.created_at)),e.xp6(6),e.Oqu(e.lcZ(54,23,1e3*i.item.updated_at))}},directives:[O.a8,O.dn,O.hq,A.lW,c.O5,f.$g],pipes:[G.y,X.R],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}.mono[_ngcontent-%COMP%]{font-family:var(--mono-font)}\n/*# sourceMappingURL=repository-about.component.ts-angular-inline--34.css.map*/"]}),o})();var J=n(9499),j=n(6204);function H(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",13),e._UZ(1,"div",14),e.ALo(2,"driverFormat"),e.TgZ(3,"div",15),e.TgZ(4,"button",16),e.NdJ("click",function(){const _=e.CHM(t).$implicit;return e.oxw(3).newDriver(_)}),e._UZ(5,"app-icon",17),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,1,t),e.oJD)}}function Q(o,r){if(1&o&&(e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"td",8),e.SDv(3,9),e.qZA(),e._UZ(4,"td",10),e.qZA(),e.TgZ(5,"div",11),e.YNc(6,H,6,3,"div",12),e.ALo(7,"async"),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(6),e.Q6J("ngForOf",e.lcZ(7,1,t.driver_list))}}function V(o,r){if(1&o&&(e.ynx(0),e.YNc(1,Q,8,3,"div",5),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(),i=e.MAs(4);let s;e.xp6(1),e.Q6J("ngIf",null==(s=e.lcZ(2,2,t.driver_list))?null:s.length)("ngIfElse",i)}}function W(o,r){1&o&&(e.TgZ(0,"div",18),e.TgZ(1,"p"),e.SDv(2,19),e.qZA(),e.qZA())}function k(o,r){1&o&&(e.TgZ(0,"div",18),e._UZ(1,"mat-spinner",20),e.TgZ(2,"p"),e.SDv(3,21),e.qZA(),e.qZA())}const oe=[{path:":id",component:Y,children:[{path:"about",component:w},{path:"drivers",component:(()=>{class o{constructor(t){this._service=t,this.driver_list=this._service.driver_list,this.newDriver=i=>this._service.newDriver(i)}get item(){return this._service.active_item}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["repository-drivers"]],decls:7,vars:2,consts:function(){let r,t,i,s;return r=$localize`:@@repoDriverHeader␟0fb2961dd5d0938e459c98921d1effe1d21e759b␟4782277420149557084:Available Drivers`,t=$localize`:@@driverListname␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,i=$localize`:@@driverListEmpty␟0b0bbe90203a8b9ff0681db976d02fbcd960cb85␟6121742772920538074:No drivers for repository`,s=$localize`:@@driverListLoading␟929bfd86e4829c0b7401762d92f52536a57ca6c0␟4949757592530193773:Loading driver list...`,[[1,"font-medium","text-lg","mb-2"],r,[4,"ngIf","ngIfElse"],["empty_state",""],["load_state",""],["role","table","class","overflow-x-auto",4,"ngIf","ngIfElse"],["role","table",1,"overflow-x-auto"],["table-head",""],[1,"flex-1","p-2"],t,[1,"w-12","p-2","h-10"],["body","",1,"overflow-y-auto"],["table-row","",4,"ngFor","ngForOf"],["table-row",""],[1,"flex-1","p-2",3,"innerHTML"],[1,"w-12","flex","justify-center"],["mat-icon-button","",3,"click"],["className","backoffice-plus"],[1,"flex","flex-col","p-8","items-center","justify-center"],i,["diameter","48",1,"mb-4"],s]},template:function(t,i){if(1&t&&(e.TgZ(0,"h3",0),e.SDv(1,1),e.qZA(),e.YNc(2,V,3,4,"ng-container",2),e.YNc(3,W,3,0,"ng-template",null,3,e.W1O),e.YNc(5,k,4,0,"ng-template",null,4,e.W1O)),2&t){const s=e.MAs(6);e.xp6(2),e.Q6J("ngIf",!i.loading)("ngIfElse",s)}},directives:[c.O5,c.sg,A.lW,J.o,f.$g],pipes:[c.Ov,j.X],styles:["[_nghost-%COMP%]{padding:1rem;height:100%;width:100%}\n/*# sourceMappingURL=repository-drivers.component.ts-angular-inline--35.css.map*/"]}),o})()},{path:"extend/:id",component:n(5605).z},{path:"**",redirectTo:"about"}]},{path:"**",redirectTo:"-"}];var ie=n(1226);let ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,M.u5,b.Bz.forChild(oe),ie.X]]}),o})()}}]);
//# sourceMappingURL=293.bcd0c246ebafc586.js.map