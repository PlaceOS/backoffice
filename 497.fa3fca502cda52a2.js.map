{"version":3,"file":"497.fa3fca502cda52a2.js","mappings":"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","names":["i0","UserAboutComponent","constructor","_service","item","this","active_item","selectors","$localize","UserHistoryComponent","BaseClass","super","ngOnInit","subscription","subscribe","loadUserLogs","offset","UserMetadataComponent","ROUTES","path","component","UsersComponent","create","bulkAdd","extensions","extensionsForItem","name","updateTabList","details","tab_list","id","icon","class","count","metadata","concat","ctx","children","ExtensionOutletComponent","redirectTo","AppUsersModule","CommonModule","FormsModule","ReactiveFormsModule","RouterModule","SharedContentModule"],"sourceRoot":"webpack:///","sources":["./apps/backoffice/src/app/users/user-about.component.ts","./apps/backoffice/src/app/users/user-history.component.ts","./apps/backoffice/src/app/users/user-metadata.component.ts","./apps/backoffice/src/app/users/users.component.ts","./apps/backoffice/src/app/users/users.routes.ts","./apps/backoffice/src/app/users/users.module.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { PlaceUser } from '@placeos/ts-client';\n\nimport { ActiveItemService } from 'apps/backoffice/src/app/common/item.service';\n\n@Component({\n    selector: 'user-about',\n    template: `\n        <section class=\"mb-4 space-y-2\">\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.created_at\">\n                <label i18n=\"@@userCreatedAtLabel\">Email:</label>\n                <div class=\"value\">\n                    <a [href]=\"'mailto:' + item?.email\">{{ item?.email }}</a>\n                </div>\n            </div>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.created_at\">\n                <label i18n=\"@@userCreatedAtLabel\">Created:</label>\n                <div class=\"value\">\n                    {{ item?.created_at * 1000 | dateFrom }}\n                </div>\n            </div>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.updated_at\">\n                <label i18n=\"@userUpdatedAtLabel\">Updated:</label>\n                <div class=\"value\">\n                    {{ item?.updated_at * 1000 | dateFrom }}\n                </div>\n            </div>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.authority_id\">\n                <label i18n=\"@userUpdatedAtLabel\">Authority ID:</label>\n                <div class=\"value mono\">\n                    {{ item?.authority_id }}\n                </div>\n            </div>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"item?.groups\">\n                <label class=\"my-1\" for=\"groups\" i18n=\"@@userGroupsLabel\"\n                    >User Groups:</label\n                >\n                <div\n                    class=\"value\"\n                    *ngIf=\"item.groups?.length; else empty_group_state\"\n                >\n                    <mat-chip-list name=\"groups\">\n                        <mat-chip *ngFor=\"let group of item.groups\">{{\n                            group\n                        }}</mat-chip>\n                    </mat-chip-list>\n                </div>\n            </div>\n        </section>\n        <section>\n            <div role=\"table\">\n                <div table-head>\n                    <div class=\"w-40 p-2\" i18n=\"@@techSupportRole\">\n                        User Role\n                    </div>\n                    <div class=\"flex-1 p-2\"></div>\n                </div>\n                <div table-body>\n                    <div table-row>\n                        <div class=\"w-40 p-2\" i18n=\"@@techSupportRole\">\n                            Tech Support\n                        </div>\n                        <div class=\"flex-1 p-2\">\n                            {{ item?.support === true }}\n                        </div>\n                    </div>\n                    <div table-row>\n                        <div class=\"w-40 p-2\" i18n=\"@@systemAdminRole\">\n                            System Admin\n                        </div>\n                        <div class=\"flex-1 p-2\">\n                            {{ item?.sys_admin === true }}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <ng-template #empty_group_state>\n            <div class=\"value\">No Access Groups</div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                width: 100%;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class UserAboutComponent {\n    public get item(): PlaceUser {\n        return this._service.active_item as any;\n    }\n\n    constructor(private _service: ActiveItemService) {}\n}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { PlaceUser } from '@placeos/ts-client';\n\nimport { BaseClass } from 'apps/backoffice/src/app/common/base.class';\nimport { ActiveItemService } from 'apps/backoffice/src/app/common/item.service';\n\n@Component({\n    selector: 'user-history',\n    template: `\n        <div role=\"table\" *ngIf=\"logs?.length; else empty_state\">\n            <div table-head>\n                <div class=\"w-1/3\" i18n=\"@@logEventStart\">Session Start</div>\n                <div class=\"w-1/3\" i18n=\"@@logEventEnd\">Ended</div>\n                <div class=\"w-1/3\" i18n=\"@@logEventAction\">\n                    Systems Accessed\n                </div>\n            </div>\n            <div table-body>\n                <div table-row *ngFor=\"let item of logs\">\n                    <div class=\"w-1/3\">\n                        {{ item.start | date: 'MMM d, y, h:mm a' }}\n                    </div>\n                    <div class=\"w-1/3\">\n                        {{ item.end | date: 'MMM d, y, h:mm a' }}\n                    </div>\n                    <div class=\"w-1/3\">\n                        <div>{{ item.systems.length }}</div>\n                        <div>View</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <ng-template #empty_state>\n            <div class=\"p-8 text-center\" i18n=\"@@logTableEmpty\">\n                No logs found\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class UserHistoryComponent extends BaseClass {\n    public logs: { start: number; end: number; systems: string[] }[] = [];\n\n    public get item(): PlaceUser {\n        return this._service.active_item as any;\n    }\n\n    constructor(private _service: ActiveItemService) {\n        super();\n    }\n    public ngOnInit(): void {\n        this.subscription(\n            'item',\n            this._service.item.subscribe((item) => {\n                this.loadUserLogs();\n            })\n        );\n    }\n\n    public loadUserLogs(offset: number = 0) {}\n}\n","import { Component } from '@angular/core';\nimport { PlaceUser } from '@placeos/ts-client';\nimport { ActiveItemService } from 'apps/backoffice/src/app/common/item.service';\n\n@Component({\n    selector: 'user-metadata',\n    template: `\n        <metadata-display  *ngIf=\"item\" [item]=\"item\"></metadata-display>\n    `,\n    styles: [``],\n})\nexport class UserMetadataComponent {\n    public get item(): PlaceUser {\n        return this._service.active_item as any;\n    }\n\n    constructor(private _service: ActiveItemService) {}\n}\n","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { extensionsForItem } from '../common/api';\nimport { BaseClass } from '../common/base.class';\nimport { ActiveItemService } from '../common/item.service';\n\n@Component({\n    selector: 'new-users-view',\n    template: `\n        <div\n            class=\"absolute inset-0 flex items-center divide-y sm:divide-y-0 sm:divide-x divide-gray-300 dark:divide-neutral-600 bg-white dark:bg-neutral-700\"\n        >\n            <sidebar-menu [(open)]=\"open_menu\" class=\"sm:h-full\"></sidebar-menu>\n            <item-sidebar class=\"hidden sm:block\" [route]=\"name\" title=\"Users\"></item-sidebar>\n            <div class=\"flex-1 w-1/2 h-full relative flex flex-col z-0\">\n                <item-selection class=\"z-20 sm:hidden\" [route]=\"name\" title=\"Users\">\n                    <button\n                        mat-icon-button\n                        class=\"sm:hidden mr-2\"\n                        (click)=\"open_menu = true\"\n                    >\n                        <app-icon className=\"backoffice-menu\"></app-icon>\n                    </button>\n                </item-selection>\n                <div class=\"flex flex-col flex-1 h-1/2\">\n                    <ng-container *ngIf=\"item?.id\">\n                        <item-details\n                            [can_edit]=\"true\"\n                            [item]=\"item\"\n                            type=\"User\"\n                        ></item-details>\n                        <item-tablist\n                            [base]=\"name\"\n                            [tabs]=\"tab_list\"\n                            [scrolled]=\"scroll > 0\"\n                            class=\"z-10\"\n                        ></item-tablist>\n                        <div\n                            #el\n                            class=\"flex-1 h-1/2 w-full overflow-auto p-4 z-0 relative\"\n                            (scroll)=\"scroll = el.scrollTop\"\n                        >\n                            <router-outlet></router-outlet>\n                        </div>\n                    </ng-container>\n                </div>\n                <button\n                    class=\"absolute bottom-2 left-2 sm:-left-9 w-12 h-12 flex items-center justify-center bg-primary dark:bg-pink rounded-lg shadow z-30 text-white\"\n                    matTooltip=\"New user\"\n                    matTooltipPosition=\"right\"\n                    matRipple\n                    (click)=\"newItem()\"\n                >\n                    <app-icon\n                        [className]=\"'backoffice-plus'\"\n                        class=\"text-3xl\"\n                    ></app-icon>\n                </button>\n                <button\n                    class=\"absolute bottom-16 left-2 sm:-left-8 w-10 h-10 flex items-center justify-center bg-primary dark:bg-pink rounded-lg shadow z-30 text-white\"\n                    matTooltip=\"Bulk add users\"\n                    matTooltipPosition=\"right\"\n                    matRipple\n                    (click)=\"bulkAdd()\"\n                >\n                    <app-icon class=\"text-2xl\">playlist_add</app-icon>\n                </button>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class UsersComponent extends BaseClass {\n    public readonly name = 'users';\n    public open_menu = false;\n    public tab_list = [];\n\n    public readonly newItem = () => this._service.create();\n    public readonly bulkAdd = () => this._service.bulkAdd();\n\n    public get item() {\n        return this._service.active_item;\n    }\n\n    public get extensions() {\n        return extensionsForItem(this._service.active_item, this.name);\n    }\n\n    public updateTabList(details?: Record<string, number>) {\n        this.tab_list = [\n            {\n                id: 'about',\n                name: 'About',\n                icon: { class: 'backoffice-info-with-circle' },\n            },\n            {\n                id: 'metadata',\n                name: 'Metadata',\n                count: details?.metadata,\n                icon: { class: 'backoffice-gist' },\n            },\n            {\n                id: 'history',\n                name: 'History',\n                icon: { class: 'backoffice-list' },\n            },\n        ].concat(this.extensions);\n    }\n\n    constructor(protected _service: ActiveItemService) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'item',\n            this._service.item.subscribe(() => this.updateTabList())\n        );\n        this.updateTabList();\n    }\n}\n","import { Routes } from '@angular/router';\n\nimport { UserAboutComponent } from './user-about.component';\nimport { UserHistoryComponent } from './user-history.component';\nimport { ExtensionOutletComponent } from '../ui/extension-outlet.component';\nimport { UserMetadataComponent } from './user-metadata.component';\nimport { UsersComponent } from './users.component';\n\nexport const ROUTES: Routes = [\n    {\n        path: ':id',\n        component: UsersComponent,\n        children: [\n            { path: 'about', component: UserAboutComponent },\n            { path: 'metadata', component: UserMetadataComponent },\n            { path: 'history', component: UserHistoryComponent },\n            { path: 'extend/:id', component: ExtensionOutletComponent },\n            { path: '**', redirectTo: 'about' },\n        ],\n    },\n    { path: '**', redirectTo: '-' },\n];\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { ROUTES } from './users.routes';\n\nimport { UserAboutComponent } from './user-about.component';\nimport { UserHistoryComponent } from './user-history.component';\nimport { SharedContentModule } from 'apps/backoffice/src/app/ui/ui.module';\nimport { UserMetadataComponent } from './user-metadata.component';\nimport { UsersComponent } from './users.component';\n\n@NgModule({\n    declarations: [\n        UserAboutComponent,\n        UserHistoryComponent,\n        UserMetadataComponent,\n        UsersComponent\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        RouterModule.forChild(ROUTES),\n        SharedContentModule,\n    ],\n})\nexport class AppUsersModule {}\n"],"x_google_ignoreList":[]}